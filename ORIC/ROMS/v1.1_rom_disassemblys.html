<!DOCTYPE html><html>
<head>
<title></title>
<style type="text/css">
<!--
.xflip {
    -moz-transform: scaleX(-1);
    -webkit-transform: scaleX(-1);
    -o-transform: scaleX(-1);
    transform: scaleX(-1);
    filter: fliph;
}
.yflip {
    -moz-transform: scaleY(-1);
    -webkit-transform: scaleY(-1);
    -o-transform: scaleY(-1);
    transform: scaleY(-1);
    filter: flipv;
}
.xyflip {
    -moz-transform: scaleX(-1) scaleY(-1);
    -webkit-transform: scaleX(-1) scaleY(-1);
    -o-transform: scaleX(-1) scaleY(-1);
    transform: scaleX(-1) scaleY(-1);
    filter: fliph + flipv;
}
-->
</style>
</head>
<body>
<a name=1></a><b>The&#160;ROM&#160;Disassembly&#160;</b><br/>
&#160;<br/>&#160;<br/>The&#160;&#160;Oric&#160;&#160;contains&#160;&#160;a&#160;&#160;ROM&#160;&#160;(Read&#160;&#160;Only&#160;&#160;Memory)&#160;&#160;which&#160;&#160;contains&#160;&#160;all&#160;&#160;the&#160;&#160;machine&#160;&#160;code&#160;&#160;programs&#160;<br/>needed&#160;to&#160;implement&#160;Basic.&#160;This&#160;large&#160;machine&#160;code&#160;program&#160;is&#160;permanent&#160;and&#160;is&#160;not&#160;erased&#160;when&#160;<br/>the&#160;&#160;power&#160;&#160;to&#160;&#160;the&#160;&#160;computer&#160;&#160;is&#160;&#160;turned&#160;&#160;off.&#160;&#160;When&#160;&#160;the&#160;&#160;Oric&#160;&#160;is&#160;&#160;powered&#160;&#160;up,&#160;&#160;this&#160;&#160;program&#160;&#160;will&#160;&#160;run&#160;<br/>automatically&#160;and&#160;it&#160;enables&#160;user&#160;programs&#160;to&#160;be&#160;typed&#160;in&#160;and&#160;run.&#160;<br/>&#160;<br/>On&#160;&#160;the&#160;&#160;Oric,&#160;&#160;the&#160;&#160;routines&#160;&#160;are&#160;&#160;divided&#160;&#160;into&#160;&#160;two&#160;&#160;main&#160;&#160;sections,&#160;&#160;those&#160;&#160;that&#160;&#160;comprise&#160;&#160;the&#160;&#160;Basic&#160;<br/>language,&#160;&#160;which&#160;&#160;lies&#160;&#160;towards&#160;&#160;the&#160;&#160;front&#160;&#160;of&#160;&#160;the&#160;&#160;ROM&#160;&#160;(between&#160;&#160;#C000&#160;&#160;and&#160;&#160;#ECC3)&#160;&#160;and&#160;&#160;those&#160;&#160;that&#160;<br/>make&#160;up&#160;the&#160;operating&#160;system&#160;(which&#160;lies&#160;between&#160;#ECC4&#160;and&#160;#FFFF).&#160;<br/>&#160;<br/>The&#160;&#160;Basic&#160;&#160;language&#160;&#160;acts&#160;&#160;like&#160;&#160;a&#160;&#160;large&#160;&#160;and&#160;&#160;powerful&#160;&#160;microprocessor.&#160;&#160;It&#160;&#160;can&#160;&#160;handle&#160;&#160;real&#160;&#160;numbers,&#160;<br/>strings&#160;&#160;and&#160;&#160;loops,&#160;&#160;perform&#160;&#160;complicated&#160;&#160;mathematical&#160;&#160;functions,&#160;&#160;draw&#160;&#160;on&#160;&#160;the&#160;&#160;screen,&#160;&#160;generate&#160;<br/>sounds&#160;and&#160;make&#160;complicated&#160;decisions.&#160;Such&#160;commands&#160;cannot&#160;be&#160;given&#160;to&#160;the&#160;6502&#160;directly,&#160;they&#160;<br/>have&#160;to&#160;be&#160;broken&#160;down&#160;into&#160;instructions&#160;which&#160;it&#160;can&#160;execute.&#160;The&#160;purpose&#160;of&#160;the&#160;machine&#160;code&#160;<br/>routines&#160;&#160;in&#160;&#160;which&#160;&#160;Basic&#160;&#160;is&#160;&#160;written&#160;&#160;is&#160;&#160;to&#160;&#160;break&#160;&#160;down&#160;&#160;the&#160;&#160;statements&#160;&#160;of&#160;&#160;a&#160;&#160;program&#160;&#160;into&#160;&#160;instructions&#160;<br/>that&#160;can&#160;be&#160;run&#160;on&#160;the&#160;6502.&#160;<br/>&#160;<br/>Real&#160;&#160;numbers&#160;&#160;and&#160;&#160;results&#160;&#160;of&#160;&#160;mathematical&#160;&#160;operations&#160;&#160;are&#160;&#160;stored&#160;&#160;in&#160;&#160;F1oating&#160;&#160;Point&#160;&#160;Accumulators&#160;<br/>(FPA)&#160;as&#160;though&#160;they&#160;were&#160;registers&#160;used&#160;by&#160;Basic.&#160;Each&#160;floating&#160;point&#160;accumulator&#160;consists&#160;of&#160;6&#160;<br/>bytes&#160;of&#160;memory,&#160;one&#160;to&#160;hold&#160;a&#160;signed&#160;exponent,&#160;four&#160;to&#160;hold&#160;the&#160;mantissa&#160;and&#160;the&#160;last&#160;to&#160;hold&#160;the&#160;<br/>sign&#160;of&#160;the&#160;mantissa&#160;(see&#160;section&#160;6.2.8).&#160;Basic&#160;has&#160;two&#160;FPAs&#160;in&#160;which&#160;mathematical&#160;operations&#160;such&#160;<br/>as&#160;add&#160;and&#160;divide&#160;are&#160;performed.&#160;The&#160;main&#160;and&#160;work&#160;FPAs&#160;each&#160;hold&#160;an&#160;operand&#160;at&#160;the&#160;start&#160;of&#160;each&#160;<br/>mathematical&#160;operation&#160;and&#160;the&#160;result&#160;is&#160;left&#160;in&#160;the&#160;main&#160;FPA.&#160;Other&#160;locations&#160;in&#160;memory&#160;are&#160;used&#160;<br/>as&#160;temporary&#160;storage&#160;for&#160;the&#160;FPAs&#160;when&#160;complicated&#160;expressions&#160;are&#160;being&#160;evaluated.&#160;<br/>&#160;<br/>The&#160;same&#160;FPAs&#160;are&#160;used&#160;when&#160;handling&#160;integers&#160;and&#160;strings&#160;but&#160;the&#160;format&#160;of&#160;data&#160;within&#160;each&#160;is&#160;<br/>different.&#160;<br/>&#160;<br/>Many&#160;of&#160;the&#160;other&#160;many&#160;memory&#160;locations&#160;used&#160;by&#160;&#160;Basic&#160;are&#160;used&#160;to&#160;store&#160;information&#160;about&#160;the&#160;<br/>program&#160;it&#160;is&#160;running&#160;and&#160;where&#160;all&#160;the&#160;current&#160;variables&#160;are.&#160;<br/>&#160;<br/>The&#160;other&#160;major&#160;part&#160;of&#160;the&#160;ROM,&#160;the&#160;operating&#160;system,&#160;consists&#160;of&#160;a&#160;series&#160;of&#160;routines&#160;which&#160;are&#160;<br/>used&#160;by&#160;<i>Basic</i>&#160;to&#160;input&#160;and&#160;output&#160;data.&#160;The&#160;operating&#160;system&#160;routines&#160;are&#160;specific&#160;to&#160;the&#160;Oric&#160;and&#160;<br/>handle&#160;&#160;such&#160;&#160;things&#160;&#160;as&#160;&#160;input&#160;&#160;from&#160;&#160;the&#160;&#160;keyboard,&#160;&#160;writing&#160;&#160;to&#160;&#160;the&#160;&#160;screen&#160;&#160;or&#160;&#160;printer&#160;&#160;and&#160;&#160;loading&#160;&#160;or&#160;<br/>saving&#160;from&#160;the&#160;cassette&#160;system.&#160;It&#160;also&#160;requires&#160;a&#160;section&#160;of&#160;memory&#160;to&#160;hold&#160;all&#160;its&#160;variables,&#160;most&#160;<br/>of&#160;which&#160;are&#160;in&#160;page&#160;2&#160;of&#160;memory.&#160;<br/>&#160;<br/>The&#160;listing&#160;below&#160;is&#160;that&#160;of&#160;the&#160;Oric&#160;Atmos&#160;ROM&#160;(V1.1)&#160;which&#160;is&#160;an&#160;updated&#160;version&#160;of&#160;that&#160;used&#160;in&#160;<br/>the&#160;&#160;Oric&#160;&#160;1&#160;&#160;(V1.0).&#160;&#160;The&#160;&#160;only&#160;&#160;differences&#160;&#160;between&#160;&#160;the&#160;&#160;two&#160;&#160;are&#160;&#160;the&#160;&#160;correcting&#160;&#160;of&#160;&#160;errors&#160;&#160;and&#160;&#160;the&#160;<br/>addition&#160;&#160;of&#160;&#160;two&#160;&#160;new&#160;&#160;keywords.&#160;&#160;For&#160;&#160;example,&#160;&#160;the&#160;&#160;original&#160;&#160;version&#160;&#160;did&#160;&#160;not&#160;&#160;allow&#160;&#160;the&#160;&#160;<b>POKE</b>ing&#160;&#160;of&#160;<br/>hexadecimal&#160;&#160;numbers&#160;&#160;into&#160;&#160;memory&#160;&#160;and&#160;&#160;that&#160;&#160;13&#160;&#160;had&#160;&#160;to&#160;&#160;be&#160;&#160;added&#160;&#160;to&#160;&#160;the&#160;&#160;argument&#160;&#160;in&#160;&#160;the&#160;&#160;<b>TAB</b>&#160;<br/>statement.&#160;&#160;The&#160;&#160;two&#160;&#160;new&#160;&#160;keywords,&#160;&#160;<b>STORE</b>&#160;&#160;and&#160;&#160;<b>RECALL</b>&#160;&#160;allow&#160;&#160;the&#160;&#160;saving&#160;&#160;and&#160;&#160;loading&#160;&#160;of&#160;&#160;arrays&#160;<br/>from&#160;cassette.&#160;Their&#160;tokens&#160;respectively&#160;replace&#160;those&#160;of&#160;<b>INVERSE</b>&#160;and&#160;<b>NORMAL</b>&#160;on&#160;the&#160;<br/>Oric&#160;1&#160;which&#160;both&#160;give&#160;'SYNTAX&#160;ERROR'.&#160;<br/>&#160;<br/>Note&#160;that&#160;standard&#160;6502&#160;assembly&#160;syntax&#160;has&#160;been&#160;used&#160;in&#160;which&#160;a&#160;'$'&#160;before&#160;a&#160;number&#160;is&#160;used&#160;to&#160;<br/>represent&#160;a&#160;hexadecimal&#160;argument&#160;and&#160;a&#160;'#'&#160;is&#160;used&#160;to&#160;represent&#160;an&#160;immediate&#160;argument.&#160;<br/>
Pa&#160;&#160;<br/>
ge&#160;1&#160;<br/>
<hr/>
<a name=2></a>C000&#160;<br/>
4C&#160;CC&#160;EC&#160;<br/>
JMP&#160;$ECCC&#160;<br/>
Jump&#160;to&#160;START&#160;BASIC&#160;<br/>
C003&#160;<br/>
4C&#160;71&#160;C4&#160;<br/>
JMP&#160;$C471&#160;<br/>
Jump&#160;to&#160;RESTART&#160;BASIC&#160;<br/>
&#160;<br/>C006&#160;<br/>
72&#160;C9&#160;91&#160;C6&#160;86&#160;E9&#160;D0&#160;E9&#160;<br/>
JUMP&#160;TABLE&#160;for&#160;each&#160;of&#160;the&#160;<br/>
C00E&#160;<br/>
15&#160;CD&#160;18&#160;CD&#160;11&#160;CA&#160;50&#160;DA&#160;<br/>
commands,&#160;in&#160;token&#160;order.&#160;The&#160;<br/>
C016&#160;<br/>
A0&#160;DA&#160;DD&#160;D9&#160;66&#160;D9&#160;84&#160;DA&#160;<br/>
table&#160;is&#160;in&#160;two&#160;halves,&#160;firstly&#160;<br/>
C01E&#160;<br/>
A0&#160;DA&#160;54&#160;C8&#160;FC&#160;C7&#160;08&#160;C8&#160;<br/>
for&#160;those&#160;commands&#160;which&#160;may&#160;<br/>
C026&#160;<br/>
97&#160;CE&#160;3B&#160;CA&#160;54&#160;CD&#160;7D&#160;D1&#160;<br/>
start&#160;a&#160;statement&#160;and&#160;secondly&#160;<br/>
C02E&#160;<br/>
CD&#160;CC&#160;88&#160;CD&#160;1B&#160;CB&#160;E4&#160;C9&#160;<br/>
for&#160;those&#160;which&#160;may&#160;not.&#160;Some&#160;<br/>
C036&#160;<br/>
BC&#160;C9&#160;6F&#160;CA&#160;51&#160;C9&#160;C7&#160;C9&#160;<br/>
tokens&#160;do&#160;not&#160;have&#160;start&#160;<br/>
C03E&#160;<br/>
11&#160;CA&#160;98&#160;CA&#160;CD&#160;EB&#160;E6&#160;EB&#160;<br/>
addresses&#160;-&#160;see&#160;Appendix&#160;A.&#160;<br/>
C046&#160;<br/>
0B&#160;EC&#160;20&#160;EC&#160;32&#160;EC&#160;B4&#160;FA&#160;<br/>
The&#160;values&#160;in&#160;the&#160;first&#160;part&#160;of&#160;<br/>
C04E&#160;<br/>
CA&#160;FA&#160;E0&#160;FA&#160;9E&#160;FA&#160;FB&#160;EA&#160;<br/>
the&#160;table&#160;are&#160;one&#160;less&#160;than&#160;the&#160;<br/>
C056&#160;<br/>
FB&#160;EA&#160;FB&#160;EA&#160;EF&#160;EA&#160;EF&#160;EA&#160;<br/>
start&#160;address&#160;of&#160;the&#160;routines.&#160;<br/>
C05E&#160;<br/>
EF&#160;EA&#160;EF&#160;EA&#160;EF&#160;EA&#160;EF&#160;EA&#160;<br/>
This&#160;is&#160;because&#160;the&#160;RTS&#160;<br/>
C066&#160;<br/>
EF&#160;EA&#160;FB&#160;EA&#160;FB&#160;EA&#160;70&#160;C9&#160;<br/>
instruction&#160;is&#160;used&#160;as&#160;an&#160;<br/>
C06E&#160;<br/>
C1&#160;CA&#160;57&#160;D9&#160;5A&#160;E8&#160;08&#160;E9&#160;<br/>
indirect&#160;jump&#160;which&#160;<br/>
C076&#160;<br/>
B9&#160;D4&#160;4E&#160;D9&#160;AA&#160;CB&#160;9F&#160;C9&#160;<br/>
automatically&#160;increments&#160;the&#160;<br/>
C07E&#160;<br/>
47&#160;C7&#160;0C&#160;C7&#160;45&#160;CD&#160;45&#160;E9&#160;<br/>
address&#160;by&#160;1.&#160;<br/>
C086&#160;<br/>
12&#160;CD&#160;ED&#160;C6&#160;21&#160;DF&#160;BD&#160;DF&#160;<br/>
C0BE&#160;<br/>
49&#160;DF&#160;21&#160;00&#160;7E&#160;D4&#160;A6&#160;D4&#160;<br/>
C096&#160;<br/>
B5&#160;D9&#160;FB&#160;02&#160;2E&#160;E2&#160;4F&#160;E3&#160;<br/>
C09E&#160;<br/>
AF&#160;DC&#160;AA&#160;E2&#160;8B&#160;E3&#160;92&#160;E3&#160;<br/>
C0A6&#160;<br/>
DB&#160;E3&#160;3F&#160;E4&#160;38&#160;D9&#160;83&#160;D9&#160;<br/>
C0AE&#160;<br/>
D4&#160;DD&#160;A6&#160;D8&#160;93&#160;D5&#160;D7&#160;D8&#160;<br/>
C0B6&#160;<br/>
B5&#160;D8&#160;16&#160;D8&#160;77&#160;DE&#160;0F&#160;DF&#160;<br/>
C0BE&#160;<br/>
0B&#160;DF&#160;DA&#160;DA&#160;3F&#160;DA&#160;45&#160;EC&#160;<br/>
C0C6&#160;<br/>
2A&#160;D8&#160;56&#160;D8&#160;61&#160;D8&#160;79&#160;24&#160;<br/>
C0CE&#160;<br/>
DB&#160;79&#160;0D&#160;DB&#160;7B&#160;EF&#160;DC&#160;7B&#160;<br/>
C0D6&#160;<br/>
E6&#160;DD&#160;7F&#160;37&#160;E2&#160;50&#160;E5&#160;D0&#160;<br/>
C0DE&#160;<br/>
46&#160;E2&#160;D0&#160;7D&#160;70&#160;E2&#160;5A&#160;3B&#160;<br/>
C0E6&#160;<br/>
D0&#160;64&#160;12&#160;D1&#160;45&#160;4E&#160;C4&#160;45&#160;<br/>
&#160;&#160;&#160;&#160;ENDE&#160;<br/>
<b>BASIC&#160;KEYWORDS</b>&#160;<br/>
C0EE&#160;<br/>
44&#160;49&#160;D4&#160;53&#160;54&#160;4F&#160;52&#160;C5&#160;<br/>
DITSTORE&#160;<br/>
C0F6&#160;<br/>
52&#160;45&#160;43&#160;41&#160;4C&#160;CC&#160;54&#160;52&#160;<br/>
RECALLTR&#160;<br/>
The&#160;last&#160;character&#160;<br/>
C0FE&#160;<br/>
4F&#160;CE&#160;54&#160;52&#160;4F&#160;46&#160;C6&#160;50&#160;<br/>
ONTROFFP&#160;<br/>
of&#160;a&#160;keyword&#160;has&#160;bit&#160;<br/>
C106&#160;<br/>
4F&#160;D0&#160;50&#160;4C&#160;4F&#160;D4&#160;50&#160;55&#160;<br/>
OPPLOTPU&#160;<br/>
7&#160;set.&#160;<br/>
C10E&#160;<br/>
4C&#160;CC&#160;4C&#160;4F&#160;52&#160;45&#160;D3&#160;44&#160;<br/>
LLLORESD&#160;<br/>
C116&#160;<br/>
4F&#160;4B&#160;C5&#160;52&#160;45&#160;50&#160;45&#160;41&#160;<br/>
OKEREPEA&#160;<br/>
C11E&#160;<br/>
D4&#160;55&#160;4E&#160;54&#160;49&#160;CC&#160;46&#160;4F&#160;<br/>
TUNTILFO&#160;<br/>
C126&#160;<br/>
D2&#160;4C&#160;4C&#160;49&#160;53&#160;D4&#160;4C&#160;50&#160;<br/>
RLLISTLP&#160;<br/>
C12E&#160;<br/>
52&#160;49&#160;4E&#160;D4&#160;4E&#160;45&#160;58&#160;D4&#160;<br/>
RINTNEXT&#160;<br/>
C136&#160;<br/>
44&#160;41&#160;54&#160;C1&#160;49&#160;4E&#160;50&#160;55&#160;<br/>
DATAINPU&#160;<br/>
C13E&#160;<br/>
D4&#160;44&#160;49&#160;CD&#160;43&#160;4C&#160;D3&#160;52&#160;<br/>
TDIMCLSR&#160;<br/>
C146&#160;<br/>
45&#160;41&#160;C4&#160;4C&#160;45&#160;D4&#160;47&#160;4F&#160;<br/>
EADLETCO&#160;<br/>
C14E&#160;<br/>
54&#160;CF&#160;52&#160;55&#160;CE&#160;49&#160;C6&#160;52&#160;<br/>
TORUNIFR&#160;<br/>
C156&#160;<br/>
45&#160;53&#160;54&#160;4F&#160;52&#160;C5&#160;47&#160;4F&#160;<br/>
ESTOREGO&#160;<br/>
C15E&#160;<br/>
53&#160;55&#160;C2&#160;52&#160;45&#160;54&#160;55&#160;52&#160;<br/>
SUBRETUR&#160;<br/>
C166&#160;<br/>
CE&#160;52&#160;45&#160;CD&#160;48&#160;49&#160;4D&#160;45&#160;<br/>
NREMHIME&#160;<br/>
C16E&#160;<br/>
CD&#160;47&#160;52&#160;41&#160;C2&#160;52&#160;45&#160;4C&#160;<br/>
MGRABREL&#160;<br/>
C176&#160;<br/>
45&#160;41&#160;53&#160;C5&#160;54&#160;45&#160;58&#160;D4&#160;<br/>
EASETEXT&#160;<br/>
C17E&#160;<br/>
48&#160;49&#160;52&#160;45&#160;D3&#160;53&#160;48&#160;4F&#160;<br/>
HIRESSHO&#160;<br/>
C186&#160;<br/>
4F&#160;D4&#160;45&#160;58&#160;50&#160;4C&#160;4F&#160;44&#160;<br/>
OTEXPLOD&#160;<br/>
C18E&#160;<br/>
C5&#160;5A&#160;41&#160;D0&#160;50&#160;49&#160;4E&#160;C7&#160;<br/>
EZAPPING&#160;<br/>
C196&#160;<br/>
53&#160;4F&#160;55&#160;4E&#160;C4&#160;4D&#160;55&#160;53&#160;<br/>
SOUNDMUS&#160;<br/>
C19E&#160;<br/>
49&#160;C3&#160;50&#160;4C&#160;41&#160;D9&#160;43&#160;55&#160;<br/>
ICPLAYCU&#160;<br/>
C1A6&#160;<br/>
52&#160;53&#160;45&#160;D4&#160;43&#160;55&#160;52&#160;4D&#160;<br/>
RSETCURM&#160;<br/>
C1AE&#160;<br/>
4F&#160;D6&#160;44&#160;52&#160;41&#160;D7&#160;43&#160;49&#160;<br/>
OVDRAWCI&#160;<br/>
C1B6&#160;<br/>
52&#160;43&#160;4C&#160;C5&#160;50&#160;41&#160;54&#160;54&#160;<br/>
RCLEPATT&#160;<br/>
C1BE&#160;<br/>
45&#160;52&#160;CE&#160;46&#160;49&#160;4C&#160;CC&#160;43&#160;<br/>
ERNFILLC&#160;<br/>
C1C6&#160;<br/>
48&#160;41&#160;D2&#160;50&#160;41&#160;50&#160;45&#160;D2&#160;<br/>
HARPAPER&#160;<br/>
C1CE&#160;<br/>
49&#160;4E&#160;CB&#160;53&#160;54&#160;4F&#160;D0&#160;4F&#160;<br/>
INKSTOPO&#160;<br/>
C1D6&#160;<br/>
CE&#160;57&#160;41&#160;49&#160;D4&#160;43&#160;4C&#160;4F&#160;<br/>
NWAITCLO&#160;<br/>
C1DE&#160;<br/>
41&#160;C4&#160;43&#160;53&#160;41&#160;56&#160;C5&#160;44&#160;<br/>
ADCSAVED&#160;<br/>
C1E6&#160;<br/>
45&#160;C6&#160;50&#160;4F&#160;4B&#160;C5&#160;50&#160;52&#160;<br/>
EFPOKEPR&#160;<br/>
Pa&#160;&#160;<br/>
ge&#160;2&#160;<br/>
<hr/>
<a name=3></a>C1EE&#160;<br/>
49&#160;4E&#160;D4&#160;43&#160;4F&#160;4E&#160;D4&#160;4C&#160;<br/>
INTCONTL&#160;<br/>
C1F6&#160;<br/>
49&#160;53&#160;D4&#160;43&#160;4C&#160;45&#160;41&#160;D2&#160;<br/>
ISTCLEAR&#160;<br/>
C1FE&#160;<br/>
47&#160;45&#160;D4&#160;43&#160;41&#160;4C&#160;CC&#160;A1&#160;<br/>
CETCALL!&#160;<br/>
C206&#160;<br/>
4E&#160;45&#160;D7&#160;54&#160;41&#160;42&#160;A8&#160;54&#160;<br/>
NEWTAB(T&#160;<br/>
C20E&#160;<br/>
CF&#160;46&#160;CE&#160;53&#160;50&#160;43&#160;A8&#160;C0&#160;<br/>
OFNSPC(@&#160;<br/>
C216&#160;<br/>
41&#160;55&#160;54&#160;CF&#160;45&#160;4C&#160;53&#160;C5&#160;<br/>
AUTOELSE&#160;<br/>
C21E&#160;<br/>
54&#160;48&#160;45&#160;CE&#160;4E&#160;4F&#160;D4&#160;53&#160;<br/>
THENNOTS&#160;<br/>
C226&#160;<br/>
54&#160;45&#160;D0&#160;AB&#160;AD&#160;AA&#160;AF&#160;DE&#160;<br/>
TEP+-*/A&#160;<br/>
C22E&#160;<br/>
41&#160;4E&#160;C4&#160;4F&#160;D2&#160;BE&#160;BD&#160;BC&#160;<br/>
ANDOR)=&lt;&#160;<br/>
C236&#160;<br/>
53&#160;47&#160;CE&#160;49&#160;4E&#160;D4&#160;41&#160;42&#160;<br/>
SGNINTAB&#160;<br/>
C23E&#160;<br/>
D3&#160;55&#160;53&#160;D2&#160;46&#160;52&#160;C5&#160;50&#160;<br/>
SUSRFREP&#160;<br/>
C246&#160;<br/>
4F&#160;D3&#160;48&#160;45&#160;58&#160;A4&#160;A6&#160;53&#160;<br/>
OSHEX$&amp;S&#160;<br/>
C24E&#160;<br/>
51&#160;D2&#160;52&#160;4E&#160;C4&#160;4C&#160;CE&#160;45&#160;<br/>
QRRNDLNE&#160;<br/>
C256&#160;<br/>
58&#160;D0&#160;43&#160;4F&#160;D3&#160;53&#160;49&#160;CE&#160;<br/>
XPCOSSIN&#160;<br/>
C25E&#160;<br/>
54&#160;41&#160;CE&#160;41&#160;54&#160;CE&#160;50&#160;45&#160;<br/>
TANATNPE&#160;<br/>
C266&#160;<br/>
45&#160;CB&#160;44&#160;45&#160;45&#160;CB&#160;4C&#160;4F&#160;<br/>
EKDEEKLO&#160;<br/>
C26E&#160;<br/>
C7&#160;4C&#160;45&#160;CE&#160;53&#160;54&#160;52&#160;A4&#160;<br/>
GLENSTR$&#160;<br/>
C276&#160;<br/>
56&#160;41&#160;CC&#160;41&#160;53&#160;C3&#160;43&#160;48&#160;<br/>
VALASCCH&#160;<br/>
C27E&#160;<br/>
52&#160;A4&#160;50&#160;C9&#160;54&#160;52&#160;55&#160;C5&#160;<br/>
R$PITRUE&#160;<br/>
C286&#160;<br/>
46&#160;41&#160;4C&#160;53&#160;C5&#160;4B&#160;45&#160;59&#160;<br/>
FALSEKEY&#160;<br/>
C28E&#160;<br/>
A4&#160;53&#160;43&#160;52&#160;CE&#160;50&#160;4F&#160;49&#160;<br/>
$5CRNPOI&#160;<br/>
C296&#160;<br/>
4E&#160;D4&#160;4C&#160;45&#160;46&#160;54&#160;A4&#160;52&#160;<br/>
NTLEFT$R&#160;<br/>
C29E&#160;<br/>
49&#160;47&#160;48&#160;54&#160;A4&#160;4D&#160;49&#160;44&#160;<br/>
IGHT$MID&#160;<br/>
C2A6&#160;<br/>
A4&#160;00&#160;4E&#160;45&#160;58&#160;54&#160;20&#160;57&#160;<br/>
$&#160;NEXT&#160;W&#160;<br/>
<b>ERROR&#160;MESSAGES</b>&#160;<br/>
C2AE&#160;<br/>
49&#160;54&#160;48&#160;4F&#160;55&#160;54&#160;20&#160;46&#160;<br/>
ITHOUT&#160;F&#160;<br/>
C2B6&#160;<br/>
4F&#160;D2&#160;53&#160;59&#160;4E&#160;54&#160;41&#160;D8&#160;<br/>
ORSYNTAX&#160;<br/>
C2BE&#160;<br/>
52&#160;45&#160;54&#160;55&#160;52&#160;4E&#160;20&#160;57&#160;<br/>
RETURN&#160;W&#160;<br/>
C2C6&#160;<br/>
49&#160;54&#160;48&#160;4F&#160;55&#160;54&#160;20&#160;47&#160;<br/>
ITHOUT&#160;G&#160;<br/>
C2CE&#160;<br/>
4F&#160;53&#160;55&#160;C2&#160;4F&#160;55&#160;54&#160;20&#160;<br/>
OSUBOUT&#160;&#160;<br/>
C2D6&#160;<br/>
4F&#160;46&#160;20&#160;44&#160;41&#160;54&#160;C1&#160;49&#160;<br/>
OF&#160;DATAI&#160;<br/>
C2DE&#160;<br/>
4C&#160;4C&#160;45&#160;47&#160;41&#160;4C&#160;20&#160;51&#160;<br/>
LLEGAL&#160;Q&#160;<br/>
C2E6&#160;<br/>
55&#160;41&#160;4E&#160;54&#160;49&#160;54&#160;D9&#160;4F&#160;<br/>
UANTITYO&#160;<br/>
C2EE&#160;<br/>
56&#160;45&#160;52&#160;46&#160;4C&#160;4F&#160;D7&#160;4F&#160;<br/>
VERFLOWO&#160;<br/>
C2F6&#160;<br/>
55&#160;54&#160;20&#160;4F&#160;46&#160;20&#160;4D&#160;45&#160;<br/>
UT&#160;OF&#160;ME&#160;<br/>
C2FE&#160;<br/>
4D&#160;4F&#160;52&#160;D9&#160;55&#160;4E&#160;44&#160;45&#160;<br/>
MORYUNDE&#160;<br/>
C306&#160;<br/>
46&#160;27&#160;44&#160;20&#160;53&#160;54&#160;41&#160;54&#160;<br/>
F'D&#160;STAT&#160;<br/>
C30E&#160;<br/>
45&#160;4D&#160;45&#160;4E&#160;D4&#160;42&#160;41&#160;44&#160;<br/>
EMENTBAD&#160;<br/>
C316&#160;<br/>
20&#160;53&#160;55&#160;42&#160;53&#160;43&#160;52&#160;49&#160;<br/>
&#160;SUBSCRI&#160;<br/>
C31E&#160;<br/>
50&#160;D4&#160;52&#160;45&#160;44&#160;49&#160;4D&#160;27&#160;<br/>
PTREDIM'&#160;<br/>
C326&#160;<br/>
44&#160;20&#160;41&#160;52&#160;52&#160;41&#160;D9&#160;44&#160;<br/>
D&#160;ARRAYD&#160;<br/>
C32E&#160;<br/>
49&#160;56&#160;49&#160;53&#160;49&#160;4F&#160;4E&#160;20&#160;<br/>
IVISION&#160;&#160;<br/>
C336&#160;<br/>
42&#160;59&#160;20&#160;5A&#160;45&#160;52&#160;CF&#160;49&#160;<br/>
BY&#160;ZEROI&#160;<br/>
C33E&#160;<br/>
4C&#160;4C&#160;45&#160;47&#160;41&#160;4C&#160;20&#160;44&#160;<br/>
LLEGAL&#160;D&#160;<br/>
C346&#160;<br/>
49&#160;52&#160;45&#160;43&#160;D4&#160;44&#160;49&#160;53&#160;<br/>
IRECTDIS&#160;<br/>
C34E&#160;<br/>
50&#160;20&#160;54&#160;59&#160;50&#160;45&#160;20&#160;4D&#160;<br/>
P&#160;TYPE&#160;M&#160;<br/>
C356&#160;<br/>
49&#160;53&#160;4D&#160;41&#160;54&#160;43&#160;C8&#160;53&#160;<br/>
ISMATCHS&#160;<br/>
C35E&#160;<br/>
54&#160;52&#160;49&#160;4E&#160;47&#160;20&#160;54&#160;4F&#160;<br/>
TRING&#160;TO&#160;<br/>
C366&#160;<br/>
4F&#160;20&#160;4C&#160;4F&#160;4E&#160;C7&#160;46&#160;4F&#160;<br/>
O&#160;LONGFO&#160;<br/>
C36E&#160;<br/>
52&#160;4D&#160;55&#160;4C&#160;41&#160;20&#160;54&#160;4F&#160;<br/>
RMULA&#160;TO&#160;<br/>
C376&#160;<br/>
4F&#160;20&#160;43&#160;4F&#160;4D&#160;50&#160;4C&#160;45&#160;<br/>
O&#160;COMPLE&#160;<br/>
C37E&#160;<br/>
D8&#160;43&#160;41&#160;4E&#160;27&#160;54&#160;20&#160;43&#160;<br/>
XCAN'T&#160;C&#160;<br/>
C386&#160;<br/>
4F&#160;4E&#160;54&#160;49&#160;4E&#160;55&#160;C5&#160;55&#160;<br/>
ONTINUEU&#160;<br/>
C38E&#160;<br/>
4E&#160;44&#160;45&#160;46&#160;27&#160;44&#160;20&#160;46&#160;<br/>
NDEF'D&#160;F&#160;<br/>
C396&#160;<br/>
55&#160;4E&#160;43&#160;54&#160;49&#160;4F&#160;CE&#160;42&#160;<br/>
UNCTIONB&#160;<br/>
C39E&#160;<br/>
41&#160;44&#160;20&#160;55&#160;4E&#160;54&#160;49&#160;CC&#160;<br/>
AD&#160;UNTIL&#160;<br/>
C3A6&#160;<br/>
20&#160;45&#160;52&#160;52&#160;4F&#160;52&#160;00&#160;20&#160;<br/>
&#160;ERROR&#160;&#160;&#160;<br/>
C3AE&#160;<br/>
49&#160;4E&#160;20&#160;00&#160;0D&#160;0A&#160;52&#160;65&#160;<br/>
IN&#160;&#160;&#160;&#160;Re&#160;<br/>
C3B6&#160;<br/>
61&#160;64&#160;79&#160;20&#160;0D&#160;0A&#160;00&#160;0D&#160;<br/>
ady&#160;&#160;&#160;&#160;&#160;&#160;<br/>
C3BE&#160;<br/>
0A&#160;20&#160;42&#160;52&#160;45&#160;41&#160;4B&#160;00&#160;<br/>
&#160;&#160;BREAK&#160;&#160;<br/>
C3C6&#160;<br/>
BA&#160;<br/>
TSX&#160;<br/>
Search&#160;for&#160;a&#160;variable&#160;match&#160;in&#160;<br/>
C3C7&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
FOR-NEXT&#160;loop.&#160;<br/>
C3C8&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
C3C9&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
Successive&#160;FOR-NEXT&#160;loops&#160;are&#160;<br/>
C3CA&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
pulled&#160;off&#160;the&#160;stack&#160;until&#160;a&#160;<br/>
Pa&#160;&#160;<br/>
ge&#160;3&#160;<br/>
<hr/>
<a name=4></a>C3CB&#160;<br/>
BD&#160;01&#160;01&#160;<br/>
LDA&#160;$0101,X&#160;<br/>
variable&#160;match&#160;is&#160;made.&#160;<br/>
C3CE&#160;<br/>
C9&#160;8D&#160;<br/>
CMP&#160;#$8D&#160;<br/>
C3D0&#160;<br/>
D0&#160;21&#160;<br/>
BNE&#160;$C3F3&#160;<br/>
If&#160;a&#160;match&#160;is&#160;made&#160;then&#160;the&#160;Z&#160;<br/>
C3D2&#160;<br/>
A5&#160;B9&#160;<br/>
LDA&#160;$B9&#160;<br/>
flag&#160;in&#160;the&#160;status&#160;register&#160;is&#160;<br/>
C3D4&#160;<br/>
D0&#160;0A&#160;<br/>
BNE&#160;$C3E0&#160;<br/>
set&#160;to&#160;1;&#160;otherwise&#160;it&#160;is&#160;set&#160;<br/>
C3D6&#160;<br/>
BD&#160;02&#160;01&#160;<br/>
LDA&#160;$0102,X&#160;<br/>
to&#160;0.&#160;<br/>
C3D9&#160;<br/>
85&#160;B8&#160;<br/>
STA&#160;$B8&#160;<br/>
C3DB&#160;<br/>
BD&#160;03&#160;01&#160;<br/>
LDA&#160;$0103,X&#160;<br/>
C3DE&#160;<br/>
85&#160;B9&#160;<br/>
STA&#160;$B9&#160;<br/>
C3E0&#160;<br/>
DD&#160;03&#160;01&#160;<br/>
CMP&#160;$0103,X&#160;<br/>
C3E3&#160;<br/>
D0&#160;07&#160;<br/>
BNE&#160;$C3EC&#160;<br/>
C3E5&#160;<br/>
A5&#160;B8&#160;<br/>
LDA&#160;$B8&#160;<br/>
C3E7&#160;<br/>
DD&#160;02&#160;01&#160;<br/>
CMP&#160;$0102,X&#160;<br/>
C3EA&#160;<br/>
F0&#160;07&#160;<br/>
BEQ&#160;$C3F3&#160;<br/>
C3EC&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
C3ED&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
C3EE&#160;<br/>
69&#160;12&#160;<br/>
ADC&#160;#$12&#160;<br/>
C3F0&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
C3F1&#160;<br/>
D0&#160;D8&#160;<br/>
BNE&#160;$C3CB&#160;<br/>
C3F3&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
C3F4&#160;<br/>
20&#160;44&#160;C4&#160;<br/>
JSR&#160;$C444&#160;<br/>
This&#160;routine&#160;opens&#160;up&#160;new&#160;<br/>
C3F7&#160;<br/>
85&#160;A0&#160;<br/>
STA&#160;$A0&#160;<br/>
space&#160;in&#160;memory&#160;to&#160;store&#160;<br/>
C3F9&#160;<br/>
84&#160;A1&#160;<br/>
STY&#160;$A1&#160;<br/>
new&#160;variables.&#160;<br/>
C3FB&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
($CE/$CF&#160;points&#160;to&#160;start&#160;of&#160;<br/>
C3FC&#160;<br/>
A5&#160;C9&#160;<br/>
LDA&#160;$C9&#160;<br/>
block,&#160;$C9/$CA&#160;points&#160;to&#160;end&#160;<br/>
C3FE&#160;<br/>
E5&#160;CE&#160;<br/>
SBC&#160;$CE&#160;<br/>
of&#160;block,&#160;$C7/$C8&#160;points&#160;to&#160;<br/>
C400&#160;<br/>
85&#160;91&#160;<br/>
STA&#160;$91&#160;<br/>
new&#160;end&#160;of&#160;block).&#160;<br/>
C402&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
X(MSB)&#160;and&#160;Y&#160;(LSB)&#160;hold&#160;the&#160;<br/>
C403&#160;<br/>
A5&#160;CA&#160;<br/>
LDA&#160;$CA&#160;<br/>
size&#160;of&#160;block.&#160;<br/>
C405&#160;<br/>
E5&#160;CF&#160;<br/>
SBC&#160;$CF&#160;<br/>
C407&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
C408&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
Branch&#160;if&#160;block&#160;is&#160;a&#160;whole&#160;<br/>
C409&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
number&#160;of&#160;pages.&#160;<br/>
C40A&#160;<br/>
F0&#160;23&#160;<br/>
BEQ&#160;$C42F&#160;<br/>
C40C&#160;<br/>
A5&#160;C9&#160;<br/>
LDA&#160;$C9&#160;<br/>
Point&#160;$C9/$CA&#160;and&#160;$C7/$C8&#160;to&#160;<br/>
C40E&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
the&#160;bottom&#160;of&#160;the&#160;pages&#160;that&#160;<br/>
C40F&#160;<br/>
E5&#160;91&#160;<br/>
SBC&#160;$91&#160;<br/>
they&#160;were&#160;pointing&#160;to.&#160;<br/>
C411&#160;<br/>
85&#160;C9&#160;<br/>
STA&#160;$C9&#160;<br/>
C413&#160;<br/>
B0&#160;03&#160;<br/>
BCS&#160;$C418&#160;<br/>
C415&#160;<br/>
C6&#160;CA&#160;<br/>
DEC&#160;$CA&#160;<br/>
C417&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
C418&#160;<br/>
A5&#160;C7&#160;<br/>
LDA&#160;$C7&#160;<br/>
C41A&#160;<br/>
E5&#160;91&#160;<br/>
SBC&#160;$91&#160;<br/>
C41C&#160;<br/>
85&#160;C7&#160;<br/>
STA&#160;$C7&#160;<br/>
C41E&#160;<br/>
B0&#160;08&#160;<br/>
BCS&#160;$C428&#160;<br/>
C420&#160;<br/>
C6&#160;C8&#160;<br/>
DEC&#160;$C8&#160;<br/>
C422&#160;<br/>
90&#160;04&#160;<br/>
BCC&#160;$C428&#160;<br/>
C424&#160;<br/>
B1&#160;C9&#160;<br/>
LDA&#160;($C9),Y&#160;<br/>
Shift&#160;whole&#160;page&#160;up&#160;in&#160;memory.&#160;<br/>
C426&#160;<br/>
91&#160;C7&#160;<br/>
STA&#160;($C7),Y&#160;<br/>
C428&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
C429&#160;<br/>
D0&#160;F9&#160;<br/>
BNE&#160;$C424&#160;<br/>
C42B&#160;<br/>
B1&#160;C9&#160;<br/>
LDA&#160;($C9),Y&#160;<br/>
Shift&#160;last&#160;byte&#160;(when&#160;Y=0)&#160;<br/>
C42D&#160;<br/>
91&#160;C7&#160;<br/>
STA&#160;($C7),Y&#160;<br/>
C42F&#160;<br/>
C6&#160;CA&#160;<br/>
DEC&#160;$CA&#160;<br/>
Decrement&#160;pointer&#160;page&#160;numbers&#160;<br/>
C431&#160;<br/>
C6&#160;C8&#160;<br/>
DEC&#160;$C8&#160;<br/>
C433&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
Continue&#160;until&#160;all&#160;pages&#160;have&#160;<br/>
C434&#160;<br/>
D0&#160;F2&#160;<br/>
BNE&#160;$C428&#160;<br/>
been&#160;moved.&#160;<br/>
C436&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>C437&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
Check&#160;for&#160;2&#160;x&#160;content&#160;of&#160;A&#160;<br/>
C438&#160;<br/>
69&#160;3E&#160;<br/>
ADC&#160;#$3E&#160;<br/>
free&#160;bytes&#160;on&#160;stack.&#160;C&#160;is&#160;set&#160;<br/>
C43A&#160;<br/>
B0&#160;40&#160;<br/>
BCS&#160;$C47C&#160;<br/>
at&#160;end&#160;of&#160;routine&#160;if&#160;enough&#160;<br/>
C43C&#160;<br/>
85&#160;91&#160;<br/>
STA&#160;$91&#160;<br/>
space&#160;is&#160;free.&#160;<br/>
C43E&#160;<br/>
BA&#160;<br/>
TSX&#160;<br/>
Pa&#160;&#160;<br/>
ge&#160;4&#160;<br/>
<hr/>
<a name=5></a>C43F&#160;<br/>
E4&#160;91&#160;<br/>
CPX&#160;$91&#160;<br/>
C441&#160;<br/>
90&#160;39&#160;<br/>
BCC&#160;$C47C&#160;<br/>
C443&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>C444&#160;<br/>
C4&#160;A3&#160;<br/>
CPY&#160;$A3&#160;<br/>
<b>CHECK&#160;FOR&#160;FREE&#160;MEMORY.</b>&#160;<br/>
C446&#160;<br/>
90&#160;28&#160;<br/>
BCC&#160;$C470&#160;<br/>
A&#160;(low)&#160;&amp;&#160;Y&#160;(high)&#160;hold&#160;new&#160;<br/>
C448&#160;<br/>
D0&#160;04&#160;<br/>
BNE&#160;$C44E&#160;<br/>
end&#160;of&#160;arrays&#160;address.&#160;Test&#160;<br/>
C44A&#160;<br/>
C5&#160;A2&#160;<br/>
CMP&#160;$A2&#160;<br/>
and&#160;branch&#160;if&#160;above&#160;start&#160;of&#160;<br/>
C44C&#160;<br/>
90&#160;22&#160;<br/>
BCC&#160;$C470&#160;<br/>
string&#160;memory.&#160;<br/>
C44E&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
C44F&#160;<br/>
A2&#160;09&#160;<br/>
LDX&#160;#$09&#160;<br/>
Save&#160;A,&#160;Y&#160;on&#160;stack,&#160;also&#160;<br/>
C451&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
contents&#160;of&#160;$CF&#160;to&#160;$C7&#160;<br/>
C452&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
inclusive.&#160;<br/>
C453&#160;<br/>
B5&#160;C6&#160;<br/>
LDA&#160;$C6,X&#160;<br/>
C455&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
C456&#160;<br/>
10&#160;FA&#160;<br/>
BPL&#160;$C452&#160;<br/>
C458&#160;<br/>
20&#160;50&#160;D6&#160;<br/>
JSR&#160;$D650&#160;<br/>
Attempt&#160;Garbage&#160;collection.&#160;<br/>
C45B&#160;<br/>
A2&#160;F7&#160;<br/>
LDX&#160;#$F7&#160;<br/>
C45D&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
C45E&#160;<br/>
95&#160;D0&#160;<br/>
STA&#160;$D0,X&#160;<br/>
Restore&#160;$C7&#160;to&#160;$CF&#160;from&#160;the&#160;<br/>
C460&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
stack.&#160;<br/>
C461&#160;<br/>
30&#160;FA&#160;<br/>
BMI&#160;$C45D&#160;<br/>
C463&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Restore&#160;A,&#160;Y&#160;from&#160;stack.&#160;<br/>
C464&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
C465&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
C466&#160;<br/>
C4&#160;A3&#160;<br/>
CPY&#160;$A3&#160;<br/>
If&#160;the&#160;end&#160;of&#160;the&#160;block&#160;is&#160;<br/>
C468&#160;<br/>
90&#160;06&#160;<br/>
BCC&#160;$C470&#160;<br/>
still&#160;above&#160;bottom&#160;of&#160;string&#160;<br/>
C46A&#160;<br/>
D0&#160;10&#160;<br/>
BNE&#160;$C47C&#160;<br/>
space&#160;then&#160;jump&#160;to&#160;print&#160;&#34;OUT&#160;<br/>
C46C&#160;<br/>
C5&#160;A2&#160;<br/>
CMP&#160;$A2&#160;<br/>
OF&#160;MEMORY&#160;ERROR&#34;&#160;<br/>
C46E&#160;<br/>
B0&#160;0C&#160;<br/>
BCS&#160;$C47C&#160;<br/>
C470&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
Normal&#160;finish&#160;A,&#160;Y&#160;unaltered.&#160;<br/>
&#160;<br/>C471&#160;<br/>
AD&#160;C0&#160;02&#160;<br/>
LDA&#160;$02C0&#160;<br/>
NMI&#160;routine&#160;ends&#160;up&#160;here.&#160;<br/>
C474&#160;<br/>
29&#160;FE&#160;<br/>
AND&#160;#$FE&#160;<br/>
Remove&#160;GRAB&#160;status&#160;and&#160;then&#160;<br/>
C476&#160;<br/>
8D&#160;C0&#160;02&#160;<br/>
STA&#160;$02C0&#160;<br/>
restart&#160;Basic.&#160;<br/>
C479&#160;<br/>
4C&#160;A8&#160;C4&#160;<br/>
JMP&#160;$C4A8&#160;<br/>
&#160;<br/>C47C&#160;<br/>
A2&#160;4D&#160;<br/>
LDX&#160;#$4D&#160;<br/>
<b>PRINT&#160;ERROR&#160;MESSAGES.</b>&#160;<br/>
C47E&#160;<br/>
20&#160;2F&#160;C8&#160;<br/>
JSR&#160;$C82F&#160;<br/>
Reset&#160;output&#160;to&#160;screen.&#160;<br/>
C481&#160;<br/>
46&#160;2E&#160;<br/>
LSR&#160;$2E&#160;<br/>
Reset&#160;CTRL&#160;0.&#160;<br/>
C483&#160;<br/>
20&#160;F0&#160;CB&#160;<br/>
JSR&#160;$CBF0&#160;<br/>
Move&#160;to&#160;start&#160;of&#160;next&#160;line.&#160;<br/>
C486&#160;<br/>
20&#160;D7&#160;CC&#160;<br/>
JSR&#160;$CCD7&#160;<br/>
Print&#160;&#34;?&#34;&#160;on&#160;screen.&#160;<br/>
C489&#160;<br/>
BD&#160;A8&#160;C2&#160;<br/>
LDA&#160;$C2A8,X&#160;<br/>
Print&#160;error&#160;message&#160;on&#160;screen&#160;<br/>
C48C&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
until&#160;last&#160;char&#160;which&#160;has&#160;bit&#160;<br/>
C48D&#160;<br/>
29&#160;7F&#160;<br/>
AND&#160;#$7F&#160;<br/>
7&#160;set.&#160;X&#160;holds&#160;initial&#160;offset&#160;<br/>
C48F&#160;<br/>
20&#160;D9&#160;CC&#160;<br/>
JSR&#160;$CCD9&#160;<br/>
into&#160;error&#160;table&#160;at&#160;start&#160;of&#160;<br/>
C492&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
routine.&#160;<br/>
C493&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
C494&#160;<br/>
10&#160;F3&#160;<br/>
BPL&#160;$C489&#160;<br/>
C496&#160;<br/>
20&#160;26&#160;C7&#160;<br/>
JSR&#160;$C726&#160;<br/>
Reset&#160;6502&#160;stack&#160;etc.&#160;<br/>
C499&#160;<br/>
A9&#160;A6&#160;<br/>
LDA&#160;#$A6&#160;<br/>
Print&#160;&#34;ERROR&#34;&#160;after&#160;the&#160;<br/>
C49B&#160;<br/>
A0&#160;C3&#160;<br/>
LDY&#160;#$C3&#160;<br/>
message.&#160;<br/>
C49D&#160;<br/>
20&#160;B0&#160;CC&#160;<br/>
JSR&#160;$CCB0&#160;<br/>
C4A0&#160;<br/>
A4&#160;A9&#160;<br/>
LDY&#160;$A9&#160;<br/>
If&#160;high&#160;byte&#160;of&#160;line&#160;number&#160;<br/>
C4A2&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
is&#160;#FF&#160;then&#160;the&#160;computer&#160;is&#160;in&#160;<br/>
C4A3&#160;<br/>
F0&#160;03&#160;<br/>
BEQ&#160;$C4A8&#160;<br/>
immediate&#160;mode&#160;(not&#160;program).&#160;<br/>
C4A5&#160;<br/>
20&#160;BA&#160;E0&#160;<br/>
JSR&#160;$E0BA&#160;<br/>
Print&#160;&#34;IN&#160;(line&#160;number&gt;&#34;&#160;<br/>
C4A8&#160;<br/>
4E&#160;52&#160;02&#160;<br/>
LSR&#160;$0252&#160;<br/>
<b>RESTART&#160;BASIC</b>&#160;<br/>
C4AB&#160;<br/>
46&#160;2E&#160;<br/>
LSR&#160;$2E&#160;<br/>
Clear&#160;pending&#160;ELSE,&#160;CTRL&#160;O&#160;<br/>
C4AD&#160;<br/>
4E&#160;F2&#160;02&#160;<br/>
LSR&#160;$02F2&#160;<br/>
and&#160;LIST/EDIT&#160;flags.&#160;<br/>
C4B0&#160;<br/>
A9&#160;B2&#160;<br/>
LDA&#160;#$B2&#160;<br/>
C4B2&#160;<br/>
A0&#160;C3&#160;<br/>
LDY&#160;#$C3&#160;<br/>
C4B4&#160;<br/>
20&#160;1A&#160;00&#160;<br/>
JSR&#160;$001A&#160;<br/>
Print&#160;&#34;Ready&#34;&#160;<br/>
C4B7&#160;<br/>
20&#160;2F&#160;C8&#160;<br/>
JSR&#160;$C82F&#160;<br/>
Reset&#160;output&#160;to&#160;screen.&#160;<br/>
Pa&#160;&#160;<br/>
ge&#160;5&#160;<br/>
<hr/>
<a name=6></a>C4BA&#160;<br/>
20&#160;92&#160;C5&#160;<br/>
JSR&#160;$C592&#160;<br/>
Input&#160;line&#160;from&#160;keyboard.&#160;<br/>
C4BD&#160;<br/>
86&#160;E9&#160;<br/>
STX&#160;$E9&#160;<br/>
Save&#160;start&#160;of&#160;line.&#160;<br/>
C4BF&#160;<br/>
84&#160;EA&#160;<br/>
STY&#160;$EA&#160;<br/>
C4C1&#160;<br/>
20&#160;E2&#160;00&#160;<br/>
JSR&#160;$00E2&#160;<br/>
Get&#160;next&#160;non&#160;space&#160;char.&#160;<br/>
C4C4&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
If&#160;end&#160;of&#160;line,&#160;go&#160;back&#160;to&#160;<br/>
C4C5&#160;<br/>
F0&#160;F0&#160;<br/>
BEQ&#160;$C4B7&#160;<br/>
get&#160;another.&#160;<br/>
C4C7&#160;<br/>
A2&#160;FF&#160;<br/>
LDX&#160;#$FF&#160;<br/>
Set&#160;immediate&#160;mode.&#160;<br/>
C4C9&#160;<br/>
86&#160;A9&#160;<br/>
STX&#160;$A9&#160;<br/>
C4CB&#160;<br/>
90&#160;06&#160;<br/>
BCC&#160;$C4D3&#160;<br/>
C4CD&#160;<br/>
20&#160;FA&#160;C5&#160;<br/>
JSR&#160;$C5FA&#160;<br/>
Tokenise&#160;the&#160;line.&#160;<br/>
C4D0&#160;<br/>
4C&#160;0C&#160;C9&#160;<br/>
JMP&#160;$C90C&#160;<br/>
Execute&#160;the&#160;line.&#160;<br/>
&#160;<br/>C4D3&#160;<br/>
20&#160;E2&#160;CA&#160;<br/>
JSR&#160;$CAE2&#160;<br/>
<b>INSERT&#160;/&#160;DELETE&#160;LINE</b>&#160;<br/>
C4D6&#160;<br/>
20&#160;FA&#160;C5&#160;<br/>
JSR&#160;$C5FA&#160;<br/>
Get&#160;line&#160;and&#160;tokenise&#160;it.&#160;<br/>
C4D9&#160;<br/>
84&#160;26&#160;<br/>
STY&#160;$26&#160;<br/>
Save&#160;line&#160;length.&#160;<br/>
C4DB&#160;<br/>
20&#160;B3&#160;C6&#160;<br/>
JSR&#160;$C6B3&#160;<br/>
Look&#160;for&#160;that&#160;line&#160;in&#160;memory.&#160;<br/>
C4DE&#160;<br/>
90&#160;44&#160;<br/>
BCC&#160;$C524&#160;<br/>
If&#160;not&#160;found&#160;skip&#160;line&#160;delete&#160;<br/>
&#160;<br/>C4E0&#160;<br/>
A0&#160;01&#160;<br/>
LDY&#160;#$01&#160;<br/>
<b>DELETE&#160;LINE.</b>&#160;<br/>
C4E2&#160;<br/>
B1&#160;CE&#160;<br/>
LDA&#160;($CE),Y&#160;<br/>
Get&#160;MSB&#160;of&#160;end&#160;of&#160;line.&#160;<br/>
C4E4&#160;<br/>
85&#160;92&#160;<br/>
STA&#160;$92&#160;<br/>
C4E6&#160;<br/>
A5&#160;9C&#160;<br/>
LDA&#160;$9C&#160;<br/>
Get&#160;LSB&#160;of&#160;end&#160;of&#160;Basic.&#160;<br/>
C4E8&#160;<br/>
85&#160;91&#160;<br/>
STA&#160;$91&#160;<br/>
C4EA&#160;<br/>
A5&#160;CF&#160;<br/>
LDA&#160;$CF&#160;<br/>
MSB&#160;of&#160;start&#160;of&#160;line.&#160;<br/>
C4EC&#160;<br/>
85&#160;94&#160;<br/>
STA&#160;$94&#160;<br/>
C4EE&#160;<br/>
A5&#160;CE&#160;<br/>
LDA&#160;$CE&#160;<br/>
The&#160;new&#160;end&#160;of&#160;Basic&#160;is&#160;the&#160;<br/>
C4F0&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
old&#160;one&#160;plus&#160;the&#160;start&#160;address&#160;<br/>
C4F1&#160;<br/>
F1&#160;CE&#160;<br/>
SBC&#160;($CE),Y&#160;<br/>
of&#160;line&#160;being&#160;deleted&#160;minus&#160;<br/>
C4F3&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
its&#160;end&#160;address.&#160;Calculation&#160;<br/>
C4F4&#160;<br/>
65&#160;9C&#160;<br/>
ADC&#160;$9C&#160;<br/>
is&#160;done&#160;for&#160;LSB&#160;for&#160;each&#160;<br/>
C4F6&#160;<br/>
85&#160;9C&#160;<br/>
STA&#160;$9C&#160;<br/>
parameter&#160;and&#160;then&#160;MSB&#160;is&#160;<br/>
C4F8&#160;<br/>
85&#160;93&#160;<br/>
STA&#160;$93&#160;<br/>
adjusted&#160;accordingly.&#160;<br/>
C4FA&#160;<br/>
A5&#160;9D&#160;<br/>
LDA&#160;$9D&#160;<br/>
C4FC&#160;<br/>
69&#160;FF&#160;<br/>
ADC&#160;#$FF&#160;<br/>
C4FE&#160;<br/>
85&#160;9D&#160;<br/>
STA&#160;$9D&#160;<br/>
C500&#160;<br/>
E5&#160;CF&#160;<br/>
SBC&#160;$CF&#160;<br/>
X&#160;holds&#160;number&#160;of&#160;pages&#160;of&#160;<br/>
C502&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
memory&#160;to&#160;be&#160;shifted&#160;down.&#160;<br/>
C503&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
C504&#160;<br/>
A5&#160;CE&#160;<br/>
LDA&#160;$CE&#160;<br/>
C506&#160;<br/>
E5&#160;9C&#160;<br/>
SBC&#160;$9C&#160;<br/>
Y&#160;holds&#160;number&#160;of&#160;bytes&#160;to&#160;be&#160;<br/>
C508&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
moved&#160;as&#160;well&#160;as&#160;whole&#160;pages.&#160;<br/>
C509&#160;<br/>
B0&#160;03&#160;<br/>
BCS&#160;$C50E&#160;<br/>
C50B&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
C50C&#160;<br/>
C6&#160;94&#160;<br/>
DEC&#160;$94&#160;<br/>
C50E&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
Set&#160;up&#160;'from'&#160;pointer&#160;for&#160;<br/>
C50F&#160;<br/>
65&#160;91&#160;<br/>
ADC&#160;$91&#160;<br/>
block.&#160;<br/>
C511&#160;<br/>
90&#160;03&#160;<br/>
BCC&#160;$C516&#160;<br/>
C513&#160;<br/>
C6&#160;92&#160;<br/>
DEC&#160;$92&#160;<br/>
C515&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
C516&#160;<br/>
B1&#160;91&#160;<br/>
LDA&#160;($91),Y&#160;<br/>
Copy&#160;rest&#160;of&#160;page&#160;down.&#160;<br/>
C518&#160;<br/>
91&#160;93&#160;<br/>
STA&#160;($93),Y&#160;<br/>
C51A&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
C51B&#160;<br/>
D0&#160;F9&#160;<br/>
BNE&#160;$C516&#160;<br/>
C51D&#160;<br/>
E6&#160;92&#160;<br/>
INC&#160;$92&#160;<br/>
Advance&#160;block&#160;pointers&#160;to&#160;the&#160;<br/>
C51F&#160;<br/>
E6&#160;94&#160;<br/>
INC&#160;$94&#160;<br/>
next&#160;page.&#160;<br/>
C521&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
Continue&#160;until&#160;all&#160;pages&#160;done.&#160;<br/>
C522&#160;<br/>
D0&#160;F2&#160;<br/>
BNE&#160;$C516&#160;<br/>
&#160;<br/>C524&#160;<br/>
20&#160;08&#160;C7&#160;<br/>
JSR&#160;$C708&#160;<br/>
<b>INSERT&#160;LINE</b>&#160;<br/>
C527&#160;<br/>
20&#160;5F&#160;C5&#160;<br/>
JSR&#160;$C55F&#160;<br/>
Set&#160;text&#160;pointer&#160;and&#160;set&#160;up&#160;<br/>
C52A&#160;<br/>
A5&#160;35&#160;<br/>
LDA&#160;$35&#160;<br/>
link&#160;pointers.&#160;If&#160;no&#160;line&#160;to&#160;<br/>
C52C&#160;<br/>
F0&#160;89&#160;<br/>
BEQ&#160;$C4B7&#160;<br/>
insert&#160;branch&#160;to&#160;immediate&#160;<br/>
C52E&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
mode.&#160;<br/>
C52F&#160;<br/>
A5&#160;9C&#160;<br/>
LDA&#160;$9C&#160;<br/>
Calculate&#160;the&#160;number&#160;of&#160;bytes&#160;<br/>
Pa&#160;&#160;<br/>
ge&#160;6&#160;<br/>
<hr/>
<a name=7></a>C531&#160;<br/>
85&#160;C9&#160;<br/>
STA&#160;$C9&#160;<br/>
to&#160;be&#160;shifted&#160;and&#160;by&#160;how&#160;far&#160;<br/>
C533&#160;<br/>
65&#160;26&#160;<br/>
ADC&#160;$26&#160;<br/>
so&#160;that&#160;new&#160;line&#160;can&#160;be&#160;<br/>
C535&#160;<br/>
85&#160;C7&#160;<br/>
STA&#160;$C7&#160;<br/>
inserted.&#160;<br/>
C537&#160;<br/>
A4&#160;9D&#160;<br/>
LDY&#160;$9D&#160;<br/>
C539&#160;<br/>
84&#160;CA&#160;<br/>
STY&#160;$CA&#160;<br/>
C53B&#160;<br/>
90&#160;01&#160;<br/>
BCC&#160;$C53E&#160;<br/>
C53D&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
C53E&#160;<br/>
84&#160;C8&#160;<br/>
STY&#160;$C8&#160;<br/>
C540&#160;<br/>
20&#160;F4&#160;C3&#160;<br/>
JSR&#160;$C3F4&#160;<br/>
0pen&#160;up&#160;space&#160;for&#160;new&#160;line.&#160;<br/>
C543&#160;<br/>
A5&#160;A0&#160;<br/>
LDA&#160;$A0&#160;<br/>
Set&#160;end&#160;of&#160;Basic&#160;to&#160;end&#160;of&#160;<br/>
C545&#160;<br/>
A4&#160;A1&#160;<br/>
LDY&#160;$A1&#160;<br/>
Arrays&#160;(end&#160;of&#160;block).&#160;<br/>
C547&#160;<br/>
85&#160;9C&#160;<br/>
STA&#160;$9C&#160;<br/>
C549&#160;<br/>
84&#160;9D&#160;<br/>
STY&#160;$9D&#160;<br/>
C54B&#160;<br/>
A4&#160;26&#160;<br/>
LDY&#160;$26&#160;<br/>
Get&#160;number&#160;of&#160;bytes&#160;to&#160;insert.&#160;<br/>
C54D&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
C54E&#160;<br/>
B9&#160;31&#160;00&#160;<br/>
LDA&#160;$0031,Y&#160;<br/>
Transfer&#160;new&#160;line&#160;into&#160;the&#160;<br/>
C551&#160;<br/>
91&#160;CE&#160;<br/>
STA&#160;($CE),Y&#160;<br/>
program.&#160;<br/>
C553&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
C554&#160;<br/>
10&#160;F8&#160;<br/>
BPL&#160;$C54E&#160;<br/>
C556&#160;<br/>
20&#160;08&#160;C7&#160;<br/>
JSR&#160;$C708&#160;<br/>
Set&#160;text&#160;pointer&#160;to&#160;start.&#160;<br/>
C559&#160;<br/>
20&#160;5F&#160;C5&#160;<br/>
JSR&#160;$C55F&#160;<br/>
Set&#160;up&#160;line&#160;link&#160;pointers.&#160;<br/>
C55C&#160;<br/>
4C&#160;B7&#160;C4&#160;<br/>
JMP&#160;$C4B7&#160;<br/>
Jump&#160;to&#160;immediate&#160;mode&#160;<br/>
&#160;<br/>C55F&#160;<br/>
A5&#160;9A&#160;<br/>
LDA&#160;$9A&#160;<br/>
<b>SET&#160;LINE&#160;LINK&#160;POINTERS</b>&#160;<br/>
C561&#160;<br/>
A4&#160;9B&#160;<br/>
LDY&#160;$9B&#160;<br/>
Copy&#160;start&#160;of&#160;Basic&#160;into&#160;a&#160;<br/>
C563&#160;<br/>
85&#160;91&#160;<br/>
STA&#160;$91&#160;<br/>
pointer.&#160;<br/>
C565&#160;<br/>
84&#160;92&#160;<br/>
STY&#160;$92&#160;<br/>
C567&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
C568&#160;<br/>
A0&#160;01&#160;<br/>
LDY&#160;#$01&#160;<br/>
C56A&#160;<br/>
B1&#160;91&#160;<br/>
LDA&#160;($91),Y&#160;<br/>
Test&#160;if&#160;at&#160;end&#160;of&#160;program.&#160;<br/>
C56C&#160;<br/>
F0&#160;1D&#160;<br/>
BEQ&#160;$C58B&#160;<br/>
C56E&#160;<br/>
A0&#160;04&#160;<br/>
LDY&#160;#$04&#160;<br/>
C570&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
C571&#160;<br/>
B1&#160;91&#160;<br/>
LDA&#160;($91),Y&#160;<br/>
Step&#160;through&#160;program&#160;until&#160;<br/>
C573&#160;<br/>
D0&#160;FB&#160;<br/>
BNE&#160;$C570&#160;<br/>
end&#160;of&#160;line&#160;is&#160;reached.&#160;<br/>
C575&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
C576&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
Add&#160;length&#160;of&#160;line&#160;to&#160;its&#160;<br/>
C577&#160;<br/>
65&#160;91&#160;<br/>
ADC&#160;$91&#160;<br/>
own&#160;start&#160;address&#160;to&#160;get&#160;<br/>
C579&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
start&#160;address&#160;of&#160;next&#160;line.&#160;<br/>
C57A&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
C57C&#160;<br/>
91&#160;91&#160;<br/>
STA&#160;($91),Y&#160;<br/>
Set&#160;pointer&#160;to&#160;next&#160;line&#160;(low&#160;<br/>
C57E&#160;<br/>
A5&#160;92&#160;<br/>
LDA&#160;$92&#160;<br/>
byte).&#160;<br/>
C580&#160;<br/>
69&#160;00&#160;<br/>
ADC&#160;#$00&#160;<br/>
C582&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
Set&#160;pointer&#160;to&#160;next&#160;line&#160;<br/>
C583&#160;<br/>
91&#160;91&#160;<br/>
STA&#160;($91),Y&#160;<br/>
(high&#160;byte).&#160;<br/>
C585&#160;<br/>
86&#160;91&#160;<br/>
STX&#160;$91&#160;<br/>
Set&#160;pointer&#160;to&#160;start&#160;of&#160;<br/>
C587&#160;<br/>
85&#160;92&#160;<br/>
STA&#160;$92&#160;<br/>
following&#160;line.&#160;<br/>
C589&#160;<br/>
90&#160;DD&#160;<br/>
BCC&#160;$C568&#160;<br/>
Do&#160;next&#160;line.&#160;<br/>
C58B&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
Exit.&#160;<br/>
C58C&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
&#34;DEL&#34;&#160;-&#160;go&#160;back&#160;one&#160;char.&#160;<br/>
C58D&#160;<br/>
10&#160;05&#160;<br/>
BPL&#160;$C594&#160;<br/>
C58F&#160;<br/>
20&#160;F0&#160;CB&#160;<br/>
JSR&#160;$CBF0&#160;<br/>
&#160;<br/>C592&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
<b>INPUT&#160;LINE&#160;FROM&#160;KEYBOARD.</b>&#160;<br/>
C594&#160;<br/>
20&#160;E8&#160;C5&#160;<br/>
JSR&#160;$C5E8&#160;<br/>
X&#160;holds&#160;char&#160;count.&#160;Read&#160;key.&#160;<br/>
C597&#160;<br/>
C9&#160;01&#160;<br/>
CMP&#160;#$01&#160;<br/>
C599&#160;<br/>
D0&#160;0D&#160;<br/>
BNE&#160;$C5A8&#160;<br/>
Branch&#160;if&#160;key&#160;not&#160;CTRL&#160;A.&#160;<br/>
C59B&#160;<br/>
AC&#160;69&#160;02&#160;<br/>
LDY&#160;$0269&#160;<br/>
Load&#160;char&#160;from&#160;screen,&#160;clear&#160;<br/>
C59E&#160;<br/>
B1&#160;12&#160;<br/>
LDA&#160;($12),Y&#160;<br/>
bit&#160;7.&#160;If&#160;it&#160;is&#160;a&#160;CTRL&#160;char&#160;<br/>
C5A0&#160;<br/>
29&#160;7F&#160;<br/>
AND&#160;#$7F&#160;<br/>
then&#160;replace&#160;it&#160;by&#160;a&#160;char&#160;to&#160;<br/>
C5A2&#160;<br/>
C9&#160;20&#160;<br/>
CMP&#160;#$20&#160;<br/>
move&#160;cursor&#160;one&#160;place&#160;to&#160;<br/>
C5A4&#160;<br/>
B0&#160;02&#160;<br/>
BCS&#160;$C5A8&#160;<br/>
right.&#160;<br/>
C5A6&#160;<br/>
A9&#160;09&#160;<br/>
LDA&#160;#$09&#160;<br/>
C5A8&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
Save&#160;character&#160;and&#160;print&#160;it&#160;to&#160;<br/>
Pa&#160;&#160;<br/>
ge&#160;7&#160;<br/>
<hr/>
<a name=8></a>C5A9&#160;<br/>
20&#160;D9&#160;CC&#160;<br/>
JSR&#160;$CCD9&#160;<br/>
the&#160;screen.&#160;<br/>
C5AC&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
C5AD&#160;<br/>
C9&#160;7F&#160;<br/>
CMP&#160;#$7F&#160;<br/>
Branch&#160;if&#160;char&#160;is&#160;DEL&#160;-&#160;go&#160;<br/>
C5AF&#160;<br/>
F0&#160;DB&#160;<br/>
BEQ&#160;$C58C&#160;<br/>
back&#160;one&#160;character.&#160;<br/>
C5B1&#160;<br/>
C9&#160;0D&#160;<br/>
CMP&#160;#$0D&#160;<br/>
If&#160;char&#160;is&#160;RETURN&#160;then&#160;finish&#160;<br/>
C5B3&#160;<br/>
F0&#160;30&#160;<br/>
BEQ&#160;$C5E5&#160;<br/>
off&#160;current&#160;input&#160;buffer.&#160;<br/>
C5B5&#160;<br/>
C9&#160;03&#160;<br/>
CMP&#160;#$03&#160;<br/>
If&#160;CTRL&#160;C&#160;then&#160;set&#160;flag,&#160;clear&#160;<br/>
C5B7&#160;<br/>
F0&#160;28&#160;<br/>
BEQ&#160;$C5E1&#160;<br/>
line&#160;and&#160;exit.&#160;<br/>
C5B9&#160;<br/>
C9&#160;18&#160;<br/>
CMP&#160;#$18&#160;<br/>
If&#160;CTRL&#160;X&#160;then&#160;print&#160;&#34;Q&#34;&#160;and&#160;<br/>
C5BB&#160;<br/>
F0&#160;0B&#160;<br/>
BEQ&#160;$C5C8&#160;<br/>
restart&#160;the&#160;line.&#160;<br/>
C5BD&#160;<br/>
C9&#160;20&#160;<br/>
CMP&#160;#$20&#160;<br/>
Ignore&#160;any&#160;other&#160;control&#160;<br/>
C5BF&#160;<br/>
90&#160;D3&#160;<br/>
BCC&#160;$C594&#160;<br/>
characters.&#160;<br/>
C5C1&#160;<br/>
95&#160;35&#160;<br/>
STA&#160;$35,X&#160;<br/>
Save&#160;char&#160;in&#160;buffer.&#160;<br/>
C5C3&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
C5C4&#160;<br/>
E0&#160;4F&#160;<br/>
CPX&#160;#$4F&#160;<br/>
If&#160;input&#160;buffer&#160;is&#160;full&#160;then&#160;<br/>
C5C6&#160;<br/>
90&#160;07&#160;<br/>
BCC&#160;$C5CF&#160;<br/>
print&#160;&#34;Q&#34;&#160;and&#160;start&#160;again&#160;<br/>
C5C8&#160;<br/>
A9&#160;5C&#160;<br/>
LDA&#160;#$5C&#160;<br/>
with&#160;a&#160;new&#160;line.&#160;<br/>
C5CA&#160;<br/>
20&#160;D9&#160;CC&#160;<br/>
JSR&#160;$CCD9&#160;<br/>
C5CD&#160;<br/>
D0&#160;C0&#160;<br/>
BNE&#160;$C58F&#160;<br/>
C5CF&#160;<br/>
E0&#160;4C&#160;<br/>
CPX&#160;#$4C&#160;<br/>
C5D1&#160;<br/>
90&#160;C1&#160;<br/>
BCC&#160;$C594&#160;<br/>
C5D3&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
If&#160;the&#160;line&#160;is&#160;close&#160;to&#160;max&#160;<br/>
C5D4&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
number&#160;of&#160;chars&#160;then&#160;give&#160;a&#160;<br/>
C5D5&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
warning&#160;PING.&#160;<br/>
C5D6&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
C5D7&#160;<br/>
20&#160;9F&#160;FA&#160;<br/>
JSR&#160;$FA9F&#160;<br/>
Warning&#160;PING.&#160;<br/>
C5DA&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
C5DB&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
C5DC&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
C5DD&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
C5DE&#160;<br/>
4C&#160;94&#160;C5&#160;<br/>
JMP&#160;$C594&#160;<br/>
Go&#160;back&#160;for&#160;next&#160;character.&#160;<br/>
C5E1&#160;<br/>
E6&#160;17&#160;<br/>
INC&#160;$17&#160;<br/>
CTRL&#160;C&#160;pressed,&#160;set&#160;flag&#160;and&#160;<br/>
C5E3&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
finish&#160;off&#160;input&#160;buffer.&#160;<br/>
C5E5&#160;<br/>
4C&#160;EA&#160;CB&#160;<br/>
JMP&#160;$CBEA&#160;<br/>
&#160;<br/>C5E8&#160;<br/>
20&#160;3B&#160;02&#160;<br/>
JSR&#160;$023B&#160;<br/>
<b>READ&#160;KEY&#160;FROM&#160;KEYBOARD.</b>&#160;<br/>
C5EB&#160;<br/>
10&#160;FB&#160;<br/>
BPL&#160;$C5E8&#160;<br/>
Wait&#160;until&#160;valid&#160;key&#160;is&#160;<br/>
C5ED&#160;<br/>
C9&#160;0F&#160;<br/>
CMP&#160;#$0F&#160;<br/>
pressed&#160;(bit&#160;7&#160;set).&#160;<br/>
C5EF&#160;<br/>
D0&#160;08&#160;<br/>
BNE&#160;$C5F9&#160;<br/>
If&#160;key&#160;is&#160;CTRL&#160;O&#160;then&#160;invert&#160;<br/>
C5F1&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
flag.&#160;<br/>
C5F2&#160;<br/>
A5&#160;2E&#160;<br/>
LDA&#160;$2E&#160;<br/>
C5F4&#160;<br/>
49&#160;FF&#160;<br/>
EOR&#160;#$FF&#160;<br/>
C5F6&#160;<br/>
85&#160;2E&#160;<br/>
STA&#160;$2E&#160;<br/>
C5F8&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Return&#160;with&#160;char&#160;in&#160;A.&#160;<br/>
C5F9&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>C5FA&#160;<br/>
A6&#160;E9&#160;<br/>
LDX&#160;$E9&#160;<br/>
<b>TOKENISE&#160;LINE.</b>&#160;<br/>
C5FC&#160;<br/>
A0&#160;04&#160;<br/>
LDY&#160;#$04&#160;<br/>
Set&#160;initial&#160;line&#160;counters&#160;and&#160;<br/>
C5FE&#160;<br/>
84&#160;2A&#160;<br/>
STY&#160;$2A&#160;<br/>
flag.&#160;<br/>
C600&#160;<br/>
B5&#160;00&#160;<br/>
LDA&#160;$00,X&#160;<br/>
Get&#160;character.&#160;<br/>
C602&#160;<br/>
C9&#160;20&#160;<br/>
CMP&#160;#$20&#160;<br/>
If&#160;space&#160;char&#160;then&#160;put&#160;it&#160;in&#160;<br/>
C604&#160;<br/>
F0&#160;41&#160;<br/>
BEQ&#160;$C647&#160;<br/>
line.&#160;<br/>
C606&#160;<br/>
85&#160;25&#160;<br/>
STA&#160;$25&#160;<br/>
Save&#160;character.&#160;<br/>
C608&#160;<br/>
C9&#160;22&#160;<br/>
CMP&#160;#$22&#160;<br/>
If&#160;character&#160;is&#160;&#34;&#160;then&#160;handle&#160;<br/>
C60A&#160;<br/>
F0&#160;5F&#160;<br/>
BEQ&#160;$C66B&#160;<br/>
string&#160;in&#160;quotes.&#160;<br/>
C60C&#160;<br/>
24&#160;2A&#160;<br/>
BIT&#160;$2A&#160;<br/>
Don't&#160;tokenise&#160;if&#160;in&#160;middle&#160;of&#160;<br/>
C60E&#160;<br/>
70&#160;37&#160;<br/>
BVS&#160;$C647&#160;<br/>
a&#160;'DATA'&#160;statement.&#160;<br/>
C610&#160;<br/>
C9&#160;3F&#160;<br/>
CMP&#160;#$3F&#160;<br/>
If&#160;char&#160;is&#160;'?'&#160;then&#160;substitute&#160;<br/>
C612&#160;<br/>
D0&#160;04&#160;<br/>
BNE&#160;$C618&#160;<br/>
the&#160;'PRINT'&#160;token.&#160;<br/>
C614&#160;<br/>
A9&#160;BA&#160;<br/>
LDA&#160;#$BA&#160;<br/>
C616&#160;<br/>
D0&#160;2F&#160;<br/>
BNE&#160;$C647&#160;<br/>
C618&#160;<br/>
C9&#160;30&#160;<br/>
CMP&#160;#$30&#160;<br/>
If&#160;char&#160;is&#160;0-9&#160;or&#160;;&#160;or&#160;:&#160;then&#160;<br/>
C61A&#160;<br/>
90&#160;04&#160;<br/>
BCC&#160;$C620&#160;<br/>
put&#160;it&#160;in&#160;line&#160;and&#160;go&#160;on&#160;to&#160;<br/>
C61C&#160;<br/>
C9&#160;3C&#160;<br/>
CMP&#160;#$3C&#160;<br/>
next&#160;char.&#160;<br/>
Pa&#160;&#160;<br/>
ge&#160;8&#160;<br/>
<hr/>
<a name=9></a>C61E&#160;<br/>
90&#160;27&#160;<br/>
BCC&#160;$C647&#160;<br/>
C620&#160;<br/>
84&#160;E0&#160;<br/>
STY&#160;$E0&#160;<br/>
Save&#160;pointer.&#160;<br/>
C622&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
C624&#160;<br/>
84&#160;26&#160;<br/>
STY&#160;$26&#160;<br/>
Zero&#160;Y&#160;and&#160;reset&#160;token&#160;number.&#160;<br/>
C626&#160;<br/>
A9&#160;E9&#160;<br/>
LDA&#160;#$E9&#160;<br/>
Set&#160;tokenising&#160;pointer&#160;to&#160;<br/>
C628&#160;<br/>
85&#160;18&#160;<br/>
STA&#160;$18&#160;<br/>
point&#160;to&#160;byte&#160;before&#160;start&#160;of&#160;<br/>
C62A&#160;<br/>
A9&#160;C0&#160;<br/>
LDA&#160;#$C0&#160;<br/>
keyword&#160;list.&#160;<br/>
C62C&#160;<br/>
85&#160;19&#160;<br/>
STA&#160;$19&#160;<br/>
C62E&#160;<br/>
86&#160;E9&#160;<br/>
STX&#160;$E9&#160;<br/>
Save&#160;pointer.&#160;<br/>
C630&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
C631&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
Advance&#160;input&#160;pointer.&#160;<br/>
C632&#160;<br/>
E6&#160;18&#160;<br/>
INC&#160;$18&#160;<br/>
Advance&#160;keyword&#160;list&#160;pointer.&#160;<br/>
C634&#160;<br/>
D0&#160;02&#160;<br/>
BNE&#160;$C638&#160;<br/>
C636&#160;<br/>
E6&#160;19&#160;<br/>
INC&#160;$19&#160;<br/>
C638&#160;<br/>
B5&#160;00&#160;<br/>
LDA&#160;$00,X&#160;<br/>
C63A&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
C63B&#160;<br/>
F1&#160;18&#160;<br/>
SBC&#160;($18),Y&#160;<br/>
Test&#160;for&#160;char&#160;match&#160;and&#160;do&#160;<br/>
C63D&#160;<br/>
F0&#160;F2&#160;<br/>
BEQ&#160;$C631&#160;<br/>
next&#160;one&#160;if&#160;chars&#160;matched.&#160;<br/>
C63F&#160;<br/>
C9&#160;80&#160;<br/>
CMP&#160;#$80&#160;<br/>
Test&#160;for&#160;end&#160;of&#160;keyword.&#160;<br/>
C641&#160;<br/>
D0&#160;2F&#160;<br/>
BNE&#160;$C672&#160;<br/>
Branch&#160;if&#160;not&#160;end.&#160;<br/>
C643&#160;<br/>
05&#160;26&#160;<br/>
ORA&#160;$26&#160;<br/>
Create&#160;token.&#160;<br/>
C645&#160;<br/>
A4&#160;E0&#160;<br/>
LDY&#160;$E0&#160;<br/>
Restore&#160;pointer.&#160;<br/>
C647&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
Move&#160;up&#160;pointers&#160;and&#160;put&#160;out&#160;<br/>
C648&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
char.&#160;<br/>
C649&#160;<br/>
99&#160;30&#160;00&#160;<br/>
STA&#160;$0030,Y&#160;<br/>
C64C&#160;<br/>
B9&#160;30&#160;00&#160;<br/>
LDA&#160;$0030,Y&#160;<br/>
If&#160;char&#160;is&#160;zero,&#160;i.e.&#160;end&#160;of&#160;<br/>
C64F&#160;<br/>
F0&#160;39&#160;<br/>
BEQ&#160;$C68A&#160;<br/>
line&#160;then&#160;exit.&#160;<br/>
C651&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
C652&#160;<br/>
E9&#160;3A&#160;<br/>
SBC&#160;#$3A&#160;<br/>
If&#160;&#34;:&#34;&#160;then&#160;clear&#160;'DATA'&#160;flag.&#160;<br/>
C654&#160;<br/>
F0&#160;04&#160;<br/>
BEQ&#160;$C65A&#160;<br/>
C656&#160;<br/>
C9&#160;57&#160;<br/>
CMP&#160;#$57&#160;<br/>
If&#160;'DATA'&#160;token&#160;then&#160;set&#160;flag.&#160;<br/>
C658&#160;<br/>
D0&#160;02&#160;<br/>
BNE&#160;$C65C&#160;<br/>
C65A&#160;<br/>
85&#160;2A&#160;<br/>
STA&#160;$2A&#160;<br/>
C65C&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
C65D&#160;<br/>
E9&#160;63&#160;<br/>
SBC&#160;#$63&#160;<br/>
If&#160;not&#160;'REM'&#160;then&#160;loop&#160;to&#160;get&#160;<br/>
C65F&#160;<br/>
D0&#160;9F&#160;<br/>
BNE&#160;$C600&#160;<br/>
next&#160;char.&#160;<br/>
C661&#160;<br/>
85&#160;25&#160;<br/>
STA&#160;$25&#160;<br/>
Transfer&#160;chars&#160;until&#160;same&#160;char&#160;<br/>
C663&#160;<br/>
B5&#160;00&#160;<br/>
LDA&#160;$00,X&#160;<br/>
is&#160;found&#160;again&#160;i.e.&#160;another&#160;&#34;&#160;<br/>
C665&#160;<br/>
F0&#160;E0&#160;<br/>
BEQ&#160;$C647&#160;<br/>
in&#160;a&#160;string.&#160;Or&#160;until&#160;end&#160;of&#160;<br/>
C667&#160;<br/>
C5&#160;25&#160;<br/>
CMP&#160;$25&#160;<br/>
line.&#160;<br/>
C669&#160;<br/>
F0&#160;DC&#160;<br/>
BEQ&#160;$C647&#160;<br/>
C66B&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
C66C&#160;<br/>
99&#160;30&#160;00&#160;<br/>
STA&#160;$0030,Y&#160;<br/>
C66F&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
C670&#160;<br/>
D0&#160;F1&#160;<br/>
BNE&#160;$C663&#160;<br/>
C672&#160;<br/>
A6&#160;E9&#160;<br/>
LDX&#160;$E9&#160;<br/>
Token&#160;match&#160;has&#160;failed,&#160;<br/>
C674&#160;<br/>
E6&#160;26&#160;<br/>
INC&#160;$26&#160;<br/>
restore&#160;X,&#160;increment&#160;token&#160;no.&#160;<br/>
C676&#160;<br/>
B1&#160;18&#160;<br/>
LDA&#160;($18),Y&#160;<br/>
C678&#160;<br/>
08&#160;<br/>
PHP&#160;<br/>
Save&#160;char&#160;of&#160;current&#160;char.&#160;<br/>
C679&#160;<br/>
E6&#160;18&#160;<br/>
INC&#160;$18&#160;<br/>
C67B&#160;<br/>
D0&#160;02&#160;<br/>
BNE&#160;$C67F&#160;<br/>
Move&#160;to&#160;next&#160;one.&#160;<br/>
C67D&#160;<br/>
E6&#160;19&#160;<br/>
INC&#160;$19&#160;<br/>
C67F&#160;<br/>
28&#160;<br/>
PLP&#160;<br/>
C680&#160;<br/>
10&#160;F4&#160;<br/>
BPL&#160;$C676&#160;<br/>
If&#160;not&#160;end,&#160;loop&#160;to&#160;another.&#160;<br/>
C682&#160;<br/>
B1&#160;18&#160;<br/>
LDA&#160;($18),Y&#160;<br/>
If&#160;more&#160;tokens&#160;left,&#160;try&#160;<br/>
C684&#160;<br/>
D0&#160;B2&#160;<br/>
BNE&#160;$C638&#160;<br/>
another&#160;match.&#160;<br/>
C686&#160;<br/>
B5&#160;00&#160;<br/>
LDA&#160;$00,X&#160;<br/>
No&#160;tokens&#160;left&#160;so&#160;just&#160;use&#160;<br/>
C688&#160;<br/>
10&#160;BB&#160;<br/>
BPL&#160;$C645&#160;<br/>
char&#160;from&#160;line.&#160;<br/>
C68A&#160;<br/>
99&#160;32&#160;00&#160;<br/>
STA&#160;$0032,Y&#160;<br/>
C68D&#160;<br/>
A9&#160;34&#160;<br/>
LDA&#160;#$34&#160;<br/>
Point&#160;$E9/$EA&#160;at&#160;start&#160;of&#160;line&#160;<br/>
C68F&#160;<br/>
85&#160;E9&#160;<br/>
STA&#160;$E9&#160;<br/>
and&#160;exit.&#160;<br/>
C691&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>C692&#160;<br/>
20&#160;E2&#160;CA&#160;<br/>
JSR&#160;$CAE2&#160;<br/>
<b>EDIT</b>&#160;Get&#160;integer&#160;from&#160;text.&#160;<br/>
Pa&#160;&#160;<br/>
ge&#160;9&#160;<br/>
<hr/>
<a name=10></a>C695&#160;<br/>
20&#160;B3&#160;C6&#160;<br/>
JSR&#160;$C6B3&#160;<br/>
Look&#160;for&#160;line&#160;number&#160;in&#160;text.&#160;<br/>
C698&#160;<br/>
90&#160;16&#160;<br/>
BCC&#160;$C6B0&#160;<br/>
Branch&#160;if&#160;failed.&#160;<br/>
C69A&#160;<br/>
6E&#160;F2&#160;02&#160;<br/>
ROR&#160;$02F2&#160;<br/>
Set&#160;Edit&#160;flag.&#160;<br/>
C69D&#160;<br/>
20&#160;6C&#160;C7&#160;<br/>
JSR&#160;$C76C&#160;<br/>
Print&#160;line.&#160;<br/>
C6A0&#160;<br/>
4E&#160;F2&#160;02&#160;<br/>
LSR&#160;$02F2&#160;<br/>
Clear&#160;Edit&#160;flag.&#160;<br/>
C6A3&#160;<br/>
20&#160;F0&#160;CB&#160;<br/>
JSR&#160;$CBF0&#160;<br/>
New&#160;line.&#160;<br/>
C6A6&#160;<br/>
A9&#160;0B&#160;<br/>
LDA&#160;#$0B&#160;<br/>
Send&#160;cursor&#160;up&#160;one&#160;line.&#160;<br/>
C6A8&#160;<br/>
20&#160;D9&#160;CC&#160;<br/>
JSR&#160;$CCD9&#160;<br/>
C6AB&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
C6AC&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
C6AD&#160;<br/>
4C&#160;B7&#160;C4&#160;<br/>
JMP&#160;$C4B7&#160;<br/>
Immediate&#160;mode.&#160;<br/>
&#160;<br/>C6B0&#160;<br/>
4C&#160;23&#160;CA&#160;<br/>
JMP&#160;$CA23&#160;<br/>
Print&#160;&#34;UNDEF'D&#160;STATEMENT&#160;..&#34;&#160;<br/>
&#160;<br/>C6B3&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
<b>LOOK&#160;FOR&#160;LINE&#160;NUMBER.</b>&#160;<br/>
C6B5&#160;<br/>
85&#160;1D&#160;<br/>
STA&#160;$1D&#160;<br/>
Reset&#160;line&#160;count.&#160;<br/>
C6B7&#160;<br/>
85&#160;1E&#160;<br/>
STA&#160;$1E&#160;<br/>
C6B9&#160;<br/>
A5&#160;9A&#160;<br/>
LDA&#160;$9A&#160;<br/>
Get&#160;begin&#160;Basic.&#160;<br/>
C6BB&#160;<br/>
A6&#160;9B&#160;<br/>
LDX&#160;$9B&#160;<br/>
C6BD&#160;<br/>
A0&#160;01&#160;<br/>
LDY&#160;#$01&#160;<br/>
C6BF&#160;<br/>
85&#160;CE&#160;<br/>
STA&#160;$CE&#160;<br/>
Set&#160;up&#160;pointer&#160;into&#160;line.&#160;<br/>
C6C1&#160;<br/>
86&#160;CF&#160;<br/>
STX&#160;$CF&#160;<br/>
C6C3&#160;<br/>
B1&#160;CE&#160;<br/>
LDA&#160;($CE),Y&#160;<br/>
Exit&#160;if&#160;end&#160;of&#160;program&#160;(C=0)&#160;<br/>
C6C5&#160;<br/>
F0&#160;25&#160;<br/>
BEQ&#160;$C6EC&#160;<br/>
C6C7&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
Move&#160;pointer&#160;to&#160;line&#160;number&#160;<br/>
C6C8&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
(MSB).&#160;<br/>
C6C9&#160;<br/>
E6&#160;1D&#160;<br/>
INC&#160;$1D&#160;<br/>
Increment&#160;line&#160;count.&#160;<br/>
C6CB&#160;<br/>
D0&#160;02&#160;<br/>
BNE&#160;$C6CF&#160;<br/>
C6CD&#160;<br/>
E6&#160;1E&#160;<br/>
INC&#160;$1E&#160;<br/>
C6CF&#160;<br/>
A5&#160;34&#160;<br/>
LDA&#160;$34&#160;<br/>
Compare&#160;MSB&#160;of&#160;line&#160;number&#160;<br/>
C6D1&#160;<br/>
D1&#160;CE&#160;<br/>
CMP&#160;($CE),Y&#160;<br/>
with&#160;one&#160;wanted.&#160;<br/>
C6D3&#160;<br/>
90&#160;18&#160;<br/>
BCC&#160;$C6ED&#160;<br/>
Branch&#160;if&#160;beyond&#160;prog&#160;line&#160;no.&#160;<br/>
C6D5&#160;<br/>
F0&#160;03&#160;<br/>
BEQ&#160;$C6DA&#160;<br/>
Match&#160;in&#160;MSB&#160;made&#160;otherwise&#160;<br/>
C6D7&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
try&#160;next&#160;line.&#160;<br/>
C6D8&#160;<br/>
D0&#160;09&#160;<br/>
BNE&#160;$C6E3&#160;<br/>
C6DA&#160;<br/>
A5&#160;33&#160;<br/>
LDA&#160;$33&#160;<br/>
Compare&#160;LSB&#160;of&#160;line&#160;number.&#160;<br/>
C6DC&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
C6DD&#160;<br/>
D1&#160;CE&#160;<br/>
CMP&#160;($CE),Y&#160;<br/>
C6DF&#160;<br/>
90&#160;0C&#160;<br/>
BCC&#160;$C6ED&#160;<br/>
Line&#160;number&#160;too&#160;big.&#160;<br/>
C6E1&#160;<br/>
F0&#160;0A&#160;<br/>
BEQ&#160;$C6ED&#160;<br/>
Line&#160;number&#160;match&#160;made.&#160;<br/>
C6E3&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
Get&#160;line&#160;link&#160;bytes&#160;into&#160;A&#160;<br/>
C6E4&#160;<br/>
B1&#160;CE&#160;<br/>
LDA&#160;($CE),Y&#160;<br/>
and&#160;X.&#160;$CE/$CF&#160;left&#160;pointing&#160;<br/>
C6E6&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
to&#160;start&#160;of&#160;line.&#160;<br/>
C6E7&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
C6E8&#160;<br/>
B1&#160;CE&#160;<br/>
LDA&#160;($CE),Y&#160;<br/>
C6EA&#160;<br/>
B0&#160;D1&#160;<br/>
BCS&#160;$C6BD&#160;<br/>
C6EC&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
Line&#160;not&#160;found&#160;exit.&#160;<br/>
C6ED&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>C6EE&#160;<br/>
D0&#160;FD&#160;<br/>
BNE&#160;$C6ED&#160;<br/>
<b>NEW</b>&#160;<br/>
C6F0&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
Set&#160;trace&#160;to&#160;off.&#160;<br/>
C6F2&#160;<br/>
4E&#160;F4&#160;02&#160;<br/>
LSR&#160;$02F4&#160;<br/>
C6F5&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
Set&#160;End&#160;of&#160;Basic&#160;pointer&#160;to&#160;2&#160;<br/>
C6F6&#160;<br/>
91&#160;9A&#160;<br/>
STA&#160;($9A),Y&#160;<br/>
beyond&#160;Start&#160;Basic&#160;and&#160;clear&#160;<br/>
C6F8&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
the&#160;bytes&#160;inbetween&#160;-&#160;empty&#160;<br/>
C6F9&#160;<br/>
91&#160;9A&#160;<br/>
STA&#160;($9A),Y&#160;<br/>
program.&#160;<br/>
C6FB&#160;<br/>
A5&#160;9A&#160;<br/>
LDA&#160;$9A&#160;<br/>
C6FD&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
C6FE&#160;<br/>
69&#160;02&#160;<br/>
ADC&#160;#$02&#160;<br/>
C700&#160;<br/>
85&#160;9C&#160;<br/>
STA&#160;$9C&#160;<br/>
C702&#160;<br/>
A5&#160;9B&#160;<br/>
LDA&#160;$9B&#160;<br/>
C704&#160;<br/>
69&#160;00&#160;<br/>
ADC&#160;#$00&#160;<br/>
C706&#160;<br/>
85&#160;9D&#160;<br/>
STA&#160;$9D&#160;<br/>
C708&#160;<br/>
20&#160;3A&#160;C7&#160;<br/>
JSR&#160;$C73A&#160;<br/>
Reset&#160;program&#160;pointer.&#160;<br/>
Pag&#160;&#160;e&#160;10&#160;<br/>
<hr/>
<a name=11></a>C70B&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
C70D&#160;<br/>
D0&#160;2A&#160;<br/>
BNE&#160;$C739&#160;<br/>
<b>CLEAR</b>&#160;<br/>
C70F&#160;<br/>
A5&#160;A6&#160;<br/>
LDA&#160;$A6&#160;<br/>
Set&#160;last&#160;string&#160;allocated&#160;to&#160;<br/>
C711&#160;<br/>
A4&#160;A7&#160;<br/>
LDY&#160;$A7&#160;<br/>
the&#160;current&#160;value&#160;in&#160;Himem.&#160;<br/>
C713&#160;<br/>
85&#160;A2&#160;<br/>
STA&#160;$A2&#160;<br/>
C715&#160;<br/>
84&#160;A3&#160;<br/>
STY&#160;$A3&#160;<br/>
C717&#160;<br/>
A5&#160;9C&#160;<br/>
LDA&#160;$9C&#160;<br/>
Set&#160;End&#160;Variables&#160;pointer&#160;and&#160;<br/>
C719&#160;<br/>
A4&#160;9D&#160;<br/>
LDY&#160;$9D&#160;<br/>
End&#160;Arrays&#160;pointer&#160;to&#160;value&#160;<br/>
C71B&#160;<br/>
85&#160;9E&#160;<br/>
STA&#160;$9E&#160;<br/>
held&#160;in&#160;End&#160;Basic&#160;Pointer.&#160;<br/>
C71D&#160;<br/>
84&#160;9F&#160;<br/>
STY&#160;$9F&#160;<br/>
This&#160;deletes&#160;all&#160;variables&#160;and&#160;<br/>
C71F&#160;<br/>
85&#160;A0&#160;<br/>
STA&#160;$A0&#160;<br/>
arrays.&#160;<br/>
C721&#160;<br/>
84&#160;A1&#160;<br/>
STY&#160;$A1&#160;<br/>
C723&#160;<br/>
20&#160;52&#160;C9&#160;<br/>
JSR&#160;$C952&#160;<br/>
Reset&#160;'DATA'&#160;pointer.&#160;<br/>
C726&#160;<br/>
A2&#160;88&#160;<br/>
LDX&#160;#$88&#160;<br/>
C728&#160;<br/>
86&#160;85&#160;<br/>
STX&#160;$85&#160;<br/>
C72A&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Place&#160;calling&#160;routine&#160;on&#160;top&#160;<br/>
C72B&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
of&#160;the&#160;stack.&#160;<br/>
C72C&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
C72D&#160;<br/>
A2&#160;FE&#160;<br/>
LDX&#160;#$FE&#160;<br/>
C72F&#160;<br/>
9A&#160;<br/>
TXS&#160;<br/>
C730&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
C731&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
C732&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
C733&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
Reset&#160;high&#160;byte&#160;of&#160;End&#160;of&#160;<br/>
C735&#160;<br/>
85&#160;AD&#160;<br/>
STA&#160;$AD&#160;<br/>
Executed&#160;Program&#160;pointer.&#160;<br/>
C737&#160;<br/>
85&#160;2B&#160;<br/>
STA&#160;$2B&#160;<br/>
C739&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>C73A&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
This&#160;routine&#160;sets&#160;the&#160;current&#160;<br/>
C73B&#160;<br/>
A5&#160;9A&#160;<br/>
LDA&#160;$9A&#160;<br/>
program&#160;position&#160;pointer&#160;to&#160;<br/>
C73D&#160;<br/>
69&#160;FF&#160;<br/>
ADC&#160;#$FF&#160;<br/>
the&#160;byte&#160;before&#160;the&#160;Start&#160;of&#160;<br/>
C73F&#160;<br/>
85&#160;E9&#160;<br/>
STA&#160;$E9&#160;<br/>
Basic.&#160;<br/>
C741&#160;<br/>
A5&#160;9B&#160;<br/>
LDA&#160;$9B&#160;<br/>
C743&#160;<br/>
69&#160;FF&#160;<br/>
ADC&#160;#$FF&#160;<br/>
C745&#160;<br/>
85&#160;EA&#160;<br/>
STA&#160;$EA&#160;<br/>
C747&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>C748&#160;<br/>
08&#160;<br/>
PHP&#160;<br/>
<b>LIST</b>&#160;<br/>
C749&#160;<br/>
20&#160;E2&#160;CA&#160;<br/>
JSR&#160;$CAE2&#160;<br/>
Get&#160;line&#160;number&#160;and&#160;look&#160;for&#160;<br/>
C74C&#160;<br/>
20&#160;B3&#160;C6&#160;<br/>
JSR&#160;$C6B3&#160;<br/>
it&#160;in&#160;program.&#160;<br/>
C74F&#160;<br/>
28&#160;<br/>
PLP&#160;<br/>
C750&#160;<br/>
F0&#160;14&#160;<br/>
BEQ&#160;$C766&#160;<br/>
If&#160;no&#160;number,&#160;list&#160;whole&#160;prog&#160;<br/>
C752&#160;<br/>
20&#160;E8&#160;00&#160;<br/>
JSR&#160;$00E8&#160;<br/>
If&#160;only&#160;one&#160;line&#160;number&#160;then&#160;<br/>
C755&#160;<br/>
F0&#160;15&#160;<br/>
BEQ&#160;$C76C&#160;<br/>
just&#160;list&#160;it.&#160;<br/>
C757&#160;<br/>
C9&#160;CD&#160;<br/>
CMP&#160;#$CD&#160;<br/>
If&#160;no&#160;&#34;-&#34;&#160;then&#160;exit.&#160;<br/>
C759&#160;<br/>
D0&#160;92&#160;<br/>
BNE&#160;$C6ED&#160;<br/>
C75B&#160;<br/>
20&#160;E2&#160;00&#160;<br/>
JSR&#160;$00E2&#160;<br/>
Get&#160;next&#160;non&#160;space&#160;char.&#160;<br/>
C75E&#160;<br/>
F0&#160;06&#160;<br/>
BEQ&#160;$C766&#160;<br/>
C760&#160;<br/>
20&#160;E2&#160;CA&#160;<br/>
JSR&#160;$CAE2&#160;<br/>
Get&#160;line&#160;number.&#160;<br/>
C763&#160;<br/>
F0&#160;07&#160;<br/>
BEQ&#160;$C76C&#160;<br/>
If&#160;end,&#160;list&#160;between&#160;the&#160;two&#160;<br/>
C765&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
numbers&#160;else&#160;exit.&#160;<br/>
&#160;<br/>C766&#160;<br/>
A9&#160;FF&#160;<br/>
LDA&#160;#$FF&#160;<br/>
Set&#160;upper&#160;line&#160;limit&#160;to&#160;#FFFF&#160;<br/>
C768&#160;<br/>
85&#160;33&#160;<br/>
STA&#160;$33&#160;<br/>
C76A&#160;<br/>
85&#160;34&#160;<br/>
STA&#160;$34&#160;<br/>
C76C&#160;<br/>
A0&#160;01&#160;<br/>
LDY&#160;#$01&#160;<br/>
C76E&#160;<br/>
B1&#160;CE&#160;<br/>
LDA&#160;($CE),Y&#160;<br/>
Exit&#160;if&#160;end&#160;of&#160;program.&#160;<br/>
C770&#160;<br/>
F0&#160;4D&#160;<br/>
BEQ&#160;$C7BF&#160;<br/>
C772&#160;<br/>
20&#160;62&#160;C9&#160;<br/>
JSR&#160;$C962&#160;<br/>
Test&#160;for&#160;CTRL&#160;C.&#160;<br/>
C775&#160;<br/>
C9&#160;20&#160;<br/>
CMP&#160;#$20&#160;<br/>
If&#160;not&#160;space&#160;then&#160;skip&#160;next&#160;<br/>
C777&#160;<br/>
D0&#160;0E&#160;<br/>
BNE&#160;$C787&#160;<br/>
section.&#160;<br/>
C779&#160;<br/>
4E&#160;DF&#160;02&#160;<br/>
LSR&#160;$02DF&#160;<br/>
Clear&#160;key&#160;pressed&#160;flag.&#160;<br/>
C77C&#160;<br/>
AD&#160;DF&#160;02&#160;<br/>
LDA&#160;$02DF&#160;<br/>
Wait&#160;until&#160;key&#160;is&#160;pressed.&#160;<br/>
C77F&#160;<br/>
10&#160;FB&#160;<br/>
BPL&#160;$C77C&#160;<br/>
Pag&#160;&#160;e&#160;11&#160;<br/>
<hr/>
<a name=12></a>C781&#160;<br/>
20&#160;62&#160;C9&#160;<br/>
JSR&#160;$C962&#160;<br/>
Test&#160;for&#160;CTRL&#160;C.&#160;<br/>
C784&#160;<br/>
4E&#160;DF&#160;02&#160;<br/>
LSR&#160;$02DF&#160;<br/>
C1ear&#160;key&#160;pressed&#160;flag.&#160;<br/>
C787&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
C788&#160;<br/>
B1&#160;CE&#160;<br/>
LDA&#160;($CE),Y&#160;<br/>
Get&#160;line&#160;number&#160;into&#160;X&#160;(LSB)&#160;<br/>
C78A&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
and&#160;A&#160;(MSB).&#160;<br/>
C78B&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
C78C&#160;<br/>
B1&#160;CE&#160;<br/>
LDA&#160;($CE),Y&#160;<br/>
C78E&#160;<br/>
C5&#160;34&#160;<br/>
CMP&#160;$34&#160;<br/>
If&#160;line&#160;number&#160;is&#160;at&#160;limit&#160;<br/>
C790&#160;<br/>
D0&#160;04&#160;<br/>
BNE&#160;$C796&#160;<br/>
then&#160;skip&#160;test.&#160;<br/>
C792&#160;<br/>
E4&#160;33&#160;<br/>
CPX&#160;$33&#160;<br/>
C794&#160;<br/>
F0&#160;02&#160;<br/>
BEQ&#160;$C798&#160;<br/>
C796&#160;<br/>
B0&#160;27&#160;<br/>
BCS&#160;$C7BF&#160;<br/>
Exit&#160;if&#160;over&#160;line&#160;no.&#160;limit.&#160;<br/>
C798&#160;<br/>
84&#160;B8&#160;<br/>
STY&#160;$B8&#160;<br/>
save&#160;A&#160;and&#160;Y.&#160;<br/>
C79A&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
C79B&#160;<br/>
20&#160;F0&#160;CB&#160;<br/>
JSR&#160;$CBF0&#160;<br/>
Newline.&#160;<br/>
C79E&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
C79F&#160;<br/>
20&#160;C5&#160;E0&#160;<br/>
JSR&#160;$E0C5&#160;<br/>
Print&#160;line&#160;number.&#160;<br/>
C7A2&#160;<br/>
A9&#160;20&#160;<br/>
LDA&#160;#$20&#160;<br/>
Get&#160;space.&#160;<br/>
C7A4&#160;<br/>
A4&#160;B8&#160;<br/>
LDY&#160;$B8&#160;<br/>
C7A6&#160;<br/>
29&#160;7F&#160;<br/>
AND&#160;#$7F&#160;<br/>
C7A8&#160;<br/>
20&#160;D9&#160;CC&#160;<br/>
JSR&#160;$CCD9&#160;<br/>
Print&#160;character.&#160;<br/>
C7AB&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
C7AC&#160;<br/>
F0&#160;11&#160;<br/>
BEQ&#160;$C7BF&#160;<br/>
Exit&#160;if&#160;line&#160;too&#160;long.&#160;<br/>
C7AE&#160;<br/>
B1&#160;CE&#160;<br/>
LDA&#160;($CE),Y&#160;<br/>
C7B0&#160;<br/>
D0&#160;1E&#160;<br/>
BNE&#160;$C7D0&#160;<br/>
If&#160;not&#160;end&#160;of&#160;line&#160;print&#160;char&#160;<br/>
C7B2&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
or&#160;token.&#160;<br/>
C7B3&#160;<br/>
B1&#160;CE&#160;<br/>
LDA&#160;($CE),Y&#160;<br/>
C7B5&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
C7B6&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
C7B7&#160;<br/>
B1&#160;CE&#160;<br/>
LDA&#160;($CE),Y&#160;<br/>
C7B9&#160;<br/>
86&#160;CE&#160;<br/>
STX&#160;$CE&#160;<br/>
Point&#160;to&#160;next&#160;line.&#160;<br/>
C7BB&#160;<br/>
85&#160;CF&#160;<br/>
STA&#160;$CF&#160;<br/>
C7BD&#160;<br/>
D0&#160;AD&#160;<br/>
BNE&#160;$C76C&#160;<br/>
Go&#160;round&#160;and&#160;list&#160;next&#160;line.&#160;<br/>
C7BF&#160;<br/>
2C&#160;F2&#160;02&#160;<br/>
BIT&#160;$02F2&#160;<br/>
If&#160;'test&#160;return1&#160;flag&#160;is&#160;set&#160;<br/>
C7C2&#160;<br/>
10&#160;01&#160;<br/>
BPL&#160;$C7C5&#160;<br/>
then&#160;exit.&#160;<br/>
C7C4&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>C7C5&#160;<br/>
20&#160;F0&#160;CB&#160;<br/>
JSR&#160;$CBF0&#160;<br/>
Newline.&#160;<br/>
C7C8&#160;<br/>
20&#160;2F&#160;C8&#160;<br/>
JSR&#160;$C82F&#160;<br/>
Reset&#160;output&#160;to&#160;screen.&#160;<br/>
C7CB&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Remove&#160;address&#160;of&#160;calling&#160;<br/>
C7CC&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
routine&#160;and&#160;restart&#160;Basic.&#160;<br/>
C7CD&#160;<br/>
4C&#160;A8&#160;C4&#160;<br/>
JMP&#160;$C4A8&#160;<br/>
&#160;<br/>C7D0&#160;<br/>
10&#160;D6&#160;<br/>
BPL&#160;$C7A8&#160;<br/>
Print&#160;char&#160;if&#160;not&#160;a&#160;token.&#160;<br/>
C7D2&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
C7D3&#160;<br/>
E9&#160;7F&#160;<br/>
SBC&#160;#$7F&#160;<br/>
Get&#160;token&#160;count&#160;into&#160;X.&#160;<br/>
C7D5&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
C7D6&#160;<br/>
84&#160;B8&#160;<br/>
STY&#160;$B8&#160;<br/>
Save&#160;Y.&#160;<br/>
C7D8&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
Clear&#160;Y.&#160;<br/>
C7DA&#160;<br/>
A9&#160;E9&#160;<br/>
LDA&#160;#$E9&#160;<br/>
Set&#160;pointer&#160;to&#160;point&#160;to&#160;start&#160;<br/>
C7DC&#160;<br/>
85&#160;18&#160;<br/>
STA&#160;$18&#160;<br/>
1&#160;byte&#160;before&#160;keyword&#160;list.&#160;<br/>
C7DE&#160;<br/>
A9&#160;C0&#160;<br/>
LDA&#160;#$C0&#160;<br/>
C7E0&#160;<br/>
85&#160;19&#160;<br/>
STA&#160;$19&#160;<br/>
Increment&#160;the&#160;pointer&#160;at&#160;$18/&#160;<br/>
C7E2&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
$19&#160;until&#160;correct&#160;keyword&#160;is&#160;<br/>
C7E3&#160;<br/>
F0&#160;0D&#160;<br/>
BEQ&#160;$C7F2&#160;<br/>
found.&#160;<br/>
C7E5&#160;<br/>
E6&#160;18&#160;<br/>
INC&#160;$18&#160;<br/>
C7E7&#160;<br/>
D0&#160;02&#160;<br/>
BNE&#160;$C7EB&#160;<br/>
C7E9&#160;<br/>
E6&#160;19&#160;<br/>
INC&#160;$19&#160;<br/>
C7EB&#160;<br/>
B1&#160;18&#160;<br/>
LDA&#160;($18),Y&#160;<br/>
C7ED&#160;<br/>
10&#160;F6&#160;<br/>
BPL&#160;$C7E5&#160;<br/>
C7EF&#160;<br/>
4C&#160;E2&#160;C7&#160;<br/>
JMP&#160;$C7E2&#160;<br/>
C7F2&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
Get&#160;next&#160;char.&#160;<br/>
C7F3&#160;<br/>
B1&#160;18&#160;<br/>
LDA&#160;($18),Y&#160;<br/>
C7F5&#160;<br/>
30&#160;AD&#160;<br/>
BMI&#160;$C7A4&#160;<br/>
Another&#160;token.&#160;<br/>
Pag&#160;&#160;e&#160;12&#160;<br/>
<hr/>
<a name=13></a>C7F7&#160;<br/>
20&#160;D9&#160;CC&#160;<br/>
JSR&#160;$CCD9&#160;<br/>
Print&#160;char.&#160;<br/>
C7FA&#160;<br/>
4C&#160;F2&#160;C7&#160;<br/>
JMP&#160;$C7F2&#160;<br/>
Go&#160;round&#160;again.&#160;<br/>
&#160;<br/>C7FD&#160;<br/>
20&#160;16&#160;C8&#160;<br/>
JSR&#160;$C816&#160;<br/>
<b>LLIST</b>&#160;<br/>
C800&#160;<br/>
4E&#160;F2&#160;02&#160;<br/>
LSR&#160;$02F2&#160;<br/>
Set&#160;output&#160;to&#160;printer,&#160;clear&#160;<br/>
C803&#160;<br/>
20&#160;E8&#160;00&#160;<br/>
JSR&#160;$00E8&#160;<br/>
&#34;list&#160;return&#34;&#160;flag&#160;and&#160;perform&#160;<br/>
C806&#160;<br/>
4C&#160;48&#160;C7&#160;<br/>
JMP&#160;$C748&#160;<br/>
list.&#160;<br/>
&#160;<br/>C809&#160;<br/>
20&#160;16&#160;C8&#160;<br/>
JSR&#160;$C816&#160;<br/>
<b>LPRINT</b>&#160;<br/>
C80C&#160;<br/>
20&#160;E8&#160;00&#160;<br/>
JSR&#160;$00E8&#160;<br/>
Set&#160;output&#160;to&#160;printer,&#160;perform&#160;<br/>
C80F&#160;<br/>
20&#160;AB&#160;CB&#160;<br/>
JSR&#160;$CBAB&#160;<br/>
PRINT&#160;and&#160;set&#160;output&#160;back&#160;to&#160;<br/>
C812&#160;<br/>
20&#160;2F&#160;C8&#160;<br/>
JSR&#160;$C82F&#160;<br/>
screen.&#160;<br/>
C815&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>C816&#160;<br/>
2C&#160;F1&#160;02&#160;<br/>
BIT&#160;$02F1&#160;<br/>
<b>SET&#160;OUTPUT&#160;TO&#160;PRINTER.</b>&#160;<br/>
C819&#160;<br/>
30&#160;39&#160;<br/>
BMI&#160;$C854&#160;<br/>
Exit&#160;if&#160;printer&#160;is&#160;on.&#160;<br/>
C81B&#160;<br/>
A5&#160;30&#160;<br/>
LDA&#160;$30&#160;<br/>
Save&#160;Basic&#160;Screen&#160;cursor&#160;<br/>
C81D&#160;<br/>
8D&#160;59&#160;02&#160;<br/>
STA&#160;$0259&#160;<br/>
position.&#160;<br/>
C820&#160;<br/>
AD&#160;58&#160;02&#160;<br/>
LDA&#160;$0258&#160;<br/>
Transfer&#160;Printer&#160;cursor&#160;<br/>
C823&#160;<br/>
85&#160;30&#160;<br/>
STA&#160;$30&#160;<br/>
position.&#160;<br/>
C825&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
C826&#160;<br/>
6E&#160;F1&#160;02&#160;<br/>
ROR&#160;$02F1&#160;<br/>
Set&#160;printer&#160;to&#160;on.&#160;<br/>
C829&#160;<br/>
AD&#160;56&#160;02&#160;<br/>
LDA&#160;$0256&#160;<br/>
Get&#160;printer&#160;line&#160;width&#160;and&#160;set&#160;<br/>
C82C&#160;<br/>
4C&#160;44&#160;C8&#160;<br/>
JMP&#160;$C844&#160;<br/>
up&#160;linewidth.&#160;<br/>
&#160;<br/>C82F&#160;<br/>
2C&#160;F1&#160;02&#160;<br/>
BIT&#160;$02F1&#160;<br/>
<b>SET&#160;OUTPUT&#160;TO&#160;SCREEN.</b>&#160;<br/>
C832&#160;<br/>
10&#160;20&#160;<br/>
BPL&#160;$C854&#160;<br/>
C834&#160;<br/>
A5&#160;30&#160;<br/>
LDA&#160;$30&#160;<br/>
Save&#160;Basic&#160;printer&#160;cursor&#160;<br/>
C836&#160;<br/>
8D&#160;58&#160;02&#160;<br/>
STA&#160;$0258&#160;<br/>
position.&#160;<br/>
C839&#160;<br/>
AD&#160;59&#160;02&#160;<br/>
LDA&#160;$0259&#160;<br/>
Transfer&#160;Basic&#160;screen&#160;<br/>
C83C&#160;<br/>
85&#160;30&#160;<br/>
STA&#160;$30&#160;<br/>
position.&#160;<br/>
C83E&#160;<br/>
4E&#160;F1&#160;02&#160;<br/>
LSR&#160;$02F1&#160;<br/>
Clear&#160;printer&#160;flag.&#160;<br/>
C841&#160;<br/>
AD&#160;57&#160;02&#160;<br/>
LDA&#160;$0257&#160;<br/>
Transfer&#160;screen&#160;width&#160;to&#160;$31&#160;<br/>
C844&#160;<br/>
85&#160;31&#160;<br/>
STA&#160;$31&#160;<br/>
and&#160;set&#160;content&#160;of&#160;$32&#160;to&#160;the&#160;<br/>
C846&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
multiple&#160;of&#160;8&#160;that&#160;is&#160;less&#160;<br/>
C847&#160;<br/>
E9&#160;08&#160;<br/>
SBC&#160;#$08&#160;<br/>
than&#160;or&#160;equal&#160;to&#160;content&#160;of&#160;<br/>
C849&#160;<br/>
B0&#160;FB&#160;<br/>
BCS&#160;$C846&#160;<br/>
$31.&#160;<br/>
C84B&#160;<br/>
49&#160;FF&#160;<br/>
EOR&#160;#$FF&#160;<br/>
C84D&#160;<br/>
E9&#160;06&#160;<br/>
SBC&#160;#$06&#160;<br/>
C84F&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
C850&#160;<br/>
65&#160;31&#160;<br/>
ADC&#160;$31&#160;<br/>
C852&#160;<br/>
85&#160;32&#160;<br/>
STA&#160;$32&#160;<br/>
C854&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>C855&#160;<br/>
A9&#160;80&#160;<br/>
LDA&#160;#$80&#160;<br/>
<b>FOR</b>&#160;Set&#160;'no&#160;integer&#160;<br/>
C857&#160;<br/>
85&#160;2B&#160;<br/>
STA&#160;$2B&#160;<br/>
variables'&#160;flag.&#160;<br/>
C859&#160;<br/>
20&#160;1C&#160;CB&#160;<br/>
JSR&#160;$CB1C&#160;<br/>
Call&#160;'LET'&#160;to&#160;assign&#160;loop&#160;var.&#160;<br/>
C85C&#160;<br/>
20&#160;C6&#160;C3&#160;<br/>
JSR&#160;$C3C6&#160;<br/>
Test&#160;&amp;&#160;branch&#160;if&#160;that&#160;loop&#160;<br/>
C85F&#160;<br/>
D0&#160;05&#160;<br/>
BNE&#160;$C866&#160;<br/>
doesn't&#160;already&#160;exist.&#160;<br/>
C861&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
Write&#160;over&#160;the&#160;old&#160;loop&#160;which&#160;<br/>
C862&#160;<br/>
69&#160;0F&#160;<br/>
ADC&#160;#$0F&#160;<br/>
has&#160;the&#160;same&#160;variable&#160;name&#160;-&#160;<br/>
C864&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
old&#160;loop&#160;is&#160;lost.&#160;<br/>
C865&#160;<br/>
9A&#160;<br/>
TXS&#160;<br/>
C866&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
C867&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
C868&#160;<br/>
A9&#160;09&#160;<br/>
LDA&#160;#$09&#160;<br/>
Check&#160;for&#160;18&#160;free&#160;bytes&#160;of&#160;<br/>
C86A&#160;<br/>
20&#160;37&#160;C4&#160;<br/>
JSR&#160;$C437&#160;<br/>
space&#160;on&#160;the&#160;stack.&#160;<br/>
C86D&#160;<br/>
20&#160;4E&#160;CA&#160;<br/>
JSR&#160;$CA4E&#160;<br/>
Find&#160;end&#160;of&#160;statement.&#160;<br/>
C870&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
C871&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
Save&#160;end&#160;of&#160;statement&#160;<br/>
C872&#160;<br/>
65&#160;E9&#160;<br/>
ADC&#160;$E9&#160;<br/>
address&#160;on&#160;the&#160;stack,&#160;low&#160;<br/>
C874&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
byte&#160;first.&#160;<br/>
C875&#160;<br/>
A5&#160;EA&#160;<br/>
LDA&#160;$EA&#160;<br/>
C877&#160;<br/>
69&#160;00&#160;<br/>
ADC&#160;#$00&#160;<br/>
Pag&#160;&#160;e&#160;13&#160;<br/>
<hr/>
<a name=14></a>C879&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
C87A&#160;<br/>
A5&#160;A9&#160;<br/>
LDA&#160;$A9&#160;<br/>
Save&#160;current&#160;line&#160;number&#160;on&#160;<br/>
C87C&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
stack.&#160;<br/>
C87D&#160;<br/>
A5&#160;A8&#160;<br/>
LDA&#160;$A8&#160;<br/>
C87F&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
C880&#160;<br/>
A9&#160;C3&#160;<br/>
LDA&#160;#$C3&#160;<br/>
Search&#160;for&#160;a&#160;'TO'&#160;token,&#160;give&#160;<br/>
C882&#160;<br/>
20&#160;67&#160;D0&#160;<br/>
JSR&#160;$D067&#160;<br/>
error&#160;if&#160;not&#160;found.&#160;<br/>
C885&#160;<br/>
20&#160;06&#160;CF&#160;<br/>
JSR&#160;$CF06&#160;<br/>
Check&#160;numeric&#160;type.&#160;<br/>
C888&#160;<br/>
20&#160;03&#160;CF&#160;<br/>
JSR&#160;$CF03&#160;<br/>
Evaluate&#160;expression.&#160;<br/>
C88B&#160;<br/>
A5&#160;D5&#160;<br/>
LDA&#160;$D5&#160;<br/>
C88D&#160;<br/>
09&#160;7F&#160;<br/>
ORA&#160;#$7F&#160;<br/>
C88F&#160;<br/>
25&#160;D1&#160;<br/>
AND&#160;$D1&#160;<br/>
C891&#160;<br/>
85&#160;D1&#160;<br/>
STA&#160;$D1&#160;<br/>
C893&#160;<br/>
A9&#160;9E&#160;<br/>
LDA&#160;#$9E&#160;<br/>
Round&#160;off&#160;the&#160;value&#160;in&#160;the&#160;<br/>
C895&#160;<br/>
A0&#160;C8&#160;<br/>
LDY&#160;#$C8&#160;<br/>
main&#160;F1oating&#160;Point&#160;<br/>
C897&#160;<br/>
85&#160;91&#160;<br/>
STA&#160;$91&#160;<br/>
Accumulator&#160;and&#160;then&#160;push&#160;it&#160;<br/>
C899&#160;<br/>
84&#160;92&#160;<br/>
STY&#160;$92&#160;<br/>
on&#160;to&#160;the&#160;stack.&#160;<br/>
C89B&#160;<br/>
4C&#160;C0&#160;CF&#160;<br/>
JMP&#160;$CFC0&#160;<br/>
&#160;<br/>C89E&#160;<br/>
A9&#160;81&#160;<br/>
LDA&#160;#$81&#160;<br/>
Unpack&#160;the&#160;floating&#160;point&#160;<br/>
C8A0&#160;<br/>
A0&#160;DC&#160;<br/>
LDY&#160;#$DC&#160;<br/>
number&#160;at&#160;$DC81&#160;which&#160;is&#160;<br/>
C8A2&#160;<br/>
20&#160;7B&#160;DE&#160;<br/>
JSR&#160;$DE7B&#160;<br/>
default&#160;STEP&#160;size&#160;(1).&#160;<br/>
C8A5&#160;<br/>
20&#160;E8&#160;00&#160;<br/>
JSR&#160;$00E8&#160;<br/>
Get&#160;next&#160;text&#160;character.&#160;<br/>
C8A8&#160;<br/>
C9&#160;CB&#160;<br/>
CMP&#160;#$CB&#160;<br/>
Test&#160;and&#160;branch&#160;if&#160;next&#160;char&#160;<br/>
C8AA&#160;<br/>
D0&#160;06&#160;<br/>
BNE&#160;$C8B2&#160;<br/>
is&#160;not&#160;a&#160;'STEP'&#160;token.&#160;<br/>
C8AC&#160;<br/>
20&#160;E2&#160;00&#160;<br/>
JSR&#160;$00E2&#160;<br/>
Get&#160;next&#160;text&#160;character.&#160;<br/>
C8AF&#160;<br/>
20&#160;03&#160;CF&#160;<br/>
JSR&#160;$CF03&#160;<br/>
Evaluate&#160;expression.&#160;<br/>
C8B2&#160;<br/>
20&#160;13&#160;DF&#160;<br/>
JSR&#160;$DF13&#160;<br/>
Get&#160;sign&#160;of&#160;STEP&#160;into&#160;A.&#160;<br/>
C8B5&#160;<br/>
20&#160;B1&#160;CF&#160;<br/>
JSR&#160;$CFB1&#160;<br/>
Put&#160;FPA&#160;on&#160;stack&#160;etc.&#160;<br/>
C8B8&#160;<br/>
A5&#160;B9&#160;<br/>
LDA&#160;$B9&#160;<br/>
Put&#160;variable&#160;address&#160;and&#160;FOR&#160;<br/>
C8BA&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
token&#160;on&#160;the&#160;stack.&#160;Structure&#160;<br/>
C8BB&#160;<br/>
A5&#160;B8&#160;<br/>
LDA&#160;$B8&#160;<br/>
on&#160;stack&#160;for&#160;this&#160;loop&#160;is&#160;now&#160;<br/>
C8BD&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
complete.&#160;<br/>
C8BE&#160;<br/>
A9&#160;8D&#160;<br/>
LDA&#160;#$8D&#160;<br/>
C8C0&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
&#160;<br/>C8C1&#160;<br/>
20&#160;62&#160;C9&#160;<br/>
JSR&#160;$C962&#160;<br/>
<b>EXECUTE&#160;NEXT&#160;LINE.</b>&#160;<br/>
C8C4&#160;<br/>
A5&#160;E9&#160;<br/>
LDA&#160;$E9&#160;<br/>
Test&#160;for&#160;CTRL&#160;C&#160;<br/>
C8C6&#160;<br/>
A4&#160;EA&#160;<br/>
LDY&#160;$EA&#160;<br/>
C8C8&#160;<br/>
F0&#160;06&#160;<br/>
BEQ&#160;$C8D0&#160;<br/>
Immediate&#160;mode.&#160;<br/>
C8CA&#160;<br/>
85&#160;AC&#160;<br/>
STA&#160;$AC&#160;<br/>
Save&#160;current&#160;position&#160;in&#160;<br/>
C8CC&#160;<br/>
84&#160;AD&#160;<br/>
STY&#160;$AD&#160;<br/>
program.&#160;<br/>
C8CE&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
Branch&#160;if&#160;next&#160;char&#160;in&#160;program&#160;<br/>
C8D0&#160;<br/>
B1&#160;E9&#160;<br/>
LDA&#160;($E9),Y&#160;<br/>
is&#160;not&#160;a&#160;null&#160;(end&#160;of&#160;line).&#160;<br/>
C8D2&#160;<br/>
D0&#160;5B&#160;<br/>
BNE&#160;$C92F&#160;<br/>
C8D4&#160;<br/>
4E&#160;52&#160;02&#160;<br/>
LSR&#160;$0252&#160;<br/>
Clear&#160;pending&#160;E1se&#160;flag.&#160;<br/>
C8D7&#160;<br/>
A0&#160;02&#160;<br/>
LDY&#160;#$02&#160;<br/>
Test&#160;if&#160;the&#160;address&#160;of&#160;next&#160;<br/>
C8D9&#160;<br/>
B1&#160;E9&#160;<br/>
LDA&#160;($E9),Y&#160;<br/>
line&#160;is&#160;not&#160;a&#160;null.&#160;If&#160;it&#160;is,&#160;<br/>
C8DB&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
then&#160;end&#160;program.&#160;<br/>
C8DC&#160;<br/>
D0&#160;03&#160;<br/>
BNE&#160;$C8E1&#160;<br/>
C8DE&#160;<br/>
4C&#160;8A&#160;C9&#160;<br/>
JMP&#160;$C98A&#160;<br/>
C8E1&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
C8E2&#160;<br/>
B1&#160;E9&#160;<br/>
LDA&#160;($E9),Y&#160;<br/>
Load&#160;the&#160;next&#160;line&#160;number&#160;to&#160;<br/>
C8E4&#160;<br/>
85&#160;A8&#160;<br/>
STA&#160;$A8&#160;<br/>
be&#160;executed.&#160;This&#160;is&#160;now&#160;the&#160;<br/>
C8E6&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
current&#160;line&#160;number.&#160;<br/>
C8E7&#160;<br/>
B1&#160;E9&#160;<br/>
LDA&#160;($E9),Y&#160;<br/>
C8E9&#160;<br/>
85&#160;A9&#160;<br/>
STA&#160;$A9&#160;<br/>
C8EB&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
C8EC&#160;<br/>
65&#160;E9&#160;<br/>
ADC&#160;$E9&#160;<br/>
Update&#160;program&#160;position&#160;ptr.&#160;<br/>
C8EE&#160;<br/>
85&#160;E9&#160;<br/>
STA&#160;$E9&#160;<br/>
C8F0&#160;<br/>
90&#160;02&#160;<br/>
BCC&#160;$C8F4&#160;<br/>
C8F2&#160;<br/>
E6&#160;EA&#160;<br/>
INC&#160;$EA&#160;<br/>
C8F4&#160;<br/>
2C&#160;F4&#160;02&#160;<br/>
BIT&#160;$02F4&#160;<br/>
C8F7&#160;<br/>
10&#160;13&#160;<br/>
BPL&#160;$C90C&#160;<br/>
TRACE&#160;is&#160;off.&#160;<br/>
Pag&#160;&#160;e&#160;14&#160;<br/>
<hr/>
<a name=15></a>C8F9&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
C8FA&#160;<br/>
A9&#160;5B&#160;<br/>
LDA&#160;#$5B&#160;<br/>
C8FC&#160;<br/>
20&#160;FB&#160;CC&#160;<br/>
JSR&#160;$CCFB&#160;<br/>
Print&#160;'['to&#160;screen.&#160;<br/>
C8FF&#160;<br/>
A5&#160;A9&#160;<br/>
LDA&#160;$A9&#160;<br/>
C901&#160;<br/>
A6&#160;A8&#160;<br/>
LDX&#160;$A8&#160;<br/>
Print&#160;the&#160;current&#160;line&#160;number&#160;<br/>
C903&#160;<br/>
20&#160;C5&#160;E0&#160;<br/>
JSR&#160;$E0C5&#160;<br/>
on&#160;the&#160;screen.&#160;<br/>
C906&#160;<br/>
A9&#160;5D&#160;<br/>
LDA&#160;#$5D&#160;<br/>
C908&#160;<br/>
20&#160;FB&#160;CC&#160;<br/>
JSR&#160;$CCFB&#160;<br/>
Print&#160;']'&#160;to&#160;screen.&#160;<br/>
C90B&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
C90C&#160;<br/>
20&#160;E2&#160;00&#160;<br/>
JSR&#160;$00E2&#160;<br/>
Step&#160;through&#160;spaces&#160;in&#160;program.&#160;<br/>
C90F&#160;<br/>
20&#160;15&#160;C9&#160;<br/>
JSR&#160;$C915&#160;<br/>
Execute&#160;statement.&#160;<br/>
C912&#160;<br/>
4C&#160;C1&#160;C8&#160;<br/>
JMP&#160;$C8C1&#160;<br/>
&#160;<br/>C915&#160;<br/>
F0&#160;49&#160;<br/>
BEQ&#160;$C960&#160;<br/>
<b>EXECUTE&#160;STATEMENT.</b>&#160;Exit&#160;if&#160;end&#160;<br/>
C917&#160;<br/>
E9&#160;80&#160;<br/>
SBC&#160;#$80&#160;<br/>
of&#160;line.&#160;Branch&#160;if&#160;not&#160;a&#160;token&#160;<br/>
C919&#160;<br/>
90&#160;11&#160;<br/>
BCC&#160;$C92C&#160;<br/>
-&#160;try&#160;an&#160;assignment.&#160;<br/>
C91B&#160;<br/>
C9&#160;42&#160;<br/>
CMP&#160;#$42&#160;<br/>
If&#160;it&#160;is&#160;not&#160;a&#160;statement&#160;token&#160;<br/>
C91D&#160;<br/>
B0&#160;30&#160;<br/>
BCS&#160;$C94F&#160;<br/>
then&#160;&#34;SYNTAX&#160;ERROR&#34;&#160;<br/>
C91F&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
Get&#160;start&#160;address&#160;of&#160;token&#160;<br/>
C920&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
routine&#160;and&#160;put&#160;it&#160;on&#160;stack.&#160;<br/>
C921&#160;<br/>
B9&#160;07&#160;C0&#160;<br/>
LDA&#160;$C007,Y&#160;<br/>
C924&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
C925&#160;<br/>
B9&#160;06&#160;C0&#160;<br/>
LDA&#160;$C006,Y&#160;<br/>
C928&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
C929&#160;<br/>
4C&#160;E2&#160;00&#160;<br/>
JMP&#160;$00E2&#160;<br/>
Clear&#160;spaces&#160;&amp;&#160;enter&#160;routine.&#160;<br/>
C92C&#160;<br/>
4C&#160;1C&#160;CB&#160;<br/>
JMP&#160;$CB1C&#160;<br/>
Jump&#160;to&#160;'LET'&#160;routine.&#160;<br/>
C92F&#160;<br/>
C9&#160;3A&#160;<br/>
CMP&#160;#$3A&#160;<br/>
If&#160;&#34;:&#34;&#160;then&#160;do&#160;next&#160;statement.&#160;<br/>
C931&#160;<br/>
F0&#160;C1&#160;<br/>
BEQ&#160;$C8F4&#160;<br/>
C933&#160;<br/>
C9&#160;C8&#160;<br/>
CMP&#160;#$C8&#160;<br/>
If&#160;not&#160;'ELSE'&#160;token&#160;then&#160;check&#160;<br/>
C935&#160;<br/>
D0&#160;0E&#160;<br/>
BNE&#160;$C945&#160;<br/>
for&#160;&#34;&#34;'&#160;<br/>
C937&#160;<br/>
2C&#160;52&#160;02&#160;<br/>
BIT&#160;$0252&#160;<br/>
If&#160;no&#160;'ELSE'&#160;pending&#160;then&#160;give&#160;<br/>
C93A&#160;<br/>
10&#160;13&#160;<br/>
BPL&#160;$C94F&#160;<br/>
&#34;SYNTAX&#160;ERROR&#34;.&#160;<br/>
C93C&#160;<br/>
20&#160;B1&#160;CA&#160;<br/>
JSR&#160;$CAB1&#160;<br/>
Set&#160;text&#160;ptr&#160;to&#160;end&#160;of&#160;<br/>
C93F&#160;<br/>
4E&#160;52&#160;02&#160;<br/>
LSR&#160;$0252&#160;<br/>
statement&#160;&amp;&#160;clear&#160;ELSE&#160;pending&#160;<br/>
C942&#160;<br/>
4C&#160;C1&#160;C8&#160;<br/>
JMP&#160;$C8C1&#160;<br/>
flag.&#160;Jump&#160;to&#160;next&#160;line.&#160;<br/>
C945&#160;<br/>
C9&#160;27&#160;<br/>
CMP&#160;#$27&#160;<br/>
Error&#160;if&#160;character&#160;is&#160;not&#160;a&#160;<br/>
C947&#160;<br/>
D0&#160;06&#160;<br/>
BNE&#160;$C94F&#160;<br/>
&#34;&#34;'.&#160;<br/>
C949&#160;<br/>
20&#160;99&#160;CA&#160;<br/>
JSR&#160;$CA99&#160;<br/>
Skip&#160;rest&#160;of&#160;line.&#160;<br/>
C94C&#160;<br/>
4C&#160;C1&#160;C8&#160;<br/>
JMP&#160;$C8C1&#160;<br/>
Go&#160;back&#160;to&#160;next&#160;line.&#160;<br/>
&#160;<br/>C94F&#160;<br/>
4C&#160;70&#160;D0&#160;<br/>
JMP&#160;$D070&#160;<br/>
Print&#160;&#34;SYNTAX&#160;ERROR&#34;&#160;<br/>
&#160;<br/>C952&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
<b>RESTORE</b>&#160;<br/>
C953&#160;<br/>
A5&#160;9A&#160;<br/>
LDA&#160;$9A&#160;<br/>
This&#160;routine&#160;sets&#160;the&#160;'DATA'&#160;<br/>
C955&#160;<br/>
E9&#160;01&#160;<br/>
SBC&#160;#$01&#160;<br/>
pointer&#160;to&#160;the&#160;address&#160;1&#160;byte&#160;<br/>
C957&#160;<br/>
A4&#160;9B&#160;<br/>
LDY&#160;$9B&#160;<br/>
below&#160;the&#160;Start&#160;of&#160;Basic.&#160;<br/>
C959&#160;<br/>
B0&#160;01&#160;<br/>
BCS&#160;$C95C&#160;<br/>
C95B&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
C95C&#160;<br/>
85&#160;B0&#160;<br/>
STA&#160;$B0&#160;<br/>
C95E&#160;<br/>
84&#160;B1&#160;<br/>
STY&#160;$B1&#160;<br/>
C960&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
C961&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>C962&#160;<br/>
AD&#160;DF&#160;02&#160;<br/>
LDA&#160;$02DF&#160;<br/>
Load&#160;next&#160;char&#160;from&#160;keyboard&#160;<br/>
C965&#160;<br/>
10&#160;F9&#160;<br/>
BPL&#160;$C960&#160;<br/>
and&#160;test&#160;for&#160;CTRL&#160;C.&#160;<br/>
C967&#160;<br/>
29&#160;7F&#160;<br/>
AND&#160;#$7F&#160;<br/>
C969&#160;<br/>
A2&#160;08&#160;<br/>
LDX&#160;#$08&#160;<br/>
C96B&#160;<br/>
C9&#160;03&#160;<br/>
CMP&#160;#$03&#160;<br/>
C96D&#160;<br/>
D0&#160;F2&#160;<br/>
BNE&#160;$C961&#160;<br/>
Exit&#160;if&#160;not&#160;CTRL&#160;C.&#160;<br/>
C96F&#160;<br/>
C9&#160;03&#160;<br/>
CMP&#160;#$03&#160;<br/>
Set&#160;C&#160;to&#160;act&#160;like&#160;'STOP'.&#160;<br/>
C971&#160;<br/>
B0&#160;01&#160;<br/>
BCS&#160;$C974&#160;<br/>
STOP&#160;<br/>
C973&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
END&#160;<br/>
C974&#160;<br/>
D0&#160;43&#160;<br/>
BNE&#160;$C9B9&#160;<br/>
C976&#160;<br/>
A5&#160;E9&#160;<br/>
LDA&#160;$E9&#160;<br/>
Pag&#160;&#160;e&#160;15&#160;<br/>
<hr/>
<a name=16></a>C978&#160;<br/>
A4&#160;EA&#160;<br/>
LDY&#160;$EA&#160;<br/>
C97A&#160;<br/>
F0&#160;0C&#160;<br/>
BEQ&#160;$C988&#160;<br/>
In&#160;immediate&#160;mode.&#160;<br/>
C97C&#160;<br/>
85&#160;AC&#160;<br/>
STA&#160;$AC&#160;<br/>
Save&#160;current&#160;position&#160;in&#160;the&#160;<br/>
C97E&#160;<br/>
84&#160;AD&#160;<br/>
STY&#160;$AD&#160;<br/>
program.&#160;<br/>
C980&#160;<br/>
A5&#160;A8&#160;<br/>
LDA&#160;$A8&#160;<br/>
Save&#160;the&#160;current&#160;line&#160;number.&#160;<br/>
C982&#160;<br/>
A4&#160;A9&#160;<br/>
LDY&#160;$A9&#160;<br/>
C984&#160;<br/>
85&#160;AA&#160;<br/>
STA&#160;$AA&#160;<br/>
C986&#160;<br/>
84&#160;AB&#160;<br/>
STY&#160;$AB&#160;<br/>
C988&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Remove&#160;address&#160;of&#160;calling&#160;<br/>
C989&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
routine.&#160;<br/>
C98A&#160;<br/>
A9&#160;BD&#160;<br/>
LDA&#160;#$BD&#160;<br/>
Set&#160;up&#160;parameters&#160;for&#160;jumping&#160;<br/>
C98C&#160;<br/>
A0&#160;C3&#160;<br/>
LDY&#160;#$C3&#160;<br/>
back&#160;into&#160;command&#160;mode.&#160;<br/>
C98E&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
C990&#160;<br/>
8E&#160;F1&#160;02&#160;<br/>
STX&#160;$02F1&#160;<br/>
Clear&#160;printer&#160;flag.&#160;<br/>
C993&#160;<br/>
8E&#160;DF&#160;02&#160;<br/>
STX&#160;$02DF&#160;<br/>
Clear&#160;input&#160;char&#160;from&#160;keyboard&#160;<br/>
C996&#160;<br/>
86&#160;2E&#160;<br/>
STX&#160;$2E&#160;<br/>
Clear&#160;CTRL&#160;O&#160;flag.&#160;<br/>
C998&#160;<br/>
90&#160;03&#160;<br/>
BCC&#160;$C99D&#160;<br/>
C=l&#160;if&#160;&#34;BREAK&#160;AT&#160;...&#34;&#160;is&#160;to&#160;be&#160;<br/>
C99A&#160;<br/>
4C&#160;9D&#160;C4&#160;<br/>
JMP&#160;$C49D&#160;<br/>
printed&#160;before&#160;going&#160;back&#160;to&#160;<br/>
C99D&#160;<br/>
4C&#160;A8&#160;C4&#160;<br/>
JMP&#160;$C4A8&#160;<br/>
command&#160;mode.&#160;<br/>
C9A0&#160;<br/>
D0&#160;17&#160;<br/>
BNE&#160;$C9B9&#160;<br/>
<b>CONT</b>&#160;<br/>
C9A2&#160;<br/>
A2&#160;D7&#160;<br/>
LDX&#160;#$D7&#160;<br/>
C9A4&#160;<br/>
A4&#160;AD&#160;<br/>
LDY&#160;$AD&#160;<br/>
Load&#160;the&#160;saved&#160;current&#160;program&#160;<br/>
C9A6&#160;<br/>
D0&#160;03&#160;<br/>
BNE&#160;$C9AB&#160;<br/>
position.&#160;Print&#160;&#34;CAN'T&#160;CONT..&#34;&#160;<br/>
C9A8&#160;<br/>
4C&#160;7E&#160;C4&#160;<br/>
JMP&#160;$C47E&#160;<br/>
error&#160;if&#160;in&#160;immediate&#160;mode.&#160;<br/>
C9AB&#160;<br/>
A5&#160;AC&#160;<br/>
LDA&#160;$AC&#160;<br/>
Put&#160;saved&#160;program&#160;position&#160;<br/>
C9AD&#160;<br/>
85&#160;E9&#160;<br/>
STA&#160;$E9&#160;<br/>
pointer&#160;into&#160;current&#160;position&#160;<br/>
C9AF&#160;<br/>
84&#160;EA&#160;<br/>
STY&#160;$EA&#160;<br/>
pointer.&#160;Do&#160;the&#160;same&#160;for&#160;the&#160;<br/>
C9B1&#160;<br/>
A5&#160;AA&#160;<br/>
LDA&#160;$AA&#160;<br/>
line&#160;numbers.&#160;<br/>
C9B3&#160;<br/>
A4&#160;AB&#160;<br/>
LDY&#160;$AB&#160;<br/>
C9B5&#160;<br/>
85&#160;A8&#160;<br/>
STA&#160;$A8&#160;<br/>
C9B7&#160;<br/>
84&#160;A9&#160;<br/>
STY&#160;$A9&#160;<br/>
C9B9&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
Continue&#160;with&#160;program.&#160;<br/>
&#160;<br/>C9BA&#160;<br/>
4C&#160;36&#160;D3&#160;<br/>
JMP&#160;$D336&#160;<br/>
Print&#160;&#34;ILLEGAL&#160;QUANTITY&#160;ERROR&#34;&#160;<br/>
C9BD&#160;<br/>
D0&#160;03&#160;<br/>
BNE&#160;$C9C2&#160;<br/>
<b>RUN</b>&#160;If&#160;not&#160;end&#160;of&#160;statement&#160;<br/>
C9BF&#160;<br/>
4C&#160;08&#160;C7&#160;<br/>
JMP&#160;$C708&#160;<br/>
then&#160;execute&#160;from&#160;start.&#160;<br/>
&#160;<br/>C9C2&#160;<br/>
20&#160;0F&#160;C7&#160;<br/>
JSR&#160;$C70F&#160;<br/>
Perform&#160;'CLEAR'&#160;and&#160;then&#160;<br/>
C9C5&#160;<br/>
4C&#160;DC&#160;C9&#160;<br/>
JMP&#160;$C9DC&#160;<br/>
go&#160;to&#160;line&#160;number.&#160;<br/>
&#160;<br/>C9C8&#160;<br/>
A9&#160;03&#160;<br/>
LDA&#160;#$03&#160;<br/>
<b>GOSUB</b>&#160;<br/>
C9CA&#160;<br/>
20&#160;37&#160;C4&#160;<br/>
JSR&#160;$C437&#160;<br/>
Test&#160;free&#160;space&#160;left&#160;on&#160;stack.&#160;<br/>
C9CD&#160;<br/>
A5&#160;EA&#160;<br/>
LDA&#160;$EA&#160;<br/>
Put&#160;current&#160;position&#160;pointer&#160;<br/>
C9CF&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
on&#160;the&#160;stack.&#160;<br/>
C9D0&#160;<br/>
A5&#160;E9&#160;<br/>
LDA&#160;$E9&#160;<br/>
C9D2&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
C9D3&#160;<br/>
A5&#160;A9&#160;<br/>
LDA&#160;$A9&#160;<br/>
Put&#160;current&#160;line&#160;number&#160;on&#160;the&#160;<br/>
C9D5&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
stack.&#160;<br/>
C9D6&#160;<br/>
A5&#160;A8&#160;<br/>
LDA&#160;$A8&#160;<br/>
C9D8&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
C9D9&#160;<br/>
A9&#160;9B&#160;<br/>
LDA&#160;#$9B&#160;<br/>
Put&#160;GOSUB&#160;token&#160;on&#160;stack.&#160;<br/>
C9DB&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
C9DC&#160;<br/>
20&#160;E8&#160;00&#160;<br/>
JSR&#160;$00E8&#160;<br/>
Step&#160;through&#160;spaces&#160;in&#160;prog'm.&#160;<br/>
C9DF&#160;<br/>
20&#160;E5&#160;C9&#160;<br/>
JSR&#160;$C9E5&#160;<br/>
Perform&#160;'GOTO'.&#160;<br/>
C9E2&#160;<br/>
4C&#160;C1&#160;C8&#160;<br/>
JMP&#160;$C8C1&#160;<br/>
Execute&#160;next&#160;statement/line.&#160;<br/>
&#160;<br/>C9E5&#160;<br/>
20&#160;53&#160;E8&#160;<br/>
JSR&#160;$E853&#160;<br/>
<b>GOTO</b>&#160;Get&#160;+ve&#160;integer&#160;in&#160;$33/&#160;<br/>
C9E8&#160;<br/>
20&#160;51&#160;CA&#160;<br/>
JSR&#160;$CA51&#160;<br/>
$34&#160;&amp;&#160;find&#160;offset&#160;of&#160;line&#160;end.&#160;<br/>
C9EB&#160;<br/>
A5&#160;A9&#160;<br/>
LDA&#160;$A9&#160;<br/>
If&#160;going&#160;to&#160;a&#160;previous&#160;line&#160;in&#160;<br/>
C9ED&#160;<br/>
C5&#160;34&#160;<br/>
CMP&#160;$34&#160;<br/>
program&#160;then&#160;search&#160;from&#160;start&#160;<br/>
C9EF&#160;<br/>
B0&#160;0B&#160;<br/>
BCS&#160;$C9FC&#160;<br/>
of&#160;program.&#160;<br/>
C9F1&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
C9F2&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
C9F3&#160;<br/>
65&#160;E9&#160;<br/>
ADC&#160;$E9&#160;<br/>
Set&#160;A&#160;(LSB)&#160;and&#160;X&#160;to&#160;point&#160;to&#160;<br/>
Pag&#160;&#160;e&#160;16&#160;<br/>
<hr/>
<a name=17></a>C9F5&#160;<br/>
A6&#160;EA&#160;<br/>
LDX&#160;$EA&#160;<br/>
next&#160;line.&#160;<br/>
C9F7&#160;<br/>
90&#160;07&#160;<br/>
BCC&#160;$CA00&#160;<br/>
C9F9&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
C9FA&#160;<br/>
B0&#160;04&#160;<br/>
BCS&#160;$CA00&#160;<br/>
C9FC&#160;<br/>
A5&#160;9A&#160;<br/>
LDA&#160;$9A&#160;<br/>
Set&#160;A&#160;(LSB)&#160;and&#160;X&#160;to&#160;start&#160;of&#160;<br/>
C9FE&#160;<br/>
A6&#160;9B&#160;<br/>
LDX&#160;$9B&#160;<br/>
Basic&#160;program.&#160;<br/>
CA00&#160;<br/>
20&#160;BD&#160;C6&#160;<br/>
JSR&#160;$C6BD&#160;<br/>
Search&#160;for&#160;a&#160;line.&#160;<br/>
CA03&#160;<br/>
90&#160;1E&#160;<br/>
BCC&#160;$CA23&#160;<br/>
Print&#160;error&#160;if&#160;not&#160;found.&#160;<br/>
CA05&#160;<br/>
A5&#160;CE&#160;<br/>
LDA&#160;$CE&#160;<br/>
Set&#160;program&#160;position&#160;to&#160;1&#160;<br/>
CA07&#160;<br/>
E9&#160;01&#160;<br/>
SBC&#160;#$01&#160;<br/>
byte&#160;before&#160;start&#160;of&#160;that&#160;<br/>
CA09&#160;<br/>
85&#160;E9&#160;<br/>
STA&#160;$E9&#160;<br/>
line.&#160;<br/>
CA0B&#160;<br/>
A5&#160;CF&#160;<br/>
LDA&#160;$CF&#160;<br/>
CA0D&#160;<br/>
E9&#160;00&#160;<br/>
SBC&#160;#$00&#160;<br/>
CA0F&#160;<br/>
85&#160;EA&#160;<br/>
STA&#160;$EA&#160;<br/>
CA11&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
Exit.&#160;<br/>
CA12&#160;<br/>
D0&#160;FD&#160;<br/>
BNE&#160;$CA11&#160;<br/>
<b>POP&#160;&amp;&#160;RETURN</b>&#160;<br/>
&#160;<br/>CA14&#160;<br/>
A9&#160;FF&#160;<br/>
LDA&#160;#$FF&#160;<br/>
CA16&#160;<br/>
85&#160;B9&#160;<br/>
STA&#160;$B9&#160;<br/>
Set&#160;stack&#160;to&#160;position&#160;where&#160;<br/>
CA18&#160;<br/>
20&#160;C6&#160;C3&#160;<br/>
JSR&#160;$C3C6&#160;<br/>
the&#160;GOSUB&#160;token&#160;is&#160;expected.&#160;<br/>
CA1B&#160;<br/>
9A&#160;<br/>
TXS&#160;<br/>
CA1C&#160;<br/>
C9&#160;9B&#160;<br/>
CMP&#160;#$9B&#160;<br/>
CA1E&#160;<br/>
F0&#160;0B&#160;<br/>
BEQ&#160;$CA2B&#160;<br/>
Branch&#160;if&#160;GOSUB&#160;token&#160;found.&#160;<br/>
CA20&#160;<br/>
A2&#160;16&#160;<br/>
LDX&#160;#$16&#160;<br/>
Print&#160;&#34;RETURN&#160;WITHOUT&#160;GOSUB..&#34;&#160;<br/>
CA22&#160;<br/>
2C&#160;A2&#160;5A&#160;<br/>
BIT&#160;$5AA2&#160;<br/>
Hides&#160;a&#160;print&#160;&#34;UNDEF'D&#160;STAT..&#34;&#160;<br/>
CA25&#160;<br/>
4C&#160;7E&#160;C4&#160;<br/>
JMP&#160;$C47E&#160;<br/>
Goto&#160;print&#160;error&#160;message.&#160;<br/>
&#160;<br/>CA28&#160;<br/>
4C&#160;70&#160;D0&#160;<br/>
JMP&#160;$D070&#160;<br/>
Print&#160;&#34;SYNTAX&#160;ERROR&#34;&#160;<br/>
&#160;<br/>CA2B&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
CA2C&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
CA2D&#160;<br/>
C0&#160;0C&#160;<br/>
CPY&#160;#$0C&#160;<br/>
CA2F&#160;<br/>
F0&#160;19&#160;<br/>
BEQ&#160;$CA4A&#160;<br/>
Token&#160;is&#160;that&#160;of&#160;'POP'.&#160;<br/>
CA31&#160;<br/>
85&#160;A8&#160;<br/>
STA&#160;$A8&#160;<br/>
Returning&#160;from&#160;GOSUB&#160;so&#160;<br/>
CA33&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
restore&#160;old&#160;line&#160;number&#160;and&#160;<br/>
CA34&#160;<br/>
85&#160;A9&#160;<br/>
STA&#160;$A9&#160;<br/>
program&#160;position&#160;counter.&#160;<br/>
CA36&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
CA37&#160;<br/>
85&#160;E9&#160;<br/>
STA&#160;$E9&#160;<br/>
CA39&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
CA3A&#160;<br/>
85&#160;EA&#160;<br/>
STA&#160;$EA&#160;<br/>
CA3C&#160;<br/>
20&#160;4E&#160;CA&#160;<br/>
JSR&#160;$CA4E&#160;<br/>
DATA&#160;Find&#160;end&#160;of&#160;line.&#160;<br/>
CA3F&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
CA40&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
Adjust&#160;program&#160;position&#160;to&#160;<br/>
CA41&#160;<br/>
65&#160;E9&#160;<br/>
ADC&#160;$E9&#160;<br/>
end&#160;of&#160;the&#160;line.&#160;<br/>
CA43&#160;<br/>
85&#160;E9&#160;<br/>
STA&#160;$E9&#160;<br/>
CA45&#160;<br/>
90&#160;02&#160;<br/>
BCC&#160;$CA49&#160;<br/>
CA47&#160;<br/>
E6&#160;EA&#160;<br/>
INC&#160;$EA&#160;<br/>
CA49&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>CA4A&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Correct&#160;stack&#160;pointer&#160;for&#160;POP&#160;<br/>
CA4B&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
command.&#160;<br/>
CA4C&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
CA4D&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>CA4E&#160;<br/>
A2&#160;3A&#160;<br/>
LDX&#160;#$3A&#160;<br/>
<b>FIND&#160;END&#160;OF&#160;STATEMENT</b>&#160;<br/>
CA50&#160;<br/>
2C&#160;A2&#160;00&#160;<br/>
BIT&#160;$00A2&#160;<br/>
<b>FIND&#160;END&#160;OF&#160;LINE</b>&#160;<br/>
CA53&#160;<br/>
86&#160;24&#160;<br/>
STX&#160;$24&#160;<br/>
CA55&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
CA57&#160;<br/>
84&#160;25&#160;<br/>
STY&#160;$25&#160;<br/>
Swap&#160;match&#160;characters&#160;-&#160;colon&#160;<br/>
CA59&#160;<br/>
A5&#160;25&#160;<br/>
LDA&#160;$25&#160;<br/>
for&#160;end&#160;of&#160;statement,&#160;null&#160;for&#160;<br/>
CA5B&#160;<br/>
A6&#160;24&#160;<br/>
LDX&#160;$24&#160;<br/>
end&#160;of&#160;line.&#160;<br/>
CA5D&#160;<br/>
85&#160;24&#160;<br/>
STA&#160;$24&#160;<br/>
CA5F&#160;<br/>
86&#160;25&#160;<br/>
STX&#160;$25&#160;<br/>
CA61&#160;<br/>
B1&#160;E9&#160;<br/>
LDA&#160;($E9),Y&#160;<br/>
Pag&#160;&#160;e&#160;17&#160;<br/>
<hr/>
<a name=18></a>CA63&#160;<br/>
F0&#160;E4&#160;<br/>
BEQ&#160;$CA49&#160;<br/>
Exit&#160;if&#160;end&#160;of&#160;line.&#160;<br/>
CA65&#160;<br/>
C5&#160;25&#160;<br/>
CMP&#160;$25&#160;<br/>
CA67&#160;<br/>
F0&#160;E0&#160;<br/>
BEQ&#160;$CA49&#160;<br/>
Exit&#160;if&#160;match&#160;made.&#160;<br/>
CA69&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
CA6A&#160;<br/>
C9&#160;22&#160;<br/>
CMP&#160;#$22&#160;<br/>
If&#160;&#34;&#160;then&#160;swap&#160;match&#160;chars.&#160;<br/>
CA6C&#160;<br/>
D0&#160;F3&#160;<br/>
BNE&#160;$CA61&#160;<br/>
Loop&#160;again&#160;<br/>
CA6E&#160;<br/>
F0&#160;E9&#160;<br/>
BEQ&#160;$CA59&#160;<br/>
&#160;<br/>CA70&#160;<br/>
20&#160;17&#160;CF&#160;<br/>
JSR&#160;$CF17&#160;<br/>
<b>IF</b>&#160;Evaluate&#160;expression.&#160;<br/>
CA73&#160;<br/>
20&#160;E8&#160;00&#160;<br/>
JSR&#160;$00E8&#160;<br/>
Clear&#160;spaces&#160;in&#160;text.&#160;<br/>
CA76&#160;<br/>
C9&#160;97&#160;<br/>
CMP&#160;#$97&#160;<br/>
CA78&#160;<br/>
F0&#160;05&#160;<br/>
BEQ&#160;$CA7F&#160;<br/>
Token&#160;is&#160;that&#160;of&#160;'GOTO'.&#160;<br/>
CA7A&#160;<br/>
A9&#160;C9&#160;<br/>
LDA&#160;#$C9&#160;<br/>
Search&#160;for&#160;'THEN'&#160;token.&#160;<br/>
CA7C&#160;<br/>
20&#160;67&#160;D0&#160;<br/>
JSR&#160;$D067&#160;<br/>
CA7F&#160;<br/>
A5&#160;D0&#160;<br/>
LDA&#160;$D0&#160;<br/>
CA81&#160;<br/>
D0&#160;05&#160;<br/>
BNE&#160;$CA88&#160;<br/>
Condition&#160;is&#160;true.&#160;<br/>
CA83&#160;<br/>
20&#160;9E&#160;CA&#160;<br/>
JSR&#160;$CA9E&#160;<br/>
Condition&#160;is&#160;false.&#160;<br/>
CA86&#160;<br/>
F0&#160;B7&#160;<br/>
BEQ&#160;$CA3F&#160;<br/>
CA88&#160;<br/>
20&#160;E8&#160;00&#160;<br/>
JSR&#160;$00E8&#160;<br/>
Get&#160;next&#160;text&#160;character.&#160;<br/>
CA8B&#160;<br/>
B0&#160;03&#160;<br/>
BCS&#160;$CA90&#160;<br/>
CA8D&#160;<br/>
4C&#160;E5&#160;C9&#160;<br/>
JMP&#160;$C9E5&#160;<br/>
Jump&#160;to&#160;'GOTO'&#160;<br/>
CA90&#160;<br/>
08&#160;<br/>
PHP&#160;<br/>
CA91&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
CA92&#160;<br/>
6E&#160;52&#160;02&#160;<br/>
ROR&#160;$0252&#160;<br/>
Set&#160;Else&#160;pending&#160;flag.&#160;<br/>
CA95&#160;<br/>
28&#160;<br/>
PLP&#160;<br/>
CA96&#160;<br/>
4C&#160;15&#160;C9&#160;<br/>
JMP&#160;$C915&#160;<br/>
Execute&#160;statement.&#160;<br/>
&#160;<br/>CA99&#160;<br/>
20&#160;51&#160;CA&#160;<br/>
JSR&#160;$CA51&#160;<br/>
<b>REM</b>&#160;Find&#160;end&#160;of&#160;line.&#160;<br/>
CA9C&#160;<br/>
F0&#160;A1&#160;<br/>
BEQ&#160;$CA3F&#160;<br/>
Branch&#160;always.&#160;<br/>
CA9E&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
CAA0&#160;<br/>
B1&#160;E9&#160;<br/>
LDA&#160;($E9),Y&#160;<br/>
If&#160;at&#160;end&#160;of&#160;line&#160;no&#160;'THEN's&#160;<br/>
CAA2&#160;<br/>
F0&#160;0C&#160;<br/>
BEQ&#160;$CAB0&#160;<br/>
or&#160;'ELSE's&#160;to&#160;deal&#160;with.&#160;<br/>
CAA4&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
CAA5&#160;<br/>
C9&#160;C9&#160;<br/>
CMP&#160;#$C9&#160;<br/>
Test&#160;for&#160;'THEN'&#160;token.&#160;<br/>
CAA7&#160;<br/>
F0&#160;F0&#160;<br/>
BEQ&#160;$CA99&#160;<br/>
'THEN'&#160;token&#160;found.&#160;<br/>
CAA9&#160;<br/>
C9&#160;C8&#160;<br/>
CMP&#160;#$C8&#160;<br/>
Test&#160;for&#160;'ELSE'&#160;token.&#160;<br/>
CAAB&#160;<br/>
D0&#160;F3&#160;<br/>
BNE&#160;$CAA0&#160;<br/>
'ELSE'&#160;token&#160;not&#160;found.&#160;<br/>
CAAD&#160;<br/>
4C&#160;3F&#160;CA&#160;<br/>
JMP&#160;$CA3F&#160;<br/>
Set&#160;program&#160;pos'n&#160;to&#160;line&#160;end.&#160;<br/>
CAB0&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
Exit.&#160;<br/>
&#160;<br/>CAB1&#160;<br/>
A0&#160;FF&#160;<br/>
LDY&#160;#$FF&#160;<br/>
Set&#160;program&#160;position&#160;pointer&#160;<br/>
CAB3&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
to&#160;end&#160;of&#160;line.&#160;<br/>
CAB4&#160;<br/>
B1&#160;E9&#160;<br/>
LDA&#160;($E9),Y&#160;<br/>
CAB6&#160;<br/>
F0&#160;04&#160;<br/>
BEQ&#160;$CABC&#160;<br/>
Step&#160;through&#160;program&#160;until&#160;a&#160;<br/>
CAB8&#160;<br/>
C9&#160;3A&#160;<br/>
CMP&#160;#$3A&#160;<br/>
null&#160;or&#160;colon&#160;is&#160;found.&#160;Then&#160;<br/>
CABA&#160;<br/>
D0&#160;F7&#160;<br/>
BNE&#160;$CAB3&#160;<br/>
jump&#160;to&#160;update&#160;program&#160;<br/>
CABC&#160;<br/>
4C&#160;3F&#160;CA&#160;<br/>
JMP&#160;$CA3F&#160;<br/>
position&#160;pointer.&#160;<br/>
&#160;<br/>CABF&#160;<br/>
4C&#160;70&#160;D0&#160;<br/>
JMP&#160;$D070&#160;<br/>
Print&#160;&#34;SYNTAX&#160;ERROR&#34;.&#160;<br/>
&#160;<br/>CAC2&#160;<br/>
20&#160;C8&#160;D8&#160;<br/>
JSR&#160;$D8C8&#160;<br/>
<b>ON</b>&#160;Get&#160;single&#160;byte&#160;expr'n&#160;<br/>
CAC5&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
which&#160;returns&#160;in&#160;X&#160;and&#160;$D4.&#160;<br/>
CAC6&#160;<br/>
C9&#160;9B&#160;<br/>
CMP&#160;#$9B&#160;<br/>
CAC8&#160;<br/>
F0&#160;04&#160;<br/>
BEQ&#160;$CACE&#160;<br/>
Found&#160;a&#160;'GOSUB'&#160;token.&#160;<br/>
CACA&#160;<br/>
C9&#160;97&#160;<br/>
CMP&#160;#$97&#160;<br/>
Error&#160;if&#160;character&#160;is&#160;not&#160;a&#160;<br/>
CACC&#160;<br/>
D0&#160;F1&#160;<br/>
BNE&#160;$CABF&#160;<br/>
'GOTO'&#160;token.&#160;<br/>
CACE&#160;<br/>
C6&#160;D4&#160;<br/>
DEC&#160;$D4&#160;<br/>
Step&#160;through&#160;arguments&#160;until&#160;<br/>
CAD0&#160;<br/>
D0&#160;04&#160;<br/>
BNE&#160;$CAD6&#160;<br/>
correct&#160;line&#160;number&#160;is&#160;found.&#160;<br/>
CAD2&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
CAD3&#160;<br/>
4C&#160;17&#160;C9&#160;<br/>
JMP&#160;$C917&#160;<br/>
Execute&#160;statement.&#160;<br/>
&#160;<br/>CAD6&#160;<br/>
20&#160;E2&#160;00&#160;<br/>
JSR&#160;$00E2&#160;<br/>
Step&#160;through&#160;spaces&#160;in&#160;text.&#160;<br/>
CAD9&#160;<br/>
20&#160;E2&#160;CA&#160;<br/>
JSR&#160;$CAE2&#160;<br/>
Get&#160;2&#160;byte&#160;integer&#160;from&#160;text.&#160;<br/>
CADC&#160;<br/>
C9&#160;2C&#160;<br/>
CMP&#160;#$2C&#160;<br/>
Pag&#160;&#160;e&#160;18&#160;<br/>
<hr/>
<a name=19></a>CADE&#160;<br/>
F0&#160;EE&#160;<br/>
BEQ&#160;$CACE&#160;<br/>
Character&#160;is&#160;a&#160;comma.&#160;<br/>
CAE0&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Exit&#160;if&#160;char&#160;was&#160;not&#160;a&#160;comma.&#160;<br/>
CAE1&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>CAE2&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
<b>GET&#160;2&#160;BYTE&#160;INTEGER&#160;FROM&#160;TEXT.</b>&#160;<br/>
CAE4&#160;<br/>
86&#160;33&#160;<br/>
STX&#160;$33&#160;<br/>
Zero&#160;result.&#160;<br/>
CAE6&#160;<br/>
86&#160;34&#160;<br/>
STX&#160;$34&#160;<br/>
CAE8&#160;<br/>
B0&#160;F7&#160;<br/>
BCS&#160;$CAE1&#160;<br/>
Exit&#160;if&#160;no&#160;more&#160;digits.&#160;<br/>
CAEA&#160;<br/>
E9&#160;2F&#160;<br/>
SBC&#160;#$2F&#160;<br/>
Put&#160;value&#160;of&#160;digit&#160;into&#160;$24.&#160;<br/>
CAEC&#160;<br/>
85&#160;24&#160;<br/>
STA&#160;$24&#160;<br/>
CAEE&#160;<br/>
A5&#160;34&#160;<br/>
LDA&#160;$34&#160;<br/>
Transfer&#160;MSB&#160;to&#160;temporary&#160;<br/>
CAF0&#160;<br/>
85&#160;91&#160;<br/>
STA&#160;$91&#160;<br/>
work&#160;byte.&#160;<br/>
CAF2&#160;<br/>
C9&#160;19&#160;<br/>
CMP&#160;#$19&#160;<br/>
Syntax&#160;error&#160;if&#160;MSB&#160;is&#160;over&#160;<br/>
CAF4&#160;<br/>
B0&#160;D4&#160;<br/>
BCS&#160;$CACA&#160;<br/>
25&#160;-&#160;result&#160;will&#160;be&#160;too&#160;big.&#160;<br/>
CAF6&#160;<br/>
A5&#160;33&#160;<br/>
LDA&#160;$33&#160;<br/>
Multiply&#160;original&#160;number&#160;by&#160;<br/>
CAF8&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
10,&#160;firstly&#160;adding&#160;itself&#160;to&#160;<br/>
CAF9&#160;<br/>
26&#160;91&#160;<br/>
ROL&#160;$91&#160;<br/>
4&#160;times&#160;itself&#160;to&#160;give&#160;5&#160;times&#160;<br/>
CAFB&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
itself.&#160;Then&#160;double&#160;result.&#160;<br/>
CAFC&#160;<br/>
26&#160;91&#160;<br/>
ROL&#160;$91&#160;<br/>
CAFE&#160;<br/>
65&#160;33&#160;<br/>
ADC&#160;$33&#160;<br/>
CB00&#160;<br/>
85&#160;33&#160;<br/>
STA&#160;$33&#160;<br/>
CB02&#160;<br/>
A5&#160;91&#160;<br/>
LDA&#160;$91&#160;<br/>
CB04&#160;<br/>
65&#160;34&#160;<br/>
ADC&#160;$34&#160;<br/>
CB06&#160;<br/>
85&#160;34&#160;<br/>
STA&#160;$34&#160;<br/>
CB08&#160;<br/>
06&#160;33&#160;<br/>
ASL&#160;$33&#160;<br/>
CB0A&#160;<br/>
26&#160;34&#160;<br/>
ROL&#160;$34&#160;<br/>
CB0C&#160;<br/>
A5&#160;33&#160;<br/>
LDA&#160;$33&#160;<br/>
CB0E&#160;<br/>
65&#160;24&#160;<br/>
ADC&#160;$24&#160;<br/>
Add&#160;in&#160;next&#160;digit.&#160;<br/>
CB10&#160;<br/>
85&#160;33&#160;<br/>
STA&#160;$33&#160;<br/>
CB12&#160;<br/>
90&#160;02&#160;<br/>
BCC&#160;$CB16&#160;<br/>
CB14&#160;<br/>
E6&#160;34&#160;<br/>
INC&#160;$34&#160;<br/>
Overflow&#160;from&#160;LSB&#160;into&#160;MSB.&#160;<br/>
CB16&#160;<br/>
20&#160;E2&#160;00&#160;<br/>
JSR&#160;$00E2&#160;<br/>
Get&#160;next&#160;non&#160;space&#160;character.&#160;<br/>
CB19&#160;<br/>
4C&#160;E8&#160;CA&#160;<br/>
JMP&#160;$CAE8&#160;<br/>
Jump&#160;to&#160;do&#160;next&#160;number.&#160;<br/>
&#160;<br/>CB1C&#160;<br/>
20&#160;88&#160;D1&#160;<br/>
JSR&#160;$D188&#160;<br/>
<b>LET</b>&#160;Get&#160;variable.&#160;<br/>
CB1F&#160;<br/>
85&#160;B8&#160;<br/>
STA&#160;$B8&#160;<br/>
Save&#160;location.&#160;<br/>
CB21&#160;<br/>
84&#160;B9&#160;<br/>
STY&#160;$B9&#160;<br/>
CB23&#160;<br/>
A9&#160;D4&#160;<br/>
LDA&#160;#$D4&#160;<br/>
Give&#160;error&#160;if&#160;&#34;=&#34;&#160;is&#160;not&#160;next&#160;<br/>
CB25&#160;<br/>
20&#160;67&#160;D0&#160;<br/>
JSR&#160;$D067&#160;<br/>
character.&#160;<br/>
CB28&#160;<br/>
A5&#160;29&#160;<br/>
LDA&#160;$29&#160;<br/>
Save&#160;integer&#160;variable&#160;flag.&#160;<br/>
CB2A&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
CB2B&#160;<br/>
A5&#160;28&#160;<br/>
LDA&#160;$28&#160;<br/>
Save&#160;string&#160;variable&#160;flag.&#160;<br/>
CB2D&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
CB2E&#160;<br/>
20&#160;17&#160;CF&#160;<br/>
JSR&#160;$CF17&#160;<br/>
Evaluate&#160;expression.&#160;<br/>
CB31&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
CB32&#160;<br/>
2A&#160;<br/>
ROL&#160;A&#160;<br/>
Check&#160;type&#160;matches.&#160;<br/>
CB33&#160;<br/>
20&#160;09&#160;CF&#160;<br/>
JSR&#160;$CF09&#160;<br/>
CB36&#160;<br/>
D0&#160;18&#160;<br/>
BNE&#160;$CB50&#160;<br/>
Do&#160;string&#160;assignment.&#160;<br/>
CB38&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
CB39&#160;<br/>
10&#160;12&#160;<br/>
BPL&#160;$CB4D&#160;<br/>
If&#160;real&#160;do&#160;floating&#160;pt&#160;number.&#160;<br/>
CB3B&#160;<br/>
20&#160;F4&#160;DE&#160;<br/>
JSR&#160;$DEF4&#160;<br/>
Round&#160;off&#160;main&#160;FPA&#160;and&#160;convert&#160;<br/>
CB3E&#160;<br/>
20&#160;A9&#160;D2&#160;<br/>
JSR&#160;$D2A9&#160;<br/>
to&#160;2&#160;byte&#160;signed&#160;integer.&#160;<br/>
CB41&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
CB43&#160;<br/>
A5&#160;D3&#160;<br/>
LDA&#160;$D3&#160;<br/>
Store&#160;value&#160;into&#160;integer&#160;<br/>
CB45&#160;<br/>
91&#160;B8&#160;<br/>
STA&#160;($B8),Y&#160;<br/>
variable.&#160;<br/>
CB47&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
CB48&#160;<br/>
A5&#160;D4&#160;<br/>
LDA&#160;$D4&#160;<br/>
CB4A&#160;<br/>
91&#160;B8&#160;<br/>
STA&#160;($B8),Y&#160;<br/>
CB4C&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
CB4D&#160;<br/>
4C&#160;A9&#160;DE&#160;<br/>
JMP&#160;$DEA9&#160;<br/>
Pack&#160;main&#160;FPA.&#160;<br/>
&#160;<br/>CB50&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
String&#160;assignment.&#160;<br/>
CB51&#160;<br/>
A0&#160;02&#160;<br/>
LDY&#160;#$02&#160;<br/>
If&#160;pointer&#160;to&#160;strings&#160;is&#160;<br/>
CB53&#160;<br/>
B1&#160;D3&#160;<br/>
LDA&#160;($D3),Y&#160;<br/>
beyond&#160;start&#160;of&#160;string&#160;block&#160;<br/>
Pag&#160;&#160;e&#160;19&#160;<br/>
<hr/>
<a name=20></a>CB55&#160;<br/>
C5&#160;A3&#160;<br/>
CMP&#160;$A3&#160;<br/>
then&#160;branch&#160;to&#160;use&#160;present&#160;<br/>
CB57&#160;<br/>
90&#160;17&#160;<br/>
BCC&#160;$CB70&#160;<br/>
block&#160;of&#160;data&#160;about&#160;string.&#160;<br/>
CB59&#160;<br/>
D0&#160;07&#160;<br/>
BNE&#160;$CB62&#160;<br/>
CB5B&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
CB5C&#160;<br/>
B1&#160;D3&#160;<br/>
LDA&#160;($D3),Y&#160;<br/>
CB5E&#160;<br/>
C5&#160;A2&#160;<br/>
CMP&#160;$A2&#160;<br/>
CB60&#160;<br/>
90&#160;0E&#160;<br/>
BCC&#160;$CB70&#160;<br/>
CB62&#160;<br/>
A4&#160;D4&#160;<br/>
LDY&#160;$D4&#160;<br/>
CB64&#160;<br/>
C4&#160;9D&#160;<br/>
CPY&#160;$9D&#160;<br/>
If&#160;string&#160;data&#160;block&#160;is&#160;<br/>
CB66&#160;<br/>
90&#160;08&#160;<br/>
BCC&#160;$CB70&#160;<br/>
beyond&#160;end&#160;of&#160;Basic&#160;then&#160;it&#160;is&#160;<br/>
CB68&#160;<br/>
D0&#160;0D&#160;<br/>
BNE&#160;$CB77&#160;<br/>
in&#160;variable&#160;block.&#160;Copy&#160;it&#160;<br/>
CB6A&#160;<br/>
A5&#160;D3&#160;<br/>
LDA&#160;$D3&#160;<br/>
down&#160;and&#160;set&#160;up&#160;new&#160;string&#160;<br/>
CB6C&#160;<br/>
C5&#160;9C&#160;<br/>
CMP&#160;$9C&#160;<br/>
block.&#160;<br/>
CB6E&#160;<br/>
B0&#160;07&#160;<br/>
BCS&#160;$CB77&#160;<br/>
CB70&#160;<br/>
A5&#160;D3&#160;<br/>
LDA&#160;$D3&#160;<br/>
CB72&#160;<br/>
A4&#160;D4&#160;<br/>
LDY&#160;$D4&#160;<br/>
CB74&#160;<br/>
4C&#160;8D&#160;CB&#160;<br/>
JMP&#160;$CB8D&#160;<br/>
CB77&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
CB79&#160;<br/>
B1&#160;D3&#160;<br/>
LDA&#160;($D3),Y&#160;<br/>
Get&#160;string&#160;length&#160;and&#160;set&#160;up&#160;<br/>
CB7B&#160;<br/>
20&#160;A3&#160;D5&#160;<br/>
JSR&#160;$D5A3&#160;<br/>
new&#160;string&#160;&amp;&#160;data&#160;block.&#160;<br/>
CB7E&#160;<br/>
A5&#160;BF&#160;<br/>
LDA&#160;$BF&#160;<br/>
Copy&#160;pointers&#160;to&#160;present&#160;<br/>
CB80&#160;<br/>
A4&#160;C0&#160;<br/>
LDY&#160;$C0&#160;<br/>
string&#160;into&#160;$DE/$DF.&#160;<br/>
CB82&#160;<br/>
85&#160;DE&#160;<br/>
STA&#160;$DE&#160;<br/>
CB84&#160;<br/>
84&#160;DF&#160;<br/>
STY&#160;$DF&#160;<br/>
CB86&#160;<br/>
20&#160;A4&#160;D7&#160;<br/>
JSR&#160;$D7A4&#160;<br/>
Transfer&#160;string&#160;into&#160;position.&#160;<br/>
CB89&#160;<br/>
A9&#160;D0&#160;<br/>
LDA&#160;#$D0&#160;<br/>
Use&#160;data&#160;block&#160;at&#160;$00,$01,$02.&#160;<br/>
CB8B&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
CB8D&#160;<br/>
85&#160;BF&#160;<br/>
STA&#160;$BF&#160;<br/>
CB8F&#160;<br/>
84&#160;C0&#160;<br/>
STY&#160;$C0&#160;<br/>
CB91&#160;<br/>
20&#160;05&#160;D8&#160;<br/>
JSR&#160;$D805&#160;<br/>
Release&#160;from&#160;string&#160;stack&#160;if&#160;<br/>
CB94&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
temporary.&#160;<br/>
CB96&#160;<br/>
B1&#160;BF&#160;<br/>
LDA&#160;($BF),Y&#160;<br/>
Copy&#160;data&#160;block&#160;into&#160;variable&#160;<br/>
CB98&#160;<br/>
91&#160;B8&#160;<br/>
STA&#160;($B8),Y&#160;<br/>
area&#160;so&#160;that&#160;it&#160;is&#160;now&#160;a&#160;<br/>
CB9A&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
string&#160;pointer.&#160;<br/>
CB9B&#160;<br/>
B1&#160;BF&#160;<br/>
LDA&#160;($BF),Y&#160;<br/>
CB9D&#160;<br/>
91&#160;B8&#160;<br/>
STA&#160;($B8),Y&#160;<br/>
CB9F&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
CBA0&#160;<br/>
B1&#160;BF&#160;<br/>
LDA&#160;($BF),Y&#160;<br/>
CBA2&#160;<br/>
91&#160;B8&#160;<br/>
STA&#160;($B8),Y&#160;<br/>
CBA4&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
Exit.&#160;<br/>
&#160;<br/>CBA5&#160;<br/>
20&#160;B3&#160;CC&#160;<br/>
JSR&#160;$CCB3&#160;<br/>
Set&#160;up&#160;string&#160;data&#160;in&#160;main&#160;FPA&#160;<br/>
CBA8&#160;<br/>
20&#160;E8&#160;00&#160;<br/>
JSR&#160;$00E8&#160;<br/>
and&#160;print&#160;string&#160;out.&#160;<br/>
&#160;<br/>CBAB&#160;<br/>
F0&#160;43&#160;<br/>
BEQ&#160;$CBF0&#160;<br/>
<b>PRINT</b>&#160;New/line&#160;if&#160;no&#160;data.&#160;<br/>
CBAD&#160;<br/>
F0&#160;5C&#160;<br/>
BEQ&#160;$CC0B&#160;<br/>
Exit&#160;if&#160;no&#160;more&#160;data.&#160;<br/>
CBAF&#160;<br/>
C9&#160;C2&#160;<br/>
CMP&#160;#$C2&#160;<br/>
CBB1&#160;<br/>
F0&#160;7B&#160;<br/>
BEQ&#160;$CC2E&#160;<br/>
'TAB('&#160;token&#160;found.&#160;<br/>
CBB3&#160;<br/>
C9&#160;C5&#160;<br/>
CMP&#160;#$C5&#160;<br/>
CBB5&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
CBB6&#160;<br/>
F0&#160;76&#160;<br/>
BEQ&#160;$CC2E&#160;<br/>
'SPC('&#160;token&#160;found.&#160;<br/>
CBB8&#160;<br/>
C9&#160;2C&#160;<br/>
CMP&#160;#$2C&#160;<br/>
CBBA&#160;<br/>
F0&#160;50&#160;<br/>
BEQ&#160;$CC0C&#160;<br/>
Comma&#160;found.&#160;<br/>
CBBC&#160;<br/>
C9&#160;3B&#160;<br/>
CMP&#160;#$3B&#160;<br/>
CBBE&#160;<br/>
F0&#160;6B&#160;<br/>
BEQ&#160;$CC2B&#160;<br/>
Semi-colon&#160;found.&#160;<br/>
CBC0&#160;<br/>
C9&#160;C6&#160;<br/>
CMP&#160;#$C6&#160;<br/>
CBC2&#160;<br/>
D0&#160;03&#160;<br/>
BNE&#160;$CBC7&#160;<br/>
Character&#160;is&#160;not&#160;an&#160;'@'&#160;<br/>
CBC4&#160;<br/>
4C&#160;59&#160;CC&#160;<br/>
JMP&#160;$CC59&#160;<br/>
Set&#160;cursor&#160;for&#160;'@'&#160;command.&#160;<br/>
&#160;<br/>CBC7&#160;<br/>
20&#160;17&#160;CF&#160;<br/>
JSR&#160;$CF17&#160;<br/>
Evaluate&#160;expression.&#160;<br/>
CBCA&#160;<br/>
24&#160;28&#160;<br/>
BIT&#160;$28&#160;<br/>
CBCC&#160;<br/>
30&#160;D7&#160;<br/>
BMI&#160;$CBA5&#160;<br/>
String&#160;flag&#160;is&#160;set.&#160;<br/>
CBCE&#160;<br/>
20&#160;D5&#160;E0&#160;<br/>
JSR&#160;$E0D5&#160;<br/>
Convert&#160;number&#160;to&#160;string.&#160;<br/>
CBD1&#160;<br/>
20&#160;B5&#160;D5&#160;<br/>
JSR&#160;$D5B5&#160;<br/>
Get&#160;string&#160;after&#160;first&#160;&#34;.&#160;<br/>
Pag&#160;&#160;e&#160;20&#160;<br/>
<hr/>
<a name=21></a>CBD4&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
CBD6&#160;<br/>
B1&#160;D3&#160;<br/>
LDA&#160;($D3),Y&#160;<br/>
CBD8&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
CBD9&#160;<br/>
65&#160;30&#160;<br/>
ADC&#160;$30&#160;<br/>
CBDB&#160;<br/>
C5&#160;31&#160;<br/>
CMP&#160;$31&#160;<br/>
Branch&#160;if&#160;there&#160;will&#160;not&#160;be&#160;<br/>
CBDD&#160;<br/>
90&#160;03&#160;<br/>
BCC&#160;$CBE2&#160;<br/>
overflow&#160;on&#160;to&#160;next&#160;line.&#160;<br/>
CBDF&#160;<br/>
20&#160;F0&#160;CB&#160;<br/>
JSR&#160;$CBF0&#160;<br/>
Newline.&#160;<br/>
CBE2&#160;<br/>
20&#160;B3&#160;CC&#160;<br/>
JSR&#160;$CCB3&#160;<br/>
Print&#160;the&#160;string.&#160;<br/>
CBE5&#160;<br/>
20&#160;D4&#160;CC&#160;<br/>
JSR&#160;$CCD4&#160;<br/>
Print&#160;a&#160;space.&#160;<br/>
CBE8&#160;<br/>
D0&#160;BE&#160;<br/>
BNE&#160;$CBA8&#160;<br/>
Branch&#160;back&#160;for&#160;more.&#160;<br/>
CBEA&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
Finish&#160;off&#160;input&#160;buffer&#160;by&#160;<br/>
CBEC&#160;<br/>
94&#160;35&#160;<br/>
STY&#160;$35,X&#160;<br/>
writing&#160;zero&#160;to&#160;last&#160;position.&#160;<br/>
CBEE&#160;<br/>
A2&#160;34&#160;<br/>
LDX&#160;#$34&#160;<br/>
&#160;<br/>CBF0&#160;<br/>
A5&#160;30&#160;<br/>
LDA&#160;$30&#160;<br/>
<b>NEWLINE.</b>&#160;<br/>
CBF2&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
Save&#160;cursor&#160;position.&#160;<br/>
CBF3&#160;<br/>
A9&#160;0D&#160;<br/>
LDA&#160;#$0D&#160;<br/>
Print&#160;carnage&#160;<br/>
CBF5&#160;<br/>
20&#160;D9&#160;CC&#160;<br/>
JSR&#160;$CCD9&#160;<br/>
CBF8&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Restore&#160;cursor&#160;position.&#160;<br/>
CBF9&#160;<br/>
2C&#160;F1&#160;02&#160;<br/>
BIT&#160;$02F1&#160;<br/>
CBFC&#160;<br/>
30&#160;04&#160;<br/>
BMI&#160;$CC02&#160;<br/>
Printer&#160;is&#160;on.&#160;<br/>
CBFE&#160;<br/>
C5&#160;31&#160;<br/>
CMP&#160;$31&#160;<br/>
Test&#160;and&#160;branch&#160;if&#160;cursor&#160;is&#160;<br/>
CC00&#160;<br/>
F0&#160;09&#160;<br/>
BEQ&#160;$CC0B&#160;<br/>
at&#160;maximum&#160;line&#160;width.&#160;<br/>
CC02&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
Zero&#160;the&#160;cursor.&#160;<br/>
CC04&#160;<br/>
85&#160;30&#160;<br/>
STA&#160;$30&#160;<br/>
CC06&#160;<br/>
A9&#160;0A&#160;<br/>
LDA&#160;#$0A&#160;<br/>
Print&#160;a&#160;line&#160;feed&#160;char.&#160;<br/>
CC08&#160;<br/>
20&#160;D9&#160;CC&#160;<br/>
JSR&#160;$CCD9&#160;<br/>
CC0B&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>CC0C&#160;<br/>
A5&#160;30&#160;<br/>
LDA&#160;$30&#160;<br/>
CC0E&#160;<br/>
2C&#160;F1&#160;02&#160;<br/>
BIT&#160;$02F1&#160;<br/>
CC11&#160;<br/>
30&#160;04&#160;<br/>
BMI&#160;$CC17&#160;<br/>
Printer&#160;is&#160;enabled.&#160;<br/>
CC13&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
CC14&#160;<br/>
ED&#160;53&#160;02&#160;<br/>
SBC&#160;$0253&#160;<br/>
Subtract&#160;content&#160;of&#160;$253&#160;off&#160;<br/>
CC17&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
cursor&#160;position&#160;and&#160;then&#160;find&#160;<br/>
CC18&#160;<br/>
E9&#160;08&#160;<br/>
SBC&#160;#$08&#160;<br/>
difference&#160;between&#160;that&#160;and&#160;<br/>
CC1A&#160;<br/>
B0&#160;FC&#160;<br/>
BCS&#160;$CC18&#160;<br/>
the&#160;next&#160;multiple&#160;of&#160;8.&#160;<br/>
CC1C&#160;<br/>
49&#160;FF&#160;<br/>
EOR&#160;#$FF&#160;<br/>
CC1E&#160;<br/>
69&#160;01&#160;<br/>
ADC&#160;#$01&#160;<br/>
CC20&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
CC21&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
CC22&#160;<br/>
65&#160;30&#160;<br/>
ADC&#160;$30&#160;<br/>
If&#160;next&#160;multiple&#160;of&#160;8&#160;in&#160;<br/>
CC24&#160;<br/>
C5&#160;31&#160;<br/>
CMP&#160;$31&#160;<br/>
cursor&#160;position&#160;is&#160;not&#160;off&#160;<br/>
CC26&#160;<br/>
90&#160;1F&#160;<br/>
BCC&#160;$CC47&#160;<br/>
the&#160;screen&#160;then&#160;branch.&#160;<br/>
CC28&#160;<br/>
20&#160;F0&#160;CB&#160;<br/>
JSR&#160;$CBF0&#160;<br/>
Newline.&#160;<br/>
CC2B&#160;<br/>
4C&#160;4B&#160;CC&#160;<br/>
JMP&#160;$CC4B&#160;<br/>
Go&#160;back&#160;for&#160;more.&#160;<br/>
&#160;<br/>CC2E&#160;<br/>
08&#160;<br/>
PHP&#160;<br/>
Deal&#160;with&#160;'TAB('&#160;and&#160;'SPC('.&#160;<br/>
CC2F&#160;<br/>
20&#160;C5&#160;D8&#160;<br/>
JSR&#160;$D8C5&#160;<br/>
Get&#160;single&#160;byte&#160;expression.&#160;<br/>
CC32&#160;<br/>
C9&#160;29&#160;<br/>
CMP&#160;#$29&#160;<br/>
CC34&#160;<br/>
D0&#160;20&#160;<br/>
BNE&#160;$CC56&#160;<br/>
')'&#160;not&#160;found.&#160;<br/>
CC36&#160;<br/>
28&#160;<br/>
PLP&#160;<br/>
CC37&#160;<br/>
90&#160;0E&#160;<br/>
BCC&#160;$CC47&#160;<br/>
'SPC('&#160;token.&#160;<br/>
CC39&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
'TAB('&#160;token.&#160;<br/>
CC3A&#160;<br/>
C5&#160;31&#160;<br/>
CMP&#160;$31&#160;<br/>
CC3C&#160;<br/>
90&#160;03&#160;<br/>
BCC&#160;$CC41&#160;<br/>
If&#160;TAB&#160;will&#160;go&#160;off&#160;screen&#160;then&#160;<br/>
CC3E&#160;<br/>
4C&#160;36&#160;D3&#160;<br/>
JMP&#160;$D336&#160;<br/>
print&#160;&#34;ILLEGAL&#160;QUANTITY&#160;ERROR&#34;&#160;<br/>
CC41&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
CC42&#160;<br/>
E5&#160;30&#160;<br/>
SBC&#160;$30&#160;<br/>
Branch&#160;if&#160;TAB&#160;column&#160;is&#160;before&#160;<br/>
CC44&#160;<br/>
90&#160;05&#160;<br/>
BCC&#160;$CC4B&#160;<br/>
current&#160;cursor&#160;column.&#160;<br/>
CC46&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
CC47&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
Print&#160;spaces&#160;to&#160;get&#160;cursor&#160;in&#160;<br/>
CC48&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
correct&#160;column&#160;for&#160;next&#160;chars&#160;<br/>
CC49&#160;<br/>
D0&#160;06&#160;<br/>
BNE&#160;$CC51&#160;<br/>
to&#160;be&#160;printed.&#160;<br/>
Pag&#160;&#160;e&#160;21&#160;<br/>
<hr/>
<a name=22></a>CC4B&#160;<br/>
20&#160;E2&#160;00&#160;<br/>
JSR&#160;$00E2&#160;<br/>
Clear&#160;spaces&#160;in&#160;text.&#160;<br/>
CC4E&#160;<br/>
4C&#160;AD&#160;CB&#160;<br/>
JMP&#160;$CBAD&#160;<br/>
Jump&#160;back&#160;to&#160;print&#160;more.&#160;<br/>
CC51&#160;<br/>
20&#160;D4&#160;CC&#160;<br/>
JSR&#160;$CCD4&#160;<br/>
Print&#160;space.&#160;<br/>
CC54&#160;<br/>
D0&#160;F2&#160;<br/>
BNE&#160;$CC48&#160;<br/>
Jump&#160;back&#160;for&#160;more.&#160;<br/>
CC56&#160;<br/>
4C&#160;70&#160;D0&#160;<br/>
JMP&#160;$D070&#160;<br/>
Print&#160;&#34;SYNTAX&#160;ERROR&#34;&#160;<br/>
&#160;<br/>CC59&#160;<br/>
2C&#160;F1&#160;02&#160;<br/>
BIT&#160;$02F1&#160;<br/>
<b>SET&#160;CURSOR&#160;FOR&#160;'@'.</b>&#160;<br/>
CC5C&#160;<br/>
30&#160;F8&#160;<br/>
BMI&#160;$CC56&#160;<br/>
Printer&#160;is&#160;on.&#160;<br/>
CC5E&#160;<br/>
AE&#160;1F&#160;02&#160;<br/>
LDX&#160;$021F&#160;<br/>
CC61&#160;<br/>
F0&#160;03&#160;<br/>
BEQ&#160;$CC66&#160;<br/>
In&#160;text&#160;mode.&#160;<br/>
CC63&#160;<br/>
4C&#160;F7&#160;EA&#160;<br/>
JMP&#160;$EAF7&#160;<br/>
Print&#160;&#34;DISP&#160;TYPE&#160;MISMATCH&#160;E..&#34;&#160;<br/>
&#160;<br/>CC66&#160;<br/>
20&#160;C5&#160;D8&#160;<br/>
JSR&#160;$D8C5&#160;<br/>
Get&#160;single&#160;byte&#160;expression.&#160;<br/>
CC69&#160;<br/>
E0&#160;28&#160;<br/>
CPX&#160;#$28&#160;<br/>
Print&#160;&#34;ILLEGAL&#160;QUANTITY&#160;ERROR&#34;&#160;<br/>
CC6B&#160;<br/>
B0&#160;40&#160;<br/>
BCS&#160;$CCAD&#160;<br/>
if&#160;going&#160;off&#160;screen.&#160;<br/>
CC6D&#160;<br/>
86&#160;0C&#160;<br/>
STX&#160;$0C&#160;<br/>
CC6F&#160;<br/>
20&#160;65&#160;D0&#160;<br/>
JSR&#160;$D065&#160;<br/>
Test&#160;for&#160;comma.&#160;<br/>
CC72&#160;<br/>
20&#160;C8&#160;D8&#160;<br/>
JSR&#160;$D8C8&#160;<br/>
Get&#160;single&#160;byte&#160;expression.&#160;<br/>
CC75&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
CC76&#160;<br/>
E0&#160;1C&#160;<br/>
CPX&#160;#$1C&#160;<br/>
Give&#160;error&#160;if&#160;cursor&#160;will&#160;be&#160;<br/>
CC78&#160;<br/>
B0&#160;33&#160;<br/>
BCS&#160;$CCAD&#160;<br/>
off&#160;bottom&#160;of&#160;screen.&#160;<br/>
CC7A&#160;<br/>
AD&#160;6A&#160;02&#160;<br/>
LDA&#160;$026A&#160;<br/>
CC7D&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
Temporarily&#160;disable&#160;cursor.&#160;<br/>
CC7E&#160;<br/>
29&#160;FE&#160;<br/>
AND&#160;#$FE&#160;<br/>
CC80&#160;<br/>
8D&#160;6A&#160;02&#160;<br/>
STA&#160;$026A&#160;<br/>
CC83&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
Turn&#160;cursor&#160;off.&#160;<br/>
CC85&#160;<br/>
20&#160;01&#160;F8&#160;<br/>
JSR&#160;$F801&#160;<br/>
CC88&#160;<br/>
A5&#160;0C&#160;<br/>
LDA&#160;$0C&#160;<br/>
Put&#160;new&#160;cursor&#160;column&#160;and&#160;rows&#160;<br/>
CC8A&#160;<br/>
8D&#160;69&#160;02&#160;<br/>
STA&#160;$0269&#160;<br/>
into&#160;the&#160;locations&#160;used&#160;by&#160;the&#160;<br/>
CC8D&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
operating&#160;system.&#160;<br/>
CC8E&#160;<br/>
8D&#160;68&#160;02&#160;<br/>
STA&#160;$0268&#160;<br/>
CC91&#160;<br/>
20&#160;0C&#160;DA&#160;<br/>
JSR&#160;$DA0C&#160;<br/>
Calculate&#160;screen&#160;row&#160;address.&#160;<br/>
CC94&#160;<br/>
A5&#160;1F&#160;<br/>
LDA&#160;$1F&#160;<br/>
Put&#160;start&#160;of&#160;current&#160;row&#160;<br/>
CC96&#160;<br/>
A4&#160;20&#160;<br/>
LDY&#160;$20&#160;<br/>
address&#160;into&#160;correct&#160;pointer.&#160;<br/>
CC98&#160;<br/>
85&#160;12&#160;<br/>
STA&#160;$12&#160;<br/>
CC9A&#160;<br/>
84&#160;13&#160;<br/>
STY&#160;$13&#160;<br/>
CC9C&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Restore&#160;cursor&#160;flag.&#160;<br/>
CC9D&#160;<br/>
8D&#160;6A&#160;02&#160;<br/>
STA&#160;$026A&#160;<br/>
CCA0&#160;<br/>
A9&#160;01&#160;<br/>
LDA&#160;#$01&#160;<br/>
Turn&#160;cursor&#160;back&#160;on.&#160;<br/>
CCA2&#160;<br/>
20&#160;01&#160;F8&#160;<br/>
JSR&#160;$F801&#160;<br/>
CCA5&#160;<br/>
A9&#160;3B&#160;<br/>
LDA&#160;#$3B&#160;<br/>
CCA7&#160;<br/>
20&#160;67&#160;D0&#160;<br/>
JSR&#160;$D067&#160;<br/>
Test&#160;for&#160;a&#160;&#34;;&#34;&#160;in&#160;text.&#160;<br/>
CCAA&#160;<br/>
4C&#160;AD&#160;CB&#160;<br/>
JMP&#160;$CBAD&#160;<br/>
Jump&#160;back&#160;for&#160;more.&#160;<br/>
&#160;<br/>CCAD&#160;<br/>
4C&#160;C2&#160;D8&#160;<br/>
JMP&#160;$D8C2&#160;<br/>
Print&#160;&#34;ILLEGAL&#160;QUANTITY...&#34;.&#160;<br/>
&#160;<br/>CCB0&#160;<br/>
20&#160;B5&#160;D5&#160;<br/>
JSR&#160;$D5B5&#160;<br/>
<b>PRINT&#160;OUT&#160;STRING&#160;AFTER&#160;&#34;.</b>&#160;<br/>
CCB3&#160;<br/>
20&#160;D0&#160;D7&#160;<br/>
JSR&#160;$D7D0&#160;<br/>
Get&#160;string&#160;after&#160;&#34;&#160;and&#160;set&#160;up&#160;<br/>
CCB6&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
string&#160;in&#160;main&#160;FPA.&#160;<br/>
CCB7&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
CCB9&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
Print&#160;out&#160;the&#160;number&#160;of&#160;chars&#160;<br/>
CCBA&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
held&#160;in&#160;X&#160;using&#160;the&#160;pointer&#160;at&#160;<br/>
CCBB&#160;<br/>
F0&#160;10&#160;<br/>
BEQ&#160;$CCCD&#160;<br/>
$91/$92&#160;to&#160;load&#160;in&#160;string&#160;from&#160;<br/>
CCBD&#160;<br/>
B1&#160;91&#160;<br/>
LDA&#160;($91),Y&#160;<br/>
memory.&#160;<br/>
CCBF&#160;<br/>
20&#160;D9&#160;CC&#160;<br/>
JSR&#160;$CCD9&#160;<br/>
CCC2&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
CCC3&#160;<br/>
C9&#160;0D&#160;<br/>
CMP&#160;#$0D&#160;<br/>
CCC5&#160;<br/>
D0&#160;F3&#160;<br/>
BNE&#160;$CCBA&#160;<br/>
CCC7&#160;<br/>
20&#160;0B&#160;CC&#160;<br/>
JSR&#160;$CC0B&#160;<br/>
CCCA&#160;<br/>
4C&#160;BA&#160;CC&#160;<br/>
JMP&#160;$CCBA&#160;<br/>
CCCD&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>CCCE&#160;<br/>
A9&#160;0C&#160;<br/>
LDA&#160;#$0C&#160;<br/>
CLS&#160;Load&#160;A&#160;with&#160;CTRL&#160;L.&#160;<br/>
CCD0&#160;<br/>
2C&#160;A9&#160;11&#160;<br/>
BIT&#160;$11A9&#160;<br/>
BIT&#160;instructions&#160;are&#160;used&#160;to&#160;<br/>
Pag&#160;&#160;e&#160;22&#160;<br/>
<hr/>
<a name=23></a>CCD3&#160;<br/>
2C&#160;A9&#160;20&#160;<br/>
BIT&#160;$20A9&#160;<br/>
hide&#160;the&#160;loading&#160;of&#160;A&#160;with&#160;<br/>
CCD6&#160;<br/>
2C&#160;A9&#160;3F&#160;<br/>
BIT&#160;$3FA9&#160;<br/>
different&#160;values&#160;<br/>
CCD9&#160;<br/>
24&#160;2E&#160;<br/>
BIT&#160;$2E&#160;<br/>
If&#160;CTRL&#160;O&#160;flag&#160;is&#160;set&#160;then&#160;set&#160;<br/>
CCDB&#160;<br/>
30&#160;33&#160;<br/>
BMI&#160;$CD10&#160;<br/>
flags&#160;and&#160;exit.&#160;<br/>
CCDD&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
Save&#160;char&#160;to&#160;be&#160;printed.&#160;<br/>
CCDE&#160;<br/>
C9&#160;20&#160;<br/>
CMP&#160;#$20&#160;<br/>
If&#160;control&#160;character&#160;do&#160;not&#160;<br/>
CCE0&#160;<br/>
90&#160;0B&#160;<br/>
BCC&#160;$CCED&#160;<br/>
check&#160;cursor&#160;position.&#160;<br/>
CCE2&#160;<br/>
A5&#160;30&#160;<br/>
LDA&#160;$30&#160;<br/>
Compare&#160;cursor&#160;position&#160;with&#160;<br/>
CCE4&#160;<br/>
C5&#160;31&#160;<br/>
CMP&#160;$31&#160;<br/>
line&#160;width.&#160;<br/>
CCE6&#160;<br/>
D0&#160;03&#160;<br/>
BNE&#160;$CCEB&#160;<br/>
CCE8&#160;<br/>
20&#160;F0&#160;CB&#160;<br/>
JSR&#160;$CBF0&#160;<br/>
If&#160;past&#160;end,&#160;print&#160;Newline.&#160;<br/>
CCEB&#160;<br/>
E6&#160;30&#160;<br/>
INC&#160;$30&#160;<br/>
Advance&#160;cursor&#160;column.&#160;<br/>
CCED&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
CCEE&#160;<br/>
2C&#160;F1&#160;02&#160;<br/>
BIT&#160;$02F1&#160;<br/>
CCF1&#160;<br/>
10&#160;08&#160;<br/>
BPL&#160;$CCFB&#160;<br/>
Printer&#160;is&#160;off.&#160;<br/>
CCF3&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
CCF4&#160;<br/>
20&#160;3E&#160;02&#160;<br/>
JSR&#160;$023E&#160;<br/>
Send&#160;byte&#160;to&#160;printer.&#160;<br/>
CCF7&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
CCF8&#160;<br/>
29&#160;FF&#160;<br/>
AND&#160;#$FF&#160;<br/>
Set&#160;flags&#160;and&#160;exit.&#160;<br/>
CCFA&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>CCFB&#160;<br/>
86&#160;27&#160;<br/>
STX&#160;$27&#160;<br/>
Save&#160;X&#160;register.&#160;<br/>
CCFD&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
CCFE&#160;<br/>
20&#160;7C&#160;F7&#160;<br/>
JSR&#160;$F77C&#160;<br/>
Print&#160;character&#160;to&#160;screen.&#160;<br/>
CD01&#160;<br/>
C9&#160;20&#160;<br/>
CMP&#160;#$20&#160;<br/>
CD03&#160;<br/>
90&#160;04&#160;<br/>
BCC&#160;$CD09&#160;<br/>
Control&#160;character.&#160;<br/>
CD05&#160;<br/>
C9&#160;7F&#160;<br/>
CMP&#160;#$7F&#160;<br/>
CD07&#160;<br/>
D0&#160;05&#160;<br/>
BNE&#160;$CD0E&#160;<br/>
Character&#160;is&#160;not&#160;DEL.&#160;<br/>
CD09&#160;<br/>
AE&#160;69&#160;02&#160;<br/>
LDX&#160;$0269&#160;<br/>
CD0C&#160;<br/>
86&#160;30&#160;<br/>
STX&#160;$30&#160;<br/>
Update&#160;Basic's&#160;cursor&#160;column.&#160;<br/>
CD0E&#160;<br/>
A6&#160;27&#160;<br/>
LDX&#160;$27&#160;<br/>
CD10&#160;<br/>
29&#160;FF&#160;<br/>
AND&#160;#$FF&#160;<br/>
CD12&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>CD13&#160;<br/>
6C&#160;F5&#160;02&#160;<br/>
JMP&#160;($02F5)&#160;<br/>
<b>!</b>&#160;Command.&#160;<br/>
&#160;<br/>CD16&#160;<br/>
A9&#160;80&#160;<br/>
LDA&#160;#$80&#160;<br/>
<b>TRON</b>&#160;The&#160;BIT&#160;instruction&#160;is&#160;<br/>
CD18&#160;<br/>
2C&#160;A9&#160;00&#160;<br/>
BIT&#160;$00A9&#160;<br/>
used&#160;to&#160;hide&#160;an&#160;entry&#160;point.&#160;<br/>
CD1B&#160;<br/>
8D&#160;F4&#160;02&#160;<br/>
STA&#160;$02F4&#160;<br/>
Set&#160;the&#160;TRACE&#160;flag&#160;to&#160;content&#160;<br/>
CD1E&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
of&#160;accumulator.&#160;<br/>
&#160;<br/>CD1F&#160;<br/>
A5&#160;2C&#160;<br/>
LDA&#160;$2C&#160;<br/>
Part&#160;of&#160;READ&#160;command.&#160;<br/>
CD21&#160;<br/>
F0&#160;13&#160;<br/>
BEQ&#160;$CD36&#160;<br/>
Branch&#160;if&#160;REDO&#160;FROM&#160;START.&#160;<br/>
CD23&#160;<br/>
30&#160;04&#160;<br/>
BMI&#160;$CD29&#160;<br/>
CD25&#160;<br/>
A0&#160;FF&#160;<br/>
LDY&#160;#$FF&#160;<br/>
CD27&#160;<br/>
D0&#160;04&#160;<br/>
BNE&#160;$CD2D&#160;<br/>
CD29&#160;<br/>
A5&#160;AE&#160;<br/>
LDA&#160;$AE&#160;<br/>
CD2B&#160;<br/>
A4&#160;AF&#160;<br/>
LDY&#160;$AF&#160;<br/>
CD2D&#160;<br/>
85&#160;A8&#160;<br/>
STA&#160;$A8&#160;<br/>
CD2F&#160;<br/>
84&#160;A9&#160;<br/>
STY&#160;$A9&#160;<br/>
CD31&#160;<br/>
A2&#160;A8&#160;<br/>
LDX&#160;#$A8&#160;<br/>
CD33&#160;<br/>
4C&#160;7E&#160;C4&#160;<br/>
JMP&#160;$C47E&#160;<br/>
&#34;TYPE&#160;MISMATCH&#160;ERROR&#34;.&#160;<br/>
&#160;<br/>CD36&#160;<br/>
A9&#160;85&#160;<br/>
LDA&#160;#$85&#160;<br/>
CD38&#160;<br/>
A0&#160;CE&#160;<br/>
LDY&#160;#$CE&#160;<br/>
CD3A&#160;<br/>
20&#160;B0&#160;CC&#160;<br/>
JSR&#160;$CCB0&#160;<br/>
Print&#160;out&#160;string&#160;after&#160;&#34;.&#160;<br/>
CD3D&#160;<br/>
A5&#160;AC&#160;<br/>
LDA&#160;$AC&#160;<br/>
Restore&#160;program&#160;position&#160;<br/>
CD3F&#160;<br/>
A4&#160;AD&#160;<br/>
LDY&#160;$AD&#160;<br/>
pointer.&#160;<br/>
CD41&#160;<br/>
85&#160;E9&#160;<br/>
STA&#160;$E9&#160;<br/>
CD43&#160;<br/>
84&#160;EA&#160;<br/>
STY&#160;$EA&#160;<br/>
CD45&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>CD46&#160;<br/>
20&#160;D2&#160;D4&#160;<br/>
JSR&#160;$D4D2&#160;<br/>
<b>GET</b>&#160;Check&#160;for&#160;ILLEGAL&#160;DIRECT&#160;<br/>
CD49&#160;<br/>
A2&#160;36&#160;<br/>
LDX&#160;#$36&#160;<br/>
error.&#160;<br/>
Pag&#160;&#160;e&#160;23&#160;<br/>
<hr/>
<a name=24></a>CD4B&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
CD4D&#160;<br/>
84&#160;36&#160;<br/>
STY&#160;$36&#160;<br/>
CD4F&#160;<br/>
A9&#160;40&#160;<br/>
LDA&#160;#$40&#160;<br/>
CD51&#160;<br/>
20&#160;8F&#160;CD&#160;<br/>
JSR&#160;$CD8F&#160;<br/>
Get&#160;input&#160;by&#160;using&#160;READ&#160;<br/>
CD54&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
command.&#160;<br/>
&#160;<br/>CD55&#160;<br/>
46&#160;2E&#160;<br/>
LSR&#160;$2E&#160;<br/>
<b>INPUT</b>&#160;Turn&#160;off&#160;CTRL&#160;O&#160;flag.&#160;<br/>
CD57&#160;<br/>
C9&#160;22&#160;<br/>
CMP&#160;#$22&#160;<br/>
CD59&#160;<br/>
D0&#160;0B&#160;<br/>
BNE&#160;$CD66&#160;<br/>
Double&#160;quote&#160;is&#160;not&#160;present.&#160;<br/>
CD5B&#160;<br/>
20&#160;25&#160;D0&#160;<br/>
JSR&#160;$D025&#160;<br/>
Get&#160;string&#160;after&#160;&#34;&#160;and&#160;update&#160;<br/>
CD5E&#160;<br/>
A9&#160;3B&#160;<br/>
LDA&#160;#$3B&#160;<br/>
position&#160;pointer.&#160;<br/>
CD60&#160;<br/>
20&#160;67&#160;D0&#160;<br/>
JSR&#160;$D067&#160;<br/>
Check&#160;for&#160;;&#160;<br/>
CD63&#160;<br/>
20&#160;B3&#160;CC&#160;<br/>
JSR&#160;$CCB3&#160;<br/>
Print&#160;out&#160;string&#160;after&#160;&#34;&#160;<br/>
CD66&#160;<br/>
20&#160;D2&#160;D4&#160;<br/>
JSR&#160;$D4D2&#160;<br/>
Check&#160;for&#160;ILLEGAL&#160;DIRECT&#160;error&#160;<br/>
CD69&#160;<br/>
A9&#160;2C&#160;<br/>
LDA&#160;#$2C&#160;<br/>
CD6B&#160;<br/>
85&#160;34&#160;<br/>
STA&#160;$34&#160;<br/>
CD6D&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
CD6F&#160;<br/>
85&#160;17&#160;<br/>
STA&#160;$17&#160;<br/>
Reset&#160;CTRL&#160;C&#160;flag.&#160;<br/>
CD71&#160;<br/>
20&#160;80&#160;CD&#160;<br/>
JSR&#160;$CD80&#160;<br/>
Print&#160;?&#160;and&#160;input&#160;line&#160;from&#160;KB&#160;<br/>
CD74&#160;<br/>
A5&#160;35&#160;<br/>
LDA&#160;$35&#160;<br/>
CD76&#160;<br/>
D0&#160;16&#160;<br/>
BNE&#160;$CD8E&#160;<br/>
CD78&#160;<br/>
A5&#160;17&#160;<br/>
LDA&#160;$17&#160;<br/>
CD7A&#160;<br/>
F0&#160;F1&#160;<br/>
BEQ&#160;$CD6D&#160;<br/>
CTRL&#160;C&#160;flag&#160;is&#160;still&#160;off.&#160;<br/>
CD7C&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
CD7D&#160;<br/>
4C&#160;80&#160;C9&#160;<br/>
JMP&#160;$C980&#160;<br/>
Sort&#160;out&#160;CTRL&#160;C.&#160;<br/>
&#160;<br/>CD80&#160;<br/>
20&#160;D7&#160;CC&#160;<br/>
JSR&#160;$CCD7&#160;<br/>
Print&#160;?.&#160;<br/>
CD83&#160;<br/>
20&#160;D4&#160;CC&#160;<br/>
JSR&#160;$CCD4&#160;<br/>
Print&#160;a&#160;space.&#160;<br/>
CD86&#160;<br/>
4C&#160;92&#160;C5&#160;<br/>
JMP&#160;$C592&#160;<br/>
Input&#160;line&#160;from&#160;keyboard.&#160;<br/>
&#160;<br/>CD89&#160;<br/>
A6&#160;B0&#160;<br/>
LDX&#160;$B0&#160;<br/>
<b>READ</b>&#160;<br/>
CD8B&#160;<br/>
A4&#160;B1&#160;<br/>
LDY&#160;$B1&#160;<br/>
CD8D&#160;<br/>
A9&#160;98&#160;<br/>
LDA&#160;#$98&#160;<br/>
Clear&#160;REDO&#160;FROM&#160;START&#160;flag.&#160;<br/>
CD8F&#160;<br/>
85&#160;2C&#160;<br/>
STA&#160;$2C&#160;<br/>
CD91&#160;<br/>
86&#160;B2&#160;<br/>
STX&#160;$B2&#160;<br/>
CD93&#160;<br/>
84&#160;B3&#160;<br/>
STY&#160;$B3&#160;<br/>
CD95&#160;<br/>
20&#160;88&#160;D1&#160;<br/>
JSR&#160;$D188&#160;<br/>
Get&#160;variable&#160;from&#160;text.&#160;<br/>
CD98&#160;<br/>
85&#160;B8&#160;<br/>
STA&#160;$B8&#160;<br/>
Save&#160;address&#160;of&#160;pointer.&#160;<br/>
CD9A&#160;<br/>
84&#160;B9&#160;<br/>
STY&#160;$B9&#160;<br/>
CD9C&#160;<br/>
A5&#160;E9&#160;<br/>
LDA&#160;$E9&#160;<br/>
CD9E&#160;<br/>
A4&#160;EA&#160;<br/>
LDY&#160;$EA&#160;<br/>
Copy&#160;program&#160;position&#160;pointer.&#160;<br/>
CDA0&#160;<br/>
85&#160;BA&#160;<br/>
STA&#160;$BA&#160;<br/>
CDA2&#160;<br/>
84&#160;BB&#160;<br/>
STY&#160;$BB&#160;<br/>
CDA4&#160;<br/>
A6&#160;B2&#160;<br/>
LDX&#160;$B2&#160;<br/>
Copy&#160;DATA&#160;pointer.&#160;<br/>
CDA6&#160;<br/>
A4&#160;B3&#160;<br/>
LDY&#160;$B3&#160;<br/>
CDA8&#160;<br/>
86&#160;E9&#160;<br/>
STX&#160;$E9&#160;<br/>
CDAA&#160;<br/>
84&#160;EA&#160;<br/>
STY&#160;$EA&#160;<br/>
CDAC&#160;<br/>
20&#160;E8&#160;00&#160;<br/>
JSR&#160;$00E8&#160;<br/>
Get&#160;next&#160;non&#160;space&#160;character.&#160;<br/>
CDAF&#160;<br/>
D0&#160;1D&#160;<br/>
BNE&#160;$CDCE&#160;<br/>
Branch&#160;if&#160;not&#160;end&#160;of&#160;line.&#160;<br/>
CDB1&#160;<br/>
24&#160;2C&#160;<br/>
BIT&#160;$2C&#160;<br/>
CDB3&#160;<br/>
50&#160;0D&#160;<br/>
BVC&#160;$CDC2&#160;<br/>
CDB5&#160;<br/>
20&#160;78&#160;EB&#160;<br/>
JSR&#160;$EB78&#160;<br/>
Read&#160;next&#160;key&#160;from&#160;keyboard.&#160;<br/>
CDB8&#160;<br/>
10&#160;FB&#160;<br/>
BPL&#160;$CDB5&#160;<br/>
Wait&#160;until&#160;key&#160;is&#160;valid.&#160;<br/>
CDBA&#160;<br/>
85&#160;35&#160;<br/>
STA&#160;$35&#160;<br/>
CDBC&#160;<br/>
A2&#160;34&#160;<br/>
LDX&#160;#$34&#160;<br/>
CDBE&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
CDC0&#160;<br/>
F0&#160;08&#160;<br/>
BEQ&#160;$CDCA&#160;<br/>
CDC2&#160;<br/>
30&#160;71&#160;<br/>
BMI&#160;$CE35&#160;<br/>
CDC4&#160;<br/>
20&#160;D7&#160;CC&#160;<br/>
JSR&#160;$CCD7&#160;<br/>
Print&#160;?&#160;<br/>
CDC7&#160;<br/>
20&#160;80&#160;CD&#160;<br/>
JSR&#160;$CD80&#160;<br/>
Print&#160;?&#160;and&#160;input&#160;line&#160;from&#160;KB&#160;<br/>
CDCA&#160;<br/>
86&#160;E9&#160;<br/>
STX&#160;$E9&#160;<br/>
CDCC&#160;<br/>
84&#160;EA&#160;<br/>
STY&#160;$EA&#160;<br/>
Set&#160;position&#160;of&#160;input.&#160;<br/>
CDCE&#160;<br/>
20&#160;E2&#160;00&#160;<br/>
JSR&#160;$00E2&#160;<br/>
Get&#160;next&#160;char&#160;from&#160;text.&#160;<br/>
CDD1&#160;<br/>
24&#160;28&#160;<br/>
BIT&#160;$28&#160;<br/>
Pag&#160;&#160;e&#160;24&#160;<br/>
<hr/>
<a name=25></a>CDD3&#160;<br/>
10&#160;31&#160;<br/>
BPL&#160;$CE06&#160;<br/>
Variable&#160;is&#160;not&#160;string&#160;type.&#160;<br/>
CDD5&#160;<br/>
24&#160;2C&#160;<br/>
BIT&#160;$2C&#160;<br/>
CDD7&#160;<br/>
50&#160;09&#160;<br/>
BVC&#160;$CDE2&#160;<br/>
CDD9&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
CDDA&#160;<br/>
86&#160;E9&#160;<br/>
STX&#160;$E9&#160;<br/>
CDDC&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
CDDE&#160;<br/>
85&#160;24&#160;<br/>
STA&#160;$24&#160;<br/>
CDE0&#160;<br/>
F0&#160;0C&#160;<br/>
BEQ&#160;$CDEE&#160;<br/>
CDE2&#160;<br/>
85&#160;24&#160;<br/>
STA&#160;$24&#160;<br/>
CDE4&#160;<br/>
C9&#160;22&#160;<br/>
CMP&#160;#$22&#160;<br/>
CDE6&#160;<br/>
F0&#160;07&#160;<br/>
BEQ&#160;$CDEF&#160;<br/>
CDE8&#160;<br/>
A9&#160;3A&#160;<br/>
LDA&#160;#$3A&#160;<br/>
CDEA&#160;<br/>
85&#160;24&#160;<br/>
STA&#160;$24&#160;<br/>
CDEC&#160;<br/>
A9&#160;2C&#160;<br/>
LDA&#160;#$2C&#160;<br/>
CDEE&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
CDEF&#160;<br/>
85&#160;25&#160;<br/>
STA&#160;$25&#160;<br/>
CDF1&#160;<br/>
A5&#160;E9&#160;<br/>
LDA&#160;$E9&#160;<br/>
CDF3&#160;<br/>
A4&#160;EA&#160;<br/>
LDY&#160;$EA&#160;<br/>
CDF5&#160;<br/>
69&#160;00&#160;<br/>
ADC&#160;#$00&#160;<br/>
CDF7&#160;<br/>
90&#160;01&#160;<br/>
BCC&#160;$CDFA&#160;<br/>
CDF9&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
CDFA&#160;<br/>
20&#160;BB&#160;D5&#160;<br/>
JSR&#160;$D5BB&#160;<br/>
Get&#160;string&#160;after&#160;&#34;&#160;<br/>
CDFD&#160;<br/>
20&#160;0D&#160;D9&#160;<br/>
JSR&#160;$D90D&#160;<br/>
Set&#160;program&#160;ptr&#160;to&#160;content&#160;of&#160;<br/>
CE00&#160;<br/>
20&#160;51&#160;CB&#160;<br/>
JSR&#160;$CB51&#160;<br/>
$E0/$E1&#160;and&#160;assign&#160;string.&#160;<br/>
CE03&#160;<br/>
4C&#160;0E&#160;CE&#160;<br/>
JMP&#160;$CE0E&#160;<br/>
&#160;<br/>CE06&#160;<br/>
20&#160;E7&#160;DF&#160;<br/>
JSR&#160;$DFE7&#160;<br/>
Get&#160;number.&#160;<br/>
CE09&#160;<br/>
A5&#160;29&#160;<br/>
LDA&#160;$29&#160;<br/>
Load&#160;integer&#160;variable&#160;flag.&#160;<br/>
CE0B&#160;<br/>
20&#160;39&#160;CB&#160;<br/>
JSR&#160;$CB39&#160;<br/>
Assign&#160;integer.&#160;<br/>
CE0E&#160;<br/>
20&#160;E8&#160;00&#160;<br/>
JSR&#160;$00E8&#160;<br/>
Get&#160;next&#160;char&#160;from&#160;text.&#160;<br/>
CE11&#160;<br/>
F0&#160;07&#160;<br/>
BEQ&#160;$CE1A&#160;<br/>
End&#160;of&#160;line&#160;reached.&#160;<br/>
CE13&#160;<br/>
C9&#160;2C&#160;<br/>
CMP&#160;#$2C&#160;<br/>
CE15&#160;<br/>
F0&#160;03&#160;<br/>
BEQ&#160;$CE1A&#160;<br/>
Character&#160;is&#160;a&#160;comma.&#160;<br/>
CE17&#160;<br/>
4C&#160;1F&#160;CD&#160;<br/>
JMP&#160;$CD1F&#160;<br/>
CE1A&#160;<br/>
A5&#160;E9&#160;<br/>
LDA&#160;$E9&#160;<br/>
Copy&#160;program&#160;position&#160;into&#160;<br/>
CE1C&#160;<br/>
A4&#160;EA&#160;<br/>
LDY&#160;$EA&#160;<br/>
data&#160;pointer.&#160;<br/>
CE1E&#160;<br/>
85&#160;B2&#160;<br/>
STA&#160;$B2&#160;<br/>
CE20&#160;<br/>
84&#160;B3&#160;<br/>
STY&#160;$B3&#160;<br/>
CE22&#160;<br/>
A5&#160;BA&#160;<br/>
LDA&#160;$BA&#160;<br/>
Copy&#160;temporary&#160;pointer&#160;into&#160;<br/>
CE24&#160;<br/>
A4&#160;BB&#160;<br/>
LDY&#160;$BB&#160;<br/>
program&#160;position.&#160;<br/>
CE26&#160;<br/>
85&#160;E9&#160;<br/>
STA&#160;$E9&#160;<br/>
CE28&#160;<br/>
84&#160;EA&#160;<br/>
STY&#160;$EA&#160;<br/>
CE2A&#160;<br/>
20&#160;E8&#160;00&#160;<br/>
JSR&#160;$00E8&#160;<br/>
Get&#160;next&#160;character.&#160;<br/>
CE2D&#160;<br/>
F0&#160;2C&#160;<br/>
BEQ&#160;$CE5B&#160;<br/>
End&#160;of&#160;line&#160;reached.&#160;<br/>
CE2F&#160;<br/>
20&#160;65&#160;D0&#160;<br/>
JSR&#160;$D065&#160;<br/>
Test&#160;for&#160;comma.&#160;<br/>
CE32&#160;<br/>
4C&#160;95&#160;CD&#160;<br/>
JMP&#160;$CD95&#160;<br/>
Get&#160;next&#160;variable.&#160;<br/>
&#160;<br/>CE35&#160;<br/>
20&#160;4E&#160;CA&#160;<br/>
JSR&#160;$CA4E&#160;<br/>
Find&#160;end&#160;of&#160;statement.&#160;<br/>
CE38&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
CE39&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
CE3A&#160;<br/>
D0&#160;12&#160;<br/>
BNE&#160;$CE4E&#160;<br/>
CE3C&#160;<br/>
A2&#160;2A&#160;<br/>
LDX&#160;#$2A&#160;<br/>
CE3E&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
CE3F&#160;<br/>
B1&#160;E9&#160;<br/>
LDA&#160;($E9),Y&#160;<br/>
Give&#160;&#34;TYPE&#160;MISMATCH&#160;ERROR&#34;&#160;if&#160;<br/>
CE41&#160;<br/>
F0&#160;69&#160;<br/>
BEQ&#160;$CEAC&#160;<br/>
run&#160;out&#160;of&#160;program.&#160;<br/>
CE43&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
CE44&#160;<br/>
B1&#160;E9&#160;<br/>
LDA&#160;($E9),Y&#160;<br/>
Copy&#160;line&#160;number&#160;to&#160;temporary&#160;<br/>
CE46&#160;<br/>
85&#160;AE&#160;<br/>
STA&#160;$AE&#160;<br/>
pointer.&#160;<br/>
CE48&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
CE49&#160;<br/>
B1&#160;E9&#160;<br/>
LDA&#160;($E9),Y&#160;<br/>
CE4B&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
CE4C&#160;<br/>
85&#160;AF&#160;<br/>
STA&#160;$AF&#160;<br/>
CE4E&#160;<br/>
B1&#160;E9&#160;<br/>
LDA&#160;($E9),Y&#160;<br/>
CE50&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
Pag&#160;&#160;e&#160;25&#160;<br/>
<hr/>
<a name=26></a>CE51&#160;<br/>
20&#160;3F&#160;CA&#160;<br/>
JSR&#160;$CA3F&#160;<br/>
Add&#160;X&#160;to&#160;content&#160;of&#160;$E9/$EA.&#160;<br/>
CE54&#160;<br/>
E0&#160;91&#160;<br/>
CPX&#160;#$91&#160;<br/>
CE56&#160;<br/>
D0&#160;DD&#160;<br/>
BNE&#160;$CE35&#160;<br/>
CE58&#160;<br/>
4C&#160;CE&#160;CD&#160;<br/>
JMP&#160;$CDCE&#160;<br/>
Jump&#160;back&#160;to&#160;do&#160;more.&#160;<br/>
CE5B&#160;<br/>
A5&#160;B2&#160;<br/>
LDA&#160;$B2&#160;<br/>
CE5D&#160;<br/>
A4&#160;B3&#160;<br/>
LDY&#160;$B3&#160;<br/>
CE5F&#160;<br/>
A6&#160;2C&#160;<br/>
LDX&#160;$2C&#160;<br/>
CE61&#160;<br/>
10&#160;03&#160;<br/>
BPL&#160;$CE66&#160;<br/>
REDO&#160;FROM&#160;START&#160;flag&#160;is&#160;set.&#160;<br/>
CE63&#160;<br/>
4C&#160;5C&#160;C9&#160;<br/>
JMP&#160;$C95C&#160;<br/>
Exit&#160;and&#160;update&#160;DATA&#160;pointer.&#160;<br/>
CE66&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
CE68&#160;<br/>
B1&#160;B2&#160;<br/>
LDA&#160;($B2),Y&#160;<br/>
CE6A&#160;<br/>
F0&#160;07&#160;<br/>
BEQ&#160;$CE73&#160;<br/>
No&#160;extra&#160;data.&#160;<br/>
CE6C&#160;<br/>
A9&#160;74&#160;<br/>
LDA&#160;#$74&#160;<br/>
CE6E&#160;<br/>
A0&#160;CE&#160;<br/>
LDY&#160;#$CE&#160;<br/>
CE70&#160;<br/>
4C&#160;B0&#160;CC&#160;<br/>
JMP&#160;$CCB0&#160;<br/>
Print&#160;&#34;EXTRA&#160;IGNORED&#34;.&#160;<br/>
CE73&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>CE74&#160;<br/>
3F&#160;45&#160;58&#160;54&#160;52&#160;41&#160;20&#160;49&#160;<br/>
?EXTRA&#160;I&#160;<br/>
CE7C&#160;<br/>
47&#160;4E&#160;4F&#160;52&#160;45&#160;44&#160;0D&#160;0A&#160;<br/>
GNORED&#160;&#160;&#160;<br/>
CE84&#160;<br/>
00&#160;3F&#160;52&#160;45&#160;44&#160;4F&#160;20&#160;46&#160;<br/>
&#160;?REDO&#160;F&#160;<br/>
CE8C&#160;<br/>
52&#160;4F&#160;4D&#160;20&#160;53&#160;54&#160;41&#160;52&#160;<br/>
ROM&#160;STAR&#160;<br/>
CE94&#160;<br/>
54&#160;0D&#160;0A&#160;00&#160;&#160;<br/>
T&#160;&#160;&#160;&#160;<br/>
&#160;<br/>CE98&#160;<br/>
D0&#160;04&#160;<br/>
BNE&#160;$CE9E&#160;<br/>
NEXT&#160;more&#160;input&#160;after&#160;token.&#160;<br/>
CE9A&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
CE9C&#160;<br/>
F0&#160;03&#160;<br/>
BEQ&#160;$CEA1&#160;<br/>
No&#160;variable&#160;name&#160;given.&#160;<br/>
CE9E&#160;<br/>
20&#160;88&#160;D1&#160;<br/>
JSR&#160;$D188&#160;<br/>
Get&#160;variable&#160;from&#160;text.&#160;<br/>
CEA1&#160;<br/>
85&#160;B8&#160;<br/>
STA&#160;$B8&#160;<br/>
Save&#160;pointer&#160;to&#160;variable.&#160;<br/>
CEA3&#160;<br/>
84&#160;B9&#160;<br/>
STY&#160;$B9&#160;<br/>
CEA5&#160;<br/>
20&#160;C6&#160;C3&#160;<br/>
JSR&#160;$C3C6&#160;<br/>
Search&#160;for&#160;that&#160;var.&#160;on&#160;stack.&#160;<br/>
CEA8&#160;<br/>
F0&#160;04&#160;<br/>
BEQ&#160;$CEAE&#160;<br/>
Variable&#160;found.&#160;<br/>
CEAA&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
Print&#160;&#34;TYPE&#160;MISMATCH&#160;ERROR&#34;.&#160;<br/>
CEAC&#160;<br/>
F0&#160;66&#160;<br/>
BEQ&#160;$CF14&#160;<br/>
CEAE&#160;<br/>
9A&#160;<br/>
TXS&#160;<br/>
CEAF&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
CEB0&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
CEB1&#160;<br/>
69&#160;04&#160;<br/>
ADC&#160;#$04&#160;<br/>
CEB3&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
CEB4&#160;<br/>
69&#160;06&#160;<br/>
ADC&#160;#$06&#160;<br/>
CEB6&#160;<br/>
85&#160;93&#160;<br/>
STA&#160;$93&#160;<br/>
CEB8&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
CEB9&#160;<br/>
A0&#160;01&#160;<br/>
LDY&#160;#$01&#160;<br/>
CEBB&#160;<br/>
20&#160;7B&#160;DE&#160;<br/>
JSR&#160;$DE7B&#160;<br/>
Unpack&#160;floating&#160;point&#160;number.&#160;<br/>
CEBE&#160;<br/>
BA&#160;<br/>
TSX&#160;<br/>
CEBF&#160;<br/>
BD&#160;09&#160;01&#160;<br/>
LDA&#160;$0109,X&#160;<br/>
Take&#160;sign&#160;byte&#160;off&#160;stack&#160;and&#160;<br/>
CEC2&#160;<br/>
85&#160;D5&#160;<br/>
STA&#160;$D5&#160;<br/>
put&#160;it&#160;in&#160;FPA&#160;sign&#160;byte.&#160;<br/>
CEC4&#160;<br/>
A5&#160;B8&#160;<br/>
LDA&#160;$B8&#160;<br/>
CEC6&#160;<br/>
A4&#160;B9&#160;<br/>
LDY&#160;$B9&#160;<br/>
CEC8&#160;<br/>
20&#160;22&#160;DB&#160;<br/>
JSR&#160;$DB22&#160;<br/>
Add&#160;in&#160;STEP&#160;value.&#160;<br/>
CECB&#160;<br/>
20&#160;A9&#160;DE&#160;<br/>
JSR&#160;$DEA9&#160;<br/>
Pack&#160;main&#160;FPA&#160;and&#160;put&#160;it&#160;in&#160;<br/>
CECE&#160;<br/>
A0&#160;01&#160;<br/>
LDY&#160;#$01&#160;<br/>
memory.&#160;<br/>
CED0&#160;<br/>
20&#160;4E&#160;DF&#160;<br/>
JSR&#160;$DF4E&#160;<br/>
Compare&#160;main&#160;FPA&#160;with&#160;number&#160;<br/>
CED3&#160;<br/>
BA&#160;<br/>
TSX&#160;<br/>
pointed&#160;to&#160;by&#160;Y&#160;(MSB)&#160;and&#160;A.&#160;<br/>
CED4&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
CED5&#160;<br/>
FD&#160;09&#160;01&#160;<br/>
SBC&#160;$0109,X&#160;<br/>
CED8&#160;<br/>
F0&#160;17&#160;<br/>
BEQ&#160;$CEF1&#160;<br/>
Exit&#160;current&#160;FOR-NEXT&#160;loop.&#160;<br/>
CEDA&#160;<br/>
BD&#160;0F&#160;01&#160;<br/>
LDA&#160;$010F,X&#160;<br/>
Take&#160;line&#160;number&#160;and&#160;program&#160;<br/>
CEDD&#160;<br/>
85&#160;A8&#160;<br/>
STA&#160;$A8&#160;<br/>
position&#160;off&#160;stack&#160;so&#160;that&#160;<br/>
CEDF&#160;<br/>
BD&#160;10&#160;01&#160;<br/>
LDA&#160;$0110,X&#160;<br/>
program&#160;can&#160;go&#160;back&#160;to&#160;just&#160;<br/>
CEE2&#160;<br/>
85&#160;A9&#160;<br/>
STA&#160;$A9&#160;<br/>
after&#160;the&#160;FOR&#160;statement.&#160;<br/>
CEE4&#160;<br/>
BD&#160;12&#160;01&#160;<br/>
LDA&#160;$0112,X&#160;<br/>
CEE7&#160;<br/>
85&#160;E9&#160;<br/>
STA&#160;$E9&#160;<br/>
CEE9&#160;<br/>
BD&#160;11&#160;01&#160;<br/>
LDA&#160;$0111,X&#160;<br/>
CEEC&#160;<br/>
85&#160;EA&#160;<br/>
STA&#160;$EA&#160;<br/>
Pag&#160;&#160;e&#160;26&#160;<br/>
<hr/>
<a name=27></a>CEEE&#160;<br/>
4C&#160;C1&#160;C8&#160;<br/>
JMP&#160;$C8C1&#160;<br/>
Goto&#160;next&#160;statement.&#160;<br/>
CEF1&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
Adjust&#160;stack&#160;pointer&#160;to&#160;having&#160;<br/>
CEF2&#160;<br/>
69&#160;11&#160;<br/>
ADC&#160;#$11&#160;<br/>
one&#160;less&#160;loop.&#160;<br/>
CEF4&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
CEF5&#160;<br/>
9A&#160;<br/>
TXS&#160;<br/>
CEF6&#160;<br/>
20&#160;E8&#160;00&#160;<br/>
JSR&#160;$00E8&#160;<br/>
Get&#160;next&#160;char&#160;from&#160;program.&#160;<br/>
CEF9&#160;<br/>
C9&#160;2C&#160;<br/>
CMP&#160;#$2C&#160;<br/>
Execute&#160;next&#160;statement&#160;if&#160;<br/>
CEFB&#160;<br/>
D0&#160;F1&#160;<br/>
BNE&#160;$CEEE&#160;<br/>
character&#160;is&#160;not&#160;a&#160;comma.&#160;<br/>
CEFD&#160;<br/>
20&#160;E2&#160;00&#160;<br/>
JSR&#160;$00E2&#160;<br/>
Get&#160;next&#160;char.&#160;<br/>
CF00&#160;<br/>
20&#160;9E&#160;CE&#160;<br/>
JSR&#160;$CE9E&#160;<br/>
Go&#160;round&#160;loop&#160;again.&#160;<br/>
&#160;<br/>CF03&#160;<br/>
20&#160;17&#160;CF&#160;<br/>
JSR&#160;$CF17&#160;<br/>
<b>GET&#160;NUMERIC&#160;EXPRESSION.</b>&#160;<br/>
CF06&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
Evaluate&#160;expression.&#160;<br/>
CF07&#160;<br/>
24&#160;38&#160;<br/>
BIT&#160;$38&#160;<br/>
Hides&#160;a&#160;SEC&#160;instruction.&#160;<br/>
CF09&#160;<br/>
24&#160;28&#160;<br/>
BIT&#160;$28&#160;<br/>
CF0B&#160;<br/>
30&#160;03&#160;<br/>
BMI&#160;$CF10&#160;<br/>
Expression&#160;is&#160;string&#160;type.&#160;<br/>
CF0D&#160;<br/>
B0&#160;03&#160;<br/>
BCS&#160;$CF12&#160;<br/>
CF0F&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>CF10&#160;<br/>
B0&#160;FD&#160;<br/>
BCS&#160;$CF0F&#160;<br/>
String&#160;type&#160;allowed&#160;if&#160;C=l.&#160;<br/>
CF12&#160;<br/>
A2&#160;A8&#160;<br/>
LDX&#160;#$A8&#160;<br/>
CF14&#160;<br/>
4C&#160;7E&#160;C4&#160;<br/>
JMP&#160;$C47E&#160;<br/>
Print&#160;&#34;TYPE&#160;MISMATCH&#160;ERROR&#34;.&#160;<br/>
&#160;<br/>CF17&#160;<br/>
A6&#160;E9&#160;<br/>
LDX&#160;$E9&#160;<br/>
<b>EVALUATE&#160;EXPRESSION.</b>&#160;<br/>
CF19&#160;<br/>
D0&#160;02&#160;<br/>
BNE&#160;$CF1D&#160;<br/>
CF1B&#160;<br/>
C6&#160;EA&#160;<br/>
DEC&#160;$EA&#160;<br/>
Decrement&#160;text&#160;pointer.&#160;<br/>
CF1D&#160;<br/>
C6&#160;E9&#160;<br/>
DEC&#160;$E9&#160;<br/>
CF1F&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
CF21&#160;<br/>
24&#160;48&#160;<br/>
BIT&#160;$48&#160;<br/>
Hides&#160;a&#160;PHA&#160;instruction.&#160;<br/>
CF23&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
CF24&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
CF25&#160;<br/>
A9&#160;01&#160;<br/>
LDA&#160;#$01&#160;<br/>
Check&#160;for&#160;2&#160;free&#160;bytes&#160;on&#160;<br/>
CF27&#160;<br/>
20&#160;37&#160;C4&#160;<br/>
JSR&#160;$C437&#160;<br/>
stack.&#160;<br/>
CF2A&#160;<br/>
20&#160;00&#160;D0&#160;<br/>
JSR&#160;$D000&#160;<br/>
Get&#160;item.&#160;<br/>
CF2D&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
Clear&#160;relational&#160;operator&#160;bit&#160;<br/>
CF2F&#160;<br/>
85&#160;BC&#160;<br/>
STA&#160;$BC&#160;<br/>
mark.&#160;<br/>
CF31&#160;<br/>
20&#160;E8&#160;00&#160;<br/>
JSR&#160;$00E8&#160;<br/>
Get&#160;next&#160;character.&#160;<br/>
CF34&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
CF35&#160;<br/>
E9&#160;D3&#160;<br/>
SBC&#160;#$D3&#160;<br/>
Token&#160;is&#160;in&#160;list&#160;before&#160;that&#160;<br/>
CF37&#160;<br/>
90&#160;17&#160;<br/>
BCC&#160;$CF50&#160;<br/>
of&#160;&gt;,&#160;&lt;&#160;or&#160;=.&#160;<br/>
CF39&#160;<br/>
C9&#160;03&#160;<br/>
CMP&#160;#$03&#160;<br/>
Token&#160;is&#160;in&#160;list&#160;after&#160;that&#160;<br/>
CF3B&#160;<br/>
B0&#160;13&#160;<br/>
BCS&#160;$CF50&#160;<br/>
of&#160;&gt;,&#160;&lt;&#160;or&#160;=.&#160;<br/>
CF3D&#160;<br/>
C9&#160;01&#160;<br/>
CMP&#160;#$01&#160;<br/>
Form&#160;comparator&#160;bit&#160;mask.&#160;<br/>
CF3F&#160;<br/>
2A&#160;<br/>
ROL&#160;A&#160;<br/>
001&#160;for&#160;&gt;&#160;<br/>
CF40&#160;<br/>
49&#160;01&#160;<br/>
EOR&#160;#$01&#160;<br/>
010&#160;for&#160;=&#160;<br/>
CF42&#160;<br/>
45&#160;BC&#160;<br/>
EOR&#160;$BC&#160;<br/>
100&#160;for&#160;&lt;&#160;<br/>
CF44&#160;<br/>
C5&#160;BC&#160;<br/>
CMP&#160;$BC&#160;<br/>
Error&#160;if&#160;one&#160;of&#160;these&#160;tokens&#160;<br/>
CF46&#160;<br/>
90&#160;61&#160;<br/>
BCC&#160;$CFA9&#160;<br/>
has&#160;appeared&#160;twice&#160;in&#160;a&#160;row.&#160;<br/>
CF48&#160;<br/>
85&#160;BC&#160;<br/>
STA&#160;$BC&#160;<br/>
CF4A&#160;<br/>
20&#160;E2&#160;00&#160;<br/>
JSR&#160;$00E2&#160;<br/>
Get&#160;next&#160;character.&#160;<br/>
CF4D&#160;<br/>
4C&#160;34&#160;CF&#160;<br/>
JMP&#160;$CF34&#160;<br/>
Test&#160;next&#160;char&#160;for&#160;&lt;,&#160;&gt;&#160;or&#160;=.&#160;<br/>
CF50&#160;<br/>
A6&#160;BC&#160;<br/>
LDX&#160;$BC&#160;<br/>
CF52&#160;<br/>
D0&#160;2C&#160;<br/>
BNE&#160;$CF80&#160;<br/>
Relational&#160;Operator.&#160;<br/>
CF54&#160;<br/>
B0&#160;7F&#160;<br/>
BCS&#160;$CFD5&#160;<br/>
If&#160;not&#160;binary&#160;operator,&#160;finish&#160;<br/>
CF56&#160;<br/>
69&#160;07&#160;<br/>
ADC&#160;#$07&#160;<br/>
expression.&#160;<br/>
CF58&#160;<br/>
90&#160;7B&#160;<br/>
BCC&#160;$CFD5&#160;<br/>
CF5A&#160;<br/>
65&#160;28&#160;<br/>
ADC&#160;$28&#160;<br/>
Add&#160;string&#160;flag&#160;plus&#160;carry.&#160;<br/>
CF5C&#160;<br/>
D0&#160;03&#160;<br/>
BNE&#160;$CF61&#160;<br/>
Jump&#160;to&#160;concatenate&#160;strings&#160;if&#160;<br/>
CF5E&#160;<br/>
4C&#160;67&#160;D7&#160;<br/>
JMP&#160;$D767&#160;<br/>
operator&#160;was&#160;a&#160;&#34;+&#34;.&#160;<br/>
CF61&#160;<br/>
69&#160;FF&#160;<br/>
ADC&#160;#$FF&#160;<br/>
Multiply&#160;operator&#160;by&#160;3&#160;and&#160;put&#160;<br/>
CF63&#160;<br/>
85&#160;91&#160;<br/>
STA&#160;$91&#160;<br/>
value&#160;into&#160;Y.&#160;<br/>
CF65&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
CF66&#160;<br/>
65&#160;91&#160;<br/>
ADC&#160;$91&#160;<br/>
CF68&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
Pag&#160;&#160;e&#160;27&#160;<br/>
<hr/>
<a name=28></a>CF69&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
If&#160;old&#160;operator&#160;priority&#160;was&#160;<br/>
CF6A&#160;<br/>
D9&#160;CC&#160;C0&#160;<br/>
CMP&#160;$C0CC,Y&#160;<br/>
greater&#160;or&#160;equal,&#160;then&#160;exit&#160;<br/>
CF6D&#160;<br/>
B0&#160;6B&#160;<br/>
BCS&#160;$CFDA&#160;<br/>
this&#160;level.&#160;<br/>
CF6F&#160;<br/>
20&#160;06&#160;CF&#160;<br/>
JSR&#160;$CF06&#160;<br/>
Check&#160;numeric&#160;type.&#160;<br/>
CF72&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
Save&#160;operator&#160;priority.&#160;<br/>
CF73&#160;<br/>
20&#160;99&#160;CF&#160;<br/>
JSR&#160;$CF99&#160;<br/>
Perform&#160;higher&#160;priority&#160;oper'n&#160;<br/>
CF76&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Restore&#160;old&#160;operator&#160;priority.&#160;<br/>
CF77&#160;<br/>
A4&#160;BA&#160;<br/>
LDY&#160;$BA&#160;<br/>
Branch&#160;if&#160;not&#160;end&#160;of&#160;<br/>
CF79&#160;<br/>
10&#160;17&#160;<br/>
BPL&#160;$CF92&#160;<br/>
expression.&#160;<br/>
CF7B&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
Exit&#160;if&#160;no&#160;operator&#160;pending&#160;on&#160;<br/>
CF7C&#160;<br/>
F0&#160;5A&#160;<br/>
BEQ&#160;$CFD8&#160;<br/>
stack.&#160;<br/>
CF7E&#160;<br/>
D0&#160;63&#160;<br/>
BNE&#160;$CFE3&#160;<br/>
Pull&#160;work&#160;FPA&#160;and&#160;exit.&#160;<br/>
CF80&#160;<br/>
46&#160;28&#160;<br/>
LSR&#160;$28&#160;<br/>
Set&#160;C&#160;if&#160;string&#160;type.&#160;<br/>
CF82&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
Get&#160;mask,&#160;bottom&#160;bit&#160;set&#160;if&#160;<br/>
CF83&#160;<br/>
2A&#160;<br/>
ROL&#160;A&#160;<br/>
string.&#160;<br/>
CF84&#160;<br/>
A6&#160;E9&#160;<br/>
LDX&#160;$E9&#160;<br/>
Decrement&#160;text&#160;pointer.&#160;<br/>
CF86&#160;<br/>
D0&#160;02&#160;<br/>
BNE&#160;$CF8A&#160;<br/>
CF88&#160;<br/>
C6&#160;EA&#160;<br/>
DEC&#160;$EA&#160;<br/>
CF8A&#160;<br/>
C6&#160;E9&#160;<br/>
DEC&#160;$E9&#160;<br/>
CF8C&#160;<br/>
A0&#160;1B&#160;<br/>
LDY&#160;#$1B&#160;<br/>
Operator&#160;code.&#160;<br/>
CF8E&#160;<br/>
85&#160;BC&#160;<br/>
STA&#160;$BC&#160;<br/>
Save&#160;relation&#160;mask.&#160;<br/>
CF90&#160;<br/>
D0&#160;D7&#160;<br/>
BNE&#160;$CF69&#160;<br/>
Branch&#160;for&#160;another&#160;operator.&#160;<br/>
CF92&#160;<br/>
D9&#160;CC&#160;C0&#160;<br/>
CMP&#160;$C0CC,Y&#160;<br/>
If&#160;next&#160;operator&#160;is&#160;of&#160;lower&#160;<br/>
CF95&#160;<br/>
B0&#160;4C&#160;<br/>
BCS&#160;$CFE3&#160;<br/>
priority&#160;then&#160;exit.&#160;<br/>
CF97&#160;<br/>
90&#160;D9&#160;<br/>
BCC&#160;$CF72&#160;<br/>
Get&#160;next&#160;operator.&#160;<br/>
CF99&#160;<br/>
B9&#160;CE&#160;C0&#160;<br/>
LDA&#160;$C0CE,Y&#160;<br/>
Push&#160;operator&#160;action&#160;address&#160;<br/>
CF9C&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
on&#160;to&#160;the&#160;stack.&#160;<br/>
CF9D&#160;<br/>
B9&#160;CD&#160;C0&#160;<br/>
LDA&#160;$C0CD,Y&#160;<br/>
CFA0&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
CFA1&#160;<br/>
20&#160;AC&#160;CF&#160;<br/>
JSR&#160;$CFAC&#160;<br/>
Set&#160;up&#160;and&#160;perform&#160;operation.&#160;<br/>
CFA4&#160;<br/>
A5&#160;BC&#160;<br/>
LDA&#160;$BC&#160;<br/>
CFA6&#160;<br/>
4C&#160;22&#160;CF&#160;<br/>
JMP&#160;$CF22&#160;<br/>
Get&#160;operator&#160;code&#160;&amp;&#160;loop&#160;again&#160;<br/>
&#160;<br/>CFA9&#160;<br/>
4C&#160;70&#160;D0&#160;<br/>
JMP&#160;$D070&#160;<br/>
PRINT&#160;&#34;SYNTAX&#160;ERROR&#34;.&#160;<br/>
&#160;<br/>CFAC&#160;<br/>
A5&#160;D5&#160;<br/>
LDA&#160;$D5&#160;<br/>
<b>SET&#160;UP&#160;AND&#160;PERFORM&#160;OPERATION.</b>&#160;<br/>
CFAE&#160;<br/>
BE&#160;CC&#160;C0&#160;<br/>
LDX&#160;$C0CC,Y&#160;<br/>
Get&#160;sign&#160;of&#160;FPA&#160;and&#160;put&#160;<br/>
CFB1&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
operator&#160;priority&#160;into&#160;Y.&#160;<br/>
CFB2&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
CFB3&#160;<br/>
85&#160;91&#160;<br/>
STA&#160;$91&#160;<br/>
Set&#160;up&#160;action&#160;address.&#160;<br/>
CFB5&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
CFB6&#160;<br/>
85&#160;92&#160;<br/>
STA&#160;$92&#160;<br/>
CFB8&#160;<br/>
E6&#160;91&#160;<br/>
INC&#160;$91&#160;<br/>
Increment&#160;address.&#160;<br/>
CFBA&#160;<br/>
D0&#160;02&#160;<br/>
BNE&#160;$CFBE&#160;<br/>
CFBC&#160;<br/>
E6&#160;92&#160;<br/>
INC&#160;$92&#160;<br/>
CFBE&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
CFBF&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
Push&#160;sign&#160;of&#160;main&#160;FPA.&#160;<br/>
CFC0&#160;<br/>
20&#160;F4&#160;DE&#160;<br/>
JSR&#160;$DEF4&#160;<br/>
Round&#160;off&#160;main&#160;FPA&#160;<br/>
CFC3&#160;<br/>
A5&#160;D4&#160;<br/>
LDA&#160;$D4&#160;<br/>
CFC5&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
Push&#160;main&#160;FPA&#160;on&#160;to&#160;stack&#160;<br/>
CFC6&#160;<br/>
A5&#160;D3&#160;<br/>
LDA&#160;$D3&#160;<br/>
CFC8&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
CFC9&#160;<br/>
A5&#160;D2&#160;<br/>
LDA&#160;$D2&#160;<br/>
CFCB&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
CFCC&#160;<br/>
A5&#160;D1&#160;<br/>
LDA&#160;$D1&#160;<br/>
CFCE&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
CFCF&#160;<br/>
A5&#160;D0&#160;<br/>
LDA&#160;$D0&#160;<br/>
CFD1&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
CFD2&#160;<br/>
6C&#160;91&#160;00&#160;<br/>
JMP&#160;($0091)&#160;<br/>
Perform&#160;operation.&#160;<br/>
CFD5&#160;<br/>
A0&#160;FF&#160;<br/>
LDY&#160;#$FF&#160;<br/>
End&#160;of&#160;expression&#160;indicator.&#160;<br/>
CFD7&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
If&#160;no&#160;operators&#160;pending&#160;then&#160;<br/>
CFD8&#160;<br/>
F0&#160;23&#160;<br/>
BEQ&#160;$CFFD&#160;<br/>
exit.&#160;<br/>
CFDA&#160;<br/>
C9&#160;64&#160;<br/>
CMP&#160;#$64&#160;<br/>
If&#160;not&#160;relational&#160;operator&#160;<br/>
CFDC&#160;<br/>
F0&#160;03&#160;<br/>
BEQ&#160;$CFE1&#160;<br/>
check&#160;for&#160;numeric&#160;type.&#160;<br/>
Pag&#160;&#160;e&#160;28&#160;<br/>
<hr/>
<a name=29></a>CFDE&#160;<br/>
20&#160;06&#160;CF&#160;<br/>
JSR&#160;$CF06&#160;<br/>
CFE1&#160;<br/>
84&#160;BA&#160;<br/>
STY&#160;$BA&#160;<br/>
Save&#160;operator&#160;code.&#160;<br/>
CFE3&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Pull&#160;operator&#160;code&#160;and&#160;shift&#160;<br/>
CFE4&#160;<br/>
4A&#160;<br/>
LSR&#160;A&#160;<br/>
it&#160;before&#160;putting&#160;into&#160;$2D.&#160;<br/>
CFE5&#160;<br/>
85&#160;2D&#160;<br/>
STA&#160;$2D&#160;<br/>
CFE7&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Restore&#160;work&#160;floating&#160;point&#160;<br/>
CFE8&#160;<br/>
85&#160;D8&#160;<br/>
STA&#160;$D8&#160;<br/>
accumulator&#160;from&#160;stack.&#160;<br/>
CFEA&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
CFEB&#160;<br/>
85&#160;D9&#160;<br/>
STA&#160;$D9&#160;<br/>
CFED&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
CFEE&#160;<br/>
85&#160;DA&#160;<br/>
STA&#160;$DA&#160;<br/>
CFF0&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
CFF1&#160;<br/>
85&#160;DB&#160;<br/>
STA&#160;$DB&#160;<br/>
CFF3&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
CFF4&#160;<br/>
85&#160;DC&#160;<br/>
STA&#160;$DC&#160;<br/>
CFF6&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
CFF7&#160;<br/>
85&#160;DD&#160;<br/>
STA&#160;$DD&#160;<br/>
CFF9&#160;<br/>
45&#160;D5&#160;<br/>
EOR&#160;$D5&#160;<br/>
CFFB&#160;<br/>
85&#160;DE&#160;<br/>
STA&#160;$DE&#160;<br/>
Set&#160;sign&#160;difference&#160;flag.&#160;<br/>
CFFD&#160;<br/>
A5&#160;D0&#160;<br/>
LDA&#160;$D0&#160;<br/>
CFFF&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
Exit.&#160;<br/>
&#160;<br/>D000&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
<b>GET&#160;ITEM.</b>&#160;<br/>
D002&#160;<br/>
85&#160;28&#160;<br/>
STA&#160;$28&#160;<br/>
Clear&#160;string&#160;type&#160;flag.&#160;<br/>
D004&#160;<br/>
20&#160;E2&#160;00&#160;<br/>
JSR&#160;$00E2&#160;<br/>
Get&#160;next&#160;character.&#160;<br/>
D007&#160;<br/>
B0&#160;03&#160;<br/>
BCS&#160;$D00C&#160;<br/>
D009&#160;<br/>
4C&#160;E7&#160;DF&#160;<br/>
JMP&#160;$DFE7&#160;<br/>
If&#160;digit&#160;then&#160;get&#160;number.&#160;<br/>
D00C&#160;<br/>
20&#160;16&#160;D2&#160;<br/>
JSR&#160;$D216&#160;<br/>
If&#160;&#34;A-Z&#34;&#160;then&#160;get&#160;value&#160;from&#160;<br/>
D00F&#160;<br/>
B0&#160;6B&#160;<br/>
BCS&#160;$D07C&#160;<br/>
variable.&#160;<br/>
D011&#160;<br/>
C9&#160;2E&#160;<br/>
CMP&#160;#$2E&#160;<br/>
If&#160;&#34;.&#34;&#160;or&#160;&#34;#&#34;&#160;then&#160;get&#160;number.&#160;<br/>
D013&#160;<br/>
F0&#160;F4&#160;<br/>
BEQ&#160;$D009&#160;<br/>
D015&#160;<br/>
C9&#160;23&#160;<br/>
CMP&#160;#$23&#160;<br/>
D017&#160;<br/>
F0&#160;F0&#160;<br/>
BEQ&#160;$D009&#160;<br/>
D019&#160;<br/>
C9&#160;CD&#160;<br/>
CMP&#160;#$CD&#160;<br/>
If&#160;&#34;-&#34;&#160;then&#160;handle&#160;unary&#160;minus&#160;<br/>
D01B&#160;<br/>
F0&#160;58&#160;<br/>
BEQ&#160;$D075&#160;<br/>
number.&#160;<br/>
D01D&#160;<br/>
C9&#160;CC&#160;<br/>
CMP&#160;#$CC&#160;<br/>
If&#160;&#34;+&#34;&#160;token&#160;then&#160;ignore&#160;it.&#160;<br/>
D01F&#160;<br/>
F0&#160;E3&#160;<br/>
BEQ&#160;$D004&#160;<br/>
D021&#160;<br/>
C9&#160;22&#160;<br/>
CMP&#160;#$22&#160;<br/>
If&#160;not&#160;&#34;&#160;then&#160;skip&#160;string&#160;bit.&#160;<br/>
D023&#160;<br/>
D0&#160;0F&#160;<br/>
BNE&#160;$D034&#160;<br/>
D025&#160;<br/>
A5&#160;E9&#160;<br/>
LDA&#160;$E9&#160;<br/>
Get&#160;text&#160;pointer&#160;+&#160;1&#160;into&#160;A&#160;<br/>
D027&#160;<br/>
A4&#160;EA&#160;<br/>
LDY&#160;$EA&#160;<br/>
and&#160;Y.&#160;<br/>
D029&#160;<br/>
69&#160;00&#160;<br/>
ADC&#160;#$00&#160;<br/>
D02B&#160;<br/>
90&#160;01&#160;<br/>
BCC&#160;$D02E&#160;<br/>
D02D&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D02E&#160;<br/>
20&#160;B5&#160;D5&#160;<br/>
JSR&#160;$D5B5&#160;<br/>
Get&#160;string&#160;after&#160;&#34;.&#160;<br/>
D031&#160;<br/>
4C&#160;0D&#160;D9&#160;<br/>
JMP&#160;$D90D&#160;<br/>
Update&#160;text&#160;pointer&#160;and&#160;exit.&#160;<br/>
D034&#160;<br/>
C9&#160;CA&#160;<br/>
CMP&#160;#$CA&#160;<br/>
If&#160;&#34;NOT&#34;&#160;token&#160;then&#160;use&#160;<br/>
D036&#160;<br/>
D0&#160;13&#160;<br/>
BNE&#160;$D04B&#160;<br/>
operator&#160;at&#160;$18&#160;and&#160;go&#160;round&#160;<br/>
D038&#160;<br/>
A0&#160;18&#160;<br/>
LDY&#160;#$18&#160;<br/>
again.&#160;<br/>
D03A&#160;<br/>
D0&#160;3B&#160;<br/>
BNE&#160;$D077&#160;<br/>
&#160;<br/>D03C&#160;<br/>
20&#160;A9&#160;D2&#160;<br/>
JSR&#160;$D2A9&#160;<br/>
<b>NOT</b>&#160;Convert&#160;main&#160;FPA&#160;to&#160;<br/>
D03F&#160;<br/>
A5&#160;D4&#160;<br/>
LDA&#160;$D4&#160;<br/>
signed&#160;integer.&#160;<br/>
D041&#160;<br/>
49&#160;FF&#160;<br/>
EOR&#160;#$FF&#160;<br/>
Invert&#160;LSB&#160;into&#160;Y.&#160;<br/>
D043&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
D044&#160;<br/>
A5&#160;D3&#160;<br/>
LDA&#160;$D3&#160;<br/>
Invert&#160;MSB&#160;into&#160;A.&#160;<br/>
D046&#160;<br/>
49&#160;FF&#160;<br/>
EOR&#160;#$FF&#160;<br/>
D048&#160;<br/>
4C&#160;99&#160;D4&#160;<br/>
JMP&#160;$D499&#160;<br/>
Convert&#160;to&#160;main&#160;FPA&#160;and&#160;exit.&#160;<br/>
D04B&#160;<br/>
C9&#160;C4&#160;<br/>
CMP&#160;#$C4&#160;<br/>
If&#160;&#34;FN&#34;&#160;token&#160;then&#160;goto&#160;FN&#160;<br/>
D04D&#160;<br/>
D0&#160;03&#160;<br/>
BNE&#160;$D052&#160;<br/>
call&#160;address.&#160;<br/>
D04F&#160;<br/>
4C&#160;22&#160;D5&#160;<br/>
JMP&#160;$D522&#160;<br/>
D052&#160;<br/>
C9&#160;D6&#160;<br/>
CMP&#160;#$D6&#160;<br/>
If&#160;function&#160;token&#160;is&#160;&gt;=&#160;than&#160;<br/>
D054&#160;<br/>
90&#160;03&#160;<br/>
BCC&#160;$D059&#160;<br/>
#D6&#160;then&#160;deal&#160;with&#160;function.&#160;<br/>
D056&#160;<br/>
4C&#160;A0&#160;D0&#160;<br/>
JMP&#160;$D0A0&#160;<br/>
Pag&#160;&#160;e&#160;29&#160;<br/>
<hr/>
<a name=30></a>&#160;<br/>D059&#160;<br/>
20&#160;62&#160;D0&#160;<br/>
JSR&#160;$D062&#160;<br/>
<b>GET&#160;EXPRESSION&#160;IN&#160;().</b>&#160;Check&#160;<br/>
D05C&#160;<br/>
20&#160;17&#160;CF&#160;<br/>
JSR&#160;$CF17&#160;<br/>
&#34;)&#34;&#160;and&#160;evaluate&#160;expression.&#160;<br/>
D05F&#160;<br/>
A9&#160;29&#160;<br/>
LDA&#160;#$29&#160;<br/>
Check&#160;for&#160;&#34;)&#34;&#160;<br/>
D061&#160;<br/>
2C&#160;A9&#160;28&#160;<br/>
BIT&#160;$28A9&#160;<br/>
Check&#160;for&#160;&#34;(&#34;&#160;-&#160;hidden&#160;in&#160;BIT.&#160;<br/>
D064&#160;<br/>
2C&#160;A9&#160;2C&#160;<br/>
BIT&#160;$2CA9&#160;<br/>
Check&#160;for&#160;&#34;,&#34;&#160;-&#160;hidden&#160;in&#160;BIT.&#160;<br/>
D067&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
Check&#160;for&#160;char&#160;in&#160;A.&#160;<br/>
D069&#160;<br/>
D1&#160;E9&#160;<br/>
CMP&#160;($E9),Y&#160;<br/>
D06B&#160;<br/>
D0&#160;03&#160;<br/>
BNE&#160;$D070&#160;<br/>
&#34;SYNTAX&#160;ERROR&#34;&#160;if&#160;not&#160;present.&#160;<br/>
D06D&#160;<br/>
4C&#160;E2&#160;00&#160;<br/>
JMP&#160;$00E2&#160;<br/>
Get&#160;next&#160;character.&#160;<br/>
D070&#160;<br/>
A2&#160;10&#160;<br/>
LDX&#160;#$10&#160;<br/>
Print&#160;&#34;SYNTAX&#160;ERROR&#34;.&#160;<br/>
D072&#160;<br/>
4C&#160;7E&#160;C4&#160;<br/>
JMP&#160;$C47E&#160;<br/>
D075&#160;<br/>
A0&#160;15&#160;<br/>
LDY&#160;#$15&#160;<br/>
Unary&#160;minus&#160;operator.&#160;<br/>
D077&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Pull&#160;return&#160;address&#160;and&#160;jump&#160;<br/>
D078&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
to&#160;next&#160;operator.&#160;<br/>
D079&#160;<br/>
4C&#160;73&#160;CF&#160;<br/>
JMP&#160;$CF73&#160;<br/>
&#160;<br/>D07C&#160;<br/>
20&#160;88&#160;D1&#160;<br/>
JSR&#160;$D188&#160;<br/>
<b>GET&#160;VALUE&#160;FROM&#160;VARIABLE.</b>&#160;Get&#160;<br/>
D07F&#160;<br/>
85&#160;D3&#160;<br/>
STA&#160;$D3&#160;<br/>
variable&#160;and&#160;set&#160;up&#160;pointer.&#160;<br/>
D081&#160;<br/>
84&#160;D4&#160;<br/>
STY&#160;$D4&#160;<br/>
D083&#160;<br/>
A6&#160;28&#160;<br/>
LDX&#160;$28&#160;<br/>
If&#160;a&#160;string&#160;then&#160;clear&#160;the&#160;<br/>
D085&#160;<br/>
F0&#160;05&#160;<br/>
BEQ&#160;$D08C&#160;<br/>
Founding&#160;byte&#160;and&#160;exit.&#160;<br/>
D087&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
D089&#160;<br/>
86&#160;DF&#160;<br/>
STX&#160;$DF&#160;<br/>
D08B&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>D08C&#160;<br/>
A6&#160;29&#160;<br/>
LDX&#160;$29&#160;<br/>
If&#160;a&#160;real&#160;number&#160;then&#160;get&#160;<br/>
D08E&#160;<br/>
10&#160;0D&#160;<br/>
BPL&#160;$D09D&#160;<br/>
value.&#160;<br/>
D090&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
D092&#160;<br/>
B1&#160;D3&#160;<br/>
LDA&#160;($D3),Y&#160;<br/>
Get&#160;MSB&#160;of&#160;integer&#160;into&#160;X.&#160;<br/>
D094&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
D095&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D096&#160;<br/>
B1&#160;D3&#160;<br/>
LDA&#160;($D3),Y&#160;<br/>
Get&#160;LSB&#160;of&#160;integer&#160;into&#160;Y.&#160;<br/>
D098&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
D099&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
Put&#160;MSB&#160;in&#160;A.&#160;<br/>
D09A&#160;<br/>
4C&#160;99&#160;D4&#160;<br/>
JMP&#160;$D499&#160;<br/>
Convert&#160;A/Y&#160;to&#160;FPA&#160;&amp;&#160;exit.&#160;<br/>
D09D&#160;<br/>
4C&#160;7B&#160;DE&#160;<br/>
JMP&#160;$DE7B&#160;<br/>
Unpack&#160;number&#160;into&#160;FPA.&#160;<br/>
D0A0&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
Double&#160;token&#160;and&#160;save&#160;it&#160;on&#160;<br/>
D0A1&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
stack.&#160;<br/>
D0A2&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
D0A3&#160;<br/>
20&#160;E2&#160;00&#160;<br/>
JSR&#160;$00E2&#160;<br/>
Get&#160;character.&#160;<br/>
D0A6&#160;<br/>
E0&#160;DB&#160;<br/>
CPX&#160;#$DB&#160;<br/>
If&#160;token&#160;is&#160;CHR$&#160;or&#160;less&#160;then&#160;<br/>
D0A8&#160;<br/>
90&#160;24&#160;<br/>
BCC&#160;$D0CE&#160;<br/>
handle&#160;single&#160;argument.&#160;<br/>
D0AA&#160;<br/>
E0&#160;E7&#160;<br/>
CPX&#160;#$E7&#160;<br/>
If&#160;token&#160;is&#160;POINT&#160;or&#160;less&#160;then&#160;<br/>
D0AC&#160;<br/>
90&#160;23&#160;<br/>
BCC&#160;$D0D1&#160;<br/>
no&#160;argument&#160;is&#160;needed.&#160;<br/>
D0AE&#160;<br/>
20&#160;62&#160;D0&#160;<br/>
JSR&#160;$D062&#160;<br/>
Check&#160;for&#160;&#34;(&#34;.&#160;<br/>
D0B1&#160;<br/>
20&#160;17&#160;CF&#160;<br/>
JSR&#160;$CF17&#160;<br/>
Evaluate&#160;expression.&#160;<br/>
D0B4&#160;<br/>
20&#160;65&#160;D0&#160;<br/>
JSR&#160;$D065&#160;<br/>
Check&#160;for&#160;&#34;,&#34;.&#160;<br/>
D0B7&#160;<br/>
20&#160;08&#160;CF&#160;<br/>
JSR&#160;$CF08&#160;<br/>
Check&#160;for&#160;string&#160;type.&#160;<br/>
D0BA&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
D0BB&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
Save&#160;table&#160;offset&#160;in&#160;X.&#160;<br/>
D0BC&#160;<br/>
A5&#160;D4&#160;<br/>
LDA&#160;$D4&#160;<br/>
D0BE&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
Push&#160;pointer&#160;to&#160;string&#160;block&#160;<br/>
D0BF&#160;<br/>
A5&#160;D3&#160;<br/>
LDA&#160;$D3&#160;<br/>
on&#160;stack.&#160;<br/>
D0C1&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
D0C2&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
Push&#160;table&#160;offset&#160;on&#160;stack.&#160;<br/>
D0C3&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
D0C4&#160;<br/>
20&#160;C8&#160;D8&#160;<br/>
JSR&#160;$D8C8&#160;<br/>
Get&#160;1&#160;byte&#160;expression&#160;into&#160;X.&#160;<br/>
D0C7&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
D0C8&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
Push&#160;expression&#160;byte.&#160;<br/>
D0C9&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
D0CA&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
D0CB&#160;<br/>
4C&#160;D3&#160;D0&#160;<br/>
JMP&#160;$D0D3&#160;<br/>
Set&#160;up&#160;and&#160;execute&#160;function.&#160;<br/>
&#160;<br/>
Pag&#160;&#160;e&#160;30&#160;<br/>
<hr/>
<a name=31></a>D0CE&#160;<br/>
20&#160;59&#160;D0&#160;<br/>
JSR&#160;$D059&#160;<br/>
Get&#160;expression&#160;in&#160;brackets.&#160;<br/>
D0D1&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Get&#160;table&#160;offset&#160;into&#160;Y.&#160;<br/>
D0D2&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
D0D3&#160;<br/>
B9&#160;DE&#160;BF&#160;<br/>
LDA&#160;$BFDE,Y&#160;<br/>
Set&#160;up&#160;action&#160;address.&#160;<br/>
D0D6&#160;<br/>
85&#160;C4&#160;<br/>
STA&#160;$C4&#160;<br/>
D0D8&#160;<br/>
B9&#160;DF&#160;BF&#160;<br/>
LDA&#160;$BFDF,Y&#160;<br/>
D0DB&#160;<br/>
85&#160;C5&#160;<br/>
STA&#160;$C5&#160;<br/>
D0DD&#160;<br/>
20&#160;C3&#160;00&#160;<br/>
JSR&#160;$00C3&#160;<br/>
Execute&#160;function.&#160;Check&#160;for&#160;<br/>
D0E0&#160;<br/>
4C&#160;06&#160;CF&#160;<br/>
JMP&#160;$CF06&#160;<br/>
numeric&#160;types&#160;and&#160;exit.&#160;<br/>
&#160;<br/>D0E3&#160;<br/>
A0&#160;FF&#160;<br/>
LDY&#160;#$FF&#160;<br/>
Routine&#160;for&#160;OR&#160;and&#160;routine&#160;<br/>
D0E5&#160;<br/>
2C&#160;A0&#160;00&#160;<br/>
BIT&#160;$00A0&#160;<br/>
for&#160;AND&#160;(hidden&#160;by&#160;BIT).&#160;<br/>
D0E8&#160;<br/>
84&#160;26&#160;<br/>
STY&#160;$26&#160;<br/>
Initialise&#160;$26.&#160;<br/>
D0EA&#160;<br/>
20&#160;A9&#160;D2&#160;<br/>
JSR&#160;$D2A9&#160;<br/>
Convert&#160;FPA&#160;to&#160;signed&#160;integer.&#160;<br/>
D0ED&#160;<br/>
A5&#160;D3&#160;<br/>
LDA&#160;$D3&#160;<br/>
Transfer&#160;integer&#160;to&#160;$24/$25&#160;<br/>
D0EF&#160;<br/>
45&#160;26&#160;<br/>
EOR&#160;$26&#160;<br/>
inverting&#160;as&#160;well&#160;if&#160;using&#160;the&#160;<br/>
D0F1&#160;<br/>
85&#160;24&#160;<br/>
STA&#160;$24&#160;<br/>
OR&#160;operator.&#160;<br/>
D0F3&#160;<br/>
A5&#160;D4&#160;<br/>
LDA&#160;$D4&#160;<br/>
D0F5&#160;<br/>
45&#160;26&#160;<br/>
EOR&#160;$26&#160;<br/>
D0F7&#160;<br/>
85&#160;25&#160;<br/>
STA&#160;$25&#160;<br/>
D0F9&#160;<br/>
20&#160;D5&#160;DE&#160;<br/>
JSR&#160;$DED5&#160;<br/>
Copy&#160;work&#160;FPA&#160;into&#160;main&#160;FPA.&#160;<br/>
D0FC&#160;<br/>
20&#160;A9&#160;D2&#160;<br/>
JSR&#160;$D2A9&#160;<br/>
Convert&#160;to&#160;signed&#160;integer.&#160;<br/>
D0FF&#160;<br/>
A5&#160;D4&#160;<br/>
LDA&#160;$D4&#160;<br/>
Get&#160;result&#160;into&#160;A&#160;and&#160;Y&#160;and&#160;<br/>
D101&#160;<br/>
45&#160;26&#160;<br/>
EOR&#160;$26&#160;<br/>
AND&#160;it&#160;with&#160;the&#160;other&#160;integer.&#160;<br/>
D103&#160;<br/>
25&#160;25&#160;<br/>
AND&#160;$25&#160;<br/>
If&#160;OR&#160;is&#160;being&#160;used&#160;then&#160;<br/>
D105&#160;<br/>
45&#160;26&#160;<br/>
EOR&#160;$26&#160;<br/>
invert&#160;A/Y&#160;before&#160;and&#160;after&#160;<br/>
D107&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
the&#160;ANDing.&#160;<br/>
D108&#160;<br/>
A5&#160;D3&#160;<br/>
LDA&#160;$D3&#160;<br/>
D10A&#160;<br/>
45&#160;26&#160;<br/>
EOR&#160;$26&#160;<br/>
D10C&#160;<br/>
25&#160;24&#160;<br/>
AND&#160;$24&#160;<br/>
D10E&#160;<br/>
45&#160;26&#160;<br/>
EOR&#160;$26&#160;<br/>
D110&#160;<br/>
4C&#160;99&#160;D4&#160;<br/>
JMP&#160;$D499&#160;<br/>
Convert&#160;result&#160;to&#160;FPA&#160;&amp;&#160;exit.&#160;<br/>
&#160;<br/>D113&#160;<br/>
20&#160;09&#160;CF&#160;<br/>
JSR&#160;$CF09&#160;<br/>
<b>RELATIONAL&#160;OPERATORS&#160;&gt;,&#160;=,&#160;&lt;</b>&#160;<br/>
D116&#160;<br/>
B0&#160;13&#160;<br/>
BCS&#160;$D12B&#160;<br/>
Check&#160;type&#160;&amp;&#160;branch&#160;if&#160;string.&#160;<br/>
D118&#160;<br/>
A5&#160;DD&#160;<br/>
LDA&#160;$DD&#160;<br/>
Put&#160;work&#160;FPA&#160;in&#160;packed&#160;format.&#160;<br/>
D11A&#160;<br/>
09&#160;7F&#160;<br/>
ORA&#160;#$7F&#160;<br/>
D11C&#160;<br/>
25&#160;D9&#160;<br/>
AND&#160;$D9&#160;<br/>
D11E&#160;<br/>
85&#160;D9&#160;<br/>
STA&#160;$D9&#160;<br/>
D120&#160;<br/>
A9&#160;D8&#160;<br/>
LDA&#160;#$D8&#160;<br/>
Set&#160;Y&#160;(MSB)&#160;and&#160;A&#160;to&#160;point&#160;to&#160;<br/>
D122&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
work&#160;FPA.&#160;<br/>
D124&#160;<br/>
20&#160;4C&#160;DF&#160;<br/>
JSR&#160;$DF4C&#160;<br/>
Compare&#160;main&#160;and&#160;work&#160;FPAs.&#160;<br/>
D127&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
Save&#160;result&#160;in&#160;X&#160;and&#160;skip&#160;<br/>
D128&#160;<br/>
4C&#160;5E&#160;D1&#160;<br/>
JMP&#160;$D15E&#160;<br/>
over&#160;string&#160;section.&#160;<br/>
&#160;<br/>D12B&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
Clear&#160;string&#160;flag.&#160;<br/>
D12D&#160;<br/>
85&#160;28&#160;<br/>
STA&#160;$28&#160;<br/>
D12F&#160;<br/>
C6&#160;BC&#160;<br/>
DEC&#160;$BC&#160;<br/>
Adjust&#160;relational&#160;flags.&#160;<br/>
D131&#160;<br/>
20&#160;D0&#160;D7&#160;<br/>
JSR&#160;$D7D0&#160;<br/>
Set&#160;up&#160;string.&#160;<br/>
D134&#160;<br/>
85&#160;D0&#160;<br/>
STA&#160;$D0&#160;<br/>
Store&#160;block&#160;in&#160;main&#160;FPA.&#160;<br/>
D136&#160;<br/>
86&#160;D1&#160;<br/>
STX&#160;$D1&#160;<br/>
D138&#160;<br/>
84&#160;D2&#160;<br/>
STY&#160;$D2&#160;<br/>
D13A&#160;<br/>
A5&#160;DB&#160;<br/>
LDA&#160;$DB&#160;<br/>
Get&#160;pointer&#160;to&#160;first&#160;string&#160;in&#160;<br/>
D13C&#160;<br/>
A4&#160;DC&#160;<br/>
LDY&#160;$DC&#160;<br/>
work&#160;FPA.&#160;<br/>
D13E&#160;<br/>
20&#160;D4&#160;D7&#160;<br/>
JSR&#160;$D7D4&#160;<br/>
Set&#160;up&#160;string.&#160;<br/>
D141&#160;<br/>
86&#160;DB&#160;<br/>
STX&#160;$DB&#160;<br/>
Store&#160;block&#160;in&#160;work&#160;FPA&#160;and&#160;X.&#160;<br/>
D143&#160;<br/>
84&#160;DC&#160;<br/>
STY&#160;$DC&#160;<br/>
D145&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
D146&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
D147&#160;<br/>
E5&#160;D0&#160;<br/>
SBC&#160;$D0&#160;<br/>
Set&#160;up&#160;length&#160;of&#160;shorter&#160;<br/>
D149&#160;<br/>
F0&#160;08&#160;<br/>
BEQ&#160;$D153&#160;<br/>
string&#160;in&#160;X.&#160;<br/>
D14B&#160;<br/>
A9&#160;01&#160;<br/>
LDA&#160;#$01&#160;<br/>
A=0&#160;if&#160;strings&#160;are&#160;same&#160;length&#160;<br/>
D14D&#160;<br/>
90&#160;04&#160;<br/>
BCC&#160;$D153&#160;<br/>
A=l&#160;if&#160;string&#160;pointed&#160;to&#160;by&#160;<br/>
D14F&#160;<br/>
A6&#160;D0&#160;<br/>
LDX&#160;$D0&#160;<br/>
main&#160;FPA&#160;is&#160;longer&#160;otherwise&#160;<br/>
Pag&#160;&#160;e&#160;31&#160;<br/>
<hr/>
<a name=32></a>D151&#160;<br/>
A9&#160;FF&#160;<br/>
LDA&#160;#$FF&#160;<br/>
A=#FF.&#160;<br/>
D153&#160;<br/>
85&#160;D5&#160;<br/>
STA&#160;$D5&#160;<br/>
Save&#160;length&#160;difference&#160;flag.&#160;<br/>
D155&#160;<br/>
A0&#160;FF&#160;<br/>
LDY&#160;#$FF&#160;<br/>
Set&#160;Y&#160;and&#160;loop&#160;counter.&#160;<br/>
D157&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
D158&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D159&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
D15A&#160;<br/>
D0&#160;07&#160;<br/>
BNE&#160;$D163&#160;<br/>
Search&#160;through&#160;the&#160;strings&#160;<br/>
D15C&#160;<br/>
A6&#160;D5&#160;<br/>
LDX&#160;$D5&#160;<br/>
comparing&#160;each&#160;of&#160;the&#160;<br/>
D15E&#160;<br/>
30&#160;0F&#160;<br/>
BMI&#160;$D16F&#160;<br/>
characters&#160;until&#160;one&#160;string&#160;<br/>
D160&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
has&#160;ended.&#160;<br/>
D161&#160;<br/>
90&#160;0C&#160;<br/>
BCC&#160;$D16F&#160;<br/>
D163&#160;<br/>
B1&#160;DB&#160;<br/>
LDA&#160;($DB),Y&#160;<br/>
D165&#160;<br/>
D1&#160;D1&#160;<br/>
CMP&#160;($D1),Y&#160;<br/>
D167&#160;<br/>
F0&#160;EF&#160;<br/>
BEQ&#160;$D158&#160;<br/>
Characters&#160;match.&#160;<br/>
D169&#160;<br/>
A2&#160;FF&#160;<br/>
LDX&#160;#$FF&#160;<br/>
D16B&#160;<br/>
B0&#160;02&#160;<br/>
BCS&#160;$D16F&#160;<br/>
Set&#160;X&#160;to&#160;flag&#160;difference.&#160;<br/>
D16D&#160;<br/>
A2&#160;01&#160;<br/>
LDX&#160;#$01&#160;<br/>
D16F&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
Form&#160;comparison&#160;result&#160;bit.&#160;<br/>
D170&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
D171&#160;<br/>
2A&#160;<br/>
ROL&#160;A&#160;<br/>
D172&#160;<br/>
25&#160;2D&#160;<br/>
AND&#160;$2D&#160;<br/>
Mask&#160;with&#160;relational&#160;operator&#160;<br/>
D174&#160;<br/>
F0&#160;02&#160;<br/>
BEQ&#160;$D178&#160;<br/>
mask&#160;and&#160;branch&#160;if&#160;false.&#160;<br/>
D176&#160;<br/>
A9&#160;FF&#160;<br/>
LDA&#160;#$FF&#160;<br/>
Set&#160;FPA&#160;according&#160;to&#160;content&#160;<br/>
D178&#160;<br/>
4C&#160;24&#160;DF&#160;<br/>
JMP&#160;$DF24&#160;<br/>
of&#160;A&#160;and&#160;exit.&#160;<br/>
&#160;<br/>D17B&#160;<br/>
20&#160;65&#160;D0&#160;<br/>
JSR&#160;$D065&#160;<br/>
Check&#160;for&#160;&#34;,&#34;&#160;<br/>
D17E&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
<b>DIM</b>&#160;<br/>
D17F&#160;<br/>
20&#160;8D&#160;D1&#160;<br/>
JSR&#160;$D18D&#160;<br/>
Handle&#160;array&#160;dimensioning.&#160;<br/>
D182&#160;<br/>
20&#160;E8&#160;00&#160;<br/>
JSR&#160;$00E8&#160;<br/>
Get&#160;next&#160;character.&#160;<br/>
D185&#160;<br/>
D0&#160;F4&#160;<br/>
BNE&#160;$D17B&#160;<br/>
Loop&#160;until&#160;end&#160;of&#160;statement.&#160;<br/>
D187&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>D188&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
<b>GET&#160;VARIABLE&#160;FROM&#160;TEXT.</b>&#160;<br/>
D18A&#160;<br/>
20&#160;E8&#160;00&#160;<br/>
JSR&#160;$00E8&#160;<br/>
D18D&#160;<br/>
86&#160;27&#160;<br/>
STX&#160;$27&#160;<br/>
D18F&#160;<br/>
85&#160;B4&#160;<br/>
STA&#160;$B4&#160;<br/>
Put&#160;first&#160;char&#160;in&#160;$64.&#160;<br/>
D191&#160;<br/>
20&#160;E8&#160;00&#160;<br/>
JSR&#160;$00E8&#160;<br/>
D194&#160;<br/>
20&#160;16&#160;D2&#160;<br/>
JSR&#160;$D216&#160;<br/>
Give&#160;error&#160;if&#160;not&#160;a&#160;letter.&#160;<br/>
D197&#160;<br/>
B0&#160;03&#160;<br/>
BCS&#160;$D19C&#160;<br/>
D199&#160;<br/>
4C&#160;70&#160;D0&#160;<br/>
JMP&#160;$D070&#160;<br/>
Print&#160;&#34;SYNTAX&#160;ERROR&#34;.&#160;<br/>
D19C&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
D19E&#160;<br/>
86&#160;28&#160;<br/>
STX&#160;$28&#160;<br/>
Clear&#160;type&#160;flags.&#160;<br/>
D1A0&#160;<br/>
86&#160;29&#160;<br/>
STX&#160;$29&#160;<br/>
D1A2&#160;<br/>
20&#160;E2&#160;00&#160;<br/>
JSR&#160;$00E2&#160;<br/>
Next&#160;character.&#160;<br/>
D1A5&#160;<br/>
90&#160;05&#160;<br/>
BCC&#160;$D1AC&#160;<br/>
D1A7&#160;<br/>
20&#160;16&#160;D2&#160;<br/>
JSR&#160;$D216&#160;<br/>
Check&#160;that&#160;it&#160;is&#160;a&#160;letter.&#160;<br/>
D1AA&#160;<br/>
90&#160;0B&#160;<br/>
BCC&#160;$D1B7&#160;<br/>
Character&#160;not&#160;in&#160;range&#160;A-Z.&#160;<br/>
D1AC&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
Save&#160;second&#160;char.&#160;<br/>
D1AD&#160;<br/>
20&#160;E2&#160;00&#160;<br/>
JSR&#160;$00E2&#160;<br/>
Loop&#160;until&#160;not&#160;0-9&#160;or&#160;A-Z.&#160;<br/>
D1B0&#160;<br/>
90&#160;FB&#160;<br/>
BCC&#160;$D1AD&#160;<br/>
D1B2&#160;<br/>
20&#160;16&#160;D2&#160;<br/>
JSR&#160;$D216&#160;<br/>
D1B5&#160;<br/>
B0&#160;F6&#160;<br/>
BCS&#160;$D1AD&#160;<br/>
D1B7&#160;<br/>
C9&#160;24&#160;<br/>
CMP&#160;#$24&#160;<br/>
Test&#160;for&#160;string&#160;indicator.&#160;<br/>
D1B9&#160;<br/>
D0&#160;06&#160;<br/>
BNE&#160;$D1C1&#160;<br/>
Character&#160;is&#160;not&#160;a&#160;$.&#160;<br/>
D1BB&#160;<br/>
A9&#160;FF&#160;<br/>
LDA&#160;#$FF&#160;<br/>
D1BD&#160;<br/>
85&#160;28&#160;<br/>
STA&#160;$28&#160;<br/>
Set&#160;string&#160;type.&#160;<br/>
D1BF&#160;<br/>
D0&#160;10&#160;<br/>
BNE&#160;$D1D1&#160;<br/>
D1C1&#160;<br/>
C9&#160;25&#160;<br/>
CMP&#160;#$25&#160;<br/>
Test&#160;for&#160;integer&#160;indicator.&#160;<br/>
D1C3&#160;<br/>
D0&#160;13&#160;<br/>
BNE&#160;$D1D8&#160;<br/>
Character&#160;is&#160;not&#160;a&#160;%.&#160;<br/>
D1C5&#160;<br/>
A5&#160;2B&#160;<br/>
LDA&#160;$2B&#160;<br/>
D1C7&#160;<br/>
30&#160;D0&#160;<br/>
BMI&#160;$D199&#160;<br/>
D1C9&#160;<br/>
A9&#160;80&#160;<br/>
LDA&#160;#$80&#160;<br/>
D1CB&#160;<br/>
85&#160;29&#160;<br/>
STA&#160;$29&#160;<br/>
Set&#160;integer&#160;flag.&#160;<br/>
D1CD&#160;<br/>
05&#160;B4&#160;<br/>
ORA&#160;$B4&#160;<br/>
Pag&#160;&#160;e&#160;32&#160;<br/>
<hr/>
<a name=33></a>D1CF&#160;<br/>
85&#160;B4&#160;<br/>
STA&#160;$B4&#160;<br/>
D1D1&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
Set&#160;top&#160;bits&#160;of&#160;name&#160;according&#160;<br/>
D1D2&#160;<br/>
09&#160;80&#160;<br/>
ORA&#160;#$80&#160;<br/>
to&#160;type&#160;of&#160;variable.&#160;<br/>
D1D4&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
D1D5&#160;<br/>
20&#160;E2&#160;00&#160;<br/>
JSR&#160;$00E2&#160;<br/>
Next&#160;character.&#160;<br/>
D1D8&#160;<br/>
86&#160;B5&#160;<br/>
STX&#160;$B5&#160;<br/>
D1DA&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
D1DB&#160;<br/>
05&#160;2B&#160;<br/>
ORA&#160;$2B&#160;<br/>
D1DD&#160;<br/>
E9&#160;28&#160;<br/>
SBC&#160;#$28&#160;<br/>
Handle&#160;an&#160;array&#160;if&#160;following&#160;<br/>
D1DF&#160;<br/>
D0&#160;03&#160;<br/>
BNE&#160;$D1E4&#160;<br/>
char&#160;is&#160;&#34;(&#34;&#160;with&#160;number.&#160;<br/>
D1E1&#160;<br/>
4C&#160;BB&#160;D2&#160;<br/>
JMP&#160;$D2BB&#160;<br/>
&#160;<br/>D1E4&#160;<br/>
24&#160;2B&#160;<br/>
BIT&#160;$2B&#160;<br/>
If&#160;STORE&#160;/&#160;RECALL&#160;flag&#160;bit&#160;is&#160;<br/>
D1E6&#160;<br/>
70&#160;F9&#160;<br/>
BVS&#160;$D1E1&#160;<br/>
set&#160;then&#160;handle&#160;an&#160;array.&#160;<br/>
D1E8&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
D1EA&#160;<br/>
85&#160;2B&#160;<br/>
STA&#160;$2B&#160;<br/>
Clear&#160;variable&#160;flag.&#160;<br/>
D1EC&#160;<br/>
A5&#160;9C&#160;<br/>
LDA&#160;$9C&#160;<br/>
X&#160;and&#160;A&#160;set&#160;to&#160;end&#160;Basic.&#160;<br/>
D1EE&#160;<br/>
A6&#160;9D&#160;<br/>
LDX&#160;$9D&#160;<br/>
D1F0&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
D1F2&#160;<br/>
86&#160;CF&#160;<br/>
STX&#160;$CF&#160;<br/>
D1F4&#160;<br/>
85&#160;CE&#160;<br/>
STA&#160;$CE&#160;<br/>
If&#160;end&#160;variables&#160;reached&#160;then&#160;<br/>
D1F6&#160;<br/>
E4&#160;9F&#160;<br/>
CPX&#160;$9F&#160;<br/>
create&#160;new&#160;one&#160;if&#160;necessary.&#160;<br/>
D1F8&#160;<br/>
D0&#160;04&#160;<br/>
BNE&#160;$D1FE&#160;<br/>
D1FA&#160;<br/>
C5&#160;9E&#160;<br/>
CMP&#160;$9E&#160;<br/>
D1FC&#160;<br/>
F0&#160;24&#160;<br/>
BEQ&#160;$D222&#160;<br/>
D1FE&#160;<br/>
A5&#160;B4&#160;<br/>
LDA&#160;$B4&#160;<br/>
D200&#160;<br/>
D1&#160;CE&#160;<br/>
CMP&#160;($CE),Y&#160;<br/>
D202&#160;<br/>
D0&#160;08&#160;<br/>
BNE&#160;$D20C&#160;<br/>
D204&#160;<br/>
A5&#160;B5&#160;<br/>
LDA&#160;$B5&#160;<br/>
D206&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
If&#160;variable&#160;is&#160;found&#160;then&#160;set&#160;<br/>
D207&#160;<br/>
D1&#160;CE&#160;<br/>
CMP&#160;($CE),Y&#160;<br/>
pointer&#160;and&#160;exit.&#160;<br/>
D209&#160;<br/>
F0&#160;6C&#160;<br/>
BEQ&#160;$D277&#160;<br/>
D20B&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
D20C&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
D20D&#160;<br/>
A5&#160;CE&#160;<br/>
LDA&#160;$CE&#160;<br/>
D20F&#160;<br/>
69&#160;07&#160;<br/>
ADC&#160;#$07&#160;<br/>
Otherwise&#160;add&#160;7&#160;to&#160;pointer&#160;and&#160;<br/>
D211&#160;<br/>
90&#160;E1&#160;<br/>
BCC&#160;$D1F4&#160;<br/>
go&#160;round&#160;to&#160;search&#160;again.&#160;<br/>
D213&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
D214&#160;<br/>
D0&#160;DC&#160;<br/>
BNE&#160;$D1F2&#160;<br/>
D216&#160;<br/>
C9&#160;41&#160;<br/>
CMP&#160;#$41&#160;<br/>
Set&#160;C&#160;if&#160;char&#160;in&#160;A&#160;is&#160;in&#160;the&#160;<br/>
D218&#160;<br/>
90&#160;07&#160;<br/>
BCC&#160;$D221&#160;<br/>
Ascii&#160;range&#160;A&#160;-&#160;Z.&#160;<br/>
D21A&#160;<br/>
E9&#160;5B&#160;<br/>
SBC&#160;#$5B&#160;<br/>
D21C&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
D21D&#160;<br/>
E9&#160;A5&#160;<br/>
SBC&#160;#$A5&#160;<br/>
D21F&#160;<br/>
B0&#160;00&#160;<br/>
BCS&#160;$D221&#160;<br/>
D221&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>D222&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Routine&#160;jumps&#160;here&#160;if&#160;variable&#160;<br/>
D223&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
is&#160;not&#160;found.&#160;A&#160;and&#160;Y&#160;are&#160;set&#160;<br/>
D224&#160;<br/>
C9&#160;7E&#160;<br/>
CMP&#160;#$7E&#160;<br/>
to&#160;point&#160;to&#160;$E207&#160;if&#160;a&#160;value&#160;<br/>
D226&#160;<br/>
D0&#160;0D&#160;<br/>
BNE&#160;$D235&#160;<br/>
is&#160;needed&#160;(which&#160;will&#160;be&#160;0).&#160;<br/>
D228&#160;<br/>
BA&#160;<br/>
TSX&#160;<br/>
If&#160;a&#160;new&#160;variable&#160;is&#160;to&#160;be&#160;<br/>
D229&#160;<br/>
BD&#160;02&#160;01&#160;<br/>
LDA&#160;$0102,X&#160;<br/>
created&#160;then&#160;execute&#160;routine&#160;<br/>
D22C&#160;<br/>
C9&#160;D0&#160;<br/>
CMP&#160;#$D0&#160;<br/>
below.&#160;<br/>
D22E&#160;<br/>
D0&#160;05&#160;<br/>
BNE&#160;$D235&#160;<br/>
D230&#160;<br/>
A9&#160;07&#160;<br/>
LDA&#160;#$07&#160;<br/>
D232&#160;<br/>
A0&#160;E2&#160;<br/>
LDY&#160;#$E2&#160;<br/>
D234&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>D235&#160;<br/>
A5&#160;9E&#160;<br/>
LDA&#160;$9E&#160;<br/>
Routine&#160;to&#160;open&#160;up&#160;space&#160;for&#160;a&#160;<br/>
D237&#160;<br/>
A4&#160;9F&#160;<br/>
LDY&#160;$9F&#160;<br/>
variable.&#160;<br/>
D239&#160;<br/>
85&#160;CE&#160;<br/>
STA&#160;$CE&#160;<br/>
Copy&#160;end&#160;of&#160;variables&#160;pointer.&#160;<br/>
D23B&#160;<br/>
84&#160;CF&#160;<br/>
STY&#160;$CF&#160;<br/>
D23D&#160;<br/>
A5&#160;A0&#160;<br/>
LDA&#160;$A0&#160;<br/>
Pag&#160;&#160;e&#160;33&#160;<br/>
<hr/>
<a name=34></a>D23F&#160;<br/>
A4&#160;A1&#160;<br/>
LDY&#160;$A1&#160;<br/>
D241&#160;<br/>
85&#160;C9&#160;<br/>
STA&#160;$C9&#160;<br/>
Copy&#160;end&#160;of&#160;Arrays&#160;pointer.&#160;<br/>
D243&#160;<br/>
84&#160;CA&#160;<br/>
STY&#160;$CA&#160;<br/>
D245&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
Add&#160;7&#160;to&#160;copy&#160;of&#160;end&#160;of&#160;Arrays&#160;<br/>
D246&#160;<br/>
69&#160;07&#160;<br/>
ADC&#160;#$07&#160;<br/>
pointer&#160;so&#160;that&#160;a&#160;new&#160;variable&#160;<br/>
D248&#160;<br/>
90&#160;01&#160;<br/>
BCC&#160;$D24B&#160;<br/>
can&#160;be&#160;inserted&#160;in&#160;variable&#160;<br/>
D24A&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
block.&#160;<br/>
D24B&#160;<br/>
85&#160;C7&#160;<br/>
STA&#160;$C7&#160;<br/>
D24D&#160;<br/>
84&#160;C8&#160;<br/>
STY&#160;$C8&#160;<br/>
D24F&#160;<br/>
20&#160;F4&#160;C3&#160;<br/>
JSR&#160;$C3F4&#160;<br/>
Shift&#160;up&#160;arrays.&#160;<br/>
D252&#160;<br/>
A5&#160;C7&#160;<br/>
LDA&#160;$C7&#160;<br/>
D254&#160;<br/>
A4&#160;C8&#160;<br/>
LDY&#160;$C8&#160;<br/>
D256&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D257&#160;<br/>
85&#160;9E&#160;<br/>
STA&#160;$9E&#160;<br/>
Update&#160;end&#160;of&#160;Variables&#160;<br/>
D259&#160;<br/>
84&#160;9F&#160;<br/>
STY&#160;$9F&#160;<br/>
pointer.&#160;<br/>
D25B&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
D25D&#160;<br/>
A5&#160;B4&#160;<br/>
LDA&#160;$B4&#160;<br/>
Copy&#160;across&#160;name&#160;of&#160;new&#160;<br/>
D25F&#160;<br/>
91&#160;CE&#160;<br/>
STA&#160;($CE),Y&#160;<br/>
variable.&#160;<br/>
D261&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D262&#160;<br/>
A5&#160;B5&#160;<br/>
LDA&#160;$B5&#160;<br/>
D264&#160;<br/>
91&#160;CE&#160;<br/>
STA&#160;($CE),Y&#160;<br/>
D266&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
Set&#160;value&#160;of&#160;variable&#160;to&#160;zero.&#160;<br/>
D268&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D269&#160;<br/>
91&#160;CE&#160;<br/>
STA&#160;($CE),Y&#160;<br/>
D26B&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D26C&#160;<br/>
91&#160;CE&#160;<br/>
STA&#160;($CE),Y&#160;<br/>
D26E&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D26F&#160;<br/>
91&#160;CE&#160;<br/>
STA&#160;($CE),Y&#160;<br/>
D271&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D272&#160;<br/>
91&#160;CE&#160;<br/>
STA&#160;($CE),Y&#160;<br/>
D274&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D275&#160;<br/>
91&#160;CE&#160;<br/>
STA&#160;($CE),Y&#160;<br/>
D277&#160;<br/>
A5&#160;CE&#160;<br/>
LDA&#160;$CE&#160;<br/>
D279&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
D27A&#160;<br/>
69&#160;02&#160;<br/>
ADC&#160;#$02&#160;<br/>
Set&#160;$66&#160;and&#160;$B7&#160;to&#160;point&#160;to&#160;<br/>
D27C&#160;<br/>
A4&#160;CF&#160;<br/>
LDY&#160;$CF&#160;<br/>
value&#160;of&#160;variable&#160;(2&#160;beyond&#160;<br/>
D27E&#160;<br/>
90&#160;01&#160;<br/>
BCC&#160;$D281&#160;<br/>
its&#160;name).&#160;<br/>
D280&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D281&#160;<br/>
85&#160;B6&#160;<br/>
STA&#160;$B6&#160;<br/>
D283&#160;<br/>
84&#160;B7&#160;<br/>
STY&#160;$B7&#160;<br/>
D285&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>D286&#160;<br/>
A5&#160;26&#160;<br/>
LDA&#160;$26&#160;<br/>
Set&#160;$C7&#160;and&#160;$C8&#160;to&#160;point&#160;to&#160;<br/>
D288&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
start&#160;of&#160;array&#160;cells.&#160;<br/>
D289&#160;<br/>
69&#160;05&#160;<br/>
ADC&#160;#$05&#160;<br/>
D28B&#160;<br/>
65&#160;CE&#160;<br/>
ADC&#160;$CE&#160;<br/>
D28D&#160;<br/>
A4&#160;CF&#160;<br/>
LDY&#160;$CF&#160;<br/>
D28F&#160;<br/>
90&#160;01&#160;<br/>
BCC&#160;$D292&#160;<br/>
D291&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D292&#160;<br/>
85&#160;C7&#160;<br/>
STA&#160;$C7&#160;<br/>
D294&#160;<br/>
84&#160;C8&#160;<br/>
STY&#160;$C8&#160;<br/>
D296&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>D297&#160;<br/>
90&#160;80&#160;00&#160;00&#160;00&#160;<br/>
F1oating&#160;point&#160;value&#160;of&#160;-32768&#160;<br/>
&#160;<br/>D29C&#160;<br/>
20&#160;E2&#160;00&#160;<br/>
JSR&#160;$00E2&#160;<br/>
Next&#160;character.&#160;<br/>
D29F&#160;<br/>
20&#160;17&#160;CF&#160;<br/>
JSR&#160;$CF17&#160;<br/>
Get&#160;numeric&#160;expression.&#160;<br/>
D2A2&#160;<br/>
20&#160;06&#160;CF&#160;<br/>
JSR&#160;$CF06&#160;<br/>
Check&#160;that&#160;it&#160;is&#160;numeric.&#160;<br/>
D2A5&#160;<br/>
A5&#160;D5&#160;<br/>
LDA&#160;$D5&#160;<br/>
D2A7&#160;<br/>
30&#160;0D&#160;<br/>
BMI&#160;$D2B6&#160;<br/>
Error&#160;if&#160;negative&#160;subscript.&#160;<br/>
&#160;<br/>D2A9&#160;<br/>
A5&#160;D0&#160;<br/>
LDA&#160;$D0&#160;<br/>
<b>MAIN&#160;FPA&#160;INTO&#160;SIGNED&#160;INTEGER.</b>&#160;<br/>
D2AB&#160;<br/>
C9&#160;90&#160;<br/>
CMP&#160;#$90&#160;<br/>
Number&#160;is&#160;less&#160;than&#160;32768&#160;in&#160;<br/>
D2AD&#160;<br/>
90&#160;09&#160;<br/>
BCC&#160;$D2B8&#160;<br/>
magnitude.&#160;<br/>
Pag&#160;&#160;e&#160;34&#160;<br/>
<hr/>
<a name=35></a>D2AF&#160;<br/>
A9&#160;97&#160;<br/>
LDA&#160;#$97&#160;<br/>
Compare&#160;number&#160;with&#160;-32768&#160;<br/>
D2B1&#160;<br/>
A0&#160;D2&#160;<br/>
LDY&#160;#$D2&#160;<br/>
held&#160;at&#160;$0297.&#160;<br/>
D2B3&#160;<br/>
20&#160;4C&#160;DF&#160;<br/>
JSR&#160;$DF4C&#160;<br/>
D2B6&#160;<br/>
D0&#160;7E&#160;<br/>
BNE&#160;$D336&#160;<br/>
Error&#160;if&#160;not&#160;equal.&#160;<br/>
D2B8&#160;<br/>
4C&#160;8C&#160;DF&#160;<br/>
JMP&#160;$DF8C&#160;<br/>
Convert&#160;to&#160;integer&#160;and&#160;exit.&#160;<br/>
&#160;<br/>D2BB&#160;<br/>
A5&#160;2B&#160;<br/>
LDA&#160;$2B&#160;<br/>
<b>HANDLE&#160;ARRAY.</b>&#160;If&#160;STORE/RECALL&#160;<br/>
D2BD&#160;<br/>
D0&#160;47&#160;<br/>
BNE&#160;$D306&#160;<br/>
then&#160;skip&#160;handling&#160;subscripts.&#160;<br/>
D2BF&#160;<br/>
A5&#160;27&#160;<br/>
LDA&#160;$27&#160;<br/>
D2C1&#160;<br/>
05&#160;29&#160;<br/>
ORA&#160;$29&#160;<br/>
Save&#160;flag&#160;bytes.&#160;<br/>
D2C3&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
D2C4&#160;<br/>
A5&#160;28&#160;<br/>
LDA&#160;$28&#160;<br/>
D2C6&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
D2C7&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
Set&#160;initial&#160;count&#160;of&#160;<br/>
D2C9&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
subscripts&#160;and&#160;save&#160;it&#160;on&#160;<br/>
D2CA&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
stack.&#160;<br/>
D2CB&#160;<br/>
A5&#160;B5&#160;<br/>
LDA&#160;$B5&#160;<br/>
Save&#160;address&#160;of&#160;last&#160;variable&#160;<br/>
D2CD&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
accessed.&#160;<br/>
D2CE&#160;<br/>
A5&#160;B4&#160;<br/>
LDA&#160;$B4&#160;<br/>
D2D0&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
D2D1&#160;<br/>
20&#160;9C&#160;D2&#160;<br/>
JSR&#160;$D29C&#160;<br/>
Get&#160;subscript.&#160;<br/>
D2D4&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
D2D5&#160;<br/>
85&#160;B4&#160;<br/>
STA&#160;$B4&#160;<br/>
Restore&#160;address&#160;of&#160;last&#160;<br/>
D2D7&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
variable&#160;accessed.&#160;<br/>
D2D8&#160;<br/>
85&#160;B5&#160;<br/>
STA&#160;$B5&#160;<br/>
D2DA&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Restore&#160;subscript&#160;counter.&#160;<br/>
D2DB&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
D2DC&#160;<br/>
BA&#160;<br/>
TSX&#160;<br/>
D2DD&#160;<br/>
BD&#160;02&#160;01&#160;<br/>
LDA&#160;$0102,X&#160;<br/>
Copy&#160;flags&#160;on&#160;to&#160;top&#160;of&#160;the&#160;<br/>
D2E0&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
stack.&#160;<br/>
D2E1&#160;<br/>
BD&#160;01&#160;01&#160;<br/>
LDA&#160;$0101,X&#160;<br/>
D2E4&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
D2E5&#160;<br/>
A5&#160;D3&#160;<br/>
LDA&#160;$D3&#160;<br/>
Put&#160;on&#160;the&#160;size&#160;of&#160;new&#160;<br/>
D2E7&#160;<br/>
9D&#160;02&#160;01&#160;<br/>
STA&#160;$0102,X&#160;<br/>
dimension&#160;underneath&#160;them.&#160;<br/>
D2EA&#160;<br/>
A5&#160;D4&#160;<br/>
LDA&#160;$D4&#160;<br/>
D2EC&#160;<br/>
9D&#160;01&#160;01&#160;<br/>
STA&#160;$0101,X&#160;<br/>
D2EF&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
Increment&#160;subscript&#160;number.&#160;<br/>
D2F0&#160;<br/>
20&#160;E8&#160;00&#160;<br/>
JSR&#160;$00E8&#160;<br/>
Get&#160;next&#160;character.&#160;<br/>
D2F3&#160;<br/>
C9&#160;2C&#160;<br/>
CMP&#160;#$2C&#160;<br/>
Branch&#160;if&#160;it&#160;is&#160;a&#160;comma.&#160;<br/>
D2F5&#160;<br/>
F0&#160;D2&#160;<br/>
BEQ&#160;$D2C9&#160;<br/>
D2F7&#160;<br/>
84&#160;26&#160;<br/>
STY&#160;$26&#160;<br/>
Save&#160;subscript&#160;number.&#160;<br/>
D2F9&#160;<br/>
20&#160;5F&#160;D0&#160;<br/>
JSR&#160;$D05F&#160;<br/>
Test&#160;for&#160;a&#160;&#34;)&#34;.&#160;<br/>
D2FC&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
D2FD&#160;<br/>
85&#160;28&#160;<br/>
STA&#160;$28&#160;<br/>
Restore&#160;variable&#160;type&#160;flags.&#160;<br/>
D2FF&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
D300&#160;<br/>
85&#160;29&#160;<br/>
STA&#160;$29&#160;<br/>
D302&#160;<br/>
29&#160;7F&#160;<br/>
AND&#160;#$7F&#160;<br/>
Set&#160;Dimension&#160;flag,&#160;0=not&#160;dim.&#160;<br/>
D304&#160;<br/>
85&#160;27&#160;<br/>
STA&#160;$27&#160;<br/>
D306&#160;<br/>
A6&#160;9E&#160;<br/>
LDX&#160;$9E&#160;<br/>
D308&#160;<br/>
A5&#160;9F&#160;<br/>
LDA&#160;$9F&#160;<br/>
Set&#160;pointer&#160;to&#160;next&#160;array.&#160;<br/>
D30A&#160;<br/>
86&#160;CE&#160;<br/>
STX&#160;$CE&#160;<br/>
D30C&#160;<br/>
85&#160;CF&#160;<br/>
STA&#160;$CF&#160;<br/>
D30E&#160;<br/>
C5&#160;A1&#160;<br/>
CMP&#160;$A1&#160;<br/>
D310&#160;<br/>
D0&#160;04&#160;<br/>
BNE&#160;$D316&#160;<br/>
Address&#160;of&#160;next&#160;array&#160;is&#160;same&#160;<br/>
D312&#160;<br/>
E4&#160;A0&#160;<br/>
CPX&#160;$A0&#160;<br/>
as&#160;that&#160;of&#160;end&#160;arrays.&#160;<br/>
D314&#160;<br/>
F0&#160;3F&#160;<br/>
BEQ&#160;$D355&#160;<br/>
D316&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
D318&#160;<br/>
B1&#160;CE&#160;<br/>
LDA&#160;($CE),Y&#160;<br/>
D31A&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D31B&#160;<br/>
C5&#160;B4&#160;<br/>
CMP&#160;$B4&#160;<br/>
Branch&#160;to&#160;$0336&#160;if&#160;the&#160;next&#160;<br/>
D31D&#160;<br/>
D0&#160;06&#160;<br/>
BNE&#160;$D325&#160;<br/>
array&#160;pointed&#160;to&#160;has&#160;same&#160;name&#160;<br/>
D31F&#160;<br/>
A5&#160;B5&#160;<br/>
LDA&#160;$B5&#160;<br/>
as&#160;the&#160;array&#160;being&#160;put&#160;into&#160;<br/>
D321&#160;<br/>
D1&#160;CE&#160;<br/>
CMP&#160;($CE),Y&#160;<br/>
memory.&#160;<br/>
D323&#160;<br/>
F0&#160;16&#160;<br/>
BEQ&#160;$D33B&#160;<br/>
Pag&#160;&#160;e&#160;35&#160;<br/>
<hr/>
<a name=36></a>D325&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D326&#160;<br/>
B1&#160;CE&#160;<br/>
LDA&#160;($CE),Y&#160;<br/>
Add&#160;offset&#160;to&#160;pointer.&#160;<br/>
D328&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
D329&#160;<br/>
65&#160;CE&#160;<br/>
ADC&#160;$CE&#160;<br/>
D32B&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
D32C&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D32D&#160;<br/>
B1&#160;CE&#160;<br/>
LDA&#160;($CE),Y&#160;<br/>
D32F&#160;<br/>
65&#160;CF&#160;<br/>
ADC&#160;$CF&#160;<br/>
D331&#160;<br/>
90&#160;D7&#160;<br/>
BCC&#160;$D30A&#160;<br/>
Next&#160;array&#160;if&#160;all&#160;is&#160;okay.&#160;<br/>
D333&#160;<br/>
A2&#160;6B&#160;<br/>
LDX&#160;#$6B&#160;<br/>
Set&#160;X&#160;-&#160;&#34;BAD&#160;SUBSCRIPT&#160;ERROR&#34;&#160;<br/>
D335&#160;<br/>
2C&#160;A2&#160;35&#160;<br/>
BIT&#160;$35A2&#160;<br/>
Set&#160;X&#160;-&#160;&#34;ILLEGAL&#160;QTY&#160;ERROR&#34;&#160;<br/>
D338&#160;<br/>
4C&#160;7E&#160;C4&#160;<br/>
JMP&#160;$C47E&#160;<br/>
Print&#160;error&#160;message.&#160;<br/>
&#160;<br/>D33B&#160;<br/>
A2&#160;78&#160;<br/>
LDX&#160;#$78&#160;<br/>
Set&#160;X&#160;-&#160;&#34;REDIM'D&#160;ARRAY&#160;ERROR&#34;&#160;<br/>
D33D&#160;<br/>
A5&#160;27&#160;<br/>
LDA&#160;$27&#160;<br/>
D33F&#160;<br/>
D0&#160;F7&#160;<br/>
BNE&#160;$D338&#160;<br/>
Print&#160;error.&#160;<br/>
D341&#160;<br/>
A5&#160;2B&#160;<br/>
LDA&#160;$2B&#160;<br/>
If&#160;STORE&#160;/&#160;RECALL&#160;flag&#160;was&#160;set&#160;<br/>
D343&#160;<br/>
F0&#160;02&#160;<br/>
BEQ&#160;$D347&#160;<br/>
then&#160;exit&#160;with&#160;C=l.&#160;<br/>
D345&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
D346&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>D347&#160;<br/>
20&#160;86&#160;D2&#160;<br/>
JSR&#160;$D286&#160;<br/>
Set&#160;up&#160;start&#160;of&#160;Array&#160;cells.&#160;<br/>
D34A&#160;<br/>
A5&#160;26&#160;<br/>
LDA&#160;$26&#160;<br/>
Get&#160;number&#160;of&#160;subscripts.&#160;<br/>
D34C&#160;<br/>
A0&#160;04&#160;<br/>
LDY&#160;#$04&#160;<br/>
D34E&#160;<br/>
D1&#160;CE&#160;<br/>
CMP&#160;($CE),Y&#160;<br/>
If&#160;not&#160;same&#160;number&#160;as&#160;<br/>
D350&#160;<br/>
D0&#160;E1&#160;<br/>
BNE&#160;$D333&#160;<br/>
dimensioned&#160;then&#160;give&#160;error.&#160;<br/>
D352&#160;<br/>
4C&#160;EB&#160;D3&#160;<br/>
JMP&#160;$D3EB&#160;<br/>
&#160;<br/>D355&#160;<br/>
A5&#160;2B&#160;<br/>
LDA&#160;$2B&#160;<br/>
End&#160;up&#160;here&#160;if&#160;array&#160;not&#160;found&#160;<br/>
D357&#160;<br/>
F0&#160;08&#160;<br/>
BEQ&#160;$D361&#160;<br/>
STORE/RECALL&#160;flag&#160;is&#160;not&#160;set.&#160;<br/>
D359&#160;<br/>
20&#160;3D&#160;E9&#160;<br/>
JSR&#160;$E93D&#160;<br/>
Reset&#160;cassette&#160;status&#160;and&#160;give&#160;<br/>
D35C&#160;<br/>
A2&#160;2A&#160;<br/>
LDX&#160;#$2A&#160;<br/>
&#34;OUT&#160;OF&#160;DATA&#34;&#160;error.&#160;<br/>
D35E&#160;<br/>
4C&#160;7E&#160;C4&#160;<br/>
JMP&#160;$C47E&#160;<br/>
&#160;<br/>D361&#160;<br/>
20&#160;86&#160;D2&#160;<br/>
JSR&#160;$D286&#160;<br/>
<b>DIMENSION&#160;AN&#160;ARRAY.</b>&#160;Set&#160;up&#160;<br/>
D364&#160;<br/>
20&#160;44&#160;C4&#160;<br/>
JSR&#160;$C444&#160;<br/>
start&#160;of&#160;array&#160;cells&#160;and&#160;check&#160;<br/>
D367&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
for&#160;enough&#160;memory&#160;for&#160;header.&#160;<br/>
D369&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
Set&#160;MSB&#160;of&#160;correct&#160;array&#160;size.&#160;<br/>
D36A&#160;<br/>
85&#160;E1&#160;<br/>
STA&#160;$E1&#160;<br/>
D36C&#160;<br/>
A2&#160;05&#160;<br/>
LDX&#160;#$05&#160;<br/>
Try&#160;an&#160;element&#160;size&#160;of&#160;5.&#160;<br/>
D36E&#160;<br/>
A5&#160;B4&#160;<br/>
LDA&#160;$B4&#160;<br/>
D370&#160;<br/>
91&#160;CE&#160;<br/>
STA&#160;($CE),Y&#160;<br/>
Transfer&#160;first&#160;letter&#160;of&#160;name.&#160;<br/>
D372&#160;<br/>
10&#160;01&#160;<br/>
BPL&#160;$D375&#160;<br/>
Decrement&#160;size&#160;to&#160;4&#160;if&#160;integer&#160;<br/>
D374&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
array.&#160;<br/>
D375&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D376&#160;<br/>
A5&#160;B5&#160;<br/>
LDA&#160;$B5&#160;<br/>
D378&#160;<br/>
91&#160;CE&#160;<br/>
STA&#160;($CE),Y&#160;<br/>
Transfer&#160;second&#160;letter&#160;of&#160;name&#160;<br/>
D37A&#160;<br/>
10&#160;02&#160;<br/>
BPL&#160;$D37E&#160;<br/>
and&#160;decrement&#160;element&#160;size&#160;to&#160;<br/>
D37C&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
3&#160;for&#160;strings&#160;and&#160;2&#160;for&#160;<br/>
D37D&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
integers.&#160;<br/>
D37E&#160;<br/>
86&#160;E0&#160;<br/>
STX&#160;$E0&#160;<br/>
D380&#160;<br/>
A5&#160;26&#160;<br/>
LDA&#160;$26&#160;<br/>
D382&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D383&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
Transfer&#160;number&#160;of&#160;subscripts&#160;<br/>
D384&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
into&#160;array&#160;header.&#160;<br/>
D385&#160;<br/>
91&#160;CE&#160;<br/>
STA&#160;($CE),Y&#160;<br/>
D387&#160;<br/>
A2&#160;0B&#160;<br/>
LDX&#160;#$0B&#160;<br/>
Set&#160;default&#160;dimension&#160;size&#160;to&#160;<br/>
D389&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
11&#160;(0&#160;to&#160;10).&#160;<br/>
D38B&#160;<br/>
24&#160;27&#160;<br/>
BIT&#160;$27&#160;<br/>
DIM&#160;flag&#160;is&#160;clear.&#160;<br/>
D38D&#160;<br/>
50&#160;08&#160;<br/>
BVC&#160;$D397&#160;<br/>
D38F&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Load&#160;A&#160;and&#160;X&#160;with&#160;dimension&#160;<br/>
D390&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
size.&#160;<br/>
D391&#160;<br/>
69&#160;01&#160;<br/>
ADC&#160;#$01&#160;<br/>
D393&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
Pag&#160;&#160;e&#160;36&#160;<br/>
<hr/>
<a name=37></a>D394&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
D395&#160;<br/>
69&#160;00&#160;<br/>
ADC&#160;#$00&#160;<br/>
D397&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D398&#160;<br/>
91&#160;CE&#160;<br/>
STA&#160;($CE),Y&#160;<br/>
Put&#160;MSB&#160;of&#160;dimension&#160;into&#160;<br/>
D39A&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
array.&#160;<br/>
D39B&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
Put&#160;LSB&#160;of&#160;dimension&#160;into&#160;<br/>
D39C&#160;<br/>
91&#160;CE&#160;<br/>
STA&#160;($CE),Y&#160;<br/>
array.&#160;<br/>
D39E&#160;<br/>
20&#160;4D&#160;D4&#160;<br/>
JSR&#160;$D44D&#160;<br/>
Multiply&#160;element&#160;size&#160;by&#160;that&#160;<br/>
D3A1&#160;<br/>
86&#160;E0&#160;<br/>
STX&#160;$E0&#160;<br/>
of&#160;dimension.&#160;<br/>
D3A3&#160;<br/>
85&#160;E1&#160;<br/>
STA&#160;$E1&#160;<br/>
Save&#160;size.&#160;<br/>
D3A5&#160;<br/>
A4&#160;91&#160;<br/>
LDY&#160;$91&#160;<br/>
Restore&#160;offset&#160;into&#160;header.&#160;<br/>
D3A7&#160;<br/>
C6&#160;26&#160;<br/>
DEC&#160;$26&#160;<br/>
Decrement&#160;no&#160;of&#160;dim's&#160;left&#160;to&#160;<br/>
D3A9&#160;<br/>
D0&#160;DC&#160;<br/>
BNE&#160;$D387&#160;<br/>
do.&#160;Branch&#160;if&#160;not&#160;all&#160;done.&#160;<br/>
D3AB&#160;<br/>
65&#160;C8&#160;<br/>
ADC&#160;$C8&#160;<br/>
D3AD&#160;<br/>
B0&#160;5D&#160;<br/>
BCS&#160;$D40C&#160;<br/>
Add&#160;array&#160;size&#160;to&#160;start&#160;<br/>
D3AF&#160;<br/>
85&#160;C8&#160;<br/>
STA&#160;$C8&#160;<br/>
address&#160;of&#160;start&#160;of&#160;array.&#160;<br/>
D3B1&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
Give&#160;&#34;OUT&#160;OF&#160;MEMORY&#160;ERROR&#34;&#160;if&#160;<br/>
D3B2&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
too&#160;large.&#160;<br/>
D3B3&#160;<br/>
65&#160;C7&#160;<br/>
ADC&#160;$C7&#160;<br/>
D3B5&#160;<br/>
90&#160;03&#160;<br/>
BCC&#160;$D3BA&#160;<br/>
D3B7&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D3B8&#160;<br/>
F0&#160;52&#160;<br/>
BEQ&#160;$D40C&#160;<br/>
D3BA&#160;<br/>
20&#160;44&#160;C4&#160;<br/>
JSR&#160;$C444&#160;<br/>
Check&#160;sufficient&#160;memory.&#160;<br/>
D3BD&#160;<br/>
85&#160;A0&#160;<br/>
STA&#160;$A0&#160;<br/>
Save&#160;top&#160;of&#160;arrays.&#160;<br/>
D3BF&#160;<br/>
84&#160;A1&#160;<br/>
STY&#160;$A1&#160;<br/>
D3C1&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
D3C3&#160;<br/>
E6&#160;E1&#160;<br/>
INC&#160;$E1&#160;<br/>
Set&#160;number&#160;of&#160;whole/part&#160;pages&#160;<br/>
D3C5&#160;<br/>
A4&#160;E0&#160;<br/>
LDY&#160;$E0&#160;<br/>
that&#160;must&#160;be&#160;initialised&#160;to&#160;0.&#160;<br/>
D3C7&#160;<br/>
F0&#160;05&#160;<br/>
BEQ&#160;$D3CE&#160;<br/>
Whole&#160;number&#160;of&#160;pages&#160;to&#160;do.&#160;<br/>
D3C9&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
D3CA&#160;<br/>
91&#160;C7&#160;<br/>
STA&#160;($C7),Y&#160;<br/>
Clear&#160;rest&#160;of&#160;page.&#160;<br/>
D3CC&#160;<br/>
D0&#160;FB&#160;<br/>
BNE&#160;$D3C9&#160;<br/>
D3CE&#160;<br/>
C6&#160;C8&#160;<br/>
DEC&#160;$C8&#160;<br/>
Decrement&#160;pointers&#160;and&#160;page&#160;<br/>
D3D0&#160;<br/>
C6&#160;E1&#160;<br/>
DEC&#160;$E1&#160;<br/>
count.&#160;<br/>
D3D2&#160;<br/>
D0&#160;F5&#160;<br/>
BNE&#160;$D3C9&#160;<br/>
More&#160;to&#160;do.&#160;<br/>
D3D4&#160;<br/>
E6&#160;C8&#160;<br/>
INC&#160;$C8&#160;<br/>
Pointer&#160;back&#160;to&#160;start.&#160;<br/>
D3D6&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
D3D7&#160;<br/>
A5&#160;A0&#160;<br/>
LDA&#160;$A0&#160;<br/>
Get&#160;total&#160;array&#160;size,&#160;LSB.&#160;<br/>
D3D9&#160;<br/>
E5&#160;CE&#160;<br/>
SBC&#160;$CE&#160;<br/>
D3DB&#160;<br/>
A0&#160;02&#160;<br/>
LDY&#160;#$02&#160;<br/>
D3DD&#160;<br/>
91&#160;CE&#160;<br/>
STA&#160;($CE),Y&#160;<br/>
Save&#160;LSB&#160;of&#160;size&#160;in&#160;header.&#160;<br/>
D3DF&#160;<br/>
A5&#160;A1&#160;<br/>
LDA&#160;$A1&#160;<br/>
D3E1&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D3E2&#160;<br/>
E5&#160;CF&#160;<br/>
SBC&#160;$CF&#160;<br/>
Get&#160;total&#160;array&#160;size,&#160;MSB&#160;and&#160;<br/>
D3E4&#160;<br/>
91&#160;CE&#160;<br/>
STA&#160;($CE),Y&#160;<br/>
save&#160;it&#160;in&#160;array&#160;header.&#160;<br/>
D3E6&#160;<br/>
A5&#160;27&#160;<br/>
LDA&#160;$27&#160;<br/>
If&#160;DIM&#160;flag&#160;set&#160;then&#160;exit.&#160;<br/>
D3E8&#160;<br/>
D0&#160;62&#160;<br/>
BNE&#160;$D44C&#160;<br/>
D3EA&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D3EB&#160;<br/>
B1&#160;CE&#160;<br/>
LDA&#160;($CE),Y&#160;<br/>
<b>GET&#160;ARRAY&#160;ELEMENT.</b>&#160;Get&#160;<br/>
D3ED&#160;<br/>
85&#160;26&#160;<br/>
STA&#160;$26&#160;<br/>
number&#160;of&#160;dimensions&#160;into&#160;$26&#160;<br/>
D3EF&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
D3F1&#160;<br/>
85&#160;E0&#160;<br/>
STA&#160;$E0&#160;<br/>
Set&#160;LSB&#160;of&#160;cell&#160;number&#160;to&#160;0.&#160;<br/>
D3F3&#160;<br/>
85&#160;E1&#160;<br/>
STA&#160;$E1&#160;<br/>
Set&#160;MSB&#160;of&#160;cell&#160;number&#160;to&#160;0.&#160;<br/>
D3F5&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
Point&#160;at&#160;first&#160;dimension&#160;size.&#160;<br/>
D3F6&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
D3F7&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
Get&#160;LSB&#160;of&#160;required&#160;subscript.&#160;<br/>
D3F8&#160;<br/>
85&#160;D3&#160;<br/>
STA&#160;$D3&#160;<br/>
D3FA&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Get&#160;MSB&#160;of&#160;required&#160;subscript.&#160;<br/>
D3FB&#160;<br/>
85&#160;D4&#160;<br/>
STA&#160;$D4&#160;<br/>
D3FD&#160;<br/>
D1&#160;CE&#160;<br/>
CMP&#160;($CE),Y&#160;<br/>
If&#160;bigger&#160;than&#160;dimensioned&#160;<br/>
D3FF&#160;<br/>
90&#160;0E&#160;<br/>
BCC&#160;$D40F&#160;<br/>
then&#160;give&#160;&#34;BAD&#160;SUBSCRIPT&#160;<br/>
D401&#160;<br/>
D0&#160;06&#160;<br/>
BNE&#160;$D409&#160;<br/>
ERROR&#34;&#160;<br/>
D403&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D404&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
Pag&#160;&#160;e&#160;37&#160;<br/>
<hr/>
<a name=38></a>D405&#160;<br/>
D1&#160;CE&#160;<br/>
CMP&#160;($CE),Y&#160;<br/>
Check&#160;LSB&#160;of&#160;subscript.&#160;<br/>
D407&#160;<br/>
90&#160;07&#160;<br/>
BCC&#160;$D410&#160;<br/>
Continue&#160;if&#160;okay.&#160;<br/>
D409&#160;<br/>
4C&#160;33&#160;D3&#160;<br/>
JMP&#160;$D333&#160;<br/>
Print&#160;&#34;BAD&#160;SUBCRIPT&#160;ERROR&#34;.&#160;<br/>
D40C&#160;<br/>
4C&#160;7C&#160;C4&#160;<br/>
JMP&#160;$C47C&#160;<br/>
Print&#160;&#34;OUT&#160;OF&#160;MEMORY&#160;ERROR&#34;.&#160;<br/>
D40F&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
Point&#160;Y&#160;at&#160;LSB&#160;of&#160;subscript.&#160;<br/>
D410&#160;<br/>
A5&#160;E1&#160;<br/>
LDA&#160;$E1&#160;<br/>
If&#160;cell&#160;number&#160;so&#160;far&#160;is&#160;zero&#160;<br/>
D412&#160;<br/>
05&#160;E0&#160;<br/>
ORA&#160;$E0&#160;<br/>
then&#160;skip&#160;the&#160;multiply.&#160;<br/>
D414&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
D415&#160;<br/>
F0&#160;0A&#160;<br/>
BEQ&#160;$D421&#160;<br/>
D417&#160;<br/>
20&#160;4D&#160;D4&#160;<br/>
JSR&#160;$D44D&#160;<br/>
Multiply&#160;cell&#160;number&#160;by&#160;<br/>
D41A&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
dimension&#160;size.&#160;<br/>
D41B&#160;<br/>
65&#160;D3&#160;<br/>
ADC&#160;$D3&#160;<br/>
Add&#160;subscript&#160;into&#160;cell&#160;<br/>
D41D&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
number.&#160;<br/>
D41E&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
D41F&#160;<br/>
A4&#160;91&#160;<br/>
LDY&#160;$91&#160;<br/>
Get&#160;offset&#160;into&#160;header.&#160;<br/>
D421&#160;<br/>
65&#160;D4&#160;<br/>
ADC&#160;$D4&#160;<br/>
Add&#160;subscript&#160;to&#160;cell&#160;number&#160;<br/>
D423&#160;<br/>
86&#160;E0&#160;<br/>
STX&#160;$E0&#160;<br/>
LSB&#160;and&#160;set&#160;new&#160;cell&#160;number.&#160;<br/>
D425&#160;<br/>
C6&#160;26&#160;<br/>
DEC&#160;$26&#160;<br/>
Decrement&#160;and&#160;loop&#160;if&#160;more&#160;<br/>
D427&#160;<br/>
D0&#160;CA&#160;<br/>
BNE&#160;$D3F3&#160;<br/>
dimensions&#160;to&#160;do.&#160;<br/>
D429&#160;<br/>
85&#160;E1&#160;<br/>
STA&#160;$E1&#160;<br/>
Set&#160;final&#160;cell&#160;number&#160;MSB.&#160;<br/>
D42B&#160;<br/>
A2&#160;05&#160;<br/>
LDX&#160;#$05&#160;<br/>
Try&#160;element&#160;size&#160;of&#160;5.&#160;<br/>
D42D&#160;<br/>
A5&#160;B4&#160;<br/>
LDA&#160;$B4&#160;<br/>
D42F&#160;<br/>
10&#160;01&#160;<br/>
BPL&#160;$D432&#160;<br/>
If&#160;integer&#160;type&#160;then&#160;set&#160;size&#160;<br/>
D431&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
to&#160;4.&#160;<br/>
D432&#160;<br/>
A5&#160;B5&#160;<br/>
LDA&#160;$B5&#160;<br/>
D434&#160;<br/>
10&#160;02&#160;<br/>
BPL&#160;$D438&#160;<br/>
If&#160;string&#160;type&#160;then&#160;decrement&#160;<br/>
D436&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
size&#160;to&#160;3&#160;and&#160;also&#160;set&#160;integer&#160;<br/>
D437&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
size&#160;to&#160;2.&#160;<br/>
D438&#160;<br/>
86&#160;97&#160;<br/>
STX&#160;$97&#160;<br/>
D43A&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
Multiply&#160;final&#160;cell&#160;number&#160;by&#160;<br/>
D43C&#160;<br/>
20&#160;56&#160;D4&#160;<br/>
JSR&#160;$D456&#160;<br/>
element&#160;size.&#160;<br/>
D43F&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
D440&#160;<br/>
65&#160;C7&#160;<br/>
ADC&#160;$C7&#160;<br/>
Add&#160;start&#160;of&#160;cell's&#160;address&#160;to&#160;<br/>
D442&#160;<br/>
85&#160;B6&#160;<br/>
STA&#160;$B6&#160;<br/>
cell&#160;offset.&#160;<br/>
D444&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
D445&#160;<br/>
65&#160;C8&#160;<br/>
ADC&#160;$C8&#160;<br/>
D447&#160;<br/>
85&#160;B7&#160;<br/>
STA&#160;$B7&#160;<br/>
Set&#160;A&#160;and&#160;Y&#160;to&#160;point&#160;to&#160;the&#160;<br/>
D449&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
cell&#160;and&#160;then&#160;exit.&#160;<br/>
D44A&#160;<br/>
A5&#160;B6&#160;<br/>
LDA&#160;$B6&#160;<br/>
D44C&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>D44D&#160;<br/>
84&#160;91&#160;<br/>
STY&#160;$91&#160;<br/>
<b>MULTIPLY&#160;$E0/$E1&#160;BY&#160;DIMENSION</b>&#160;<br/>
D44F&#160;<br/>
B1&#160;CE&#160;<br/>
LDA&#160;($CE),Y&#160;<br/>
SIZE.&#160;Save&#160;offset&#160;into&#160;header.&#160;<br/>
D451&#160;<br/>
85&#160;97&#160;<br/>
STA&#160;$97&#160;<br/>
Transfer&#160;dimension&#160;size&#160;into&#160;<br/>
D453&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
$97&#160;and&#160;$98.&#160;<br/>
D454&#160;<br/>
B1&#160;CE&#160;<br/>
LDA&#160;($CE),Y&#160;<br/>
D456&#160;<br/>
85&#160;98&#160;<br/>
STA&#160;$98&#160;<br/>
D458&#160;<br/>
A9&#160;10&#160;<br/>
LDA&#160;#$10&#160;<br/>
Set&#160;loop&#160;counter&#160;to&#160;16&#160;bits.&#160;<br/>
D45A&#160;<br/>
85&#160;CC&#160;<br/>
STA&#160;$CC&#160;<br/>
D45C&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
Set&#160;result&#160;to&#160;0.&#160;<br/>
D45E&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
D460&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
D461&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
Shift&#160;result&#160;up&#160;1&#160;bit.&#160;<br/>
D462&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
D463&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
D464&#160;<br/>
2A&#160;<br/>
ROL&#160;A&#160;<br/>
D465&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
D466&#160;<br/>
B0&#160;A4&#160;<br/>
BCS&#160;$D40C&#160;<br/>
Error&#160;if&#160;overflow.&#160;<br/>
D468&#160;<br/>
06&#160;E0&#160;<br/>
ASL&#160;$E0&#160;<br/>
Shift&#160;current&#160;size&#160;up&#160;1&#160;bit.&#160;<br/>
D46A&#160;<br/>
26&#160;E1&#160;<br/>
ROL&#160;$E1&#160;<br/>
D46C&#160;<br/>
90&#160;0B&#160;<br/>
BCC&#160;$D479&#160;<br/>
If&#160;0&#160;shifted&#160;out,&#160;then&#160;skip&#160;<br/>
D46E&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
the&#160;addition.&#160;<br/>
D46F&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
D470&#160;<br/>
65&#160;97&#160;<br/>
ADC&#160;$97&#160;<br/>
Add&#160;dimension&#160;size&#160;to&#160;current&#160;<br/>
Pag&#160;&#160;e&#160;38&#160;<br/>
<hr/>
<a name=39></a>D472&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
size.&#160;<br/>
D473&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
D474&#160;<br/>
65&#160;98&#160;<br/>
ADC&#160;$98&#160;<br/>
D476&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
D477&#160;<br/>
B0&#160;93&#160;<br/>
BCS&#160;$D40C&#160;<br/>
Error&#160;if&#160;overflow.&#160;<br/>
D479&#160;<br/>
C6&#160;CC&#160;<br/>
DEC&#160;$CC&#160;<br/>
Decrement&#160;loop&#160;counter.&#160;<br/>
D47B&#160;<br/>
D0&#160;E3&#160;<br/>
BNE&#160;$D460&#160;<br/>
More&#160;loops&#160;to&#160;execute.&#160;<br/>
D47D&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>D47E&#160;<br/>
A5&#160;28&#160;<br/>
LDA&#160;$28&#160;<br/>
<b>FRE</b>&#160;<br/>
D480&#160;<br/>
F0&#160;03&#160;<br/>
BEQ&#160;$D485&#160;<br/>
If&#160;string&#160;then&#160;set&#160;up&#160;string&#160;<br/>
D482&#160;<br/>
20&#160;D0&#160;D7&#160;<br/>
JSR&#160;$D7D0&#160;<br/>
in&#160;main&#160;FPA.&#160;<br/>
D485&#160;<br/>
20&#160;50&#160;D6&#160;<br/>
JSR&#160;$D650&#160;<br/>
Attempt&#160;Garbage&#160;collection.&#160;<br/>
D488&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
Calculate&#160;LSB&#160;of&#160;Top&#160;of&#160;<br/>
D489&#160;<br/>
A5&#160;A2&#160;<br/>
LDA&#160;$A2&#160;<br/>
Strings&#160;-&#160;Bottom&#160;of&#160;Strings.&#160;<br/>
D48B&#160;<br/>
E5&#160;A0&#160;<br/>
SBC&#160;$A0&#160;<br/>
D48D&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
Transfer&#160;LSB&#160;to&#160;Y.&#160;<br/>
D48E&#160;<br/>
A5&#160;A3&#160;<br/>
LDA&#160;$A3&#160;<br/>
Calculate&#160;MSB.&#160;<br/>
D490&#160;<br/>
E5&#160;A1&#160;<br/>
SBC&#160;$A1&#160;<br/>
D492&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
D494&#160;<br/>
86&#160;28&#160;<br/>
STX&#160;$28&#160;<br/>
Clear&#160;string&#160;flag.&#160;<br/>
D496&#160;<br/>
4C&#160;40&#160;DF&#160;<br/>
JMP&#160;$DF40&#160;<br/>
Convert&#160;to&#160;main&#160;EPA&#160;and&#160;exit.&#160;<br/>
&#160;<br/>D499&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
Put&#160;signed&#160;integer&#160;from&#160;A&#160;<br/>
D49B&#160;<br/>
86&#160;28&#160;<br/>
STX&#160;$28&#160;<br/>
(MSB)&#160;and&#160;Y&#160;into&#160;main&#160;EPA.&#160;<br/>
D49D&#160;<br/>
85&#160;D1&#160;<br/>
STA&#160;$D1&#160;<br/>
Put&#160;A&#160;and&#160;Y&#160;into&#160;mantissa.&#160;<br/>
D49F&#160;<br/>
84&#160;D2&#160;<br/>
STY&#160;$D2&#160;<br/>
D4A1&#160;<br/>
A2&#160;90&#160;<br/>
LDX&#160;#$90&#160;<br/>
D4A3&#160;<br/>
4C&#160;2C&#160;DF&#160;<br/>
JMP&#160;$DF2C&#160;<br/>
Normalise&#160;and&#160;exit.&#160;<br/>
&#160;<br/>D4A6&#160;<br/>
20&#160;CB&#160;D8&#160;<br/>
JSR&#160;$D8CB&#160;<br/>
<b>POS</b>&#160;<br/>
D4A9&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
Get&#160;single&#160;byte&#160;expression&#160;in&#160;<br/>
D4AA&#160;<br/>
F0&#160;08&#160;<br/>
BEQ&#160;$D4B4&#160;<br/>
A&#160;and&#160;branch&#160;if&#160;zero.&#160;<br/>
D4AC&#160;<br/>
AC&#160;58&#160;02&#160;<br/>
LDY&#160;$0258&#160;<br/>
Get&#160;column&#160;number&#160;used&#160;for&#160;<br/>
D4AF&#160;<br/>
2C&#160;F1&#160;02&#160;<br/>
BIT&#160;$02F1&#160;<br/>
printer.&#160;<br/>
D4B2&#160;<br/>
10&#160;02&#160;<br/>
BPL&#160;$D4B6&#160;<br/>
Printer&#160;is&#160;off.&#160;<br/>
D4B4&#160;<br/>
A4&#160;30&#160;<br/>
LDY&#160;$30&#160;<br/>
Load&#160;screen&#160;cursor&#160;column.&#160;<br/>
D4B6&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
Branch&#160;to&#160;convert&#160;integer&#160;to&#160;<br/>
D4B8&#160;<br/>
F0&#160;DF&#160;<br/>
BEQ&#160;$D499&#160;<br/>
floating&#160;point&#160;number.&#160;<br/>
&#160;<br/>D4BA&#160;<br/>
C9&#160;D9&#160;<br/>
CMP&#160;#$D9&#160;<br/>
<b>DEF</b>&#160;<br/>
D4BC&#160;<br/>
D0&#160;21&#160;<br/>
BNE&#160;$D4DF&#160;<br/>
Token&#160;is&#160;not&#160;that&#160;of&#160;USR.&#160;<br/>
D4BE&#160;<br/>
20&#160;E2&#160;00&#160;<br/>
JSR&#160;$00E2&#160;<br/>
Get&#160;next&#160;character.&#160;<br/>
D4C1&#160;<br/>
A9&#160;D4&#160;<br/>
LDA&#160;#$D4&#160;<br/>
D4C3&#160;<br/>
20&#160;67&#160;D0&#160;<br/>
JSR&#160;$D067&#160;<br/>
Test&#160;for&#160;&#34;=&#34;&#160;token.&#160;<br/>
D4C6&#160;<br/>
20&#160;53&#160;E8&#160;<br/>
JSR&#160;$E853&#160;<br/>
Get&#160;+ve&#160;integer&#160;into&#160;$33/$34.&#160;<br/>
D4C9&#160;<br/>
A5&#160;33&#160;<br/>
LDA&#160;$33&#160;<br/>
Transfer&#160;jump&#160;address&#160;to&#160;jump&#160;<br/>
D4CB&#160;<br/>
A4&#160;34&#160;<br/>
LDY&#160;$34&#160;<br/>
location.&#160;<br/>
D4CD&#160;<br/>
85&#160;22&#160;<br/>
STA&#160;$22&#160;<br/>
D4CF&#160;<br/>
84&#160;23&#160;<br/>
STY&#160;$23&#160;<br/>
D4D1&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
Exit.&#160;<br/>
&#160;<br/>D4D2&#160;<br/>
A6&#160;A9&#160;<br/>
LDX&#160;$A9&#160;<br/>
<b>CHECK&#160;FOR&#160;ILLEGAL&#160;DIRECT&#160;ERROR</b>&#160;<br/>
D4D4&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
D4D5&#160;<br/>
D0&#160;FA&#160;<br/>
BNE&#160;$D4D1&#160;<br/>
Not&#160;in&#160;immediate&#160;mode.&#160;<br/>
D4D7&#160;<br/>
A2&#160;95&#160;<br/>
LDX&#160;#$95&#160;<br/>
Set&#160;X&#160;-&#160;&#34;ILLEGAL&#160;DIRECT&#160;ERROR&#34;&#160;<br/>
D4D9&#160;<br/>
2C&#160;A2&#160;E5&#160;<br/>
BIT&#160;$E5A2&#160;<br/>
Set&#160;X&#160;-&#160;&#34;UNDEF'D&#160;FUNCTION&#160;E..&#34;&#160;<br/>
D4DC&#160;<br/>
4C&#160;7E&#160;C4&#160;<br/>
JMP&#160;$C47E&#160;<br/>
Print&#160;error&#160;message.&#160;<br/>
D4DF&#160;<br/>
20&#160;0D&#160;D5&#160;<br/>
JSR&#160;$D50D&#160;<br/>
Check&#160;FN&#160;and&#160;get&#160;name.&#160;<br/>
D4E2&#160;<br/>
20&#160;D2&#160;D4&#160;<br/>
JSR&#160;$D4D2&#160;<br/>
Check&#160;illegal&#160;direct&#160;error.&#160;<br/>
D4E5&#160;<br/>
20&#160;62&#160;D0&#160;<br/>
JSR&#160;$D062&#160;<br/>
Check&#160;for&#160;&#34;(&#34;.&#160;<br/>
D4E8&#160;<br/>
A9&#160;80&#160;<br/>
LDA&#160;#$80&#160;<br/>
Set&#160;no&#160;integer&#160;flag.&#160;<br/>
D4EA&#160;<br/>
85&#160;2B&#160;<br/>
STA&#160;$2B&#160;<br/>
D4EC&#160;<br/>
20&#160;88&#160;D1&#160;<br/>
JSR&#160;$D188&#160;<br/>
Get&#160;variable.&#160;<br/>
Pag&#160;&#160;e&#160;39&#160;<br/>
<hr/>
<a name=40></a>D4EF&#160;<br/>
20&#160;06&#160;CF&#160;<br/>
JSR&#160;$CF06&#160;<br/>
Check&#160;that&#160;it&#160;is&#160;numeric.&#160;<br/>
D4F2&#160;<br/>
20&#160;5F&#160;D0&#160;<br/>
JSR&#160;$D05F&#160;<br/>
Check&#160;for&#160;&#34;)&#34;.&#160;<br/>
D4F5&#160;<br/>
A9&#160;D4&#160;<br/>
LDA&#160;#$D4&#160;<br/>
D4F7&#160;<br/>
20&#160;67&#160;D0&#160;<br/>
JSR&#160;$D067&#160;<br/>
Check&#160;for&#160;&#34;=&#34;&#160;token.&#160;<br/>
D4FA&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
D4FB&#160;<br/>
A5&#160;B7&#160;<br/>
LDA&#160;$B7&#160;<br/>
Save&#160;variable&#160;address.&#160;<br/>
D4FD&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
D4FE&#160;<br/>
A5&#160;B6&#160;<br/>
LDA&#160;$B6&#160;<br/>
D500&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
D501&#160;<br/>
A5&#160;EA&#160;<br/>
LDA&#160;$EA&#160;<br/>
D503&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
Save&#160;text&#160;pointer.&#160;<br/>
D504&#160;<br/>
A5&#160;E9&#160;<br/>
LDA&#160;$E9&#160;<br/>
D506&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
D507&#160;<br/>
20&#160;3C&#160;CA&#160;<br/>
JSR&#160;$CA3C&#160;<br/>
Skip&#160;rest&#160;of&#160;statement.&#160;<br/>
D50A&#160;<br/>
4C&#160;7D&#160;D5&#160;<br/>
JMP&#160;$D57D&#160;<br/>
Set&#160;up&#160;FN&#160;description&#160;&amp;&#160;exit.&#160;<br/>
D50D&#160;<br/>
A9&#160;C4&#160;<br/>
LDA&#160;#$C4&#160;<br/>
Check&#160;for&#160;&#34;FN&#34;&#160;token.&#160;<br/>
D50F&#160;<br/>
20&#160;67&#160;D0&#160;<br/>
JSR&#160;$D067&#160;<br/>
D512&#160;<br/>
09&#160;80&#160;<br/>
ORA&#160;#$80&#160;<br/>
set&#160;top&#160;bit&#160;of&#160;first&#160;char.&#160;<br/>
D514&#160;<br/>
A2&#160;80&#160;<br/>
LDX&#160;#$80&#160;<br/>
D516&#160;<br/>
86&#160;2B&#160;<br/>
STX&#160;$2B&#160;<br/>
Set&#160;no&#160;integer&#160;flag.&#160;<br/>
D518&#160;<br/>
20&#160;8F&#160;D1&#160;<br/>
JSR&#160;$D18F&#160;<br/>
Get&#160;variable.&#160;<br/>
D51B&#160;<br/>
85&#160;BD&#160;<br/>
STA&#160;$BD&#160;<br/>
Save&#160;pointer&#160;to&#160;variable.&#160;<br/>
D51D&#160;<br/>
84&#160;BE&#160;<br/>
STY&#160;$BE&#160;<br/>
D51F&#160;<br/>
4C&#160;06&#160;CF&#160;<br/>
JMP&#160;$CF06&#160;<br/>
Check&#160;numeric&#160;type&#160;and&#160;exit.&#160;<br/>
D522&#160;<br/>
20&#160;0D&#160;D5&#160;<br/>
JSR&#160;$D50D&#160;<br/>
FN&#160;Check&#160;FN&#160;and&#160;get&#160;name.&#160;<br/>
D525&#160;<br/>
A5&#160;BE&#160;<br/>
LDA&#160;$BE&#160;<br/>
Save&#160;pointer&#160;to&#160;FN&#160;descriptor.&#160;<br/>
D527&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
D528&#160;<br/>
A5&#160;BD&#160;<br/>
LDA&#160;$BD&#160;<br/>
D52A&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
D52B&#160;<br/>
20&#160;59&#160;D0&#160;<br/>
JSR&#160;$D059&#160;<br/>
Get&#160;expression&#160;in&#160;brackets.&#160;<br/>
D52E&#160;<br/>
20&#160;06&#160;CF&#160;<br/>
JSR&#160;$CF06&#160;<br/>
Check&#160;numeric&#160;type.&#160;<br/>
D531&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Restore&#160;pointer&#160;to&#160;FN&#160;<br/>
D532&#160;<br/>
85&#160;BD&#160;<br/>
STA&#160;$BD&#160;<br/>
descriptor.&#160;<br/>
D534&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
D535&#160;<br/>
85&#160;BE&#160;<br/>
STA&#160;$BE&#160;<br/>
D537&#160;<br/>
A0&#160;02&#160;<br/>
LDY&#160;#$02&#160;<br/>
D539&#160;<br/>
B1&#160;BD&#160;<br/>
LDA&#160;($BD),Y&#160;<br/>
Get&#160;parameter&#160;location&#160;LSB.&#160;<br/>
D53B&#160;<br/>
85&#160;B6&#160;<br/>
STA&#160;$B6&#160;<br/>
Save&#160;it.&#160;<br/>
D53D&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
D53E&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D53F&#160;<br/>
B1&#160;BD&#160;<br/>
LDA&#160;($BD),Y&#160;<br/>
Get&#160;parameter&#160;location&#160;MSB.&#160;<br/>
D541&#160;<br/>
F0&#160;97&#160;<br/>
BEQ&#160;$D4DA&#160;<br/>
Error&#160;if&#160;zero.&#160;<br/>
D543&#160;<br/>
85&#160;B7&#160;<br/>
STA&#160;$B7&#160;<br/>
Save&#160;result.&#160;<br/>
D545&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D546&#160;<br/>
B1&#160;B6&#160;<br/>
LDA&#160;($B6),Y&#160;<br/>
Save&#160;parameter&#160;value&#160;on&#160;stack.&#160;<br/>
D548&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
D549&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
D54A&#160;<br/>
10&#160;FA&#160;<br/>
BPL&#160;$D546&#160;<br/>
D54C&#160;<br/>
A4&#160;B7&#160;<br/>
LDY&#160;$B7&#160;<br/>
Pack&#160;FPA&#160;into&#160;parameter.&#160;<br/>
D54E&#160;<br/>
20&#160;AD&#160;DE&#160;<br/>
JSR&#160;$DEAD&#160;<br/>
D551&#160;<br/>
A5&#160;EA&#160;<br/>
LDA&#160;$EA&#160;<br/>
D553&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
Save&#160;text&#160;position.&#160;<br/>
D554&#160;<br/>
A5&#160;E9&#160;<br/>
LDA&#160;$E9&#160;<br/>
D556&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
D557&#160;<br/>
B1&#160;BD&#160;<br/>
LDA&#160;($BD),Y&#160;<br/>
Set&#160;text&#160;pointer&#160;to&#160;start&#160;of&#160;<br/>
D559&#160;<br/>
85&#160;E9&#160;<br/>
STA&#160;$E9&#160;<br/>
FN&#160;definition.&#160;<br/>
D55B&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D55C&#160;<br/>
B1&#160;BD&#160;<br/>
LDA&#160;($BD),Y&#160;<br/>
D55E&#160;<br/>
85&#160;EA&#160;<br/>
STA&#160;$EA&#160;<br/>
D560&#160;<br/>
A5&#160;B7&#160;<br/>
LDA&#160;$B7&#160;<br/>
Save&#160;parameter&#160;location.&#160;<br/>
D562&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
D563&#160;<br/>
A5&#160;B6&#160;<br/>
LDA&#160;$B6&#160;<br/>
D565&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
D566&#160;<br/>
20&#160;03&#160;CF&#160;<br/>
JSR&#160;$CF03&#160;<br/>
Get&#160;numeric&#160;expression.&#160;<br/>
Pag&#160;&#160;e&#160;40&#160;<br/>
<hr/>
<a name=41></a>D569&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Restore&#160;parameter&#160;location.&#160;<br/>
D56A&#160;<br/>
85&#160;BD&#160;<br/>
STA&#160;$BD&#160;<br/>
D56C&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
D56D&#160;<br/>
85&#160;BE&#160;<br/>
STA&#160;$BE&#160;<br/>
D56F&#160;<br/>
20&#160;E8&#160;00&#160;<br/>
JSR&#160;$00E8&#160;<br/>
Next&#160;character.&#160;<br/>
D572&#160;<br/>
F0&#160;03&#160;<br/>
BEQ&#160;$D577&#160;<br/>
End&#160;of&#160;line.&#160;<br/>
D574&#160;<br/>
4C&#160;70&#160;D0&#160;<br/>
JMP&#160;$D070&#160;<br/>
Print&#160;&#34;SYNTAX&#160;ERROR&#34;.&#160;<br/>
D577&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Restore&#160;text&#160;position.&#160;<br/>
D578&#160;<br/>
85&#160;E9&#160;<br/>
STA&#160;$E9&#160;<br/>
D57A&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
D57B&#160;<br/>
85&#160;EA&#160;<br/>
STA&#160;$EA&#160;<br/>
D57D&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
D57F&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
This&#160;section&#160;is&#160;used&#160;for&#160;two&#160;<br/>
D580&#160;<br/>
91&#160;BD&#160;<br/>
STA&#160;($BD),Y&#160;<br/>
purposes.&#160;One&#160;is&#160;to&#160;restore&#160;<br/>
D582&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
the&#160;FN&#160;descriptor&#160;block&#160;and&#160;<br/>
D583&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
the&#160;other&#160;is&#160;to&#160;restore&#160;a&#160;<br/>
D584&#160;<br/>
91&#160;BD&#160;<br/>
STA&#160;($BD),Y&#160;<br/>
variable&#160;value&#160;into&#160;the&#160;work&#160;<br/>
D586&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
floating&#160;point&#160;accumulator.&#160;<br/>
D587&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D588&#160;<br/>
91&#160;BD&#160;<br/>
STA&#160;($BD),Y&#160;<br/>
D58A&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
D58B&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D58C&#160;<br/>
91&#160;BD&#160;<br/>
STA&#160;($BD),Y&#160;<br/>
D58E&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
D58F&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D590&#160;<br/>
91&#160;BD&#160;<br/>
STA&#160;($BD),Y&#160;<br/>
D592&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>D593&#160;<br/>
20&#160;06&#160;CF&#160;<br/>
JSR&#160;$CF06&#160;<br/>
<b>STR$</b>&#160;Check&#160;numeric&#160;type.&#160;<br/>
D596&#160;<br/>
A0&#160;OO&#160;<br/>
LDY&#160;#$00&#160;<br/>
D598&#160;<br/>
20&#160;D7&#160;E0&#160;<br/>
JSR&#160;$E0D7&#160;<br/>
Convert&#160;to&#160;string.&#160;<br/>
D59B&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
D59C&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Restore&#160;return&#160;address.&#160;<br/>
D59D&#160;<br/>
A9&#160;FF&#160;<br/>
LDA&#160;#$FF&#160;<br/>
D59F&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
Set&#160;up&#160;string&#160;and&#160;then&#160;exit.&#160;<br/>
D5A1&#160;<br/>
F0&#160;12&#160;<br/>
BEQ&#160;$D5B5&#160;<br/>
D5A3&#160;<br/>
A6&#160;D3&#160;<br/>
LDX&#160;$D3&#160;<br/>
<b>SET&#160;UP&#160;MEM&#160;STRING&#160;SLOT&#160;&amp;&#160;BLOCK</b>&#160;<br/>
D5A5&#160;<br/>
A4&#160;D4&#160;<br/>
LDY&#160;$D4&#160;<br/>
Copy&#160;pointer&#160;to&#160;string.&#160;<br/>
D5A7&#160;<br/>
86&#160;BF&#160;<br/>
STX&#160;$BF&#160;<br/>
D5A9&#160;<br/>
84&#160;C0&#160;<br/>
STY&#160;$C0&#160;<br/>
D5AB&#160;<br/>
20&#160;1E&#160;D6&#160;<br/>
JSR&#160;$D61E&#160;<br/>
Get&#160;slot&#160;in&#160;memory&#160;or&#160;string.&#160;<br/>
D5AE&#160;<br/>
86&#160;D1&#160;<br/>
STX&#160;$D1&#160;<br/>
Store&#160;data&#160;in&#160;block,&#160;LSB&#160;and&#160;<br/>
D5B0&#160;<br/>
84&#160;D2&#160;<br/>
STY&#160;$D2&#160;<br/>
MSB&#160;of&#160;pointer&#160;to&#160;string&#160;and&#160;<br/>
D5B2&#160;<br/>
85&#160;D0&#160;<br/>
STA&#160;$D0&#160;<br/>
then&#160;its&#160;length.&#160;<br/>
D5B4&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>D5B5&#160;<br/>
A2&#160;22&#160;<br/>
LDX&#160;#$22&#160;<br/>
<b>GET&#160;STRING&#160;AFTER&#160;&#34;.</b>&#160;<br/>
D5B7&#160;<br/>
86&#160;24&#160;<br/>
STX&#160;$24&#160;<br/>
Set&#160;$24&#160;and&#160;$25&#160;to&#160;ASCII&#160;value&#160;<br/>
D5B9&#160;<br/>
86&#160;25&#160;<br/>
STX&#160;$25&#160;<br/>
of&#160;double&#160;quote.&#160;<br/>
D5BB&#160;<br/>
85&#160;DE&#160;<br/>
STA&#160;$DE&#160;<br/>
Set&#160;up&#160;pointer&#160;to&#160;start&#160;of&#160;<br/>
D5BD&#160;<br/>
84&#160;DF&#160;<br/>
STY&#160;$DF&#160;<br/>
string.&#160;<br/>
D5BF&#160;<br/>
85&#160;D1&#160;<br/>
STA&#160;$D1&#160;<br/>
Set&#160;up&#160;pointer&#160;to&#160;start&#160;of&#160;<br/>
D5C1&#160;<br/>
84&#160;D2&#160;<br/>
STY&#160;$D2&#160;<br/>
string.&#160;<br/>
D5C3&#160;<br/>
A0&#160;FF&#160;<br/>
LDY&#160;#$FF&#160;<br/>
Set&#160;initial&#160;loop&#160;value.&#160;<br/>
D5C5&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D5C6&#160;<br/>
B1&#160;DE&#160;<br/>
LDA&#160;($DE),Y&#160;<br/>
Loop&#160;until&#160;null&#160;found.&#160;<br/>
D5C8&#160;<br/>
F0&#160;0C&#160;<br/>
BEQ&#160;$D5D6&#160;<br/>
D5CA&#160;<br/>
C5&#160;24&#160;<br/>
CMP&#160;$24&#160;<br/>
Or&#160;there&#160;is&#160;a&#160;match&#160;with&#160;<br/>
D5CC&#160;<br/>
F0&#160;04&#160;<br/>
BEQ&#160;$D5D2&#160;<br/>
content&#160;of&#160;$24.&#160;<br/>
D5CE&#160;<br/>
C5&#160;25&#160;<br/>
CMP&#160;$25&#160;<br/>
D5D0&#160;<br/>
D0&#160;F3&#160;<br/>
BNE&#160;$D5C5&#160;<br/>
D5D2&#160;<br/>
C9&#160;22&#160;<br/>
CMP&#160;#$22&#160;<br/>
Set&#160;C&#160;if&#160;terminated&#160;by&#160;a&#160;&#34;.&#160;<br/>
D5D4&#160;<br/>
F0&#160;01&#160;<br/>
BEQ&#160;$D5D7&#160;<br/>
D5D6&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
Pag&#160;&#160;e&#160;41&#160;<br/>
<hr/>
<a name=42></a>D5D7&#160;<br/>
84&#160;D0&#160;<br/>
STY&#160;$D0&#160;<br/>
Save&#160;string&#160;length.&#160;<br/>
D5D9&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
D5DA&#160;<br/>
65&#160;DE&#160;<br/>
ADC&#160;$DE&#160;<br/>
Calculate&#160;end&#160;address&#160;of&#160;<br/>
D5DC&#160;<br/>
85&#160;E0&#160;<br/>
STA&#160;$E0&#160;<br/>
string&#160;in&#160;$E0/$E1.&#160;<br/>
D5DE&#160;<br/>
A6&#160;DF&#160;<br/>
LDX&#160;$DF&#160;<br/>
D5E0&#160;<br/>
90&#160;01&#160;<br/>
BCC&#160;$D5E3&#160;<br/>
D5E2&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
D5E3&#160;<br/>
86&#160;E1&#160;<br/>
STX&#160;$E1&#160;<br/>
D5E5&#160;<br/>
A5&#160;DF&#160;<br/>
LDA&#160;$DF&#160;<br/>
If&#160;string&#160;is&#160;not&#160;in&#160;page&#160;0&#160;<br/>
D5E7&#160;<br/>
D0&#160;0B&#160;<br/>
BNE&#160;$D5F4&#160;<br/>
then&#160;push&#160;block&#160;on&#160;stack.&#160;<br/>
D5E9&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
D5EA&#160;<br/>
20&#160;A3&#160;D5&#160;<br/>
JSR&#160;$D5A3&#160;<br/>
Set&#160;up&#160;new&#160;slot&#160;and&#160;block.&#160;<br/>
D5ED&#160;<br/>
A6&#160;DE&#160;<br/>
LDX&#160;$DE&#160;<br/>
Get&#160;start&#160;of&#160;string.&#160;<br/>
D5EF&#160;<br/>
A4&#160;DF&#160;<br/>
LDY&#160;$DF&#160;<br/>
D5F1&#160;<br/>
20&#160;B2&#160;D7&#160;<br/>
JSR&#160;$D7B2&#160;<br/>
Transfer&#160;string&#160;to&#160;new&#160;slot.&#160;<br/>
D5F4&#160;<br/>
A6&#160;85&#160;<br/>
LDX&#160;$85&#160;<br/>
Routine&#160;to&#160;push&#160;string&#160;block&#160;<br/>
D5F6&#160;<br/>
E0&#160;91&#160;<br/>
CPX&#160;#$91&#160;<br/>
on&#160;string&#160;stack.&#160;<br/>
D5F8&#160;<br/>
D0&#160;05&#160;<br/>
BNE&#160;$D5FF&#160;<br/>
D5FA&#160;<br/>
A2&#160;C4&#160;<br/>
LDX&#160;#$C4&#160;<br/>
If&#160;stack&#160;full&#160;then&#160;print&#160;<br/>
D5FC&#160;<br/>
4C&#160;7E&#160;C4&#160;<br/>
JMP&#160;$C47E&#160;<br/>
&#34;FORMULA&#160;TOO&#160;COMPLEX&#34;.&#160;<br/>
D5FF&#160;<br/>
A5&#160;D0&#160;<br/>
LDA&#160;$D0&#160;<br/>
Transfer&#160;string&#160;block&#160;on&#160;to&#160;<br/>
D601&#160;<br/>
95&#160;00&#160;<br/>
STA&#160;$00,X&#160;<br/>
string&#160;stack&#160;(between&#160;$88&#160;and&#160;<br/>
D603&#160;<br/>
A5&#160;D1&#160;<br/>
LDA&#160;$D1&#160;<br/>
$90&#160;inclusive).&#160;<br/>
D605&#160;<br/>
95&#160;01&#160;<br/>
STA&#160;$01,X&#160;<br/>
D607&#160;<br/>
A5&#160;D2&#160;<br/>
LDA&#160;$D2&#160;<br/>
D609&#160;<br/>
95&#160;02&#160;<br/>
STA&#160;$02,X&#160;<br/>
D60B&#160;<br/>
A0&#160;OO&#160;<br/>
LDY&#160;#$00&#160;<br/>
D60D&#160;<br/>
86&#160;D3&#160;<br/>
STX&#160;$D3&#160;<br/>
Set&#160;$D3/$D4&#160;to&#160;point&#160;to&#160;it.&#160;<br/>
D60F&#160;<br/>
84&#160;D4&#160;<br/>
STY&#160;$D4&#160;<br/>
D611&#160;<br/>
84&#160;DF&#160;<br/>
STY&#160;$DF&#160;<br/>
Clear&#160;rounding&#160;byte.&#160;<br/>
D613&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
D614&#160;<br/>
84&#160;28&#160;<br/>
STY&#160;$28&#160;<br/>
Set&#160;string&#160;type&#160;flag.&#160;<br/>
D616&#160;<br/>
86&#160;86&#160;<br/>
STX&#160;$86&#160;<br/>
Set&#160;address&#160;of&#160;string&#160;block.&#160;<br/>
D618&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
Set&#160;string&#160;stack&#160;pointer&#160;to&#160;<br/>
D619&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
next&#160;available&#160;space.&#160;<br/>
D61A&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
D61B&#160;<br/>
86&#160;85&#160;<br/>
STX&#160;$85&#160;<br/>
Save&#160;string&#160;stack&#160;pointer.&#160;<br/>
D61D&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>D61E&#160;<br/>
46&#160;2A&#160;<br/>
LSR&#160;$2A&#160;<br/>
Routine&#160;to&#160;get&#160;slot&#160;for&#160;string&#160;<br/>
D620&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
D621&#160;<br/>
49&#160;FF&#160;<br/>
EOR&#160;#$FF&#160;<br/>
D623&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
Set&#160;A,&#160;Y&#160;to&#160;bottom&#160;of&#160;string&#160;<br/>
D624&#160;<br/>
65&#160;A2&#160;<br/>
ADC&#160;$A2&#160;<br/>
area&#160;-&#160;length&#160;of&#160;string.&#160;<br/>
D626&#160;<br/>
A4&#160;A3&#160;<br/>
LDY&#160;$A3&#160;<br/>
D628&#160;<br/>
B0&#160;01&#160;<br/>
BCS&#160;$D62B&#160;<br/>
D62A&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
D62B&#160;<br/>
C4&#160;A1&#160;<br/>
CPY&#160;$A1&#160;<br/>
D62D&#160;<br/>
90&#160;11&#160;<br/>
BCC&#160;$D640&#160;<br/>
Attempt&#160;garbage&#160;collection&#160;if&#160;<br/>
D62F&#160;<br/>
D0&#160;04&#160;<br/>
BNE&#160;$D635&#160;<br/>
start&#160;of&#160;string&#160;would&#160;be&#160;below&#160;<br/>
D631&#160;<br/>
C5&#160;A0&#160;<br/>
CMP&#160;$A0&#160;<br/>
end&#160;of&#160;Arrays.&#160;<br/>
D633&#160;<br/>
90&#160;0B&#160;<br/>
BCC&#160;$D640&#160;<br/>
D635&#160;<br/>
85&#160;A2&#160;<br/>
STA&#160;$A2&#160;<br/>
Set&#160;new&#160;bottom&#160;of&#160;strings&#160;<br/>
D637&#160;<br/>
84&#160;A3&#160;<br/>
STY&#160;$A3&#160;<br/>
pointer.&#160;<br/>
D639&#160;<br/>
85&#160;A4&#160;<br/>
STA&#160;$A4&#160;<br/>
Set&#160;address&#160;for&#160;string&#160;to&#160;be&#160;<br/>
D63B&#160;<br/>
84&#160;A5&#160;<br/>
STY&#160;$A5&#160;<br/>
inserted.&#160;<br/>
D63D&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
Save&#160;LSB&#160;of&#160;address&#160;in&#160;X.&#160;<br/>
D63E&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Restore&#160;string&#160;length.&#160;<br/>
D63F&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>D640&#160;<br/>
A2&#160;4D&#160;<br/>
LDX&#160;#$4D&#160;<br/>
Prepare&#160;error&#160;message&#160;pointer.&#160;<br/>
D642&#160;<br/>
A5&#160;2A&#160;<br/>
LDA&#160;$2A&#160;<br/>
Print&#160;&#34;OUT&#160;OF&#160;MEMORY&#160;ERROR&#34;&#160;if&#160;<br/>
D644&#160;<br/>
30&#160;B6&#160;<br/>
BMI&#160;$D5FC&#160;<br/>
garbage&#160;collection&#160;already&#160;tried.&#160;<br/>
D646&#160;<br/>
20&#160;50&#160;D6&#160;<br/>
JSR&#160;$D650&#160;<br/>
Garbage&#160;collection.&#160;<br/>
Pag&#160;&#160;e&#160;42&#160;<br/>
<hr/>
<a name=43></a>D649&#160;<br/>
A9&#160;80&#160;<br/>
LDA&#160;#$80&#160;<br/>
Set&#160;flag&#160;to&#160;indicate&#160;garbage&#160;<br/>
D64B&#160;<br/>
85&#160;2A&#160;<br/>
STA&#160;$2A&#160;<br/>
collection&#160;has&#160;been&#160;done.&#160;<br/>
D64D&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
D64E&#160;<br/>
D0&#160;D0&#160;<br/>
BNE&#160;$D620&#160;<br/>
Try&#160;again.&#160;<br/>
&#160;<br/>D650&#160;<br/>
A6&#160;A6&#160;<br/>
LDX&#160;$A6&#160;<br/>
<b>GARBAGE&#160;COLLECTION.</b>&#160;<br/>
D652&#160;<br/>
A5&#160;A7&#160;<br/>
LDA&#160;$A7&#160;<br/>
Update&#160;last&#160;string&#160;allocated,&#160;<br/>
D654&#160;<br/>
86&#160;A2&#160;<br/>
STX&#160;$A2&#160;<br/>
initially&#160;set&#160;to&#160;HIMEM.&#160;<br/>
D656&#160;<br/>
85&#160;A3&#160;<br/>
STA&#160;$A3&#160;<br/>
D658&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
Clear&#160;pointer.&#160;<br/>
D65A&#160;<br/>
84&#160;BE&#160;<br/>
STY&#160;$BE&#160;<br/>
D65C&#160;<br/>
84&#160;BD&#160;<br/>
STY&#160;$BD&#160;<br/>
D65E&#160;<br/>
A5&#160;A0&#160;<br/>
LDA&#160;$A0&#160;<br/>
Copy&#160;end&#160;of&#160;Arrays&#160;pointer.&#160;<br/>
D660&#160;<br/>
A6&#160;A1&#160;<br/>
LDX&#160;$A1&#160;<br/>
D662&#160;<br/>
85&#160;CE&#160;<br/>
STA&#160;$CE&#160;<br/>
D664&#160;<br/>
86&#160;CF&#160;<br/>
STX&#160;$CF&#160;<br/>
D666&#160;<br/>
A9&#160;88&#160;<br/>
LDA&#160;#$88&#160;<br/>
D668&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
D66A&#160;<br/>
85&#160;91&#160;<br/>
STA&#160;$91&#160;<br/>
Pointer&#160;set&#160;to&#160;string&#160;stack&#160;<br/>
D66C&#160;<br/>
86&#160;92&#160;<br/>
STX&#160;$92&#160;<br/>
base.&#160;<br/>
D66E&#160;<br/>
C5&#160;85&#160;<br/>
CMP&#160;$85&#160;<br/>
Set&#160;$91,$92&#160;to&#160;point&#160;to&#160;non&#160;-&#160;<br/>
D670&#160;<br/>
F0&#160;05&#160;<br/>
BEQ&#160;$D677&#160;<br/>
collected&#160;string&#160;at&#160;top&#160;of&#160;<br/>
D672&#160;<br/>
20&#160;F1&#160;D6&#160;<br/>
JSR&#160;$D6F1&#160;<br/>
stack.&#160;<br/>
D675&#160;<br/>
F0&#160;F7&#160;<br/>
BEQ&#160;$D66E&#160;<br/>
Branch&#160;always.&#160;<br/>
D677&#160;<br/>
A9&#160;07&#160;<br/>
LDA&#160;#$07&#160;<br/>
Set&#160;string&#160;variable&#160;size.&#160;<br/>
D679&#160;<br/>
85&#160;C2&#160;<br/>
STA&#160;$C2&#160;<br/>
D67B&#160;<br/>
A5&#160;9C&#160;<br/>
LDA&#160;$9C&#160;<br/>
Copy&#160;End&#160;Basic&#160;and&#160;set&#160;current&#160;<br/>
D67D&#160;<br/>
A6&#160;9D&#160;<br/>
LDX&#160;$9D&#160;<br/>
variable&#160;position&#160;in&#160;A,X.&#160;<br/>
D67F&#160;<br/>
85&#160;91&#160;<br/>
STA&#160;$91&#160;<br/>
D681&#160;<br/>
86&#160;92&#160;<br/>
STX&#160;$92&#160;<br/>
D683&#160;<br/>
E4&#160;9F&#160;<br/>
CPX&#160;$9F&#160;<br/>
Compare&#160;end&#160;variable&#160;with&#160;<br/>
D685&#160;<br/>
D0&#160;04&#160;<br/>
BNE&#160;$D68B&#160;<br/>
current&#160;variable&#160;position.&#160;<br/>
D687&#160;<br/>
C5&#160;9E&#160;<br/>
CMP&#160;$9E&#160;<br/>
D689&#160;<br/>
F0&#160;05&#160;<br/>
BEQ&#160;$D690&#160;<br/>
Pointers&#160;are&#160;equal.&#160;<br/>
D68B&#160;<br/>
20&#160;E7&#160;D6&#160;<br/>
JSR&#160;$D6E7&#160;<br/>
Set&#160;string&#160;pointer&#160;to&#160;next&#160;non&#160;<br/>
D68E&#160;<br/>
F0&#160;F3&#160;<br/>
BEQ&#160;$D683&#160;<br/>
collected&#160;variable&#160;<br/>
D690&#160;<br/>
85&#160;C7&#160;<br/>
STA&#160;$C7&#160;<br/>
Set&#160;current&#160;variable&#160;position.&#160;<br/>
D692&#160;<br/>
86&#160;C8&#160;<br/>
STX&#160;$C8&#160;<br/>
D694&#160;<br/>
A9&#160;03&#160;<br/>
LDA&#160;#$03&#160;<br/>
Set&#160;element&#160;size&#160;for&#160;string&#160;<br/>
D696&#160;<br/>
85&#160;C2&#160;<br/>
STA&#160;$C2&#160;<br/>
arrays.&#160;<br/>
D698&#160;<br/>
A5&#160;C7&#160;<br/>
LDA&#160;$C7&#160;<br/>
Compare&#160;end&#160;of&#160;Arrays&#160;with&#160;<br/>
D69A&#160;<br/>
A6&#160;C8&#160;<br/>
LDX&#160;$C8&#160;<br/>
current&#160;pointer.&#160;<br/>
D69C&#160;<br/>
E4&#160;A1&#160;<br/>
CPX&#160;$A1&#160;<br/>
D69E&#160;<br/>
D0&#160;07&#160;<br/>
BNE&#160;$D6A7&#160;<br/>
D6A0&#160;<br/>
C5&#160;A0&#160;<br/>
CMP&#160;$A0&#160;<br/>
D6A2&#160;<br/>
D0&#160;03&#160;<br/>
BNE&#160;$D6A7&#160;<br/>
D6A4&#160;<br/>
4C&#160;30&#160;D7&#160;<br/>
JMP&#160;$D730&#160;<br/>
&#160;<br/>D6A7&#160;<br/>
85&#160;91&#160;<br/>
STA&#160;$91&#160;<br/>
Save&#160;pointer&#160;and&#160;find&#160;next&#160;<br/>
D6A9&#160;<br/>
86&#160;92&#160;<br/>
STX&#160;$92&#160;<br/>
array.&#160;<br/>
D6AB&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
D6AD&#160;<br/>
B1&#160;91&#160;<br/>
LDA&#160;($91),Y&#160;<br/>
Skip&#160;through&#160;array&#160;header&#160;<br/>
D6AF&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
saving&#160;array&#160;type&#160;on&#160;the&#160;way.&#160;<br/>
D6B0&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D6B1&#160;<br/>
B1&#160;91&#160;<br/>
LDA&#160;($91),Y&#160;<br/>
D6B3&#160;<br/>
08&#160;<br/>
PHP&#160;<br/>
D6B4&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D6B5&#160;<br/>
B1&#160;91&#160;<br/>
LDA&#160;($91),Y&#160;<br/>
Add&#160;LSB&#160;of&#160;offset&#160;in&#160;array&#160;<br/>
D6B7&#160;<br/>
65&#160;C7&#160;<br/>
ADC&#160;$C7&#160;<br/>
header&#160;to&#160;point&#160;to&#160;next&#160;one.&#160;<br/>
D6B9&#160;<br/>
85&#160;C7&#160;<br/>
STA&#160;$C7&#160;<br/>
D6BB&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D6BC&#160;<br/>
B1&#160;91&#160;<br/>
LDA&#160;($91),Y&#160;<br/>
Add&#160;MSB&#160;of&#160;offset&#160;in&#160;array&#160;<br/>
D6BE&#160;<br/>
65&#160;C8&#160;<br/>
ADC&#160;$C8&#160;<br/>
header&#160;to&#160;point&#160;to&#160;next&#160;one.&#160;<br/>
D6C0&#160;<br/>
85&#160;C8&#160;<br/>
STA&#160;$C8&#160;<br/>
Pag&#160;&#160;e&#160;43&#160;<br/>
<hr/>
<a name=44></a>D6C2&#160;<br/>
28&#160;<br/>
PLP&#160;<br/>
D6C3&#160;<br/>
10&#160;D3&#160;<br/>
BPL&#160;$D698&#160;<br/>
Test&#160;bit&#160;7&#160;of&#160;each&#160;of&#160;the&#160;<br/>
D6C5&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
array&#160;name&#160;letters&#160;and&#160;branch&#160;<br/>
D6C6&#160;<br/>
30&#160;D0&#160;<br/>
BMI&#160;$D698&#160;<br/>
back&#160;if&#160;array&#160;is&#160;not&#160;string&#160;<br/>
D6C8&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
type.&#160;<br/>
D6C9&#160;<br/>
B1&#160;91&#160;<br/>
LDA&#160;($91),Y&#160;<br/>
D6CB&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
Advance&#160;the&#160;pointer&#160;beyond&#160;<br/>
D6CD&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
the&#160;array&#160;header&#160;and&#160;<br/>
D6CE&#160;<br/>
69&#160;05&#160;<br/>
ADC&#160;#$05&#160;<br/>
dimension&#160;specifiers&#160;to&#160;the&#160;<br/>
D6D0&#160;<br/>
65&#160;91&#160;<br/>
ADC&#160;$91&#160;<br/>
first&#160;string&#160;array&#160;element.&#160;<br/>
D6D2&#160;<br/>
85&#160;91&#160;<br/>
STA&#160;$91&#160;<br/>
D6D4&#160;<br/>
90&#160;02&#160;<br/>
BCC&#160;$D6D8&#160;<br/>
D6D6&#160;<br/>
E6&#160;92&#160;<br/>
INC&#160;$92&#160;<br/>
D6D8&#160;<br/>
A6&#160;92&#160;<br/>
LDX&#160;$92&#160;<br/>
D6DA&#160;<br/>
E4&#160;C8&#160;<br/>
CPX&#160;$C8&#160;<br/>
Go&#160;through&#160;the&#160;elements&#160;of&#160;the&#160;<br/>
D6DC&#160;<br/>
D0&#160;04&#160;<br/>
BNE&#160;$D6E2&#160;<br/>
array&#160;until&#160;top&#160;one&#160;found.&#160;<br/>
D6DE&#160;<br/>
C5&#160;C7&#160;<br/>
CMP&#160;$C7&#160;<br/>
D6E0&#160;<br/>
F0&#160;BA&#160;<br/>
BEQ&#160;$D69C&#160;<br/>
D6E2&#160;<br/>
20&#160;F1&#160;D6&#160;<br/>
JSR&#160;$D6F1&#160;<br/>
D6E5&#160;<br/>
F0&#160;F3&#160;<br/>
BEQ&#160;$D6DA&#160;<br/>
Branch&#160;always.&#160;<br/>
D6E7&#160;<br/>
B1&#160;91&#160;<br/>
LDA&#160;($91),Y&#160;<br/>
Test&#160;if&#160;variable&#160;is&#160;a&#160;string.&#160;<br/>
D6E9&#160;<br/>
30&#160;35&#160;<br/>
BMI&#160;$D720&#160;<br/>
If&#160;it&#160;is&#160;then&#160;test&#160;whether&#160;it&#160;<br/>
D6EB&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
has&#160;been&#160;collected&#160;or&#160;not.&#160;<br/>
D6EC&#160;<br/>
B1&#160;91&#160;<br/>
LDA&#160;($91),Y&#160;<br/>
D6EE&#160;<br/>
10&#160;30&#160;<br/>
BPL&#160;$D720&#160;<br/>
D6F0&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D6F1&#160;<br/>
B1&#160;91&#160;<br/>
LDA&#160;($91),Y&#160;<br/>
D6F3&#160;<br/>
F0&#160;2B&#160;<br/>
BEQ&#160;$D720&#160;<br/>
String&#160;is&#160;null.&#160;<br/>
D6F5&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D6F6&#160;<br/>
B1&#160;91&#160;<br/>
LDA&#160;($91),Y&#160;<br/>
D6F8&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
D6F9&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D6FA&#160;<br/>
B1&#160;91&#160;<br/>
LDA&#160;($91),Y&#160;<br/>
Branch&#160;if&#160;string&#160;address&#160;is&#160;<br/>
D6FC&#160;<br/>
C5&#160;A3&#160;<br/>
CMP&#160;$A3&#160;<br/>
above&#160;current&#160;bottom&#160;of&#160;<br/>
D6FE&#160;<br/>
90&#160;06&#160;<br/>
BCC&#160;$D706&#160;<br/>
strings&#160;pointer.&#160;Test&#160;MSB&#160;<br/>
D700&#160;<br/>
D0&#160;1E&#160;<br/>
BNE&#160;$D720&#160;<br/>
first&#160;and&#160;then&#160;LSB&#160;if&#160;the&#160;MSBs&#160;<br/>
D702&#160;<br/>
E4&#160;A2&#160;<br/>
CPX&#160;$A2&#160;<br/>
are&#160;equal.&#160;<br/>
D704&#160;<br/>
B0&#160;1A&#160;<br/>
BCS&#160;$D720&#160;<br/>
D706&#160;<br/>
C5&#160;CF&#160;<br/>
CMP&#160;$CF&#160;<br/>
Branch&#160;if&#160;string&#160;address&#160;is&#160;<br/>
D708&#160;<br/>
90&#160;16&#160;<br/>
BCC&#160;$D720&#160;<br/>
below&#160;end&#160;of&#160;arrays,&#160;i.e.&#160;it&#160;<br/>
D70A&#160;<br/>
D0&#160;04&#160;<br/>
BNE&#160;$D710&#160;<br/>
is&#160;a&#160;string&#160;constant&#160;in&#160;a&#160;<br/>
D70C&#160;<br/>
E4&#160;CE&#160;<br/>
CPX&#160;$CE&#160;<br/>
program.&#160;<br/>
D70E&#160;<br/>
90&#160;10&#160;<br/>
BCC&#160;$D720&#160;<br/>
D710&#160;<br/>
86&#160;CE&#160;<br/>
STX&#160;$CE&#160;<br/>
Save&#160;pointer&#160;to&#160;string&#160;ready&#160;<br/>
D712&#160;<br/>
85&#160;CF&#160;<br/>
STA&#160;$CF&#160;<br/>
for&#160;transfer.&#160;<br/>
D714&#160;<br/>
A5&#160;91&#160;<br/>
LDA&#160;$91&#160;<br/>
Save&#160;current&#160;string&#160;pointer.&#160;<br/>
D716&#160;<br/>
A6&#160;92&#160;<br/>
LDX&#160;$92&#160;<br/>
D718&#160;<br/>
85&#160;BD&#160;<br/>
STA&#160;$BD&#160;<br/>
D71A&#160;<br/>
86&#160;BE&#160;<br/>
STX&#160;$BE&#160;<br/>
D71C&#160;<br/>
A5&#160;C2&#160;<br/>
LDA&#160;$C2&#160;<br/>
Copy&#160;string&#160;block&#160;size.&#160;<br/>
D71E&#160;<br/>
85&#160;C4&#160;<br/>
STA&#160;$C4&#160;<br/>
D720&#160;<br/>
A5&#160;C2&#160;<br/>
LDA&#160;$C2&#160;<br/>
Set&#160;$91,$92&#160;to&#160;point&#160;to&#160;next&#160;<br/>
D722&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
variable.&#160;<br/>
D723&#160;<br/>
65&#160;91&#160;<br/>
ADC&#160;$91&#160;<br/>
D725&#160;<br/>
85&#160;91&#160;<br/>
STA&#160;$91&#160;<br/>
D727&#160;<br/>
90&#160;02&#160;<br/>
BCC&#160;$D72B&#160;<br/>
D729&#160;<br/>
E6&#160;92&#160;<br/>
INC&#160;$92&#160;<br/>
D72B&#160;<br/>
A6&#160;92&#160;<br/>
LDX&#160;$92&#160;<br/>
D72D&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
Set&#160;Z&#160;and&#160;return&#160;with&#160;A,X&#160;<br/>
D72F&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
holding&#160;current&#160;position.&#160;<br/>
&#160;<br/>D730&#160;<br/>
A5&#160;BE&#160;<br/>
LDA&#160;$BE&#160;<br/>
<b>COPY&#160;ACROSS&#160;STRING.</b>&#160;<br/>
D732&#160;<br/>
05&#160;BD&#160;<br/>
ORA&#160;$BD&#160;<br/>
D734&#160;<br/>
F0&#160;F5&#160;<br/>
BEQ&#160;$D72B&#160;<br/>
Pag&#160;&#160;e&#160;44&#160;<br/>
<hr/>
<a name=45></a>D736&#160;<br/>
A5&#160;C4&#160;<br/>
LDA&#160;$C4&#160;<br/>
D738&#160;<br/>
29&#160;04&#160;<br/>
AND&#160;#$04&#160;<br/>
D73A&#160;<br/>
4A&#160;<br/>
LSR&#160;A&#160;<br/>
D73B&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
D73C&#160;<br/>
85&#160;C4&#160;<br/>
STA&#160;$C4&#160;<br/>
Calculate&#160;end&#160;address&#160;of&#160;the&#160;<br/>
D73E&#160;<br/>
B1&#160;BD&#160;<br/>
LDA&#160;($BD),Y&#160;<br/>
string&#160;and&#160;set&#160;pointers&#160;for&#160;<br/>
D740&#160;<br/>
65&#160;CE&#160;<br/>
ADC&#160;$CE&#160;<br/>
block&#160;transfer.&#160;<br/>
D742&#160;<br/>
85&#160;C9&#160;<br/>
STA&#160;$C9&#160;<br/>
D744&#160;<br/>
A5&#160;CF&#160;<br/>
LDA&#160;$CF&#160;<br/>
$CE,$CF&#160;-&#160;start&#160;of&#160;data.&#160;<br/>
D746&#160;<br/>
69&#160;00&#160;<br/>
ADC&#160;#$00&#160;<br/>
$C9,$CA&#160;-&#160;end&#160;of&#160;data.&#160;<br/>
D748&#160;<br/>
85&#160;CA&#160;<br/>
STA&#160;$CA&#160;<br/>
$C7,$C8&#160;-&#160;new&#160;end&#160;of&#160;data.&#160;<br/>
D74A&#160;<br/>
A5&#160;A2&#160;<br/>
LDA&#160;$A2&#160;<br/>
D74C&#160;<br/>
A6&#160;A3&#160;<br/>
LDX&#160;$A3&#160;<br/>
D74E&#160;<br/>
85&#160;C7&#160;<br/>
STA&#160;$C7&#160;<br/>
D750&#160;<br/>
86&#160;C8&#160;<br/>
STX&#160;$C8&#160;<br/>
D752&#160;<br/>
20&#160;FB&#160;C3&#160;<br/>
JSR&#160;$C3FB&#160;<br/>
Block&#160;transfer&#160;to&#160;copy&#160;across&#160;<br/>
D755&#160;<br/>
A4&#160;C4&#160;<br/>
LDY&#160;$C4&#160;<br/>
string.&#160;<br/>
D757&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D758&#160;<br/>
A5&#160;C7&#160;<br/>
LDA&#160;$C7&#160;<br/>
D75A&#160;<br/>
91&#160;BD&#160;<br/>
STA&#160;($BD),Y&#160;<br/>
D75C&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
Transfer&#160;pointer&#160;into&#160;<br/>
D75D&#160;<br/>
E6&#160;C8&#160;<br/>
INC&#160;$C8&#160;<br/>
memory.&#160;<br/>
D75F&#160;<br/>
A5&#160;C8&#160;<br/>
LDA&#160;$C8&#160;<br/>
D761&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D762&#160;<br/>
91&#160;BD&#160;<br/>
STA&#160;($BD),Y&#160;<br/>
D764&#160;<br/>
4C&#160;54&#160;D6&#160;<br/>
JMP&#160;$D654&#160;<br/>
&#160;<br/>D767&#160;<br/>
A5&#160;D4&#160;<br/>
LDA&#160;$D4&#160;<br/>
<b>STRING&#160;CONCATENATION.</b>&#160;<br/>
D769&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
D76A&#160;<br/>
A5&#160;D3&#160;<br/>
LDA&#160;$D3&#160;<br/>
Save&#160;pointer&#160;to&#160;string.&#160;<br/>
D76C&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
D76D&#160;<br/>
20&#160;00&#160;D0&#160;<br/>
JSR&#160;$D000&#160;<br/>
Get&#160;item.&#160;<br/>
D770&#160;<br/>
20&#160;08&#160;CF&#160;<br/>
JSR&#160;$CF08&#160;<br/>
Check&#160;it&#160;is&#160;string&#160;type.&#160;<br/>
D773&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
D774&#160;<br/>
85&#160;DE&#160;<br/>
STA&#160;$DE&#160;<br/>
Restore&#160;pointer&#160;to&#160;first&#160;<br/>
D776&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
string.&#160;<br/>
D777&#160;<br/>
85&#160;DF&#160;<br/>
STA&#160;$DF&#160;<br/>
D779&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
D77B&#160;<br/>
B1&#160;DE&#160;<br/>
LDA&#160;($DE),Y&#160;<br/>
Add&#160;string&#160;lengths.&#160;<br/>
D77D&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
D77E&#160;<br/>
71&#160;D3&#160;<br/>
ADC&#160;($D3),Y&#160;<br/>
D780&#160;<br/>
90&#160;05&#160;<br/>
BCC&#160;$D787&#160;<br/>
D782&#160;<br/>
A2&#160;B5&#160;<br/>
LDX&#160;#$B5&#160;<br/>
Give&#160;error&#160;if&#160;strings&#160;are&#160;too&#160;<br/>
D784&#160;<br/>
4C&#160;7E&#160;C4&#160;<br/>
JMP&#160;$C47E&#160;<br/>
long.&#160;<br/>
&#160;<br/>D787&#160;<br/>
20&#160;A3&#160;D5&#160;<br/>
JSR&#160;$D5A3&#160;<br/>
Set&#160;up&#160;slot&#160;for&#160;new&#160;string.&#160;<br/>
D78A&#160;<br/>
20&#160;A4&#160;D7&#160;<br/>
JSR&#160;$D7A4&#160;<br/>
Transfer&#160;first&#160;string&#160;into&#160;<br/>
D78D&#160;<br/>
A5&#160;BF&#160;<br/>
LDA&#160;$BF&#160;<br/>
slot.&#160;<br/>
D78F&#160;<br/>
A4&#160;C0&#160;<br/>
LDY&#160;$C0&#160;<br/>
D791&#160;<br/>
20&#160;D4&#160;D7&#160;<br/>
JSR&#160;$D7D4&#160;<br/>
Set&#160;up&#160;string,&#160;releasing&#160;if&#160;<br/>
D794&#160;<br/>
20&#160;B6&#160;D7&#160;<br/>
JSR&#160;$D7B6&#160;<br/>
necessary&#160;and&#160;transfer.&#160;<br/>
D797&#160;<br/>
A5&#160;DE&#160;<br/>
LDA&#160;$DE&#160;<br/>
D799&#160;<br/>
A4&#160;DF&#160;<br/>
LDY&#160;$DF&#160;<br/>
D79B&#160;<br/>
20&#160;D4&#160;D7&#160;<br/>
JSR&#160;$D7D4&#160;<br/>
Set&#160;up&#160;string,&#160;releasing&#160;if&#160;<br/>
D79E&#160;<br/>
20&#160;F4&#160;D5&#160;<br/>
JSR&#160;$D5F4&#160;<br/>
necessary&#160;&amp;&#160;push&#160;string&#160;block&#160;<br/>
D7A1&#160;<br/>
4C&#160;31&#160;CF&#160;<br/>
JMP&#160;$CF31&#160;<br/>
on&#160;stack.&#160;Go&#160;back&#160;for&#160;more.&#160;<br/>
&#160;<br/>D7A4&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
This&#160;routine&#160;transfers&#160;the&#160;<br/>
D7A6&#160;<br/>
B1&#160;DE&#160;<br/>
LDA&#160;($DE),Y&#160;<br/>
block&#160;pointed&#160;to&#160;by&#160;$DE&#160;into&#160;<br/>
D7A8&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
slot.&#160;<br/>
D7A9&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D7AA&#160;<br/>
B1&#160;DE&#160;<br/>
LDA&#160;($DE),Y&#160;<br/>
D7AC&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
X&#160;holds&#160;LSB&#160;and&#160;Y&#160;holds&#160;MSB&#160;of&#160;<br/>
D7AD&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
pointer.&#160;<br/>
Pag&#160;&#160;e&#160;45&#160;<br/>
<hr/>
<a name=46></a>D7AE&#160;<br/>
B1&#160;DE&#160;<br/>
LDA&#160;($DE),Y&#160;<br/>
D7B0&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
D7B1&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Restore&#160;length.&#160;<br/>
D7B2&#160;<br/>
86&#160;91&#160;<br/>
STX&#160;$91&#160;<br/>
Set&#160;up&#160;pointer&#160;to&#160;string.&#160;<br/>
D7B4&#160;<br/>
84&#160;92&#160;<br/>
STY&#160;$92&#160;<br/>
D7B6&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
Y&#160;holds&#160;length&#160;and&#160;skip&#160;<br/>
D7B7&#160;<br/>
F0&#160;0A&#160;<br/>
BEQ&#160;$D7C3&#160;<br/>
transfer&#160;if&#160;null.&#160;<br/>
D7B9&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
D7BA&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
D7BB&#160;<br/>
B1&#160;91&#160;<br/>
LDA&#160;($91),Y&#160;<br/>
Transfer&#160;the&#160;characters&#160;of&#160;the&#160;<br/>
D7BD&#160;<br/>
91&#160;A4&#160;<br/>
STA&#160;($A4),Y&#160;<br/>
string.&#160;<br/>
D7BF&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
D7C0&#160;<br/>
D0&#160;F8&#160;<br/>
BNE&#160;$D7BA&#160;<br/>
D7C2&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
restore&#160;length.&#160;<br/>
D7C3&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
D7C4&#160;<br/>
65&#160;A4&#160;<br/>
ADC&#160;$A4&#160;<br/>
D7C6&#160;<br/>
85&#160;A4&#160;<br/>
STA&#160;$A4&#160;<br/>
Add&#160;length&#160;to&#160;content&#160;of&#160;$A4,&#160;<br/>
D7C8&#160;<br/>
90&#160;02&#160;<br/>
BCC&#160;$D7CC&#160;<br/>
$A5&#160;ready&#160;for&#160;next&#160;string.&#160;<br/>
D7CA&#160;<br/>
E6&#160;A5&#160;<br/>
INC&#160;$A5&#160;<br/>
D7CC&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>D7CD&#160;<br/>
20&#160;08&#160;CF&#160;<br/>
JSR&#160;$CF08&#160;<br/>
Check&#160;string&#160;type.&#160;<br/>
D7D0&#160;<br/>
A5&#160;D3&#160;<br/>
LDA&#160;$D3&#160;<br/>
D7D2&#160;<br/>
A4&#160;D4&#160;<br/>
LDY&#160;$D4&#160;<br/>
Set&#160;pointer&#160;to&#160;string&#160;block.&#160;<br/>
D7D4&#160;<br/>
85&#160;91&#160;<br/>
STA&#160;$91&#160;<br/>
D7D6&#160;<br/>
84&#160;92&#160;<br/>
STY&#160;$92&#160;<br/>
D7D8&#160;<br/>
20&#160;05&#160;D8&#160;<br/>
JSR&#160;$D805&#160;<br/>
Release&#160;string&#160;stack.&#160;<br/>
D7DB&#160;<br/>
08&#160;<br/>
PHP&#160;<br/>
D7DC&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
D7DE&#160;<br/>
B1&#160;91&#160;<br/>
LDA&#160;($91),Y&#160;<br/>
Save&#160;length.&#160;<br/>
D7E0&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
D7E1&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D7E2&#160;<br/>
B1&#160;91&#160;<br/>
LDA&#160;($91),Y&#160;<br/>
Get&#160;LSB&#160;of&#160;pointer&#160;into&#160;X.&#160;<br/>
D7E4&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
D7E5&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
D7E6&#160;<br/>
B1&#160;91&#160;<br/>
LDA&#160;($91),Y&#160;<br/>
Get&#160;MSB&#160;of&#160;pointer&#160;into&#160;Y.&#160;<br/>
D7E8&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
D7E9&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
D7EA&#160;<br/>
28&#160;<br/>
PLP&#160;<br/>
If&#160;not&#160;from&#160;string&#160;stack&#160;then&#160;<br/>
D7EB&#160;<br/>
D0&#160;13&#160;<br/>
BNE&#160;$D800&#160;<br/>
set&#160;pointer&#160;and&#160;exit.&#160;<br/>
D7ED&#160;<br/>
C4&#160;A3&#160;<br/>
CPY&#160;$A3&#160;<br/>
If&#160;not&#160;bottom&#160;of&#160;strings&#160;then&#160;<br/>
D7EF&#160;<br/>
D0&#160;0F&#160;<br/>
BNE&#160;$D800&#160;<br/>
set&#160;pointer&#160;and&#160;exit.&#160;<br/>
D7F1&#160;<br/>
E4&#160;A2&#160;<br/>
CPX&#160;$A2&#160;<br/>
D7F3&#160;<br/>
D0&#160;0B&#160;<br/>
BNE&#160;$D800&#160;<br/>
D7F5&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
Save&#160;length.&#160;<br/>
D7F6&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
D7F7&#160;<br/>
65&#160;A2&#160;<br/>
ADC&#160;$A2&#160;<br/>
Move&#160;up&#160;bottom&#160;of&#160;strings&#160;to&#160;<br/>
D7F9&#160;<br/>
85&#160;A2&#160;<br/>
STA&#160;$A2&#160;<br/>
remove&#160;temporary&#160;string.&#160;<br/>
D7FB&#160;<br/>
90&#160;02&#160;<br/>
BCC&#160;$D7FF&#160;<br/>
D7FD&#160;<br/>
E6&#160;A3&#160;<br/>
INC&#160;$A3&#160;<br/>
D7FF&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Restore&#160;length.&#160;<br/>
D800&#160;<br/>
86&#160;91&#160;<br/>
STX&#160;$91&#160;<br/>
Set&#160;pointer&#160;to&#160;string&#160;and&#160;<br/>
D802&#160;<br/>
84&#160;92&#160;<br/>
STY&#160;$92&#160;<br/>
exit.&#160;<br/>
D804&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>D805&#160;<br/>
C4&#160;87&#160;<br/>
CPY&#160;$87&#160;<br/>
Release&#160;string&#160;stack&#160;item&#160;if&#160;<br/>
D807&#160;<br/>
D0&#160;0C&#160;<br/>
BNE&#160;$D815&#160;<br/>
necessary.&#160;<br/>
D809&#160;<br/>
C5&#160;86&#160;<br/>
CMP&#160;$86&#160;<br/>
D80B&#160;<br/>
D0&#160;08&#160;<br/>
BNE&#160;$D815&#160;<br/>
D80D&#160;<br/>
85&#160;85&#160;<br/>
STA&#160;$85&#160;<br/>
D80F&#160;<br/>
E9&#160;03&#160;<br/>
SBC&#160;#$03&#160;<br/>
D811&#160;<br/>
85&#160;86&#160;<br/>
STA&#160;$86&#160;<br/>
D813&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
Z&#160;set&#160;if&#160;released,&#160;clear&#160;if&#160;<br/>
D815&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
not.&#160;<br/>
Pag&#160;&#160;e&#160;46&#160;<br/>
<hr/>
<a name=47></a>&#160;<br/>D816&#160;<br/>
20&#160;CB&#160;D8&#160;<br/>
JSR&#160;$D8CB&#160;<br/>
<b>CHR$</b>&#160;Get&#160;single&#160;byte&#160;numeric&#160;<br/>
D819&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
expression,&#160;save&#160;it&#160;on&#160;stack.&#160;<br/>
D81A&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
D81B&#160;<br/>
A9&#160;01&#160;<br/>
LDA&#160;#$01&#160;<br/>
D81D&#160;<br/>
20&#160;AB&#160;D5&#160;<br/>
JSR&#160;$D5AB&#160;<br/>
Get&#160;slot&#160;for&#160;string&#160;&amp;&#160;save&#160;<br/>
D820&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
pointer.&#160;Restore&#160;expression.&#160;<br/>
D821&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
D823&#160;<br/>
91&#160;D1&#160;<br/>
STA&#160;($D1),Y&#160;<br/>
Save&#160;expression&#160;in&#160;memory.&#160;<br/>
D825&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Remove&#160;address&#160;of&#160;calling&#160;<br/>
D826&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
routine.&#160;<br/>
D827&#160;<br/>
4C&#160;F4&#160;D5&#160;<br/>
JMP&#160;$D5F4&#160;<br/>
Push&#160;string&#160;block&#160;on&#160;stack.&#160;<br/>
&#160;<br/>D82A&#160;<br/>
20&#160;8B&#160;D8&#160;<br/>
JSR&#160;$D88B&#160;<br/>
<b>LEFT$</b>&#160;Set&#160;up&#160;argument.&#160;<br/>
D82D&#160;<br/>
D1&#160;BF&#160;<br/>
CMP&#160;($BF),Y&#160;<br/>
D82F&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
Clear&#160;A.&#160;If&#160;length&#160;of&#160;string&#160;<br/>
D830&#160;<br/>
90&#160;04&#160;<br/>
BCC&#160;$D836&#160;<br/>
is&#160;less&#160;than&#160;slice&#160;size&#160;then&#160;<br/>
D832&#160;<br/>
B1&#160;BF&#160;<br/>
LDA&#160;($BF),Y&#160;<br/>
set&#160;slice&#160;size&#160;to&#160;string&#160;<br/>
D834&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
length.&#160;<br/>
D835&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
Save&#160;value&#160;to&#160;be&#160;added&#160;to&#160;<br/>
D836&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
string&#160;pointer&#160;after&#160;setting&#160;<br/>
D837&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
up&#160;string.&#160;<br/>
D838&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
D839&#160;<br/>
20&#160;AB&#160;D5&#160;<br/>
JSR&#160;$D5AB&#160;<br/>
Get&#160;slot&#160;for&#160;string&#160;and&#160;save&#160;<br/>
D83C&#160;<br/>
A5&#160;BF&#160;<br/>
LDA&#160;$BF&#160;<br/>
block.&#160;<br/>
D83E&#160;<br/>
A4&#160;C0&#160;<br/>
LDY&#160;$C0&#160;<br/>
Set&#160;A,&#160;Y&#160;<br/>
D840&#160;<br/>
20&#160;D4&#160;D7&#160;<br/>
JSR&#160;$D7D4&#160;<br/>
Set&#160;up&#160;string,&#160;releasing&#160;if&#160;<br/>
D843&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
necessary.&#160;<br/>
D844&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
D845&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
D846&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
D847&#160;<br/>
65&#160;91&#160;<br/>
ADC&#160;$91&#160;<br/>
Add&#160;to&#160;the&#160;string&#160;pointer&#160;the&#160;<br/>
D849&#160;<br/>
85&#160;91&#160;<br/>
STA&#160;$91&#160;<br/>
size&#160;of&#160;new&#160;string.&#160;<br/>
D84B&#160;<br/>
90&#160;02&#160;<br/>
BCC&#160;$D84F&#160;<br/>
D84D&#160;<br/>
E6&#160;92&#160;<br/>
INC&#160;$92&#160;<br/>
D84F&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
D850&#160;<br/>
20&#160;B6&#160;D7&#160;<br/>
JSR&#160;$D7B6&#160;<br/>
Transfer&#160;string&#160;ptr&#160;to&#160;$A4,$A5&#160;<br/>
D853&#160;<br/>
4C&#160;F4&#160;D5&#160;<br/>
JMP&#160;$D5F4&#160;<br/>
Push&#160;$&#160;block&#160;on&#160;$&#160;stack.&#160;<br/>
&#160;<br/>D856&#160;<br/>
20&#160;8B&#160;D8&#160;<br/>
JSR&#160;$D88B&#160;<br/>
<b>RIGHT$</b>&#160;<br/>
D859&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
Subtract&#160;the&#160;slice&#160;size&#160;from&#160;<br/>
D85A&#160;<br/>
F1&#160;BF&#160;<br/>
SBC&#160;($BF),Y&#160;<br/>
the&#160;length&#160;of&#160;the&#160;string.&#160;<br/>
D85C&#160;<br/>
49&#160;FF&#160;<br/>
EOR&#160;#$FF&#160;<br/>
D85E&#160;<br/>
4C&#160;30&#160;D8&#160;<br/>
JMP&#160;$D830&#160;<br/>
Rest&#160;is&#160;same&#160;as&#160;LEFT$.&#160;<br/>
&#160;<br/>D861&#160;<br/>
A9&#160;FF&#160;<br/>
LDA&#160;#$FF&#160;<br/>
<b>MID$</b>&#160;<br/>
D863&#160;<br/>
85&#160;D4&#160;<br/>
STA&#160;$D4&#160;<br/>
D865&#160;<br/>
20&#160;E8&#160;00&#160;<br/>
JSR&#160;$00E8&#160;<br/>
Get&#160;next&#160;char.&#160;<br/>
D868&#160;<br/>
C9&#160;29&#160;<br/>
CMP&#160;#$29&#160;<br/>
D86A&#160;<br/>
F0&#160;06&#160;<br/>
BEQ&#160;$D872&#160;<br/>
Found&#160;a&#160;&#34;)&#34;.&#160;<br/>
D86C&#160;<br/>
20&#160;65&#160;D0&#160;<br/>
JSR&#160;$D065&#160;<br/>
Test&#160;for&#160;comma.&#160;<br/>
D86F&#160;<br/>
20&#160;C8&#160;D8&#160;<br/>
JSR&#160;$D8C8&#160;<br/>
Get&#160;1&#160;byte&#160;numeric&#160;expression.&#160;<br/>
D872&#160;<br/>
20&#160;8B&#160;D8&#160;<br/>
JSR&#160;$D88B&#160;<br/>
Set&#160;up&#160;arguments.&#160;<br/>
D875&#160;<br/>
F0&#160;4B&#160;<br/>
BEQ&#160;$D8C2&#160;<br/>
Error&#160;in&#160;value.&#160;<br/>
D877&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
D878&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
D879&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
D87A&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
D87B&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
Chop&#160;the&#160;string&#160;as&#160;in&#160;RIGHT$&#160;<br/>
D87D&#160;<br/>
F1&#160;BF&#160;<br/>
SBC&#160;($BF),Y&#160;<br/>
and&#160;then&#160;branch&#160;to&#160;LEFT$&#160;<br/>
D87F&#160;<br/>
B0&#160;B6&#160;<br/>
BCS&#160;$D837&#160;<br/>
routine&#160;to&#160;chop&#160;the&#160;left&#160;side&#160;<br/>
D881&#160;<br/>
49&#160;FF&#160;<br/>
EOR&#160;#$FF&#160;<br/>
of&#160;the&#160;string.&#160;<br/>
D883&#160;<br/>
C5&#160;D4&#160;<br/>
CMP&#160;$D4&#160;<br/>
D885&#160;<br/>
90&#160;B1&#160;<br/>
BCC&#160;$D838&#160;<br/>
Pag&#160;&#160;e&#160;47&#160;<br/>
<hr/>
<a name=48></a>D887&#160;<br/>
A5&#160;D4&#160;<br/>
LDA&#160;$D4&#160;<br/>
D889&#160;<br/>
B0&#160;AD&#160;<br/>
BCS&#160;$D838&#160;<br/>
Rest&#160;same&#160;as&#160;LEFT$.&#160;<br/>
D88B&#160;<br/>
20&#160;5F&#160;D0&#160;<br/>
JSR&#160;$D05F&#160;<br/>
Check&#160;for&#160;&#34;(&#34;.&#160;<br/>
D88E&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Save&#160;call&#160;address.&#160;<br/>
D88F&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
D890&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
D891&#160;<br/>
85&#160;C4&#160;<br/>
STA&#160;$C4&#160;<br/>
D893&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Remove&#160;call&#160;address&#160;from&#160;<br/>
D894&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
expression&#160;evaluator.&#160;<br/>
D895&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Put&#160;magnitude&#160;of&#160;string&#160;slice&#160;<br/>
D896&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
into&#160;X.&#160;<br/>
D897&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Pull&#160;and&#160;store&#160;pointer&#160;to&#160;<br/>
D898&#160;<br/>
85&#160;BF&#160;<br/>
STA&#160;$BF&#160;<br/>
string.&#160;<br/>
D89A&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
D89B&#160;<br/>
85&#160;C0&#160;<br/>
STA&#160;$C0&#160;<br/>
D89D&#160;<br/>
A5&#160;C4&#160;<br/>
LDA&#160;$C4&#160;<br/>
Restore&#160;call&#160;address.&#160;<br/>
D89F&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
D8A0&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
D8A1&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
D8A2&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
Clear&#160;Y.&#160;<br/>
D8A4&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
Set&#160;status&#160;register&#160;to&#160;size&#160;<br/>
D8A5&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
of&#160;string&#160;slice.&#160;<br/>
&#160;<br/>D8A6&#160;<br/>
20&#160;AC&#160;D8&#160;<br/>
JSR&#160;$D8AC&#160;<br/>
<b>LEN</b>&#160;Do&#160;check&#160;and&#160;convert&#160;<br/>
D8A9&#160;<br/>
4C&#160;B6&#160;D4&#160;<br/>
JMP&#160;$D4B6&#160;<br/>
length&#160;to&#160;floating&#160;point&#160;no.&#160;<br/>
D8AC&#160;<br/>
20&#160;CD&#160;D7&#160;<br/>
JSR&#160;$D7CD&#160;<br/>
Check&#160;string&#160;type.&#160;<br/>
D8AF&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
Clear&#160;string&#160;flag.&#160;<br/>
D8B1&#160;<br/>
86&#160;28&#160;<br/>
STX&#160;$28&#160;<br/>
D8B3&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
D8B4&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>D8B5&#160;<br/>
20&#160;AC&#160;D8&#160;<br/>
JSR&#160;$D8AC&#160;<br/>
<b>ASC</b>&#160;Get&#160;string.&#160;<br/>
D8B8&#160;<br/>
F0&#160;08&#160;<br/>
BEQ&#160;$D8C2&#160;<br/>
Error&#160;if&#160;empty.&#160;<br/>
D8BA&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
D8BC&#160;<br/>
B1&#160;91&#160;<br/>
LDA&#160;($91),Y&#160;<br/>
Get&#160;first&#160;character&#160;of&#160;string.&#160;<br/>
D8BE&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
Put&#160;into&#160;Y.&#160;<br/>
D8BF&#160;<br/>
4C&#160;B6&#160;D4&#160;<br/>
JMP&#160;$D4B6&#160;<br/>
Convert&#160;code&#160;to&#160;FPA&#160;and&#160;exit.&#160;<br/>
&#160;<br/>D8C2&#160;<br/>
4C&#160;36&#160;D3&#160;<br/>
JMP&#160;$D336&#160;<br/>
Print&#160;&#34;ILLEGAL&#160;QUANTITY&#160;ERROR&#34;&#160;<br/>
&#160;<br/>D8C5&#160;<br/>
20&#160;E2&#160;00&#160;<br/>
JSR&#160;$00E2&#160;<br/>
<b>GET&#160;SINGLE&#160;BYTE&#160;EXPRESSION.</b>&#160;<br/>
D8C8&#160;<br/>
20&#160;03&#160;CF&#160;<br/>
JSR&#160;$CF03&#160;<br/>
Get&#160;next&#160;char&#160;and&#160;evaluate&#160;<br/>
D8CB&#160;<br/>
20&#160;A2&#160;D2&#160;<br/>
JSR&#160;$D2A2&#160;<br/>
expression,&#160;convert&#160;to&#160;+ve&#160;<br/>
D8CE&#160;<br/>
A6&#160;D3&#160;<br/>
LDX&#160;$D3&#160;<br/>
integer.&#160;<br/>
D8D0&#160;<br/>
D0&#160;F0&#160;<br/>
BNE&#160;$D8C2&#160;<br/>
Error&#160;if&#160;too&#160;large.&#160;<br/>
D8D2&#160;<br/>
A6&#160;D4&#160;<br/>
LDX&#160;$D4&#160;<br/>
Exit&#160;with&#160;byte&#160;in&#160;X.&#160;<br/>
D8D4&#160;<br/>
4C&#160;E8&#160;00&#160;<br/>
JMP&#160;$00E8&#160;<br/>
D8D7&#160;<br/>
20&#160;AC&#160;D8&#160;<br/>
JSR&#160;$D8AC&#160;<br/>
VAL&#160;Set&#160;up&#160;string.&#160;<br/>
D8DA&#160;<br/>
D0&#160;03&#160;<br/>
BNE&#160;$D8DF&#160;<br/>
D8DC&#160;<br/>
4C&#160;B2&#160;DB&#160;<br/>
JMP&#160;$DBB2&#160;<br/>
If&#160;empty&#160;then&#160;use&#160;0.&#160;<br/>
D8DF&#160;<br/>
A6&#160;E9&#160;<br/>
LDX&#160;$E9&#160;<br/>
D8E1&#160;<br/>
A4&#160;EA&#160;<br/>
LDY&#160;$EA&#160;<br/>
D8E3&#160;<br/>
86&#160;E0&#160;<br/>
STX&#160;$E0&#160;<br/>
Copy&#160;text&#160;pointer.&#160;<br/>
D8E5&#160;<br/>
84&#160;E1&#160;<br/>
STY&#160;$E1&#160;<br/>
D8E7&#160;<br/>
A6&#160;91&#160;<br/>
LDX&#160;$91&#160;<br/>
Copy&#160;content&#160;of&#160;$91,$92&#160;into&#160;<br/>
D8E9&#160;<br/>
86&#160;E9&#160;<br/>
STX&#160;$E9&#160;<br/>
$E9,$EA.&#160;<br/>
D8EB&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
D8EC&#160;<br/>
65&#160;91&#160;<br/>
ADC&#160;$91&#160;<br/>
Add&#160;A&#160;to&#160;$91,$92&#160;and&#160;place&#160;<br/>
D8EE&#160;<br/>
85&#160;93&#160;<br/>
STA&#160;$93&#160;<br/>
result&#160;in&#160;$93,$94.&#160;<br/>
D8F0&#160;<br/>
A6&#160;92&#160;<br/>
LDX&#160;$92&#160;<br/>
D8F2&#160;<br/>
86&#160;EA&#160;<br/>
STX&#160;$EA&#160;<br/>
D8F4&#160;<br/>
90&#160;01&#160;<br/>
BCC&#160;$D8F7&#160;<br/>
D8F6&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
D8F7&#160;<br/>
86&#160;94&#160;<br/>
STX&#160;$94&#160;<br/>
Pag&#160;&#160;e&#160;48&#160;<br/>
<hr/>
<a name=49></a>D8F9&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
D8FB&#160;<br/>
B1&#160;93&#160;<br/>
LDA&#160;($93),Y&#160;<br/>
Get&#160;character&#160;from&#160;string.&#160;<br/>
D8FD&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
D8FE&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
D900&#160;<br/>
91&#160;93&#160;<br/>
STA&#160;($93),Y&#160;<br/>
D902&#160;<br/>
20&#160;E8&#160;00&#160;<br/>
JSR&#160;$00E8&#160;<br/>
Get&#160;next&#160;char.&#160;<br/>
D905&#160;<br/>
20&#160;E7&#160;DF&#160;<br/>
JSR&#160;$DFE7&#160;<br/>
Get&#160;number.&#160;<br/>
D908&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
D909&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
D90B&#160;<br/>
91&#160;93&#160;<br/>
STA&#160;($93),Y&#160;<br/>
D90D&#160;<br/>
A6&#160;E0&#160;<br/>
LDX&#160;$E0&#160;<br/>
Restore&#160;text&#160;pointer.&#160;<br/>
D90F&#160;<br/>
A4&#160;E1&#160;<br/>
LDY&#160;$E1&#160;<br/>
D911&#160;<br/>
86&#160;E9&#160;<br/>
STX&#160;$E9&#160;<br/>
D913&#160;<br/>
84&#160;EA&#160;<br/>
STY&#160;$EA&#160;<br/>
D915&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>D916&#160;<br/>
20&#160;03&#160;CF&#160;<br/>
JSR&#160;$CF03&#160;<br/>
Evaluate&#160;expression&#160;and&#160;<br/>
D919&#160;<br/>
20&#160;22&#160;D9&#160;<br/>
JSR&#160;$D922&#160;<br/>
convert&#160;to&#160;integer.&#160;<br/>
D91C&#160;<br/>
20&#160;65&#160;D0&#160;<br/>
JSR&#160;$D065&#160;<br/>
Check&#160;for&#160;comma&#160;and&#160;get&#160;single&#160;<br/>
D91F&#160;<br/>
4C&#160;C8&#160;D8&#160;<br/>
JMP&#160;$D8C8&#160;<br/>
byte&#160;numeric&#160;expression.&#160;<br/>
&#160;<br/>D922&#160;<br/>
A5&#160;D5&#160;<br/>
LDA&#160;$D5&#160;<br/>
<b>CONVERT&#160;MAIN&#160;FPA&#160;TO&#160;INTEGER.</b>&#160;<br/>
D924&#160;<br/>
30&#160;9C&#160;<br/>
BMI&#160;$D8C2&#160;<br/>
Error&#160;if&#160;negative&#160;number.&#160;<br/>
D926&#160;<br/>
A5&#160;D0&#160;<br/>
LDA&#160;$D0&#160;<br/>
D928&#160;<br/>
C9&#160;91&#160;<br/>
CMP&#160;#$91&#160;<br/>
Error&#160;if&#160;number&#160;over&#160;32768.&#160;<br/>
D92A&#160;<br/>
B0&#160;96&#160;<br/>
BCS&#160;$D8C2&#160;<br/>
D92C&#160;<br/>
20&#160;8C&#160;DF&#160;<br/>
JSR&#160;$DF8C&#160;<br/>
Convert&#160;main&#160;FPA&#160;to&#160;integer.&#160;<br/>
D92F&#160;<br/>
A5&#160;D3&#160;<br/>
LDA&#160;$D3&#160;<br/>
Put&#160;result&#160;in&#160;$33,$34.&#160;<br/>
D931&#160;<br/>
A4&#160;D4&#160;<br/>
LDY&#160;$D4&#160;<br/>
D933&#160;<br/>
84&#160;33&#160;<br/>
STY&#160;$33&#160;<br/>
D935&#160;<br/>
85&#160;34&#160;<br/>
STA&#160;$34&#160;<br/>
D937&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
Exit.&#160;<br/>
&#160;<br/>D938&#160;<br/>
A5&#160;34&#160;<br/>
LDA&#160;$34&#160;<br/>
<b>PEEK</b>&#160;<br/>
D93A&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
Save&#160;$33,$34&#160;on&#160;stack.&#160;<br/>
D93B&#160;<br/>
A5&#160;33&#160;<br/>
LDA&#160;$33&#160;<br/>
D93D&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
D93E&#160;<br/>
20&#160;22&#160;D9&#160;<br/>
JSR&#160;$D922&#160;<br/>
Convert&#160;main&#160;FPA&#160;to&#160;integer.&#160;<br/>
D941&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
D943&#160;<br/>
B1&#160;33&#160;<br/>
LDA&#160;($33),Y&#160;<br/>
Load&#160;byte&#160;from&#160;memory.&#160;<br/>
D945&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
Transfer&#160;to&#160;Y.&#160;<br/>
D946&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Restore&#160;$33,$34.&#160;<br/>
D947&#160;<br/>
85&#160;33&#160;<br/>
STA&#160;$33&#160;<br/>
D949&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
D94A&#160;<br/>
85&#160;34&#160;<br/>
STA&#160;$34&#160;<br/>
D94C&#160;<br/>
4C&#160;B6&#160;D4&#160;<br/>
JMP&#160;$D4B6&#160;<br/>
Convert&#160;Y&#160;to&#160;FPA&#160;and&#160;exit.&#160;<br/>
&#160;<br/>D94F&#160;<br/>
20&#160;16&#160;D9&#160;<br/>
JSR&#160;$D916&#160;<br/>
<b>POKE</b>&#160;Get&#160;expression.&#160;<br/>
D952&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
D953&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
D955&#160;<br/>
91&#160;33&#160;<br/>
STA&#160;($33),Y&#160;<br/>
Store&#160;byte&#160;in&#160;memory.&#160;<br/>
D957&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
Exit&#160;<br/>
&#160;<br/>D958&#160;<br/>
20&#160;03&#160;CF&#160;<br/>
JSR&#160;$CF03&#160;<br/>
<b>WAIT</b>&#160;Evaluate&#160;expression&#160;<br/>
D95B&#160;<br/>
20&#160;22&#160;D9&#160;<br/>
JSR&#160;$D922&#160;<br/>
and&#160;convert&#160;to&#160;integer.&#160;<br/>
D95E&#160;<br/>
A4&#160;33&#160;<br/>
LDY&#160;$33&#160;<br/>
Load&#160;value&#160;into&#160;X,Y.&#160;<br/>
D960&#160;<br/>
A6&#160;34&#160;<br/>
LDX&#160;$34&#160;<br/>
D962&#160;<br/>
A9&#160;02&#160;<br/>
LDA&#160;#$02&#160;<br/>
Set&#160;spare&#160;counter&#160;and&#160;wait&#160;<br/>
D964&#160;<br/>
4C&#160;C9&#160;EE&#160;<br/>
JMP&#160;$EEC9&#160;<br/>
until&#160;count&#160;down&#160;to&#160;zero.&#160;<br/>
&#160;<br/>D967&#160;<br/>
20&#160;53&#160;E8&#160;<br/>
JSR&#160;$E853&#160;<br/>
<b>DOKE</b>&#160;<br/>
D96A&#160;<br/>
A5&#160;33&#160;<br/>
LDA&#160;$33&#160;<br/>
Get&#160;integer&#160;argument&#160;and&#160;save&#160;<br/>
D96C&#160;<br/>
A4&#160;34&#160;<br/>
LDY&#160;$34&#160;<br/>
it&#160;in&#160;$1D,$1E.&#160;<br/>
D96E&#160;<br/>
85&#160;1D&#160;<br/>
STA&#160;$1D&#160;<br/>
Pag&#160;&#160;e&#160;49&#160;<br/>
<hr/>
<a name=50></a>D970&#160;<br/>
84&#160;1E&#160;<br/>
STY&#160;$1E&#160;<br/>
D972&#160;<br/>
20&#160;65&#160;D0&#160;<br/>
JSR&#160;$D065&#160;<br/>
Test&#160;for&#160;comma.&#160;<br/>
D975&#160;<br/>
20&#160;53&#160;E8&#160;<br/>
JSR&#160;$E853&#160;<br/>
Get&#160;integer&#160;argument.&#160;<br/>
D978&#160;<br/>
A0&#160;01&#160;<br/>
LDY&#160;#$01&#160;<br/>
D97A&#160;<br/>
B9&#160;33&#160;00&#160;<br/>
LDA&#160;$0033,Y&#160;<br/>
D97D&#160;<br/>
91&#160;1D&#160;<br/>
STA&#160;($1D),Y&#160;<br/>
Put&#160;value&#160;into&#160;memory.&#160;<br/>
D97F&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
D980&#160;<br/>
10&#160;F8&#160;<br/>
BPL&#160;$D97A&#160;<br/>
D982&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
Exit.&#160;<br/>
&#160;<br/>D983&#160;<br/>
20&#160;22&#160;D9&#160;<br/>
JSR&#160;$D922&#160;<br/>
<b>DEEK</b>&#160;Convert&#160;main&#160;FPA&#160;into&#160;<br/>
D986&#160;<br/>
A0&#160;01&#160;<br/>
LDY&#160;#$01&#160;<br/>
integer.&#160;<br/>
D988&#160;<br/>
B1&#160;33&#160;<br/>
LDA&#160;($33),Y&#160;<br/>
Get&#160;bytes&#160;from&#160;memory&#160;into&#160;A&#160;<br/>
D98A&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
and&#160;Y.&#160;<br/>
D98B&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
D98C&#160;<br/>
B1&#160;33&#160;<br/>
LDA&#160;($33),Y&#160;<br/>
D98E&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
D98F&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Convert&#160;A,&#160;Y&#160;into&#160;floating&#160;<br/>
D990&#160;<br/>
4C&#160;40&#160;DF&#160;<br/>
JMP&#160;$DF40&#160;<br/>
point&#160;number&#160;and&#160;exit.&#160;<br/>
&#160;<br/>D993&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
<b>CONVERT&#160;BYTE&#160;TO&#160;2&#160;HEX&#160;DIGITS.</b>&#160;<br/>
D994&#160;<br/>
4A&#160;<br/>
LSR&#160;A&#160;<br/>
D995&#160;<br/>
4A&#160;<br/>
LSR&#160;A&#160;<br/>
Shift&#160;left&#160;hand&#160;nibble&#160;into&#160;<br/>
D996&#160;<br/>
4A&#160;<br/>
LSR&#160;A&#160;<br/>
right&#160;hand&#160;nibble.&#160;<br/>
D997&#160;<br/>
4A&#160;<br/>
LSR&#160;A&#160;<br/>
D998&#160;<br/>
20&#160;9C&#160;D9&#160;<br/>
JSR&#160;$D99C&#160;<br/>
Convert&#160;L.H.&#160;nibble&#160;to&#160;char.&#160;<br/>
D99B&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Restore&#160;original&#160;byte.&#160;<br/>
D99C&#160;<br/>
29&#160;0F&#160;<br/>
AND&#160;#$0F&#160;<br/>
Isolate&#160;R.H&#160;nibble.&#160;<br/>
D99E&#160;<br/>
09&#160;30&#160;<br/>
ORA&#160;#$30&#160;<br/>
Convert&#160;to&#160;ASCII.&#160;<br/>
D9A0&#160;<br/>
C9&#160;3A&#160;<br/>
CMP&#160;#$3A&#160;<br/>
D9A2&#160;<br/>
90&#160;02&#160;<br/>
BCC&#160;$D9A6&#160;<br/>
D9A4&#160;<br/>
69&#160;06&#160;<br/>
ADC&#160;#$06&#160;<br/>
D9A6&#160;<br/>
C9&#160;30&#160;<br/>
CMP&#160;#$30&#160;<br/>
D9A8&#160;<br/>
D0&#160;04&#160;<br/>
BNE&#160;$D9AE&#160;<br/>
Digit&#160;is&#160;non&#160;zero.&#160;<br/>
D9AA&#160;<br/>
A4&#160;2F&#160;<br/>
LDY&#160;$2F&#160;<br/>
D9AC&#160;<br/>
F0&#160;06&#160;<br/>
BEQ&#160;$D9B4&#160;<br/>
Exit&#160;if&#160;char&#160;is&#160;leading&#160;zero.&#160;<br/>
D9AE&#160;<br/>
85&#160;2F&#160;<br/>
STA&#160;$2F&#160;<br/>
D9B0&#160;<br/>
9D&#160;00&#160;01&#160;<br/>
STA&#160;$0100,X&#160;<br/>
Put&#160;char&#160;in&#160;bottom&#160;of&#160;stack&#160;<br/>
D9B3&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
page.&#160;Advance&#160;pointer.&#160;<br/>
D9B4&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>D9B5&#160;<br/>
20&#160;22&#160;D9&#160;<br/>
JSR&#160;$D922&#160;<br/>
<b>HEX$</b>&#160;Convert&#160;FPA&#160;to&#160;positive&#160;<br/>
D9B8&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
integer.&#160;<br/>
D9BA&#160;<br/>
86&#160;2F&#160;<br/>
STX&#160;$2F&#160;<br/>
Set&#160;leading&#160;zero&#160;flag.&#160;<br/>
D9BC&#160;<br/>
A9&#160;23&#160;<br/>
LDA&#160;#$23&#160;<br/>
Set&#160;#&#160;at&#160;front&#160;of&#160;number&#160;to&#160;<br/>
D9BE&#160;<br/>
85&#160;FF&#160;<br/>
STA&#160;$FF&#160;<br/>
indicate&#160;hexadecimal.&#160;<br/>
D9C0&#160;<br/>
A5&#160;34&#160;<br/>
LDA&#160;$34&#160;<br/>
Convert&#160;upper&#160;byte&#160;to&#160;2&#160;hex&#160;<br/>
D9C2&#160;<br/>
20&#160;93&#160;D9&#160;<br/>
JSR&#160;$D993&#160;<br/>
digits.&#160;<br/>
D9C5&#160;<br/>
A5&#160;33&#160;<br/>
LDA&#160;$33&#160;<br/>
Convert&#160;lower&#160;byte&#160;to&#160;2&#160;hex&#160;<br/>
D9C7&#160;<br/>
20&#160;93&#160;D9&#160;<br/>
JSR&#160;$D993&#160;<br/>
digits.&#160;<br/>
D9CA&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
D9CB&#160;<br/>
D0&#160;06&#160;<br/>
BNE&#160;$D9D3&#160;<br/>
Number&#160;is&#160;non&#160;zero.&#160;<br/>
D9CD&#160;<br/>
A9&#160;30&#160;<br/>
LDA&#160;#$30&#160;<br/>
Put&#160;in&#160;single&#160;0&#160;for&#160;zero&#160;<br/>
D9CF&#160;<br/>
9D&#160;00&#160;01&#160;<br/>
STA&#160;$0100,X&#160;<br/>
numbers.&#160;<br/>
D9D2&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
Advance&#160;pointer.&#160;<br/>
D9D3&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
Put&#160;null&#160;at&#160;end&#160;of&#160;string.&#160;<br/>
D9D5&#160;<br/>
9D&#160;00&#160;01&#160;<br/>
STA&#160;$0100,X&#160;<br/>
D9D8&#160;<br/>
4C&#160;9B&#160;D5&#160;<br/>
JMP&#160;$D59B&#160;<br/>
Point&#160;to&#160;string&#160;and&#160;exit.&#160;<br/>
&#160;<br/>D9DB&#160;<br/>
4C&#160;70&#160;D0&#160;<br/>
JMP&#160;$D070&#160;<br/>
Print&#160;&#34;SYNTAX&#160;ERROR&#34;.&#160;<br/>
&#160;<br/>D9DE&#160;<br/>
20&#160;21&#160;EC&#160;<br/>
JSR&#160;$EC21&#160;<br/>
<b>LORES</b>&#160;Set&#160;screen&#160;to&#160;text.&#160;<br/>
D9E1&#160;<br/>
20&#160;C8&#160;D8&#160;<br/>
JSR&#160;$D8C8&#160;<br/>
Get&#160;single&#160;byte&#160;expression.&#160;<br/>
D9E4&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
Pag&#160;&#160;e&#160;50&#160;<br/>
<hr/>
<a name=51></a>D9E5&#160;<br/>
F0&#160;06&#160;<br/>
BEQ&#160;$D9ED&#160;<br/>
In&#160;LORES&#160;0.&#160;<br/>
D9E7&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
D9E8&#160;<br/>
D0&#160;F1&#160;<br/>
BNE&#160;$D9DB&#160;<br/>
Error&#160;if&#160;not&#160;LORES&#160;1.&#160;<br/>
D9EA&#160;<br/>
A9&#160;09&#160;<br/>
LDA&#160;#$09&#160;<br/>
D9EC&#160;<br/>
2C&#160;A9&#160;08&#160;<br/>
BIT&#160;$08A9&#160;<br/>
Hides&#160;LDA&#160;#$08.&#160;<br/>
D9EF&#160;<br/>
A2&#160;10&#160;<br/>
LDX&#160;#$10&#160;<br/>
Set&#160;paper&#160;to&#160;black&#160;in&#160;temp&#160;<br/>
D9F1&#160;<br/>
8E&#160;F8&#160;02&#160;<br/>
STX&#160;$02F8&#160;<br/>
location.&#160;<br/>
D9F4&#160;<br/>
A2&#160;1B&#160;<br/>
LDX&#160;#$1B&#160;<br/>
Set&#160;row&#160;counter.&#160;<br/>
D9F6&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
D9F7&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
Calculate&#160;start&#160;address&#160;of&#160;Xth&#160;<br/>
D9F8&#160;<br/>
20&#160;0C&#160;DA&#160;<br/>
JSR&#160;$DA0C&#160;<br/>
row&#160;of&#160;screen.&#160;<br/>
D9FB&#160;<br/>
AD&#160;F8&#160;02&#160;<br/>
LDA&#160;$02F8&#160;<br/>
D9FE&#160;<br/>
A0&#160;27&#160;<br/>
LDY&#160;#$27&#160;<br/>
DA00&#160;<br/>
91&#160;1F&#160;<br/>
STA&#160;($1F),Y&#160;<br/>
Write&#160;paper&#160;colour&#160;on&#160;every&#160;<br/>
DA02&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
column&#160;of&#160;row&#160;except&#160;first.&#160;<br/>
DA03&#160;<br/>
D0&#160;FB&#160;<br/>
BNE&#160;$DA00&#160;<br/>
DA05&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
DA06&#160;<br/>
91&#160;1F&#160;<br/>
STA&#160;($1F),Y&#160;<br/>
Write&#160;char&#160;set&#160;type&#160;for&#160;row.&#160;<br/>
DA08&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
Repeat&#160;until&#160;all&#160;rows&#160;are&#160;done&#160;<br/>
DA09&#160;<br/>
D0&#160;EB&#160;<br/>
BNE&#160;$D9F6&#160;<br/>
except&#160;status&#160;line.&#160;<br/>
DA0B&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>DA0C&#160;<br/>
20&#160;31&#160;F7&#160;<br/>
JSR&#160;$F731&#160;<br/>
<b>CALCULATE&#160;START&#160;ADDRESS&#160;OF&#160;Nth</b>&#160;<br/>
DA0F&#160;<br/>
84&#160;20&#160;<br/>
STY&#160;$20&#160;<br/>
<b>ROW&#160;ON&#160;SCREEN.</b>&#160;<br/>
DA11&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
Multiply&#160;A&#160;by&#160;40&#160;with&#160;Y&#160;<br/>
DA12&#160;<br/>
69&#160;80&#160;<br/>
ADC&#160;#$80&#160;<br/>
holding&#160;overflow&#160;beyond&#160;8&#160;bits&#160;<br/>
DA14&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
DA15&#160;<br/>
85&#160;1F&#160;<br/>
STA&#160;$1F&#160;<br/>
Add&#160;in&#160;start&#160;address&#160;of&#160;screen&#160;<br/>
DA17&#160;<br/>
A9&#160;BB&#160;<br/>
LDA&#160;#$BB&#160;<br/>
and&#160;put&#160;result&#160;in&#160;$1F,$20.&#160;<br/>
DA19&#160;<br/>
65&#160;20&#160;<br/>
ADC&#160;$20&#160;<br/>
DA1B&#160;<br/>
85&#160;20&#160;<br/>
STA&#160;$20&#160;<br/>
DA1D&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
DA1E&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>DA1F&#160;<br/>
4C&#160;C2&#160;D8&#160;<br/>
JMP&#160;$D8C2&#160;<br/>
Print&#160;&#34;ILLEGAL&#160;QUANTITY&#160;ERR.&#34;.&#160;<br/>
&#160;<br/>DA22&#160;<br/>
20&#160;F6&#160;DA&#160;<br/>
JSR&#160;$DAF6&#160;<br/>
Test&#160;for&#160;text&#160;screen.&#160;<br/>
DA25&#160;<br/>
20&#160;C8&#160;D8&#160;<br/>
JSR&#160;$D8C8&#160;<br/>
Get&#160;single&#160;byte&#160;expression.&#160;<br/>
DA28&#160;<br/>
E0&#160;28&#160;<br/>
CPX&#160;#$28&#160;<br/>
Error&#160;if&#160;column&#160;number&#160;is&#160;too&#160;<br/>
DA2A&#160;<br/>
B0&#160;F3&#160;<br/>
BCS&#160;$DA1F&#160;<br/>
large.&#160;<br/>
DA2C&#160;<br/>
8E&#160;F8&#160;02&#160;<br/>
STX&#160;$02F8&#160;<br/>
Save&#160;result.&#160;<br/>
DA2F&#160;<br/>
20&#160;65&#160;D0&#160;<br/>
JSR&#160;$D065&#160;<br/>
Test&#160;for&#160;comma.&#160;<br/>
DA32&#160;<br/>
20&#160;C8&#160;D8&#160;<br/>
JSR&#160;$D8C8&#160;<br/>
Get&#160;single&#160;byte&#160;expression.&#160;<br/>
DA35&#160;<br/>
E0&#160;1B&#160;<br/>
CPX&#160;#$1B&#160;<br/>
Error&#160;if&#160;row&#160;number&#160;is&#160;too&#160;<br/>
DA37&#160;<br/>
B0&#160;E6&#160;<br/>
BCS&#160;$DA1F&#160;<br/>
large.&#160;<br/>
DA39&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
Increment&#160;row&#160;number.&#160;<br/>
DA3A&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
Transfer&#160;to&#160;A&#160;and&#160;calculate&#160;<br/>
DA3B&#160;<br/>
20&#160;0C&#160;DA&#160;<br/>
JSR&#160;$DA0C&#160;<br/>
address&#160;of&#160;start&#160;of&#160;that&#160;row.&#160;<br/>
DA3E&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
Exit.&#160;<br/>
&#160;<br/>DA3F&#160;<br/>
20&#160;62&#160;D0&#160;<br/>
JSR&#160;$D062&#160;<br/>
<b>SCRN</b>&#160;Test&#160;for&#160;&#34;(&#34;.&#160;<br/>
DA42&#160;<br/>
20&#160;22&#160;DA&#160;<br/>
JSR&#160;$DA22&#160;<br/>
Get&#160;X,&#160;Y&#160;co-ordinates.&#160;<br/>
DA45&#160;<br/>
20&#160;5F&#160;D0&#160;<br/>
JSR&#160;$D05F&#160;<br/>
Test&#160;for&#160;comma.&#160;<br/>
DA48&#160;<br/>
AC&#160;F8&#160;02&#160;<br/>
LDY&#160;$02F8&#160;<br/>
DA4B&#160;<br/>
B1&#160;1F&#160;<br/>
LDA&#160;($1F),Y&#160;<br/>
Get&#160;character&#160;from&#160;screen&#160;<br/>
DA4D&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
Transfer&#160;result&#160;to&#160;floating&#160;<br/>
DA4E&#160;<br/>
4C&#160;B6&#160;D4&#160;<br/>
JMP&#160;$D4B6&#160;<br/>
point&#160;in&#160;main&#160;FPA.&#160;<br/>
&#160;<br/>DA51&#160;<br/>
20&#160;22&#160;DA&#160;<br/>
JSR&#160;$DA22&#160;<br/>
<b>PLOT</b>&#160;Get&#160;X,&#160;Y&#160;co-ordinates.&#160;<br/>
DA54&#160;<br/>
20&#160;65&#160;D0&#160;<br/>
JSR&#160;$D065&#160;<br/>
Test&#160;for&#160;comma.&#160;<br/>
DA57&#160;<br/>
20&#160;17&#160;CF&#160;<br/>
JSR&#160;$CF17&#160;<br/>
Evaluate&#160;expression.&#160;<br/>
DA5A&#160;<br/>
24&#160;28&#160;<br/>
BIT&#160;$28&#160;<br/>
DA5C&#160;<br/>
10&#160;1D&#160;<br/>
BPL&#160;$DA7B&#160;<br/>
Expression&#160;not&#160;string&#160;type.&#160;<br/>
DA5E&#160;<br/>
20&#160;D0&#160;D7&#160;<br/>
JSR&#160;$D7D0&#160;<br/>
Set&#160;up&#160;string&#160;in&#160;FPA.&#160;<br/>
Pag&#160;&#160;e&#160;51&#160;<br/>
<hr/>
<a name=52></a>DA61&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
DA62&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
DA63&#160;<br/>
AD&#160;F8&#160;02&#160;<br/>
LDA&#160;$02F8&#160;<br/>
Calculate&#160;start&#160;address&#160;for&#160;<br/>
DA66&#160;<br/>
65&#160;1F&#160;<br/>
ADC&#160;$1F&#160;<br/>
writing&#160;string&#160;to&#160;screen.&#160;<br/>
DA68&#160;<br/>
90&#160;02&#160;<br/>
BCC&#160;$DA6C&#160;<br/>
DA6A&#160;<br/>
E6&#160;20&#160;<br/>
INC&#160;$20&#160;<br/>
DA6C&#160;<br/>
85&#160;1F&#160;<br/>
STA&#160;$1F&#160;<br/>
DA6E&#160;<br/>
A0&#160;OO&#160;<br/>
LDY&#160;#$00&#160;<br/>
DA70&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
DA71&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
DA72&#160;<br/>
F0&#160;10&#160;<br/>
BEQ&#160;$DA84&#160;<br/>
String&#160;plotted.&#160;<br/>
DA74&#160;<br/>
B1&#160;91&#160;<br/>
LDA&#160;($91),Y&#160;<br/>
Write&#160;each&#160;element&#160;to&#160;screen.&#160;<br/>
DA76&#160;<br/>
91&#160;1F&#160;<br/>
STA&#160;($1F),Y&#160;<br/>
DA78&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
DA79&#160;<br/>
D0&#160;F6&#160;<br/>
BNE&#160;$DA71&#160;<br/>
More&#160;to&#160;be&#160;done.&#160;<br/>
DA7B&#160;<br/>
20&#160;CB&#160;D8&#160;<br/>
JSR&#160;$D8CB&#160;<br/>
Get&#160;single&#160;byte&#160;expression.&#160;<br/>
DA7E&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
DA7F&#160;<br/>
AC&#160;F8&#160;02&#160;<br/>
LDY&#160;$02F8&#160;<br/>
DA82&#160;<br/>
91&#160;1F&#160;<br/>
STA&#160;($1F),Y&#160;<br/>
Print&#160;it&#160;to&#160;screen.&#160;<br/>
DA84&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
Exit.&#160;<br/>
&#160;<br/>DA85&#160;<br/>
D0&#160;17&#160;<br/>
BNE&#160;$DA9E&#160;<br/>
DA87&#160;<br/>
A9&#160;03&#160;<br/>
LDA&#160;#$03&#160;<br/>
Check&#160;for&#160;6&#160;free&#160;bytes&#160;on&#160;the&#160;<br/>
DA89&#160;<br/>
20&#160;37&#160;C4&#160;<br/>
JSR&#160;$C437&#160;<br/>
stack.&#160;<br/>
DA8C&#160;<br/>
A5&#160;EA&#160;<br/>
LDA&#160;$EA&#160;<br/>
Save&#160;the&#160;program&#160;position,&#160;the&#160;<br/>
DA8E&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
current&#160;line&#160;number&#160;and&#160;the&#160;<br/>
DA8F&#160;<br/>
A5&#160;E9&#160;<br/>
LDA&#160;$E9&#160;<br/>
REPEAT&#160;token&#160;on&#160;the&#160;stack&#160;for&#160;<br/>
DA91&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
next&#160;loop.&#160;<br/>
DA92&#160;<br/>
A5&#160;A9&#160;<br/>
LDA&#160;$A9&#160;<br/>
DA94&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
DA95&#160;<br/>
A5&#160;A8&#160;<br/>
LDA&#160;$A8&#160;<br/>
DA97&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
DA98&#160;<br/>
A9&#160;8B&#160;<br/>
LDA&#160;#$8B&#160;<br/>
DA9A&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
DA9B&#160;<br/>
4C&#160;C1&#160;C8&#160;<br/>
JMP&#160;$C8C1&#160;<br/>
&#160;<br/>DA9E&#160;<br/>
4C&#160;70&#160;D0&#160;<br/>
JMP&#160;$D070&#160;<br/>
Print&#160;&#34;SYNTAX&#160;ERROR&#34;.&#160;<br/>
&#160;<br/>DAA1&#160;<br/>
A9&#160;FF&#160;<br/>
LDA&#160;#$FF&#160;<br/>
<b>PULL&#160;/&#160;UNTIL</b>&#160;<br/>
DAA3&#160;<br/>
85&#160;B9&#160;<br/>
STA&#160;$B9&#160;<br/>
DAA5&#160;<br/>
20&#160;C6&#160;C3&#160;<br/>
JSR&#160;$C3C6&#160;<br/>
Pull&#160;data&#160;off&#160;stack.&#160;<br/>
DAA8&#160;<br/>
9A&#160;<br/>
TXS&#160;<br/>
DAA9&#160;<br/>
C9&#160;8B&#160;<br/>
CMP&#160;#$8B&#160;<br/>
DAAB&#160;<br/>
F0&#160;05&#160;<br/>
BEQ&#160;$DAB2&#160;<br/>
<b>REPEAT</b>&#160;token&#160;found.&#160;<br/>
DAAD&#160;<br/>
A2&#160;F5&#160;<br/>
LDX&#160;#$F5&#160;<br/>
Print&#160;&#34;BAD&#160;UNTIL&#160;ERROR&#34;&#160;if&#160;<br/>
DAAF&#160;<br/>
4C&#160;7E&#160;C4&#160;<br/>
JMP&#160;$C47E&#160;<br/>
token&#160;not&#160;found.&#160;<br/>
DAB2&#160;<br/>
C0&#160;10&#160;<br/>
CPY&#160;#$10&#160;<br/>
DAB4&#160;<br/>
D0&#160;05&#160;<br/>
BNE&#160;$DABB&#160;<br/>
PULL&#160;token&#160;not&#160;found.&#160;<br/>
DAB6&#160;<br/>
84&#160;D0&#160;<br/>
STY&#160;$D0&#160;<br/>
DAB8&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
DAB9&#160;<br/>
D0&#160;06&#160;<br/>
BNE&#160;$DAC1&#160;<br/>
DABB&#160;<br/>
20&#160;E8&#160;00&#160;<br/>
JSR&#160;$00E8&#160;<br/>
Get&#160;next&#160;char.&#160;<br/>
DABE&#160;<br/>
20&#160;17&#160;CF&#160;<br/>
JSR&#160;$CF17&#160;<br/>
Evaluate&#160;expression.&#160;<br/>
DAC1&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
DAC2&#160;<br/>
A5&#160;D0&#160;<br/>
LDA&#160;$D0&#160;<br/>
Go&#160;back&#160;to&#160;start&#160;of&#160;loop&#160;if&#160;<br/>
DAC4&#160;<br/>
F0&#160;05&#160;<br/>
BEQ&#160;$DACB&#160;<br/>
condition&#160;still&#160;false.&#160;<br/>
DAC6&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Pull&#160;loop&#160;data&#160;off&#160;stack&#160;and&#160;<br/>
DAC7&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
forget&#160;it.&#160;Used&#160;to&#160;exit&#160;the&#160;<br/>
DAC8&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
loop.&#160;<br/>
DAC9&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
DACA&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>DACB&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Pull&#160;old&#160;program&#160;line&#160;number&#160;<br/>
DACC&#160;<br/>
85&#160;A8&#160;<br/>
STA&#160;$A8&#160;<br/>
and&#160;position&#160;in&#160;text&#160;from&#160;the&#160;<br/>
Pag&#160;&#160;e&#160;52&#160;<br/>
<hr/>
<a name=53></a>DACE&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
stack.&#160;<br/>
DACF&#160;<br/>
85&#160;A9&#160;<br/>
STA&#160;$A9&#160;<br/>
DAD1&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
DAD2&#160;<br/>
85&#160;E9&#160;<br/>
STA&#160;$E9&#160;<br/>
DAD4&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
DAD5&#160;<br/>
85&#160;EA&#160;<br/>
STA&#160;$EA&#160;<br/>
DAD7&#160;<br/>
4C&#160;8C&#160;DA&#160;<br/>
JMP&#160;$DA8C&#160;<br/>
&#160;<br/>DADA&#160;<br/>
20&#160;78&#160;EB&#160;<br/>
JSR&#160;$EB78&#160;<br/>
<b>KEY$</b>&#160;Get&#160;next&#160;char&#160;from&#160;<br/>
DADD&#160;<br/>
08&#160;<br/>
PHP&#160;<br/>
keyboard.&#160;<br/>
DADE&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
DADF&#160;<br/>
10&#160;03&#160;<br/>
BPL&#160;$DAE4&#160;<br/>
Key&#160;is&#160;not&#160;valid.&#160;<br/>
DAE1&#160;<br/>
A9&#160;01&#160;<br/>
LDA&#160;#$01&#160;<br/>
Set&#160;string&#160;length&#160;for&#160;1&#160;key.&#160;<br/>
DAE3&#160;<br/>
2C&#160;A9&#160;00&#160;<br/>
BIT&#160;$00A9&#160;<br/>
Hides&#160;string&#160;length&#160;for&#160;0&#160;keys&#160;<br/>
DAE6&#160;<br/>
20&#160;AB&#160;D5&#160;<br/>
JSR&#160;$D5AB&#160;<br/>
Get&#160;slot&#160;for&#160;string.&#160;<br/>
DAE9&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
DAEA&#160;<br/>
28&#160;<br/>
PLP&#160;<br/>
DAEB&#160;<br/>
10&#160;04&#160;<br/>
BPL&#160;$DAF1&#160;<br/>
No&#160;valid&#160;key&#160;was&#160;obtained.&#160;<br/>
DAED&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
DAEF&#160;<br/>
91&#160;D1&#160;<br/>
STA&#160;($D1),Y&#160;<br/>
Save&#160;key&#160;in&#160;string.&#160;<br/>
DAF1&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
DAF2&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Push&#160;string&#160;block&#160;on&#160;to&#160;the&#160;<br/>
DAF3&#160;<br/>
4C&#160;F4&#160;D5&#160;<br/>
JMP&#160;$D5F4&#160;<br/>
string&#160;stack.&#160;<br/>
&#160;<br/>DAF6&#160;<br/>
AD&#160;C0&#160;02&#160;<br/>
LDA&#160;$02C0&#160;<br/>
<b>TEST&#160;FOR&#160;TEXT&#160;SCREEN.</b>&#160;<br/>
DAF9&#160;<br/>
29&#160;01&#160;<br/>
AND&#160;#$01&#160;<br/>
DAFB&#160;<br/>
F0&#160;05&#160;<br/>
BEQ&#160;$DB02&#160;<br/>
Print&#160;&#34;DISP&#160;TYPE&#160;MISMATCH&#160;<br/>
DAFD&#160;<br/>
A2&#160;A3&#160;<br/>
LDX&#160;#$A3&#160;<br/>
ERROR&#34;&#160;if&#160;wrong&#160;screen&#160;mode.&#160;<br/>
DAFF&#160;<br/>
4C&#160;7E&#160;C4&#160;<br/>
JMP&#160;$C47E&#160;<br/>
DB02&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
DB03&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>DB04&#160;<br/>
A9&#160;05&#160;<br/>
LDA&#160;#$05&#160;<br/>
Set&#160;A,&#160;Y&#160;to&#160;point&#160;to&#160;floating&#160;<br/>
DB06&#160;<br/>
A0&#160;E2&#160;<br/>
LDY&#160;#$E2&#160;<br/>
point&#160;value&#160;for&#160;0.5&#160;and&#160;jump&#160;<br/>
DB08&#160;<br/>
4C&#160;22&#160;DB&#160;<br/>
JMP&#160;$DB22&#160;<br/>
to&#160;&#34;+&#34;&#160;routine.&#160;<br/>
&#160;<br/>DB0B&#160;<br/>
20&#160;51&#160;DD&#160;<br/>
JSR&#160;$DD51&#160;<br/>
Unpack&#160;work&#160;FPA.&#160;<br/>
DB0E&#160;<br/>
A5&#160;D5&#160;<br/>
LDA&#160;$D5&#160;<br/>
<b>-</b>&#160;OPERATOR&#160;<br/>
DB10&#160;<br/>
49&#160;FF&#160;<br/>
EOR&#160;#$FF&#160;<br/>
Invert&#160;sign&#160;of&#160;main&#160;FPA.&#160;<br/>
DB12&#160;<br/>
85&#160;D5&#160;<br/>
STA&#160;$D5&#160;<br/>
DB14&#160;<br/>
45&#160;DD&#160;<br/>
EOR&#160;$DD&#160;<br/>
DB16&#160;<br/>
85&#160;DE&#160;<br/>
STA&#160;$DE&#160;<br/>
Set&#160;sign&#160;difference&#160;flag.&#160;<br/>
DB18&#160;<br/>
A5&#160;D0&#160;<br/>
LDA&#160;$D0&#160;<br/>
DB1A&#160;<br/>
4C&#160;25&#160;DB&#160;<br/>
JMP&#160;$DB25&#160;<br/>
Jump&#160;to&#160;addition&#160;routine.&#160;<br/>
&#160;<br/>DB1D&#160;<br/>
20&#160;54&#160;DC&#160;<br/>
JSR&#160;$DC54&#160;<br/>
Shift&#160;number&#160;by&#160;required&#160;amount&#160;<br/>
DB20&#160;<br/>
90&#160;3C&#160;<br/>
BCC&#160;$DB5E&#160;<br/>
and&#160;continue&#160;with&#160;same&#160;sign.&#160;<br/>
DB22&#160;<br/>
20&#160;51&#160;DD&#160;<br/>
JSR&#160;$DD51&#160;<br/>
Unpack&#160;work&#160;FPA.&#160;<br/>
DB25&#160;<br/>
D0&#160;03&#160;<br/>
BNE&#160;$DB2A&#160;<br/>
<b>+</b>&#160;OPERATOR.&#160;<br/>
DB27&#160;<br/>
4C&#160;D5&#160;DE&#160;<br/>
JMP&#160;$DED5&#160;<br/>
If&#160;main&#160;FPA&#160;is&#160;0&#160;then&#160;copy&#160;<br/>
DB2A&#160;<br/>
A6&#160;DF&#160;<br/>
LDX&#160;$DF&#160;<br/>
work&#160;FPA&#160;into&#160;main&#160;FPA.&#160;<br/>
DB2C&#160;<br/>
86&#160;C5&#160;<br/>
STX&#160;$C5&#160;<br/>
Save&#160;rounding&#160;byte.&#160;<br/>
DB2E&#160;<br/>
A2&#160;D8&#160;<br/>
LDX&#160;#$D8&#160;<br/>
Point&#160;to&#160;work&#160;FPA.&#160;<br/>
DB30&#160;<br/>
A5&#160;D8&#160;<br/>
LDA&#160;$D8&#160;<br/>
Get&#160;exponent&#160;of&#160;work&#160;FPA.&#160;<br/>
DB32&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
If&#160;zero&#160;then&#160;result&#160;is&#160;in&#160;<br/>
DB33&#160;<br/>
F0&#160;CE&#160;<br/>
BEQ&#160;$DB03&#160;<br/>
main&#160;FPA,&#160;so&#160;exit.&#160;<br/>
DB35&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
DB36&#160;<br/>
E5&#160;D0&#160;<br/>
SBC&#160;$D0&#160;<br/>
Get&#160;difference&#160;in&#160;exponents.&#160;<br/>
DB38&#160;<br/>
F0&#160;24&#160;<br/>
BEQ&#160;$DB5E&#160;<br/>
If&#160;equal&#160;then&#160;skip&#160;shift.&#160;<br/>
DB3A&#160;<br/>
90&#160;12&#160;<br/>
BCC&#160;$DB4E&#160;<br/>
If&#160;main&#160;FPA&#160;&gt;&#160;work&#160;FPA&#160;then&#160;<br/>
DB3C&#160;<br/>
84&#160;D0&#160;<br/>
STY&#160;$D0&#160;<br/>
skip&#160;change.&#160;Put&#160;work&#160;exponent&#160;<br/>
DB3E&#160;<br/>
A4&#160;DD&#160;<br/>
LDY&#160;$DD&#160;<br/>
in&#160;main&#160;FPA.&#160;Put&#160;sign&#160;of&#160;<br/>
DB40&#160;<br/>
84&#160;D5&#160;<br/>
STY&#160;$D5&#160;<br/>
work&#160;FPA&#160;into&#160;main&#160;FPA.&#160;<br/>
DB42&#160;<br/>
49&#160;FF&#160;<br/>
EOR&#160;#$FF&#160;<br/>
Negate&#160;difference.&#160;<br/>
Pag&#160;&#160;e&#160;53&#160;<br/>
<hr/>
<a name=54></a>DB44&#160;<br/>
69&#160;00&#160;<br/>
ADC&#160;#$00&#160;<br/>
DB46&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
Clear&#160;rounding&#160;byte.&#160;<br/>
DB48&#160;<br/>
84&#160;C5&#160;<br/>
STY&#160;$C5&#160;<br/>
DB4A&#160;<br/>
A2&#160;D0&#160;<br/>
LDX&#160;#$D0&#160;<br/>
Point&#160;to&#160;main&#160;FPA&#160;and&#160;skip&#160;<br/>
DB4C&#160;<br/>
D0&#160;04&#160;<br/>
BNE&#160;$DB52&#160;<br/>
zeroing&#160;of&#160;rounding&#160;byte.&#160;<br/>
DB4E&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
DB50&#160;<br/>
84&#160;DF&#160;<br/>
STY&#160;$DF&#160;<br/>
Clear&#160;rounding&#160;byte.&#160;<br/>
DB52&#160;<br/>
C9&#160;F9&#160;<br/>
CMP&#160;#$F9&#160;<br/>
If&#160;more&#160;than&#160;8&#160;different&#160;then&#160;<br/>
DB54&#160;<br/>
30&#160;C7&#160;<br/>
BMI&#160;$DB1D&#160;<br/>
shift&#160;the&#160;blocks.&#160;<br/>
DB56&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
Transfer&#160;bit&#160;count&#160;to&#160;Y&#160;and&#160;<br/>
DB57&#160;<br/>
A5&#160;DF&#160;<br/>
LDA&#160;$DF&#160;<br/>
rounding&#160;byte&#160;to&#160;A.&#160;<br/>
DB59&#160;<br/>
56&#160;01&#160;<br/>
LSR&#160;$01,X&#160;<br/>
Shift&#160;mantissa&#160;by&#160;required&#160;<br/>
DB5B&#160;<br/>
20&#160;6B&#160;DC&#160;<br/>
JSR&#160;$DC6B&#160;<br/>
number&#160;of&#160;bits.&#160;<br/>
DB5E&#160;<br/>
24&#160;DE&#160;<br/>
BIT&#160;$DE&#160;<br/>
If&#160;signs&#160;are&#160;same&#160;then&#160;add&#160;<br/>
DB60&#160;<br/>
10&#160;57&#160;<br/>
BPL&#160;$DBB9&#160;<br/>
mantissa&#160;and&#160;exit.&#160;<br/>
DB62&#160;<br/>
A0&#160;D0&#160;<br/>
LDY&#160;#$D0&#160;<br/>
X&#160;points&#160;to&#160;smaller&#160;and&#160;Y&#160;<br/>
DB64&#160;<br/>
E0&#160;D8&#160;<br/>
CPX&#160;#$D8&#160;<br/>
to&#160;larger&#160;FPA.&#160;<br/>
DB66&#160;<br/>
F0&#160;02&#160;<br/>
BEQ&#160;$DB6A&#160;<br/>
DB68&#160;<br/>
A0&#160;D8&#160;<br/>
LDY&#160;#$D8&#160;<br/>
DB6A&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
Negate&#160;rounding&#160;byte.&#160;<br/>
DB6B&#160;<br/>
49&#160;FF&#160;<br/>
EOR&#160;#$FF&#160;<br/>
Add&#160;other&#160;rounding&#160;byte&#160;to&#160;<br/>
DB6D&#160;<br/>
65&#160;C5&#160;<br/>
ADC&#160;$C5&#160;<br/>
get&#160;new&#160;one.&#160;<br/>
DB6F&#160;<br/>
85&#160;DF&#160;<br/>
STA&#160;$DF&#160;<br/>
DB71&#160;<br/>
B9&#160;04&#160;00&#160;<br/>
LDA&#160;$0004,Y&#160;<br/>
DB74&#160;<br/>
F5&#160;04&#160;<br/>
SBC&#160;$04,X&#160;<br/>
Subtract&#160;LSBs&#160;of&#160;mantissas.&#160;<br/>
DB76&#160;<br/>
85&#160;D4&#160;<br/>
STA&#160;$D4&#160;<br/>
DB78&#160;<br/>
B9&#160;03&#160;00&#160;<br/>
LDA&#160;$0003,Y&#160;<br/>
Subtract&#160;next&#160;LSBs.&#160;<br/>
DB7B&#160;<br/>
F5&#160;03&#160;<br/>
SBC&#160;$03,X&#160;<br/>
DB7D&#160;<br/>
85&#160;D3&#160;<br/>
STA&#160;$D3&#160;<br/>
DB7F&#160;<br/>
B9&#160;02&#160;00&#160;<br/>
LDA&#160;$0002,Y&#160;<br/>
Subtract&#160;next&#160;LSBs.&#160;<br/>
DB82&#160;<br/>
F5&#160;02&#160;<br/>
SBC&#160;$02,X&#160;<br/>
DB84&#160;<br/>
85&#160;D2&#160;<br/>
STA&#160;$D2&#160;<br/>
DB86&#160;<br/>
B9&#160;01&#160;00&#160;<br/>
LDA&#160;$0001,Y&#160;<br/>
Subtract&#160;MSBs&#160;of&#160;mantissas.&#160;<br/>
DB89&#160;<br/>
F5&#160;01&#160;<br/>
SBC&#160;$01,X&#160;<br/>
DB8B&#160;<br/>
85&#160;D1&#160;<br/>
STA&#160;$D1&#160;<br/>
DB8D&#160;<br/>
B0&#160;03&#160;<br/>
BCS&#160;$DB92&#160;<br/>
If&#160;carry&#160;clear&#160;then&#160;negate&#160;it.&#160;<br/>
DB8F&#160;<br/>
20&#160;02&#160;DC&#160;<br/>
JSR&#160;$DC02&#160;<br/>
&#160;<br/>DB92&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
<b>NORMALISE&#160;MAIN&#160;FPA.</b>&#160;<br/>
DB94&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
Set&#160;shift&#160;count&#160;to&#160;0.&#160;<br/>
DB95&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
DB96&#160;<br/>
A6&#160;D1&#160;<br/>
LDX&#160;$D1&#160;<br/>
If&#160;top&#160;byte&#160;empty&#160;then&#160;shift&#160;<br/>
DB98&#160;<br/>
D0&#160;4A&#160;<br/>
BNE&#160;$DBE4&#160;<br/>
bits.&#160;<br/>
DB9A&#160;<br/>
A6&#160;D2&#160;<br/>
LDX&#160;$D2&#160;<br/>
DB9C&#160;<br/>
86&#160;D1&#160;<br/>
STX&#160;$D1&#160;<br/>
Shift&#160;by&#160;whole&#160;byte.&#160;<br/>
DB9E&#160;<br/>
A6&#160;D3&#160;<br/>
LDX&#160;$D3&#160;<br/>
DBA0&#160;<br/>
86&#160;D2&#160;<br/>
STX&#160;$D2&#160;<br/>
DBA2&#160;<br/>
A6&#160;D4&#160;<br/>
LDX&#160;$D4&#160;<br/>
DBA4&#160;<br/>
86&#160;D3&#160;<br/>
STX&#160;$D3&#160;<br/>
DBA6&#160;<br/>
A6&#160;DF&#160;<br/>
LDX&#160;$DF&#160;<br/>
DBA8&#160;<br/>
86&#160;D4&#160;<br/>
STX&#160;$D4&#160;<br/>
DBAA&#160;<br/>
84&#160;DF&#160;<br/>
STY&#160;$DF&#160;<br/>
DBAC&#160;<br/>
69&#160;08&#160;<br/>
ADC&#160;#$08&#160;<br/>
Update&#160;count.&#160;<br/>
DBAE&#160;<br/>
C9&#160;28&#160;<br/>
CMP&#160;#$28&#160;<br/>
If&#160;underflow&#160;then&#160;set&#160;to&#160;zero&#160;<br/>
DBB0&#160;<br/>
D0&#160;E4&#160;<br/>
BNE&#160;$DB96&#160;<br/>
else&#160;go&#160;round&#160;again.&#160;<br/>
DBB2&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
Set&#160;main&#160;FPA&#160;to&#160;0.&#160;<br/>
DBB4&#160;<br/>
85&#160;D0&#160;<br/>
STA&#160;$D0&#160;<br/>
DBB6&#160;<br/>
85&#160;D5&#160;<br/>
STA&#160;$D5&#160;<br/>
DBB8&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
Exit.&#160;<br/>
&#160;<br/>DBB9&#160;<br/>
65&#160;C5&#160;<br/>
ADC&#160;$C5&#160;<br/>
<b>ADD&#160;MANTISSAS.</b>&#160;<br/>
DBBB&#160;<br/>
85&#160;DF&#160;<br/>
STA&#160;$DF&#160;<br/>
DBBD&#160;<br/>
A5&#160;D4&#160;<br/>
LDA&#160;$D4&#160;<br/>
Add&#160;the&#160;Founding&#160;bytes&#160;and&#160;<br/>
DBBF&#160;<br/>
65&#160;DC&#160;<br/>
ADC&#160;$DC&#160;<br/>
then&#160;each&#160;of&#160;the&#160;bytes&#160;in&#160;the&#160;<br/>
Pag&#160;&#160;e&#160;54&#160;<br/>
<hr/>
<a name=55></a>DBC1&#160;<br/>
85&#160;D4&#160;<br/>
STA&#160;$D4&#160;<br/>
mantissa&#160;in&#160;ascending&#160;order&#160;<br/>
DBC3&#160;<br/>
A5&#160;D3&#160;<br/>
LDA&#160;$D3&#160;<br/>
of&#160;significance.&#160;<br/>
DBC5&#160;<br/>
65&#160;DB&#160;<br/>
ADC&#160;$DB&#160;<br/>
DBC7&#160;<br/>
85&#160;D3&#160;<br/>
STA&#160;$D3&#160;<br/>
DBC9&#160;<br/>
A5&#160;D2&#160;<br/>
LDA&#160;$D2&#160;<br/>
DBCB&#160;<br/>
65&#160;DA&#160;<br/>
ADC&#160;$DA&#160;<br/>
DBCD&#160;<br/>
85&#160;D2&#160;<br/>
STA&#160;$D2&#160;<br/>
DBCF&#160;<br/>
A5&#160;D1&#160;<br/>
LDA&#160;$D1&#160;<br/>
DBD1&#160;<br/>
65&#160;D9&#160;<br/>
ADC&#160;$D9&#160;<br/>
DBD3&#160;<br/>
85&#160;D1&#160;<br/>
STA&#160;$D1&#160;<br/>
DBD5&#160;<br/>
4C&#160;F1&#160;DB&#160;<br/>
JMP&#160;$DBF1&#160;<br/>
Shift&#160;if&#160;necessary&#160;and&#160;exit.&#160;<br/>
&#160;<br/>DBD8&#160;<br/>
69&#160;01&#160;<br/>
ADC&#160;#$01&#160;<br/>
Put&#160;main&#160;FPA&#160;into&#160;standard&#160;<br/>
DBDA&#160;<br/>
06&#160;DF&#160;<br/>
ASL&#160;$DF&#160;<br/>
form&#160;by&#160;shifting&#160;bits&#160;until&#160;<br/>
DBDC&#160;<br/>
26&#160;D4&#160;<br/>
ROL&#160;$D4&#160;<br/>
top&#160;one&#160;is&#160;set.&#160;<br/>
DBDE&#160;<br/>
26&#160;D3&#160;<br/>
ROL&#160;$D3&#160;<br/>
DBE0&#160;<br/>
26&#160;D2&#160;<br/>
ROL&#160;$D2&#160;<br/>
DBE2&#160;<br/>
26&#160;D1&#160;<br/>
ROL&#160;$D1&#160;<br/>
DBE4&#160;<br/>
10&#160;F2&#160;<br/>
BPL&#160;$DBD8&#160;<br/>
DBE6&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
If&#160;underflow&#160;then&#160;zero&#160;the&#160;<br/>
DBE7&#160;<br/>
E5&#160;D0&#160;<br/>
SBC&#160;$D0&#160;<br/>
number.&#160;<br/>
DBE9&#160;<br/>
B0&#160;C7&#160;<br/>
BCS&#160;$DBB2&#160;<br/>
DBEB&#160;<br/>
49&#160;FF&#160;<br/>
EOR&#160;#$FF&#160;<br/>
Negate&#160;A&#160;to&#160;get&#160;the&#160;new&#160;<br/>
DBED&#160;<br/>
69&#160;01&#160;<br/>
ADC&#160;#$01&#160;<br/>
exponent.&#160;<br/>
DBEF&#160;<br/>
85&#160;D0&#160;<br/>
STA&#160;$D0&#160;<br/>
DBF1&#160;<br/>
90&#160;0E&#160;<br/>
BCC&#160;$DC01&#160;<br/>
Exit&#160;if&#160;okay.&#160;<br/>
DBF3&#160;<br/>
E6&#160;D0&#160;<br/>
INC&#160;$D0&#160;<br/>
Increment&#160;exponent&#160;and&#160;shift&#160;<br/>
DBF5&#160;<br/>
F0&#160;42&#160;<br/>
BEQ&#160;$DC39&#160;<br/>
down&#160;mantissa&#160;by&#160;1&#160;bit.&#160;<br/>
DBF7&#160;<br/>
66&#160;D1&#160;<br/>
ROR&#160;$D1&#160;<br/>
DBF9&#160;<br/>
66&#160;D2&#160;<br/>
ROR&#160;$D2&#160;<br/>
DBFB&#160;<br/>
66&#160;D3&#160;<br/>
ROR&#160;$D3&#160;<br/>
DBFD&#160;<br/>
66&#160;D4&#160;<br/>
ROR&#160;$D4&#160;<br/>
DBFF&#160;<br/>
66&#160;DF&#160;<br/>
ROR&#160;$DF&#160;<br/>
DC01&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>DC02&#160;<br/>
A5&#160;D5&#160;<br/>
LDA&#160;$D5&#160;<br/>
Negate&#160;the&#160;content&#160;of&#160;the&#160;<br/>
DC04&#160;<br/>
49&#160;FF&#160;<br/>
EOR&#160;#$FF&#160;<br/>
main&#160;FPA.&#160;<br/>
DC06&#160;<br/>
85&#160;D5&#160;<br/>
STA&#160;$D5&#160;<br/>
DC08&#160;<br/>
A5&#160;D1&#160;<br/>
LDA&#160;$D1&#160;<br/>
Achieved&#160;by&#160;finding&#160;2's&#160;<br/>
DC0A&#160;<br/>
49&#160;FF&#160;<br/>
EOR&#160;#$FF&#160;<br/>
complement&#160;value&#160;of&#160;mantissa&#160;<br/>
DC0C&#160;<br/>
85&#160;D1&#160;<br/>
STA&#160;$D1&#160;<br/>
and&#160;inverting&#160;sign&#160;bit.&#160;<br/>
DC0E&#160;<br/>
A5&#160;D2&#160;<br/>
LDA&#160;$D2&#160;<br/>
DC10&#160;<br/>
49&#160;FF&#160;<br/>
EOR&#160;#$FF&#160;<br/>
DC12&#160;<br/>
85&#160;D2&#160;<br/>
STA&#160;$D2&#160;<br/>
DC14&#160;<br/>
A5&#160;D3&#160;<br/>
LDA&#160;$D3&#160;<br/>
DC16&#160;<br/>
49&#160;FF&#160;<br/>
EOR&#160;#$FF&#160;<br/>
DC18&#160;<br/>
85&#160;D3&#160;<br/>
STA&#160;$D3&#160;<br/>
DC1A&#160;<br/>
A5&#160;D4&#160;<br/>
LDA&#160;$D4&#160;<br/>
DC1C&#160;<br/>
49&#160;FF&#160;<br/>
EOR&#160;#$FF&#160;<br/>
DC1E&#160;<br/>
85&#160;D4&#160;<br/>
STA&#160;$D4&#160;<br/>
DC20&#160;<br/>
A5&#160;DF&#160;<br/>
LDA&#160;$DF&#160;<br/>
DC22&#160;<br/>
49&#160;FF&#160;<br/>
EOR&#160;#$FF&#160;<br/>
DC24&#160;<br/>
85&#160;DF&#160;<br/>
STA&#160;$DF&#160;<br/>
DC26&#160;<br/>
E6&#160;DF&#160;<br/>
INC&#160;$DF&#160;<br/>
Increment&#160;rounding&#160;byte&#160;and&#160;<br/>
DC28&#160;<br/>
D0&#160;0E&#160;<br/>
BNE&#160;$DC38&#160;<br/>
exit&#160;if&#160;no&#160;carry.&#160;<br/>
DC2A&#160;<br/>
E6&#160;D4&#160;<br/>
INC&#160;$D4&#160;<br/>
Increment&#160;mantissa&#160;of&#160;main&#160;FPA&#160;<br/>
DC2C&#160;<br/>
D0&#160;0A&#160;<br/>
BNE&#160;$DC38&#160;<br/>
branching&#160;at&#160;each&#160;stage&#160;if&#160;<br/>
DC2E&#160;<br/>
E6&#160;D3&#160;<br/>
INC&#160;$D3&#160;<br/>
no&#160;carry&#160;from&#160;one&#160;byte&#160;to&#160;<br/>
DC30&#160;<br/>
D0&#160;06&#160;<br/>
BNE&#160;$DC38&#160;<br/>
next.&#160;<br/>
DC32&#160;<br/>
E6&#160;D2&#160;<br/>
INC&#160;$D2&#160;<br/>
DC34&#160;<br/>
D0&#160;02&#160;<br/>
BNE&#160;$DC38&#160;<br/>
DC36&#160;<br/>
E6&#160;D1&#160;<br/>
INC&#160;$D1&#160;<br/>
DC38&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>
Pag&#160;&#160;e&#160;55&#160;<br/>
<hr/>
<a name=56></a>DC39&#160;<br/>
A2&#160;45&#160;<br/>
LDX&#160;#$45&#160;<br/>
Print&#160;&#34;OVERFLOW&#160;ERROR&#34;.&#160;<br/>
DC3B&#160;<br/>
4C&#160;7E&#160;C4&#160;<br/>
JMP&#160;$C47E&#160;<br/>
DC3E&#160;<br/>
A2&#160;94&#160;<br/>
LDX&#160;#$94&#160;<br/>
Shift&#160;mantissa&#160;&amp;&#160;keep&#160;sign.&#160;<br/>
DC40&#160;<br/>
B4&#160;04&#160;<br/>
LDY&#160;$04,X&#160;<br/>
DC42&#160;<br/>
84&#160;DF&#160;<br/>
STY&#160;$DF&#160;<br/>
Copy&#160;LSB&#160;into&#160;rounding&#160;byte.&#160;<br/>
DC44&#160;<br/>
B4&#160;03&#160;<br/>
LDY&#160;$03,X&#160;<br/>
DC46&#160;<br/>
94&#160;04&#160;<br/>
STY&#160;$04,X&#160;<br/>
Copy&#160;each&#160;of&#160;the&#160;other&#160;bytes&#160;<br/>
DC48&#160;<br/>
B4&#160;02&#160;<br/>
LDY&#160;$02,X&#160;<br/>
of&#160;the&#160;mantissa&#160;into&#160;the&#160;one&#160;<br/>
DC4A&#160;<br/>
94&#160;03&#160;<br/>
STY&#160;$03,X&#160;<br/>
lower&#160;down.&#160;<br/>
DC4C&#160;<br/>
B4&#160;01&#160;<br/>
LDY&#160;$01,X&#160;<br/>
DC4E&#160;<br/>
94&#160;02&#160;<br/>
STY&#160;$02,X&#160;<br/>
DC50&#160;<br/>
A4&#160;D7&#160;<br/>
LDY&#160;$D7&#160;<br/>
DC52&#160;<br/>
94&#160;01&#160;<br/>
STY&#160;$01,X&#160;<br/>
DC54&#160;<br/>
69&#160;08&#160;<br/>
ADC&#160;#$08&#160;<br/>
If&#160;more&#160;than&#160;7&#160;bits&#160;of&#160;shift&#160;<br/>
DC56&#160;<br/>
30&#160;E8&#160;<br/>
BMI&#160;$DC40&#160;<br/>
still&#160;required&#160;then&#160;go&#160;round&#160;<br/>
DC58&#160;<br/>
F0&#160;E6&#160;<br/>
BEQ&#160;$DC40&#160;<br/>
again.&#160;<br/>
DC5A&#160;<br/>
E9&#160;08&#160;<br/>
SBC&#160;#$08&#160;<br/>
Re-adjust&#160;counter.&#160;<br/>
DC5C&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
DC5D&#160;<br/>
A5&#160;DF&#160;<br/>
LDA&#160;$DF&#160;<br/>
DC5F&#160;<br/>
B0&#160;14&#160;<br/>
BCS&#160;$DC75&#160;<br/>
DC61&#160;<br/>
16&#160;01&#160;<br/>
ASL&#160;$01,X&#160;<br/>
Shift&#160;each&#160;bit&#160;of&#160;the&#160;mantissa&#160;<br/>
DC63&#160;<br/>
90&#160;02&#160;<br/>
BCC&#160;$DC67&#160;<br/>
one&#160;bit&#160;to&#160;the&#160;right.&#160;Keep&#160;the&#160;<br/>
DC65&#160;<br/>
F6&#160;01&#160;<br/>
INC&#160;$01,X&#160;<br/>
sign&#160;in&#160;the&#160;top&#160;bit&#160;of&#160;the&#160;<br/>
DC67&#160;<br/>
76&#160;01&#160;<br/>
ROR&#160;$01,X&#160;<br/>
most&#160;significant&#160;byte&#160;of&#160;the&#160;<br/>
DC69&#160;<br/>
76&#160;01&#160;<br/>
ROR&#160;$01,X&#160;<br/>
mantissa.&#160;<br/>
DC6B&#160;<br/>
76&#160;02&#160;<br/>
ROR&#160;$02,X&#160;<br/>
DC6D&#160;<br/>
76&#160;03&#160;<br/>
ROR&#160;$03,X&#160;<br/>
DC6F&#160;<br/>
76&#160;04&#160;<br/>
ROR&#160;$04,X&#160;<br/>
DC71&#160;<br/>
6A&#160;<br/>
ROR&#160;A&#160;<br/>
DC72&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
Repeat&#160;until&#160;correct&#160;number&#160;of&#160;<br/>
DC73&#160;<br/>
D0&#160;EC&#160;<br/>
BNE&#160;$DC61&#160;<br/>
bit&#160;shifts&#160;have&#160;taken&#160;place.&#160;<br/>
DC75&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
DC76&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
Exit.&#160;<br/>
&#160;<br/>DC77&#160;<br/>
82&#160;13&#160;5D&#160;8D&#160;DE&#160;<br/>
LN(10)&#160;F1oating&#160;point&#160;numbers&#160;for&#160;use&#160;<br/>
DC7C&#160;<br/>
82&#160;49&#160;0F&#160;DA&#160;9E&#160;<br/>
PI&#160;&#160;&#160;&#160;&#160;by&#160;numeric&#160;functions.&#160;<br/>
DC81&#160;<br/>
81&#160;00&#160;00&#160;00&#160;00&#160;<br/>
1.0&#160;<br/>
DC86&#160;<br/>
03&#160;<br/>
&#160;<br/>DC87&#160;<br/>
7F&#160;5E&#160;56&#160;CB&#160;79&#160;<br/>
Data&#160;for&#160;the&#160;Log&#160;series.&#160;<br/>
DC8C&#160;<br/>
80&#160;13&#160;9B&#160;0B&#160;64&#160;<br/>
DC91&#160;<br/>
80&#160;76&#160;38&#160;93&#160;16&#160;<br/>
DC96&#160;<br/>
82&#160;38&#160;AA&#160;3B&#160;20&#160;<br/>
DC9B&#160;<br/>
80&#160;35&#160;04&#160;F3&#160;34&#160;<br/>
SQR(.5)&#160;More&#160;floating&#160;point&#160;numbers.&#160;<br/>
DCA0&#160;<br/>
81&#160;35&#160;04&#160;F3&#160;34&#160;<br/>
SQR(2)&#160;<br/>
DCA5&#160;<br/>
80&#160;80&#160;00&#160;00&#160;00&#160;<br/>
-0.5&#160;<br/>
DCAA&#160;<br/>
80&#160;31&#160;72&#160;17&#160;F8&#160;<br/>
LN(2)&#160;<br/>
&#160;<br/>DCAF&#160;<br/>
20&#160;13&#160;DF&#160;<br/>
JSR&#160;$DF13&#160;<br/>
<b>LN</b>&#160;Test&#160;main&#160;FPA.&#160;<br/>
DCB2&#160;<br/>
F0&#160;02&#160;<br/>
BEQ&#160;$DCB6&#160;<br/>
Give&#160;error&#160;if&#160;zero.&#160;<br/>
DCB4&#160;<br/>
10&#160;03&#160;<br/>
BPL&#160;$DCB9&#160;<br/>
Give&#160;error&#160;if&#160;negative.&#160;<br/>
DCB6&#160;<br/>
4C&#160;36&#160;D3&#160;<br/>
JMP&#160;$D336&#160;<br/>
Print&#160;&#34;ILLEGAL&#160;QUANTITY&#160;ERR.&#34;.&#160;<br/>
DCB9&#160;<br/>
A5&#160;D0&#160;<br/>
LDA&#160;$D0&#160;<br/>
DCBB&#160;<br/>
E9&#160;7F&#160;<br/>
SBC&#160;#$7F&#160;<br/>
DCBD&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
Save&#160;signed&#160;binary&#160;exponent.&#160;<br/>
DCBE&#160;<br/>
A9&#160;80&#160;<br/>
LDA&#160;#$80&#160;<br/>
Set&#160;exponent&#160;to&#160;+0.&#160;<br/>
DCC0&#160;<br/>
85&#160;D0&#160;<br/>
STA&#160;$D0&#160;<br/>
DCC2&#160;<br/>
A9&#160;9B&#160;<br/>
LDA&#160;#$9B&#160;<br/>
DCC4&#160;<br/>
A0&#160;DC&#160;<br/>
LDY&#160;#$DC&#160;<br/>
DCC6&#160;<br/>
20&#160;22&#160;DB&#160;<br/>
JSR&#160;$DB22&#160;<br/>
Add&#160;SQR(.5)&#160;to&#160;number.&#160;<br/>
DCC9&#160;<br/>
A9&#160;A0&#160;<br/>
LDA&#160;#$A0&#160;<br/>
DCCB&#160;<br/>
A0&#160;DC&#160;<br/>
LDY&#160;#$DC&#160;<br/>
DCCD&#160;<br/>
20&#160;E4&#160;DD&#160;<br/>
JSR&#160;$DDE4&#160;<br/>
Divide&#160;number&#160;into&#160;SQR(2).&#160;<br/>
DCD0&#160;<br/>
A9&#160;81&#160;<br/>
LDA&#160;#$81&#160;<br/>
Pag&#160;&#160;e&#160;56&#160;<br/>
<hr/>
<a name=57></a>DCD2&#160;<br/>
A0&#160;DC&#160;<br/>
LDY&#160;#$DC&#160;<br/>
DCD4&#160;<br/>
20&#160;0B&#160;DB&#160;<br/>
JSR&#160;$DB0B&#160;<br/>
Subtract&#160;from&#160;1.&#160;<br/>
DCD7&#160;<br/>
A9&#160;86&#160;<br/>
LDA&#160;#$86&#160;<br/>
DCD9&#160;<br/>
A0&#160;DC&#160;<br/>
LDY&#160;#$DC&#160;<br/>
DCDB&#160;<br/>
20&#160;FD&#160;E2&#160;<br/>
JSR&#160;$E2FD&#160;<br/>
Evaluate&#160;LN&#160;series.&#160;<br/>
DCDE&#160;<br/>
A9&#160;A5&#160;<br/>
LDA&#160;#$A5&#160;<br/>
DCE0&#160;<br/>
A0&#160;DC&#160;<br/>
LDY&#160;#$DC&#160;<br/>
DCE2&#160;<br/>
20&#160;22&#160;DB&#160;<br/>
JSR&#160;$DB22&#160;<br/>
Add&#160;-0.5.&#160;<br/>
DCE5&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Get&#160;exponent.&#160;<br/>
DCE6&#160;<br/>
20&#160;76&#160;E0&#160;<br/>
JSR&#160;$E076&#160;<br/>
Add&#160;A&#160;to&#160;main&#160;FPA.&#160;<br/>
DCE9&#160;<br/>
A9&#160;AA&#160;<br/>
LDA&#160;#$AA&#160;<br/>
DCEB&#160;<br/>
A0&#160;DC&#160;<br/>
LDY&#160;#$DC&#160;<br/>
Point&#160;A,&#160;Y&#160;to&#160;LN(2).&#160;<br/>
DCED&#160;<br/>
20&#160;51&#160;DD&#160;<br/>
JSR&#160;$DD51&#160;<br/>
Unpack&#160;work&#160;FPA.&#160;<br/>
DCF0&#160;<br/>
D0&#160;03&#160;<br/>
BNE&#160;$DCF5&#160;<br/>
<b>*</b>&#160;OPERATOR.&#160;<br/>
DCF2&#160;<br/>
4C&#160;50&#160;DD&#160;<br/>
JMP&#160;$DD50&#160;<br/>
Exit&#160;if&#160;work&#160;FPA&#160;is&#160;zero.&#160;<br/>
DCF5&#160;<br/>
20&#160;7C&#160;DD&#160;<br/>
JSR&#160;$DD7C&#160;<br/>
Check&#160;&amp;&#160;set&#160;up&#160;exponents.&#160;<br/>
DCF8&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
Clear&#160;work&#160;area.&#160;<br/>
DCFA&#160;<br/>
85&#160;95&#160;<br/>
STA&#160;$95&#160;<br/>
DCFC&#160;<br/>
85&#160;96&#160;<br/>
STA&#160;$96&#160;<br/>
DCFE&#160;<br/>
85&#160;97&#160;<br/>
STA&#160;$97&#160;<br/>
DD00&#160;<br/>
85&#160;98&#160;<br/>
STA&#160;$98&#160;<br/>
DD02&#160;<br/>
A5&#160;DF&#160;<br/>
LDA&#160;$DF&#160;<br/>
Multiply&#160;using&#160;rounding&#160;byte.&#160;<br/>
DD04&#160;<br/>
20&#160;1E&#160;DD&#160;<br/>
JSR&#160;$DD1E&#160;<br/>
DD07&#160;<br/>
A5&#160;D4&#160;<br/>
LDA&#160;$D4&#160;<br/>
Multiply&#160;using&#160;LSB&#160;of&#160;<br/>
DD09&#160;<br/>
20&#160;1E&#160;DD&#160;<br/>
JSR&#160;$DD1E&#160;<br/>
mantissa.&#160;<br/>
DD0C&#160;<br/>
A5&#160;D3&#160;<br/>
LDA&#160;$D3&#160;<br/>
Multiply&#160;using&#160;next&#160;LSB&#160;of&#160;<br/>
DD0E&#160;<br/>
20&#160;1E&#160;DD&#160;<br/>
JSR&#160;$DD1E&#160;<br/>
mantissa.&#160;<br/>
DD11&#160;<br/>
A5&#160;D2&#160;<br/>
LDA&#160;$D2&#160;<br/>
Multiply&#160;using&#160;next&#160;LSB&#160;of&#160;<br/>
DD13&#160;<br/>
20&#160;1E&#160;DD&#160;<br/>
JSR&#160;$DD1E&#160;<br/>
mantissa.&#160;<br/>
DD16&#160;<br/>
A5&#160;D1&#160;<br/>
LDA&#160;$D1&#160;<br/>
Multiply&#160;using&#160;MSB&#160;of&#160;the&#160;<br/>
DD18&#160;<br/>
20&#160;23&#160;DD&#160;<br/>
JSR&#160;$DD23&#160;<br/>
mantissa.&#160;<br/>
DD1B&#160;<br/>
4C&#160;64&#160;DE&#160;<br/>
JMP&#160;$DE64&#160;<br/>
Transfer&#160;to&#160;main&#160;FPA&#160;&amp;&#160;exit.&#160;<br/>
DD1E&#160;<br/>
D0&#160;03&#160;<br/>
BNE&#160;$DD23&#160;<br/>
If&#160;byte&#160;is&#160;zero&#160;then&#160;shift&#160;up&#160;<br/>
DD20&#160;<br/>
4C&#160;3E&#160;DC&#160;<br/>
JMP&#160;$DC3E&#160;<br/>
work&#160;area&#160;by&#160;8&#160;bits.&#160;<br/>
&#160;<br/>DD23&#160;<br/>
4A&#160;<br/>
LSR&#160;A&#160;<br/>
Set&#160;dummy&#160;bit&#160;to&#160;keep&#160;shifting&#160;<br/>
DD24&#160;<br/>
09&#160;80&#160;<br/>
ORA&#160;#$80&#160;<br/>
DD26&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
Save&#160;control&#160;byte.&#160;<br/>
DD27&#160;<br/>
90&#160;19&#160;<br/>
BCC&#160;$DD42&#160;<br/>
DD29&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
DD2A&#160;<br/>
A5&#160;98&#160;<br/>
LDA&#160;$98&#160;<br/>
DD2C&#160;<br/>
65&#160;DC&#160;<br/>
ADC&#160;$DC&#160;<br/>
Add&#160;LSBs.&#160;<br/>
DD2E&#160;<br/>
85&#160;98&#160;<br/>
STA&#160;$98&#160;<br/>
DD30&#160;<br/>
A5&#160;97&#160;<br/>
LDA&#160;$97&#160;<br/>
Do&#160;next&#160;LSBs.&#160;<br/>
DD32&#160;<br/>
65&#160;DB&#160;<br/>
ADC&#160;$DB&#160;<br/>
DD34&#160;<br/>
85&#160;97&#160;<br/>
STA&#160;$97&#160;<br/>
DD36&#160;<br/>
A5&#160;96&#160;<br/>
LDA&#160;$96&#160;<br/>
Do&#160;next&#160;LSBs.&#160;<br/>
DD38&#160;<br/>
65&#160;DA&#160;<br/>
ADC&#160;$DA&#160;<br/>
DD3A&#160;<br/>
85&#160;96&#160;<br/>
STA&#160;$96&#160;<br/>
DD3C&#160;<br/>
A5&#160;95&#160;<br/>
LDA&#160;$95&#160;<br/>
Do&#160;MSBs.&#160;<br/>
DD3E&#160;<br/>
65&#160;D9&#160;<br/>
ADC&#160;$D9&#160;<br/>
DD40&#160;<br/>
85&#160;95&#160;<br/>
STA&#160;$95&#160;<br/>
DD42&#160;<br/>
66&#160;95&#160;<br/>
ROR&#160;$95&#160;<br/>
Shift&#160;work&#160;area&#160;down&#160;by&#160;1&#160;bit.&#160;<br/>
DD44&#160;<br/>
66&#160;96&#160;<br/>
ROR&#160;$96&#160;<br/>
DD46&#160;<br/>
66&#160;97&#160;<br/>
ROR&#160;$97&#160;<br/>
DD48&#160;<br/>
66&#160;98&#160;<br/>
ROR&#160;$98&#160;<br/>
DD4A&#160;<br/>
66&#160;DF&#160;<br/>
ROR&#160;$DF&#160;<br/>
DD4C&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
Restore&#160;control&#160;byte&#160;and&#160;shift&#160;<br/>
DD4D&#160;<br/>
4A&#160;<br/>
LSR&#160;A&#160;<br/>
out&#160;1&#160;bit.&#160;<br/>
DD4E&#160;<br/>
D0&#160;D6&#160;<br/>
BNE&#160;$DD26&#160;<br/>
Loop&#160;again&#160;if&#160;not&#160;finished.&#160;<br/>
DD50&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>DD51&#160;<br/>
85&#160;91&#160;<br/>
STA&#160;$91&#160;<br/>
<b>UNPACK&#160;WORK&#160;FPA&#160;FROM&#160;MEMORY.</b>&#160;<br/>
DD53&#160;<br/>
84&#160;92&#160;<br/>
STY&#160;$92&#160;<br/>
Save&#160;pointer&#160;to&#160;variable.&#160;<br/>
Pag&#160;&#160;e&#160;57&#160;<br/>
<hr/>
<a name=58></a>DD55&#160;<br/>
A0&#160;04&#160;<br/>
LDY&#160;#$04&#160;<br/>
DD57&#160;<br/>
B1&#160;91&#160;<br/>
LDA&#160;($91),Y&#160;<br/>
Set&#160;up&#160;LSB.&#160;<br/>
DD59&#160;<br/>
85&#160;DC&#160;<br/>
STA&#160;$DC&#160;<br/>
DD5B&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
DD5C&#160;<br/>
B1&#160;91&#160;<br/>
LDA&#160;($91),Y&#160;<br/>
Set&#160;up&#160;next&#160;LSB.&#160;<br/>
DD5E&#160;<br/>
85&#160;DB&#160;<br/>
STA&#160;$DB&#160;<br/>
DD60&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
DD61&#160;<br/>
B1&#160;91&#160;<br/>
LDA&#160;($91),Y&#160;<br/>
Set&#160;up&#160;next&#160;LSB.&#160;<br/>
DD63&#160;<br/>
85&#160;DA&#160;<br/>
STA&#160;$DA&#160;<br/>
DD65&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
DD66&#160;<br/>
B1&#160;91&#160;<br/>
LDA&#160;($91),Y&#160;<br/>
Set&#160;up&#160;sign&#160;byte.&#160;<br/>
DD68&#160;<br/>
85&#160;DD&#160;<br/>
STA&#160;$DD&#160;<br/>
DD6A&#160;<br/>
45&#160;D5&#160;<br/>
EOR&#160;$D5&#160;<br/>
DD6C&#160;<br/>
85&#160;DE&#160;<br/>
STA&#160;$DE&#160;<br/>
Set&#160;sign&#160;difference&#160;byte.&#160;<br/>
DD6E&#160;<br/>
A5&#160;DD&#160;<br/>
LDA&#160;$DD&#160;<br/>
DD70&#160;<br/>
09&#160;80&#160;<br/>
ORA&#160;#$80&#160;<br/>
DD72&#160;<br/>
85&#160;D9&#160;<br/>
STA&#160;$D9&#160;<br/>
Set&#160;up&#160;MSB.&#160;<br/>
DD74&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
DD75&#160;<br/>
B1&#160;91&#160;<br/>
LDA&#160;($91),Y&#160;<br/>
Set&#160;up&#160;exponent.&#160;<br/>
DD77&#160;<br/>
85&#160;D8&#160;<br/>
STA&#160;$D8&#160;<br/>
DD79&#160;<br/>
A5&#160;D0&#160;<br/>
LDA&#160;$D0&#160;<br/>
Get&#160;exponent&#160;of&#160;main&#160;FPA&#160;and&#160;<br/>
DD7B&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
exit.&#160;<br/>
DD7C&#160;<br/>
A5&#160;D8&#160;<br/>
LDA&#160;$D8&#160;<br/>
Check&#160;&amp;&#160;set&#160;exponents&#160;for&#160;<br/>
DD7E&#160;<br/>
F0&#160;1F&#160;<br/>
BEQ&#160;$DD9F&#160;<br/>
If&#160;work&#160;FPA&#160;is&#160;zero&#160;then&#160;exit.&#160;<br/>
DD80&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
DD81&#160;<br/>
65&#160;D0&#160;<br/>
ADC&#160;$D0&#160;<br/>
Add&#160;other&#160;exponent&#160;byte.&#160;<br/>
DD83&#160;<br/>
90&#160;04&#160;<br/>
BCC&#160;$DD89&#160;<br/>
Handle&#160;under/overflow.&#160;<br/>
DD85&#160;<br/>
30&#160;1D&#160;<br/>
BMI&#160;$DDA4&#160;<br/>
DD87&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
DD88&#160;<br/>
2C&#160;10&#160;14&#160;<br/>
BIT&#160;$1410&#160;<br/>
DD8B&#160;<br/>
69&#160;80&#160;<br/>
ADC&#160;#$80&#160;<br/>
Set&#160;proper&#160;offset&#160;80&#160;format&#160;<br/>
DD8D&#160;<br/>
85&#160;D0&#160;<br/>
STA&#160;$D0&#160;<br/>
for&#160;exponent.&#160;<br/>
DD8F&#160;<br/>
D0&#160;03&#160;<br/>
BNE&#160;$DD94&#160;<br/>
If&#160;exponent&#160;is&#160;zero&#160;then&#160;clear&#160;<br/>
DD91&#160;<br/>
4C&#160;B6&#160;DB&#160;<br/>
JMP&#160;$DBB6&#160;<br/>
Founding&#160;byte&#160;and&#160;exit.&#160;<br/>
&#160;<br/>DD94&#160;<br/>
A5&#160;DE&#160;<br/>
LDA&#160;$DE&#160;<br/>
Set&#160;sign&#160;to&#160;sign&#160;difference&#160;<br/>
DD96&#160;<br/>
85&#160;D5&#160;<br/>
STA&#160;$D5&#160;<br/>
byte.&#160;<br/>
DD98&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>DD99&#160;<br/>
A5&#160;D5&#160;<br/>
LDA&#160;$D5&#160;<br/>
DD9B&#160;<br/>
49&#160;FF&#160;<br/>
EOR&#160;#$FF&#160;<br/>
If&#160;non&#160;zero&#160;then&#160;give&#160;error.&#160;<br/>
DD9D&#160;<br/>
30&#160;05&#160;<br/>
BMI&#160;$DDA4&#160;<br/>
DD9F&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Pull&#160;return&#160;address&#160;off&#160;stack.&#160;<br/>
DDA0&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
DDA1&#160;<br/>
4C&#160;B2&#160;DB&#160;<br/>
JMP&#160;$DBB2&#160;<br/>
Set&#160;main&#160;FPA&#160;to&#160;0&#160;and&#160;exit.&#160;<br/>
&#160;<br/>DDA4&#160;<br/>
4C&#160;39&#160;DC&#160;<br/>
JMP&#160;$DC39&#160;<br/>
Print&#160;&#34;OVERFLOW&#160;ERROR&#34;.&#160;<br/>
&#160;<br/>DDA7&#160;<br/>
20&#160;E5&#160;DE&#160;<br/>
JSR&#160;$DEE5&#160;<br/>
<b>MULTIPLY&#160;MAIN&#160;FPA&#160;BY&#160;10.</b>&#160;<br/>
DDAA&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
Copy&#160;main&#160;FPA&#160;into&#160;work&#160;FPA.&#160;<br/>
DDAB&#160;<br/>
F0&#160;10&#160;<br/>
BEQ&#160;$DDBD&#160;<br/>
Number&#160;is&#160;zero.&#160;<br/>
DDAD&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
Multiply&#160;by&#160;4&#160;by&#160;adding&#160;2&#160;to&#160;<br/>
DDAE&#160;<br/>
69&#160;02&#160;<br/>
ADC&#160;#$02&#160;<br/>
the&#160;exponent.&#160;<br/>
DDB0&#160;<br/>
B0&#160;F2&#160;<br/>
BCS&#160;$DDA4&#160;<br/>
Error&#160;if&#160;too&#160;large.&#160;<br/>
DDB2&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
DDB4&#160;<br/>
86&#160;DE&#160;<br/>
STX&#160;$DE&#160;<br/>
DDB6&#160;<br/>
20&#160;32&#160;DB&#160;<br/>
JSR&#160;$DB32&#160;<br/>
Add&#160;in&#160;original&#160;number.&#160;<br/>
DDB9&#160;<br/>
E6&#160;D0&#160;<br/>
INC&#160;$D0&#160;<br/>
Double&#160;result.&#160;<br/>
DDBB&#160;<br/>
F0&#160;E7&#160;<br/>
BEQ&#160;$DDA4&#160;<br/>
Error&#160;if&#160;exponent&#160;too&#160;big.&#160;<br/>
DDBD&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>DD6E&#160;<br/>
84&#160;20&#160;00&#160;00&#160;00&#160;<br/>
Floating&#160;point&#160;number&#160;-&#160;10.&#160;<br/>
&#160;<br/>DDC3&#160;<br/>
20&#160;E5&#160;DE&#160;<br/>
JSR&#160;$DEE5&#160;<br/>
<b>DIVIDE&#160;MAIN&#160;FPA&#160;BY&#160;10.</b>&#160;<br/>
Pag&#160;&#160;e&#160;58&#160;<br/>
<hr/>
<a name=59></a>DDC6&#160;<br/>
A9&#160;BE&#160;<br/>
LDA&#160;#$BE&#160;<br/>
Copy&#160;main&#160;FPA&#160;to&#160;work&#160;FPA.&#160;<br/>
DDC8&#160;<br/>
A0&#160;DD&#160;<br/>
LDY&#160;#$DD&#160;<br/>
Point&#160;to&#160;the&#160;number&#160;10.&#160;<br/>
DDCA&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
DDCC&#160;<br/>
86&#160;DE&#160;<br/>
STX&#160;$DE&#160;<br/>
Clear&#160;sign&#160;difference&#160;byte.&#160;<br/>
DDCE&#160;<br/>
20&#160;7B&#160;DE&#160;<br/>
JSR&#160;$DE7B&#160;<br/>
Unpack&#160;number&#160;pointed&#160;to.&#160;<br/>
DDD1&#160;<br/>
4C&#160;E7&#160;DD&#160;<br/>
JMP&#160;$DDE7&#160;<br/>
Divide&#160;numbers.&#160;<br/>
&#160;<br/>DDD4&#160;<br/>
20&#160;AF&#160;DC&#160;<br/>
JSR&#160;$DCAF&#160;<br/>
<b>LOG</b>&#160;Find&#160;LN&#160;of&#160;number.&#160;<br/>
DDD7&#160;<br/>
20&#160;E5&#160;DE&#160;<br/>
JSR&#160;$DEE5&#160;<br/>
Copy&#160;main&#160;FPA&#160;into&#160;work&#160;FPA.&#160;<br/>
DDDA&#160;<br/>
A9&#160;77&#160;<br/>
LDA&#160;#$77&#160;<br/>
DDDC&#160;<br/>
A0&#160;DC&#160;<br/>
LDY&#160;#$DC&#160;<br/>
Point&#160;to&#160;conversion&#160;factor.&#160;<br/>
DDDE&#160;<br/>
20&#160;7B&#160;DE&#160;<br/>
JSR&#160;$DE7B&#160;<br/>
Unpack&#160;number&#160;pointed&#160;to.&#160;<br/>
DDE1&#160;<br/>
4C&#160;E7&#160;DD&#160;<br/>
JMP&#160;$DDE7&#160;<br/>
Divide&#160;to&#160;get&#160;correct&#160;result.&#160;<br/>
&#160;<br/>DDE4&#160;<br/>
20&#160;51&#160;DD&#160;<br/>
JSR&#160;$DD51&#160;<br/>
Unpack&#160;work&#160;FPA&#160;from&#160;memory.&#160;<br/>
DDE7&#160;<br/>
F0&#160;76&#160;<br/>
BEQ&#160;$DE5F&#160;<br/>
<b>/</b>&#160;OPERATOR.&#160;<br/>
DDE9&#160;<br/>
20&#160;F4&#160;DE&#160;<br/>
JSR&#160;$DEF4&#160;<br/>
Round&#160;main&#160;FPA.&#160;<br/>
DDEC&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
Negate&#160;exponent&#160;of&#160;main&#160;FPA.&#160;<br/>
DDEE&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
DDEF&#160;<br/>
E5&#160;D0&#160;<br/>
SBC&#160;$D0&#160;<br/>
DDF1&#160;<br/>
85&#160;D0&#160;<br/>
STA&#160;$D0&#160;<br/>
DDF3&#160;<br/>
20&#160;7C&#160;DD&#160;<br/>
JSR&#160;$DD7C&#160;<br/>
Check&#160;and&#160;set&#160;up&#160;exponents.&#160;<br/>
DDF6&#160;<br/>
E6&#160;D0&#160;<br/>
INC&#160;$D0&#160;<br/>
Adjust&#160;exponent.&#160;<br/>
DDF8&#160;<br/>
F0&#160;AA&#160;<br/>
BEQ&#160;$DDA4&#160;<br/>
Error&#160;if&#160;too&#160;big.&#160;<br/>
DDFA&#160;<br/>
A2&#160;FC&#160;<br/>
LDX&#160;#$FC&#160;<br/>
Loop&#160;count.&#160;<br/>
DDFC&#160;<br/>
A9&#160;01&#160;<br/>
LDA&#160;#$01&#160;<br/>
Terminator&#160;bit.&#160;<br/>
DDFE&#160;<br/>
A4&#160;D9&#160;<br/>
LDY&#160;$D9&#160;<br/>
Compare&#160;main&#160;mantissa&#160;with&#160;<br/>
DE00&#160;<br/>
C4&#160;D1&#160;<br/>
CPY&#160;$D1&#160;<br/>
that&#160;of&#160;work&#160;FPA.&#160;<br/>
DE02&#160;<br/>
D0&#160;10&#160;<br/>
BNE&#160;$DE14&#160;<br/>
DE04&#160;<br/>
A4&#160;DA&#160;<br/>
LDY&#160;$DA&#160;<br/>
DE06&#160;<br/>
C4&#160;D2&#160;<br/>
CPY&#160;$D2&#160;<br/>
DE08&#160;<br/>
D0&#160;0A&#160;<br/>
BNE&#160;$DE14&#160;<br/>
DE0A&#160;<br/>
A4&#160;DB&#160;<br/>
LDY&#160;$DB&#160;<br/>
DE0C&#160;<br/>
C4&#160;D3&#160;<br/>
CPY&#160;$D3&#160;<br/>
DE0E&#160;<br/>
D0&#160;04&#160;<br/>
BNE&#160;$DE14&#160;<br/>
DE10&#160;<br/>
A4&#160;DC&#160;<br/>
LDY&#160;$DC&#160;<br/>
DE12&#160;<br/>
C4&#160;D4&#160;<br/>
CPY&#160;$D4&#160;<br/>
DE14&#160;<br/>
08&#160;<br/>
PHP&#160;<br/>
Save&#160;flags.&#160;<br/>
DE15&#160;<br/>
2A&#160;<br/>
ROL&#160;A&#160;<br/>
If&#160;not&#160;finished&#160;then&#160;don't&#160;<br/>
DE16&#160;<br/>
90&#160;09&#160;<br/>
BCC&#160;$DE21&#160;<br/>
save&#160;it.&#160;<br/>
DE18&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
Save&#160;in&#160;workspace.&#160;<br/>
DE19&#160;<br/>
95&#160;98&#160;<br/>
STA&#160;$98,X&#160;<br/>
DE1B&#160;<br/>
F0&#160;32&#160;<br/>
BEQ&#160;$DE4F&#160;<br/>
Set&#160;terminator&#160;bit&#160;on&#160;last&#160;loop.&#160;<br/>
DE1D&#160;<br/>
10&#160;34&#160;<br/>
BPL&#160;$DE53&#160;<br/>
Finished.&#160;<br/>
DE1F&#160;<br/>
A9&#160;01&#160;<br/>
LDA&#160;#$01&#160;<br/>
Set&#160;terminator&#160;bit.&#160;<br/>
DE21&#160;<br/>
28&#160;<br/>
PLP&#160;<br/>
Restore&#160;flags.&#160;<br/>
DE22&#160;<br/>
B0&#160;0E&#160;<br/>
BCS&#160;$DE32&#160;<br/>
Subtract&#160;if&#160;work&#160;&gt;&#160;main&#160;FPA.&#160;<br/>
DE24&#160;<br/>
06&#160;DC&#160;<br/>
ASL&#160;$DC&#160;<br/>
Shift&#160;up&#160;mantissa&#160;of&#160;work&#160;FPA.&#160;<br/>
DE26&#160;<br/>
26&#160;DB&#160;<br/>
ROL&#160;$DB&#160;<br/>
DE28&#160;<br/>
26&#160;DA&#160;<br/>
ROL&#160;$DA&#160;<br/>
DE2A&#160;<br/>
26&#160;D9&#160;<br/>
ROL&#160;$D9&#160;<br/>
Do&#160;subtraction&#160;if&#160;bit&#160;has&#160;<br/>
DE2C&#160;<br/>
B0&#160;E6&#160;<br/>
BCS&#160;$DE14&#160;<br/>
shifted&#160;out.&#160;<br/>
DE2E&#160;<br/>
30&#160;CE&#160;<br/>
BMI&#160;$DDFE&#160;<br/>
Do&#160;compare&#160;if&#160;top&#160;bit&#160;set.&#160;<br/>
DE30&#160;<br/>
10&#160;E2&#160;<br/>
BPL&#160;$DE14&#160;<br/>
Jump&#160;back.&#160;<br/>
DE32&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
Save&#160;A.&#160;<br/>
DE33&#160;<br/>
A5&#160;DC&#160;<br/>
LDA&#160;$DC&#160;<br/>
Subtract&#160;main&#160;FPA&#160;from&#160;work&#160;<br/>
DE35&#160;<br/>
E5&#160;D4&#160;<br/>
SBC&#160;$D4&#160;<br/>
FPA.&#160;<br/>
DE37&#160;<br/>
85&#160;DC&#160;<br/>
STA&#160;$DC&#160;<br/>
DE39&#160;<br/>
A5&#160;DB&#160;<br/>
LDA&#160;$DB&#160;<br/>
DE3B&#160;<br/>
E5&#160;D3&#160;<br/>
SBC&#160;$D3&#160;<br/>
DE3D&#160;<br/>
85&#160;DB&#160;<br/>
STA&#160;$DB&#160;<br/>
DE3F&#160;<br/>
A5&#160;DA&#160;<br/>
LDA&#160;$DA&#160;<br/>
DE41&#160;<br/>
E5&#160;D2&#160;<br/>
SBC&#160;$D2&#160;<br/>
DE43&#160;<br/>
85&#160;DA&#160;<br/>
STA&#160;$DA&#160;<br/>
Pag&#160;&#160;e&#160;59&#160;<br/>
<hr/>
<a name=60></a>DE45&#160;<br/>
A5&#160;D9&#160;<br/>
LDA&#160;$D9&#160;<br/>
DE47&#160;<br/>
E5&#160;D1&#160;<br/>
SBC&#160;$D1&#160;<br/>
DE49&#160;<br/>
85&#160;D9&#160;<br/>
STA&#160;$D9&#160;<br/>
DE4B&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
Restore&#160;A.&#160;<br/>
DE4C&#160;<br/>
4C&#160;24&#160;DE&#160;<br/>
JMP&#160;$DE24&#160;<br/>
Jump&#160;back&#160;into&#160;loop.&#160;<br/>
DE4F&#160;<br/>
A9&#160;40&#160;<br/>
LDA&#160;#$40&#160;<br/>
Set&#160;terminator&#160;bit&#160;for&#160;final&#160;<br/>
DE51&#160;<br/>
D0&#160;CE&#160;<br/>
BNE&#160;$DE21&#160;<br/>
loop&#160;and&#160;jump&#160;back&#160;into&#160;loop.&#160;<br/>
DE53&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
Get&#160;bits&#160;into&#160;top&#160;2&#160;bits&#160;of&#160;<br/>
DE54&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
rounding&#160;byte.&#160;<br/>
DE55&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
DE56&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
DE57&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
DE58&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
DE59&#160;<br/>
85&#160;DF&#160;<br/>
STA&#160;$DF&#160;<br/>
Store&#160;rounding&#160;byte.&#160;<br/>
DE5B&#160;<br/>
28&#160;<br/>
PLP&#160;<br/>
Remove&#160;flag&#160;from&#160;stack&#160;and&#160;<br/>
DE5C&#160;<br/>
4C&#160;64&#160;DE&#160;<br/>
JMP&#160;$DE64&#160;<br/>
transfer&#160;result&#160;to&#160;main&#160;FPA.&#160;<br/>
&#160;<br/>DE5F&#160;<br/>
A2&#160;85&#160;<br/>
LDX&#160;#$85&#160;<br/>
Print&#160;&#34;DIVISION&#160;BY&#160;ZERO&#160;<br/>
DE61&#160;<br/>
4C&#160;7E&#160;C4&#160;<br/>
JMP&#160;$C47E&#160;<br/>
ERROR&#34;.&#160;<br/>
&#160;<br/>DE64&#160;<br/>
A5&#160;95&#160;<br/>
LDA&#160;$95&#160;<br/>
Transfer&#160;work&#160;area&#160;into&#160;main&#160;<br/>
DE66&#160;<br/>
85&#160;D1&#160;<br/>
STA&#160;$D1&#160;<br/>
FPA.&#160;<br/>
DE68&#160;<br/>
A5&#160;96&#160;<br/>
LDA&#160;$96&#160;<br/>
DE6A&#160;<br/>
85&#160;D2&#160;<br/>
STA&#160;$D2&#160;<br/>
DE6C&#160;<br/>
A5&#160;97&#160;<br/>
LDA&#160;$97&#160;<br/>
DE6E&#160;<br/>
85&#160;D3&#160;<br/>
STA&#160;$D3&#160;<br/>
DE70&#160;<br/>
A5&#160;98&#160;<br/>
LDA&#160;$98&#160;<br/>
DE72&#160;<br/>
85&#160;D4&#160;<br/>
STA&#160;$D4&#160;<br/>
DE74&#160;<br/>
4C&#160;92&#160;DB&#160;<br/>
JMP&#160;$DB92&#160;<br/>
Normalise&#160;and&#160;exit.&#160;<br/>
&#160;<br/>DE77&#160;<br/>
A9&#160;7C&#160;<br/>
LDA&#160;#$7C&#160;<br/>
<b>PI</b>&#160;Point&#160;A,&#160;Y&#160;<br/>
DE79&#160;<br/>
A0&#160;DC&#160;<br/>
LDY&#160;#$DC&#160;<br/>
PI.&#160;<br/>
DE7B&#160;<br/>
85&#160;91&#160;<br/>
STA&#160;$91&#160;<br/>
UNPACK&#160;FP&#160;NUMBER&#160;POINTED&#160;TO&#160;BY&#160;<br/>
DE7D&#160;<br/>
84&#160;92&#160;<br/>
STY&#160;$92&#160;<br/>
A,Y.&#160;<br/>
DE7F&#160;<br/>
A0&#160;04&#160;<br/>
LDY&#160;#$04&#160;<br/>
DE81&#160;<br/>
B1&#160;91&#160;<br/>
LDA&#160;($91),Y&#160;<br/>
Copy&#160;the&#160;bytes&#160;down&#160;from&#160;<br/>
DE83&#160;<br/>
85&#160;D4&#160;<br/>
STA&#160;$D4&#160;<br/>
memory&#160;starting&#160;with&#160;the&#160;LSB&#160;<br/>
DE85&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
and&#160;finishing&#160;with&#160;the&#160;MSB.&#160;<br/>
DE86&#160;<br/>
B1&#160;91&#160;<br/>
LDA&#160;($91),Y&#160;<br/>
DE88&#160;<br/>
85&#160;D3&#160;<br/>
STA&#160;$D3&#160;<br/>
DE8A&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
DE8B&#160;<br/>
B1&#160;91&#160;<br/>
LDA&#160;($91),Y&#160;<br/>
DE8D&#160;<br/>
85&#160;D2&#160;<br/>
STA&#160;$D2&#160;<br/>
DE8F&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
DE90&#160;<br/>
B1&#160;91&#160;<br/>
LDA&#160;($91),Y&#160;<br/>
Set&#160;sign&#160;byte.&#160;<br/>
DE92&#160;<br/>
85&#160;D5&#160;<br/>
STA&#160;$D5&#160;<br/>
DE94&#160;<br/>
09&#160;80&#160;<br/>
ORA&#160;#$80&#160;<br/>
DE96&#160;<br/>
85&#160;D1&#160;<br/>
STA&#160;$D1&#160;<br/>
Save&#160;MSB.&#160;<br/>
DE98&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
DE99&#160;<br/>
B1&#160;91&#160;<br/>
LDA&#160;($91),Y&#160;<br/>
Get&#160;exponent.&#160;<br/>
DE9B&#160;<br/>
85&#160;D0&#160;<br/>
STA&#160;$D0&#160;<br/>
DE9D&#160;<br/>
84&#160;DF&#160;<br/>
STY&#160;$DF&#160;<br/>
Zero&#160;the&#160;rounding&#160;byte.&#160;<br/>
DE9F&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>DEA0&#160;<br/>
A2&#160;CB&#160;<br/>
LDX&#160;#$CB&#160;<br/>
Set&#160;X&#160;to&#160;save&#160;main&#160;FPA&#160;in&#160;temp&#160;<br/>
DEA2&#160;<br/>
2C&#160;A2&#160;C6&#160;<br/>
BIT&#160;$C6A2&#160;<br/>
locations.&#160;BIT&#160;hides&#160;LDX&#160;#$C6.&#160;<br/>
DEA5&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
Set&#160;Y&#160;(MSB)&#160;and&#160;branch&#160;to&#160;main&#160;<br/>
DEA7&#160;<br/>
F0&#160;04&#160;<br/>
BEQ&#160;$DEAD&#160;<br/>
main&#160;part&#160;of&#160;routine.&#160;<br/>
DEA9&#160;<br/>
A6&#160;B8&#160;<br/>
LDX&#160;$B8&#160;<br/>
Pack&#160;FPA&#160;into&#160;memory&#160;pointed&#160;<br/>
DEAB&#160;<br/>
A4&#160;B9&#160;<br/>
LDY&#160;$B9&#160;<br/>
to&#160;by&#160;X,Y.&#160;<br/>
DEAD&#160;<br/>
20&#160;F4&#160;DE&#160;<br/>
JSR&#160;$DEF4&#160;<br/>
Round&#160;off&#160;main&#160;FPA.&#160;<br/>
DEB0&#160;<br/>
86&#160;91&#160;<br/>
STX&#160;$91&#160;<br/>
Save&#160;pointer.&#160;<br/>
DEB2&#160;<br/>
84&#160;92&#160;<br/>
STY&#160;$92&#160;<br/>
DEB4&#160;<br/>
A0&#160;04&#160;<br/>
LDY&#160;#$04&#160;<br/>
Pag&#160;&#160;e&#160;60&#160;<br/>
<hr/>
<a name=61></a>DEB6&#160;<br/>
A5&#160;D4&#160;<br/>
LDA&#160;$D4&#160;<br/>
DEB8&#160;<br/>
91&#160;91&#160;<br/>
STA&#160;($91),Y&#160;<br/>
Store&#160;LSB&#160;of&#160;mantissa&#160;in&#160;<br/>
DEBA&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
memory.&#160;<br/>
DEBB&#160;<br/>
A5&#160;D3&#160;<br/>
LDA&#160;$D3&#160;<br/>
DEBD&#160;<br/>
91&#160;91&#160;<br/>
STA&#160;($91),Y&#160;<br/>
Store&#160;next&#160;LS6.&#160;<br/>
DEBF&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
DEC0&#160;<br/>
A5&#160;D2&#160;<br/>
LDA&#160;$D2&#160;<br/>
DEC2&#160;<br/>
91&#160;91&#160;<br/>
STA&#160;($91),Y&#160;<br/>
Store&#160;next&#160;LSB.&#160;<br/>
DEC4&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
DEC5&#160;<br/>
A5&#160;D5&#160;<br/>
LDA&#160;$D5&#160;<br/>
DEC7&#160;<br/>
09&#160;7F&#160;<br/>
ORA&#160;#$7F&#160;<br/>
DEC9&#160;<br/>
25&#160;D1&#160;<br/>
AND&#160;$D1&#160;<br/>
DECB&#160;<br/>
91&#160;91&#160;<br/>
STA&#160;($91),Y&#160;<br/>
Save&#160;MSB&#160;with&#160;sign&#160;packed&#160;in.&#160;<br/>
DECD&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
DECE&#160;<br/>
A5&#160;D0&#160;<br/>
LDA&#160;$D0&#160;<br/>
DED0&#160;<br/>
91&#160;91&#160;<br/>
STA&#160;($91),Y&#160;<br/>
Save&#160;exponent.&#160;<br/>
DED2&#160;<br/>
84&#160;DF&#160;<br/>
STY&#160;$DF&#160;<br/>
DED4&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>DED5&#160;<br/>
A5&#160;DD&#160;<br/>
LDA&#160;$DD&#160;<br/>
Copy&#160;work&#160;FPA&#160;into&#160;main&#160;FPA.&#160;<br/>
DED7&#160;<br/>
85&#160;D5&#160;<br/>
STA&#160;$D5&#160;<br/>
Transfer&#160;sign&#160;byte.&#160;<br/>
DED9&#160;<br/>
A2&#160;05&#160;<br/>
LDX&#160;#$05&#160;<br/>
DEDB&#160;<br/>
B5&#160;D7&#160;<br/>
LDA&#160;$D7,X&#160;<br/>
Transfer&#160;number.&#160;<br/>
DEDD&#160;<br/>
95&#160;CF&#160;<br/>
STA&#160;$CF,X&#160;<br/>
DEDF&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
DEE0&#160;<br/>
D0&#160;F9&#160;<br/>
BNE&#160;$DEDB&#160;<br/>
DEE2&#160;<br/>
86&#160;DF&#160;<br/>
STX&#160;$DF&#160;<br/>
Set&#160;Founding&#160;byte.&#160;<br/>
DEE4&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>DEE5&#160;<br/>
20&#160;F4&#160;DE&#160;<br/>
JSR&#160;$DEF4&#160;<br/>
Copy&#160;main&#160;FPA&#160;into&#160;work&#160;FPA.&#160;<br/>
DEE8&#160;<br/>
A2&#160;06&#160;<br/>
LDX&#160;#$06&#160;<br/>
DEEA&#160;<br/>
B5&#160;CF&#160;<br/>
LDA&#160;$CF,X&#160;<br/>
Transfer&#160;bytes&#160;including&#160;the&#160;<br/>
DEEC&#160;<br/>
95&#160;D7&#160;<br/>
STA&#160;$D7,X&#160;<br/>
sign&#160;byte.&#160;<br/>
DEEE&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
DEEF&#160;<br/>
D0&#160;F9&#160;<br/>
BNE&#160;$DEEA&#160;<br/>
DEF1&#160;<br/>
86&#160;DF&#160;<br/>
STX&#160;$DF&#160;<br/>
Set&#160;rounding&#160;byte.&#160;<br/>
DEF3&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>DEF4&#160;<br/>
A5&#160;D0&#160;<br/>
LDA&#160;$D0&#160;<br/>
<b>ROUND&#160;OFF&#160;MAIN&#160;FPA.</b>&#160;<br/>
DEF6&#160;<br/>
F0&#160;FB&#160;<br/>
BEQ&#160;$DEF3&#160;<br/>
Exit&#160;if&#160;it&#160;is&#160;zero.&#160;<br/>
DEF8&#160;<br/>
06&#160;DF&#160;<br/>
ASL&#160;$DF&#160;<br/>
Exit&#160;if&#160;rounding&#160;byte&#160;is&#160;less&#160;<br/>
DEFA&#160;<br/>
90&#160;F7&#160;<br/>
BCC&#160;$DEF3&#160;<br/>
than&#160;half.&#160;<br/>
DEFC&#160;<br/>
20&#160;2A&#160;DC&#160;<br/>
JSR&#160;$DC2A&#160;<br/>
Increment&#160;mantissa.&#160;<br/>
DEFF&#160;<br/>
D0&#160;F2&#160;<br/>
BNE&#160;$DEF3&#160;<br/>
Exit&#160;if&#160;okay&#160;otherwise&#160;jump&#160;to&#160;<br/>
DF01&#160;<br/>
4C&#160;F3&#160;DB&#160;<br/>
JMP&#160;$DBF3&#160;<br/>
adjust&#160;exponent&#160;and&#160;mantissa.&#160;<br/>
&#160;<br/>DF04&#160;<br/>
20&#160;A9&#160;D2&#160;<br/>
JSR&#160;$D2A9&#160;<br/>
Convert&#160;main&#160;FPA&#160;to&#160;integer.&#160;<br/>
DF07&#160;<br/>
46&#160;D4&#160;<br/>
LSR&#160;$D4&#160;<br/>
Go&#160;to&#160;TRUE/FALSE&#160;according&#160;to&#160;<br/>
DF09&#160;<br/>
B0&#160;04&#160;<br/>
BCS&#160;$DF0F&#160;<br/>
lowest&#160;bit.&#160;<br/>
&#160;<br/>DF0B&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
<b>FALSE</b>&#160;<br/>
DF0D&#160;<br/>
F0&#160;15&#160;<br/>
BEQ&#160;$DF24&#160;<br/>
Set&#160;main&#160;FPA&#160;to&#160;0.&#160;<br/>
&#160;<br/>DF0F&#160;<br/>
A9&#160;FF&#160;<br/>
LDA&#160;#$FF&#160;<br/>
<b>TRUE</b>&#160;<br/>
DF11&#160;<br/>
30&#160;11&#160;<br/>
BMI&#160;$DF24&#160;<br/>
Set&#160;main&#160;FPA&#160;to&#160;-1&#160;<br/>
&#160;<br/>DF13&#160;<br/>
A5&#160;D0&#160;<br/>
LDA&#160;$D0&#160;<br/>
<b>GET&#160;SIGN&#160;OF&#160;MAIN&#160;FPA.</b>&#160;<br/>
DF15&#160;<br/>
F0&#160;09&#160;<br/>
BEQ&#160;$DF20&#160;<br/>
DF17&#160;<br/>
A5&#160;D5&#160;<br/>
LDA&#160;$D5&#160;<br/>
A=0&#160;if&#160;FPA&#160;is&#160;0.&#160;<br/>
DF19&#160;<br/>
2A&#160;<br/>
ROL&#160;A&#160;<br/>
A=l&#160;if&#160;FPA&#160;is&#160;+ve.&#160;<br/>
DF1A&#160;<br/>
A9&#160;FF&#160;<br/>
LDA&#160;#$FF&#160;<br/>
A=#FF&#160;if&#160;FPA&#160;is&#160;-ve.&#160;<br/>
DF1C&#160;<br/>
B0&#160;02&#160;<br/>
BCS&#160;$DF20&#160;<br/>
DF1E&#160;<br/>
A9&#160;01&#160;<br/>
LDA&#160;#$01&#160;<br/>
DF20&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
Pag&#160;&#160;e&#160;61&#160;<br/>
<hr/>
<a name=62></a>&#160;<br/>DF21&#160;<br/>
20&#160;13&#160;DF&#160;<br/>
JSR&#160;$DF13&#160;<br/>
<b>SGN</b>&#160;Get&#160;sign&#160;into&#160;A.&#160;<br/>
DF24&#160;<br/>
85&#160;D1&#160;<br/>
STA&#160;$D1&#160;<br/>
Set&#160;main&#160;FPA&#160;to&#160;signed&#160;single&#160;<br/>
DF26&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
byte&#160;in&#160;A.&#160;<br/>
DF28&#160;<br/>
85&#160;D2&#160;<br/>
STA&#160;$D2&#160;<br/>
DF2A&#160;<br/>
A2&#160;88&#160;<br/>
LDX&#160;#$88&#160;<br/>
DF2C&#160;<br/>
A5&#160;D1&#160;<br/>
LDA&#160;$D1&#160;<br/>
DF2E&#160;<br/>
49&#160;FF&#160;<br/>
EOR&#160;#$FF&#160;<br/>
DF30&#160;<br/>
2A&#160;<br/>
ROL&#160;A&#160;<br/>
DF31&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
Clear&#160;low&#160;2&#160;bytes&#160;of&#160;mantissa&#160;<br/>
DF33&#160;<br/>
85&#160;D4&#160;<br/>
STA&#160;$D4&#160;<br/>
DF35&#160;<br/>
85&#160;D3&#160;<br/>
STA&#160;$D3&#160;<br/>
DF37&#160;<br/>
86&#160;D0&#160;<br/>
STX&#160;$D0&#160;<br/>
Set&#160;exponent&#160;to&#160;X.&#160;<br/>
DF39&#160;<br/>
85&#160;DF&#160;<br/>
STA&#160;$DF&#160;<br/>
Clear&#160;sign&#160;and&#160;rounding&#160;bytes.&#160;<br/>
DF3B&#160;<br/>
85&#160;D5&#160;<br/>
STA&#160;$D5&#160;<br/>
DF3D&#160;<br/>
4C&#160;8D&#160;DB&#160;<br/>
JMP&#160;$DB8D&#160;<br/>
Normalise&#160;FPA&#160;and&#160;exit.&#160;<br/>
&#160;<br/>DF40&#160;<br/>
85&#160;D1&#160;<br/>
STA&#160;$D1&#160;<br/>
Convert&#160;2&#160;byte&#160;integer&#160;in&#160;A&#160;<br/>
DF42&#160;<br/>
84&#160;D2&#160;<br/>
STY&#160;$D2&#160;<br/>
(MSB)&#160;and&#160;Y&#160;(LSB)&#160;into&#160;<br/>
DF44&#160;<br/>
A2&#160;90&#160;<br/>
LDX&#160;#$90&#160;<br/>
floating&#160;point&#160;number.&#160;<br/>
DF46&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
Jump&#160;to&#160;clear&#160;and&#160;normalise&#160;<br/>
DF47&#160;<br/>
B0&#160;E8&#160;<br/>
BCS&#160;$DF31&#160;<br/>
rest&#160;of&#160;main&#160;FPA.&#160;<br/>
DF49&#160;<br/>
46&#160;D5&#160;<br/>
LSR&#160;$D5&#160;<br/>
ABS&#160;Clear&#160;sign&#160;bit&#160;of&#160;main&#160;<br/>
DF4B&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
FPA&#160;and&#160;exit.&#160;<br/>
&#160;<br/>DF4C&#160;<br/>
85&#160;93&#160;<br/>
STA&#160;$93&#160;<br/>
<b>COMPARE&#160;MAIN&#160;FPA&#160;WITH&#160;NUMBER</b>&#160;<br/>
DF4E&#160;<br/>
84&#160;94&#160;<br/>
STY&#160;$94&#160;<br/>
<b>IN&#160;MEMORY.</b>&#160;<br/>
DF50&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
Set&#160;pointer.&#160;<br/>
DF52&#160;<br/>
B1&#160;93&#160;<br/>
LDA&#160;($93),Y&#160;<br/>
Get&#160;exponent.&#160;<br/>
DF54&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
DF55&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
DF56&#160;<br/>
F0&#160;BB&#160;<br/>
BEQ&#160;$DF13&#160;<br/>
If&#160;zero&#160;just&#160;test&#160;FPA.&#160;<br/>
DF58&#160;<br/>
B1&#160;93&#160;<br/>
LDA&#160;($93),Y&#160;<br/>
DF5A&#160;<br/>
45&#160;D5&#160;<br/>
EOR&#160;$D5&#160;<br/>
If&#160;signs&#160;are&#160;different&#160;then&#160;<br/>
DF5C&#160;<br/>
30&#160;B9&#160;<br/>
BMI&#160;$DF17&#160;<br/>
just&#160;test&#160;FPA.&#160;<br/>
DF5E&#160;<br/>
E4&#160;D0&#160;<br/>
CPX&#160;$D0&#160;<br/>
If&#160;exponents&#160;not&#160;different&#160;<br/>
DF60&#160;<br/>
D0&#160;21&#160;<br/>
BNE&#160;$DF83&#160;<br/>
then&#160;adjust&#160;for&#160;signs&#160;&amp;&#160;exit.&#160;<br/>
DF62&#160;<br/>
B1&#160;93&#160;<br/>
LDA&#160;($93),Y&#160;<br/>
DF64&#160;<br/>
09&#160;80&#160;<br/>
ORA&#160;#$80&#160;<br/>
DF66&#160;<br/>
C5&#160;D1&#160;<br/>
CMP&#160;$D1&#160;<br/>
Test&#160;MSB&#160;of&#160;mantissa.&#160;<br/>
DF68&#160;<br/>
D0&#160;19&#160;<br/>
BNE&#160;$DF83&#160;<br/>
DF6A&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
If&#160;MSB&#160;are&#160;equal&#160;then&#160;test&#160;the&#160;<br/>
DF6B&#160;<br/>
B1&#160;93&#160;<br/>
LDA&#160;($93),Y&#160;<br/>
next&#160;MSBs&#160;and&#160;so&#160;on&#160;until&#160;the&#160;<br/>
DF6D&#160;<br/>
C5&#160;D2&#160;<br/>
CMP&#160;$D2&#160;<br/>
LSBs&#160;are&#160;reached.&#160;<br/>
DF6F&#160;<br/>
D0&#160;12&#160;<br/>
BNE&#160;$DF83&#160;<br/>
DF71&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
DF72&#160;<br/>
B1&#160;93&#160;<br/>
LDA&#160;($93),Y&#160;<br/>
DF74&#160;<br/>
C5&#160;D3&#160;<br/>
CMP&#160;$D3&#160;<br/>
DF76&#160;<br/>
D0&#160;0B&#160;<br/>
BNE&#160;$DF83&#160;<br/>
DF78&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
DF79&#160;<br/>
A9&#160;7F&#160;<br/>
LDA&#160;#$7F&#160;<br/>
Test&#160;LSBs&#160;allowing&#160;for&#160;<br/>
DF7B&#160;<br/>
C5&#160;DF&#160;<br/>
CMP&#160;$DF&#160;<br/>
rounding.&#160;<br/>
DF7D&#160;<br/>
B1&#160;93&#160;<br/>
LDA&#160;($93),Y&#160;<br/>
DF7F&#160;<br/>
E5&#160;D4&#160;<br/>
SBC&#160;$D4&#160;<br/>
DF81&#160;<br/>
F0&#160;28&#160;<br/>
BEQ&#160;$DFAB&#160;<br/>
DF83&#160;<br/>
A5&#160;D5&#160;<br/>
LDA&#160;$D5&#160;<br/>
Get&#160;sign&#160;byte,&#160;inverting&#160;if&#160;<br/>
DF85&#160;<br/>
90&#160;02&#160;<br/>
BCC&#160;$DF89&#160;<br/>
FPA&#160;&lt;&#160;memory.&#160;<br/>
DF87&#160;<br/>
49&#160;FF&#160;<br/>
EOR&#160;#$FF&#160;<br/>
DF89&#160;<br/>
4C&#160;19&#160;DF&#160;<br/>
JMP&#160;$DF19&#160;<br/>
Set&#160;A&#160;accordingly.&#160;<br/>
&#160;<br/>DF8C&#160;<br/>
A5&#160;D0&#160;<br/>
LDA&#160;$D0&#160;<br/>
<b>CONVERT&#160;MAIN&#160;FPA&#160;TO&#160;INTEGER.</b>&#160;<br/>
DF8E&#160;<br/>
F0&#160;4A&#160;<br/>
BEQ&#160;$DFDA&#160;<br/>
Number&#160;is&#160;zero.&#160;<br/>
DF90&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
Calculate&#160;number&#160;of&#160;shifts&#160;to&#160;<br/>
DF91&#160;<br/>
E9&#160;A0&#160;<br/>
SBC&#160;#$A0&#160;<br/>
the&#160;left&#160;to&#160;do.&#160;<br/>
Pag&#160;&#160;e&#160;62&#160;<br/>
<hr/>
<a name=63></a>DF93&#160;<br/>
24&#160;D5&#160;<br/>
BIT&#160;$D5&#160;<br/>
Test&#160;sign&#160;of&#160;mantissa.&#160;<br/>
DF95&#160;<br/>
10&#160;09&#160;<br/>
BPL&#160;$DFA0&#160;<br/>
Sign&#160;is&#160;positive.&#160;<br/>
DF97&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
DF98&#160;<br/>
A9&#160;FF&#160;<br/>
LDA&#160;#$FF&#160;<br/>
DF9A&#160;<br/>
85&#160;D7&#160;<br/>
STA&#160;$D7&#160;<br/>
Invert&#160;sign&#160;extend&#160;byte&#160;and&#160;<br/>
DF9C&#160;<br/>
20&#160;08&#160;DC&#160;<br/>
JSR&#160;$DC08&#160;<br/>
content&#160;of&#160;mantissa.&#160;<br/>
DF9F&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
DFA0&#160;<br/>
A2&#160;D0&#160;<br/>
LDX&#160;#$D0&#160;<br/>
DFA2&#160;<br/>
C9&#160;F9&#160;<br/>
CMP&#160;#$F9&#160;<br/>
If&#160;more&#160;than&#160;7&#160;bits&#160;of&#160;shift&#160;<br/>
DFA4&#160;<br/>
10&#160;06&#160;<br/>
BPL&#160;$DFAC&#160;<br/>
are&#160;needed&#160;then&#160;call&#160;routine&#160;<br/>
DFA6&#160;<br/>
20&#160;54&#160;DC&#160;<br/>
JSR&#160;$DC54&#160;<br/>
to&#160;shift&#160;it.&#160;<br/>
DFA9&#160;<br/>
84&#160;D7&#160;<br/>
STY&#160;$D7&#160;<br/>
Clear&#160;sign&#160;extend&#160;byte.&#160;<br/>
DFAB&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
Exit.&#160;<br/>
&#160;<br/>DFAC&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
DFAD&#160;<br/>
A5&#160;D5&#160;<br/>
LDA&#160;$D5&#160;<br/>
Shift&#160;mantissa&#160;as&#160;required.&#160;<br/>
DFAF&#160;<br/>
29&#160;80&#160;<br/>
AND&#160;#$80&#160;<br/>
DFB1&#160;<br/>
46&#160;D1&#160;<br/>
LSR&#160;$D1&#160;<br/>
DFB3&#160;<br/>
05&#160;D1&#160;<br/>
ORA&#160;$D1&#160;<br/>
DFB5&#160;<br/>
85&#160;D1&#160;<br/>
STA&#160;$D1&#160;<br/>
DFB7&#160;<br/>
20&#160;6B&#160;DC&#160;<br/>
JSR&#160;$DC6B&#160;<br/>
Perform&#160;shift.&#160;<br/>
DFBA&#160;<br/>
84&#160;D7&#160;<br/>
STY&#160;$D7&#160;<br/>
Clear&#160;sign&#160;extend&#160;byte.&#160;<br/>
DFBC&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>DFBD&#160;<br/>
A5&#160;D0&#160;<br/>
LDA&#160;$D0&#160;<br/>
<b>INT</b>&#160;<br/>
DFBF&#160;<br/>
C9&#160;A0&#160;<br/>
CMP&#160;#$A0&#160;<br/>
If&#160;number&#160;is&#160;over&#160;2A32&#160;then&#160;it&#160;<br/>
DFC1&#160;<br/>
B0&#160;20&#160;<br/>
BCS&#160;$DFE3&#160;<br/>
is&#160;integer&#160;already.&#160;<br/>
DFC3&#160;<br/>
20&#160;8C&#160;DF&#160;<br/>
JSR&#160;$DF8C&#160;<br/>
Convert&#160;to&#160;integer.&#160;<br/>
DFC6&#160;<br/>
84&#160;DF&#160;<br/>
STY&#160;$DF&#160;<br/>
Zero&#160;sign&#160;and&#160;rounding&#160;bytes.&#160;<br/>
DFC8&#160;<br/>
A5&#160;D5&#160;<br/>
LDA&#160;$D5&#160;<br/>
DFCA&#160;<br/>
84&#160;D5&#160;<br/>
STY&#160;$D5&#160;<br/>
DFCC&#160;<br/>
49&#160;80&#160;<br/>
EOR&#160;#$80&#160;<br/>
DFCE&#160;<br/>
2A&#160;<br/>
ROL&#160;A&#160;<br/>
Set&#160;carry&#160;if&#160;positive.&#160;<br/>
DFCF&#160;<br/>
A9&#160;A0&#160;<br/>
LDA&#160;#$A0&#160;<br/>
Set&#160;exponent&#160;to&#160;32.&#160;<br/>
DFD1&#160;<br/>
85&#160;D0&#160;<br/>
STA&#160;$D0&#160;<br/>
DFD3&#160;<br/>
A5&#160;D4&#160;<br/>
LDA&#160;$D4&#160;<br/>
DFD5&#160;<br/>
85&#160;24&#160;<br/>
STA&#160;$24&#160;<br/>
DFD7&#160;<br/>
4C&#160;8D&#160;DB&#160;<br/>
JMP&#160;$DB8D&#160;<br/>
Normalise&#160;and&#160;exit.&#160;<br/>
DFDA&#160;<br/>
85&#160;D1&#160;<br/>
STA&#160;$D1&#160;<br/>
Zero&#160;the&#160;mantissa&#160;of&#160;main&#160;FPA.&#160;<br/>
DFDC&#160;<br/>
85&#160;D2&#160;<br/>
STA&#160;$D2&#160;<br/>
DFDE&#160;<br/>
85&#160;D3&#160;<br/>
STA&#160;$D3&#160;<br/>
DFE0&#160;<br/>
85&#160;D4&#160;<br/>
STA&#160;$D4&#160;<br/>
DFE2&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
DFE3&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
Exit.&#160;<br/>
&#160;<br/>DFE4&#160;<br/>
4C&#160;81&#160;E9&#160;<br/>
JMP&#160;$E981&#160;<br/>
Get&#160;hex&#160;number.&#160;<br/>
&#160;<br/>DFE7&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
<b>GET&#160;NUMBER.</b>&#160;<br/>
DFE9&#160;<br/>
A2&#160;0A&#160;<br/>
LDX&#160;#$0A&#160;<br/>
Clear&#160;section&#160;of&#160;memory&#160;from&#160;<br/>
DFEB&#160;<br/>
94&#160;CC&#160;<br/>
STY&#160;$CC,X&#160;<br/>
$CC&#160;to&#160;$D6&#160;inclusive.&#160;<br/>
DFED&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
DFEE&#160;<br/>
10&#160;FB&#160;<br/>
BPL&#160;$DFEB&#160;<br/>
DFF0&#160;<br/>
90&#160;13&#160;<br/>
BCC&#160;$E005&#160;<br/>
If&#160;digit,&#160;skip&#160;special&#160;tests.&#160;<br/>
DFF2&#160;<br/>
C9&#160;23&#160;<br/>
CMP&#160;#$23&#160;<br/>
DFF4&#160;<br/>
F0&#160;EE&#160;<br/>
BEQ&#160;$DFE4&#160;<br/>
&#34;#&#34;&#160;found,&#160;number&#160;is&#160;in&#160;hex.&#160;<br/>
DFF6&#160;<br/>
C9&#160;2D&#160;<br/>
CMP&#160;#$2D&#160;<br/>
DFF8&#160;<br/>
D0&#160;04&#160;<br/>
BNE&#160;$DFFE&#160;<br/>
No&#160;&#34;-&#34;&#160;sign&#160;before&#160;number.&#160;<br/>
DFFA&#160;<br/>
86&#160;D6&#160;<br/>
STX&#160;$D6&#160;<br/>
Set&#160;sign&#160;to&#160;#FF&#160;If&#160;-ve.&#160;<br/>
DFFC&#160;<br/>
F0&#160;04&#160;<br/>
BEQ&#160;$E002&#160;<br/>
DFFE&#160;<br/>
C9&#160;2B&#160;<br/>
CMP&#160;#$2B&#160;<br/>
E000&#160;<br/>
D0&#160;05&#160;<br/>
BNE&#160;$E007&#160;<br/>
No&#160;&#34;+&#34;&#160;sign&#160;before&#160;number.&#160;<br/>
E002&#160;<br/>
20&#160;E2&#160;00&#160;<br/>
JSR&#160;$00E2&#160;<br/>
Get&#160;next&#160;character.&#160;<br/>
E005&#160;<br/>
90&#160;5B&#160;<br/>
BCC&#160;$E062&#160;<br/>
If&#160;digit,&#160;then&#160;add&#160;it&#160;in.&#160;<br/>
E007&#160;<br/>
C9&#160;2E&#160;<br/>
CMP&#160;#$2E&#160;<br/>
Pag&#160;&#160;e&#160;63&#160;<br/>
<hr/>
<a name=64></a>E009&#160;<br/>
F0&#160;2E&#160;<br/>
BEQ&#160;$E039&#160;<br/>
Character&#160;is&#160;&#34;.&#34;.&#160;<br/>
E00B&#160;<br/>
C9&#160;45&#160;<br/>
CMP&#160;#$45&#160;<br/>
E00D&#160;<br/>
D0&#160;30&#160;<br/>
BNE&#160;$E03F&#160;<br/>
No&#160;&#34;E&#34;&#160;for&#160;exponent.&#160;<br/>
E00F&#160;<br/>
20&#160;E2&#160;00&#160;<br/>
JSR&#160;$00E2&#160;<br/>
Get&#160;next&#160;character.&#160;<br/>
E012&#160;<br/>
90&#160;17&#160;<br/>
BCC&#160;$E02B&#160;<br/>
Character&#160;is&#160;a&#160;digit.&#160;<br/>
E014&#160;<br/>
C9&#160;CD&#160;<br/>
CMP&#160;#$CD&#160;<br/>
E016&#160;<br/>
F0&#160;0E&#160;<br/>
BEQ&#160;$E026&#160;<br/>
Character&#160;is&#160;a&#160;&#34;-&#34;&#160;token.&#160;<br/>
E018&#160;<br/>
C9&#160;2D&#160;<br/>
CMP&#160;#$2D&#160;<br/>
E01A&#160;<br/>
F0&#160;0A&#160;<br/>
BEQ&#160;$E026&#160;<br/>
Character&#160;is&#160;&#34;-&#34;.&#160;<br/>
E01C&#160;<br/>
C9&#160;CC&#160;<br/>
CMP&#160;#$CC&#160;<br/>
E01E&#160;<br/>
F0&#160;08&#160;<br/>
BEQ&#160;$E028&#160;<br/>
Character&#160;is&#160;a&#160;&#34;+&#34;&#160;token.&#160;<br/>
E020&#160;<br/>
C9&#160;2B&#160;<br/>
CMP&#160;#$2B&#160;<br/>
E022&#160;<br/>
F0&#160;04&#160;<br/>
BEQ&#160;$E028&#160;<br/>
Character&#160;is&#160;&#34;+&#34;.&#160;<br/>
E024&#160;<br/>
D0&#160;07&#160;<br/>
BNE&#160;$E02D&#160;<br/>
E026&#160;<br/>
66&#160;CF&#160;<br/>
ROR&#160;$CF&#160;<br/>
Set&#160;negative&#160;exponent.&#160;<br/>
E028&#160;<br/>
20&#160;E2&#160;00&#160;<br/>
JSR&#160;$00E2&#160;<br/>
Get&#160;next&#160;char.&#160;<br/>
E02B&#160;<br/>
90&#160;5C&#160;<br/>
BCC&#160;$E089&#160;<br/>
If&#160;digit,&#160;then&#160;add&#160;it&#160;in.&#160;<br/>
E02D&#160;<br/>
24&#160;CF&#160;<br/>
BIT&#160;$CF&#160;<br/>
E02F&#160;<br/>
10&#160;0E&#160;<br/>
BPL&#160;$E03F&#160;<br/>
Exponent&#160;is&#160;positive.&#160;<br/>
E031&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
E033&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
Negate&#160;exponent.&#160;<br/>
E034&#160;<br/>
E5&#160;CD&#160;<br/>
SBC&#160;$CD&#160;<br/>
E036&#160;<br/>
4C&#160;41&#160;E0&#160;<br/>
JMP&#160;$E041&#160;<br/>
Finish&#160;off.&#160;<br/>
E039&#160;<br/>
66&#160;CE&#160;<br/>
ROR&#160;$CE&#160;<br/>
Set&#160;decimal&#160;point&#160;flag.&#160;<br/>
E03B&#160;<br/>
24&#160;CE&#160;<br/>
BIT&#160;$CE&#160;<br/>
Loop&#160;around&#160;again&#160;if&#160;D.P.&#160;not&#160;<br/>
E03D&#160;<br/>
50&#160;C3&#160;<br/>
BVC&#160;$E002&#160;<br/>
already&#160;set.&#160;<br/>
E03F&#160;<br/>
A5&#160;CD&#160;<br/>
LDA&#160;$CD&#160;<br/>
E041&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
Decrement&#160;exponent&#160;&amp;&#160;subtract&#160;<br/>
E042&#160;<br/>
E5&#160;CC&#160;<br/>
SBC&#160;$CC&#160;<br/>
number&#160;of&#160;digits&#160;after&#160;D.P.&#160;<br/>
E044&#160;<br/>
85&#160;CD&#160;<br/>
STA&#160;$CD&#160;<br/>
Save&#160;total&#160;exponent.&#160;<br/>
E046&#160;<br/>
F0&#160;12&#160;<br/>
BEQ&#160;$E05A&#160;<br/>
Exponent&#160;is&#160;positive.&#160;<br/>
E048&#160;<br/>
10&#160;09&#160;<br/>
BPL&#160;$E053&#160;<br/>
E04A&#160;<br/>
20&#160;C3&#160;DD&#160;<br/>
JSR&#160;$DDC3&#160;<br/>
Divide&#160;main&#160;FPA&#160;by&#160;10,&#160;total&#160;<br/>
E04D&#160;<br/>
E6&#160;CD&#160;<br/>
INC&#160;$CD&#160;<br/>
exponent&#160;negative.&#160;<br/>
E04F&#160;<br/>
D0&#160;F9&#160;<br/>
BNE&#160;$E04A&#160;<br/>
E051&#160;<br/>
F0&#160;07&#160;<br/>
BEQ&#160;$E05A&#160;<br/>
E053&#160;<br/>
20&#160;A7&#160;DD&#160;<br/>
JSR&#160;$DDA7&#160;<br/>
Multiply&#160;main&#160;FPA&#160;by&#160;10,&#160;total&#160;<br/>
E056&#160;<br/>
C6&#160;CD&#160;<br/>
DEC&#160;$CD&#160;<br/>
exponent&#160;positive.&#160;<br/>
E058&#160;<br/>
D0&#160;F9&#160;<br/>
BNE&#160;$E053&#160;<br/>
E05A&#160;<br/>
A5&#160;D6&#160;<br/>
LDA&#160;$D6&#160;<br/>
Negate&#160;if&#160;necessary&#160;and&#160;exit.&#160;<br/>
E05C&#160;<br/>
30&#160;01&#160;<br/>
BMI&#160;$E05F&#160;<br/>
E05E&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>E05F&#160;<br/>
4C&#160;71&#160;E2&#160;<br/>
JMP&#160;$E271&#160;<br/>
Negate&#160;main&#160;FPA.&#160;<br/>
&#160;<br/>E062&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
Save&#160;digit.&#160;<br/>
E063&#160;<br/>
24&#160;CE&#160;<br/>
BIT&#160;$CE&#160;<br/>
If&#160;char&#160;after&#160;D.P.&#160;then&#160;<br/>
E065&#160;<br/>
10&#160;02&#160;<br/>
BPL&#160;$E069&#160;<br/>
increment&#160;decimal&#160;positions&#160;<br/>
E067&#160;<br/>
E6&#160;CC&#160;<br/>
INC&#160;$CC&#160;<br/>
counter.&#160;<br/>
E069&#160;<br/>
20&#160;A7&#160;DD&#160;<br/>
JSR&#160;$DDA7&#160;<br/>
Multiply&#160;main&#160;FPA&#160;by&#160;10.&#160;<br/>
E06C&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Restore&#160;digit&#160;and&#160;reduce&#160;to&#160;<br/>
E06D&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
decimal&#160;digit.&#160;<br/>
E06E&#160;<br/>
E9&#160;30&#160;<br/>
SBC&#160;#$30&#160;<br/>
E070&#160;<br/>
20&#160;76&#160;E0&#160;<br/>
JSR&#160;$E076&#160;<br/>
Add&#160;digit&#160;into&#160;FPA.&#160;<br/>
E073&#160;<br/>
4C&#160;02&#160;E0&#160;<br/>
JMP&#160;$E002&#160;<br/>
Jump&#160;back&#160;for&#160;more.&#160;<br/>
&#160;<br/>E076&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
<b>ADD&#160;BYTE&#160;IN&#160;A&#160;TO&#160;MAIN&#160;FPA.</b>&#160;<br/>
E077&#160;<br/>
20&#160;E5&#160;DE&#160;<br/>
JSR&#160;$DEE5&#160;<br/>
Save&#160;byte&#160;and&#160;copy&#160;main&#160;FPA&#160;<br/>
E07A&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
into&#160;work&#160;FPA.&#160;Restore&#160;byte.&#160;<br/>
E07B&#160;<br/>
20&#160;24&#160;DF&#160;<br/>
JSR&#160;$DF24&#160;<br/>
Set&#160;main&#160;FPA&#160;to&#160;signed&#160;byte&#160;<br/>
E07E&#160;<br/>
A5&#160;DD&#160;<br/>
LDA&#160;$DD&#160;<br/>
in&#160;A.&#160;<br/>
E080&#160;<br/>
45&#160;D5&#160;<br/>
EOR&#160;$D5&#160;<br/>
E082&#160;<br/>
85&#160;DE&#160;<br/>
STA&#160;$DE&#160;<br/>
Set&#160;sign&#160;difference&#160;flag.&#160;<br/>
E084&#160;<br/>
A6&#160;D0&#160;<br/>
LDX&#160;$D0&#160;<br/>
Pag&#160;&#160;e&#160;64&#160;<br/>
<hr/>
<a name=65></a>E086&#160;<br/>
4C&#160;25&#160;DB&#160;<br/>
JMP&#160;$DB25&#160;<br/>
Add&#160;the&#160;2&#160;FPAs&#160;and&#160;exit.&#160;<br/>
&#160;<br/>E089&#160;<br/>
A5&#160;CD&#160;<br/>
LDA&#160;$CD&#160;<br/>
Deal&#160;with&#160;digit&#160;after&#160;E.&#160;<br/>
E08B&#160;<br/>
C9&#160;0A&#160;<br/>
CMP&#160;#$0A&#160;<br/>
Test&#160;if&#160;exponent&#160;is&#160;&lt;&#160;10.&#160;<br/>
E08D&#160;<br/>
90&#160;09&#160;<br/>
BCC&#160;$E098&#160;<br/>
Add&#160;in&#160;second&#160;digit.&#160;<br/>
E08F&#160;<br/>
A9&#160;64&#160;<br/>
LDA&#160;#$64&#160;<br/>
Set&#160;underflow&#160;if&#160;negative&#160;<br/>
E091&#160;<br/>
24&#160;CF&#160;<br/>
BIT&#160;$CF&#160;<br/>
exponent&#160;by&#160;using&#160;E-100.&#160;<br/>
E093&#160;<br/>
30&#160;11&#160;<br/>
BMI&#160;$E0A6&#160;<br/>
E095&#160;<br/>
4C&#160;39&#160;DC&#160;<br/>
JMP&#160;$DC39&#160;<br/>
Print&#160;&#34;OVERFLOW&#160;ERROR&#34;.&#160;<br/>
&#160;<br/>E098&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
Multiply&#160;exponent&#160;by&#160;10.&#160;<br/>
E099&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
E09A&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
E09B&#160;<br/>
65&#160;CD&#160;<br/>
ADC&#160;$CD&#160;<br/>
E09D&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
E09E&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
E09F&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
E0A1&#160;<br/>
71&#160;E9&#160;<br/>
ADC&#160;($E9),Y&#160;<br/>
Add&#160;next&#160;digit&#160;to&#160;exponent.&#160;<br/>
E0A3&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
E0A4&#160;<br/>
E9&#160;30&#160;<br/>
SBC&#160;#$30&#160;<br/>
Reduce&#160;to&#160;decimal&#160;range.&#160;<br/>
E0A6&#160;<br/>
85&#160;CD&#160;<br/>
STA&#160;$CD&#160;<br/>
E0A8&#160;<br/>
4C&#160;28&#160;E0&#160;<br/>
JMP&#160;$E028&#160;<br/>
Go&#160;round&#160;for&#160;next&#160;digit.&#160;<br/>
&#160;<br/>E0AB&#160;<br/>
9B&#160;3E&#160;BC&#160;1F&#160;FD&#160;<br/>
1E8&#160;<br/>
List&#160;of&#160;floating&#160;point&#160;<br/>
E0B0&#160;<br/>
9E&#160;6E&#160;6B&#160;27&#160;FD&#160;<br/>
9.99999E8&#160;<br/>
numbers&#160;for&#160;converting&#160;a&#160;<br/>
E0B5&#160;<br/>
9E&#160;6E&#160;6B&#160;28&#160;00&#160;<br/>
1E9&#160;<br/>
number&#160;to&#160;string.&#160;<br/>
&#160;<br/>E0BA&#160;<br/>
A9&#160;AD&#160;<br/>
LDA&#160;#$AD&#160;<br/>
Print&#160;&#34;IN&#34;&#160;&lt;line&#160;number&gt;.&#160;<br/>
E0BC&#160;<br/>
A0&#160;C3&#160;<br/>
LDY&#160;#$C3&#160;<br/>
&#160;<br/>E0BE&#160;<br/>
20&#160;D2&#160;E0&#160;<br/>
JSR&#160;$E0D2&#160;<br/>
Print&#160;&#34;IN&#34;.&#160;<br/>
E0C1&#160;<br/>
A5&#160;A9&#160;<br/>
LDA&#160;$A9&#160;<br/>
Get&#160;number&#160;into&#160;A,X.&#160;<br/>
E0C3&#160;<br/>
A6&#160;A8&#160;<br/>
LDX&#160;$A8&#160;<br/>
&#160;<br/>E0C5&#160;<br/>
85&#160;D1&#160;<br/>
STA&#160;$D1&#160;<br/>
<b>PRINT&#160;INTEGER&#160;IN&#160;A,X</b>.&#160;<br/>
E0C7&#160;<br/>
86&#160;D2&#160;<br/>
STX&#160;$D2&#160;<br/>
Save&#160;integer&#160;in&#160;mantissa&#160;of&#160;<br/>
E0C9&#160;<br/>
A2&#160;90&#160;<br/>
LDX&#160;#$90&#160;<br/>
main&#160;FPA.&#160;Set&#160;exponent&#160;to&#160;16.&#160;<br/>
E0CB&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
Set&#160;sign&#160;to&#160;positive.&#160;<br/>
E0CC&#160;<br/>
20&#160;31&#160;DF&#160;<br/>
JSR&#160;$DF31&#160;<br/>
Normalise&#160;main&#160;FPA.&#160;<br/>
E0CF&#160;<br/>
20&#160;D5&#160;E0&#160;<br/>
JSR&#160;$E0D5&#160;<br/>
Convert&#160;number&#160;to&#160;a&#160;string.&#160;<br/>
E0D2&#160;<br/>
4C&#160;B0&#160;CC&#160;<br/>
JMP&#160;$CCB0&#160;<br/>
Print&#160;out&#160;number.&#160;<br/>
E0D5&#160;<br/>
A0&#160;01&#160;<br/>
LDY&#160;#$01&#160;<br/>
CONVERT&#160;NUMBER&#160;TO&#160;STRING.&#160;<br/>
E0D7&#160;<br/>
A9&#160;20&#160;<br/>
LDA&#160;#$20&#160;<br/>
E0D9&#160;<br/>
24&#160;D5&#160;<br/>
BIT&#160;$D5&#160;<br/>
Use&#160;space&#160;if&#160;positive&#160;or&#160;&#34;-&#34;&#160;<br/>
E0DB&#160;<br/>
10&#160;02&#160;<br/>
BPL&#160;$E0DF&#160;<br/>
if&#160;negative.&#160;<br/>
E0DD&#160;<br/>
A9&#160;2D&#160;<br/>
LDA&#160;#$2D&#160;<br/>
E0DF&#160;<br/>
99&#160;FF&#160;00&#160;<br/>
STA&#160;$00FF,Y&#160;<br/>
Write&#160;char&#160;to&#160;string.&#160;<br/>
E0E2&#160;<br/>
85&#160;D5&#160;<br/>
STA&#160;$D5&#160;<br/>
Number&#160;now&#160;positive.&#160;<br/>
E0E4&#160;<br/>
84&#160;E0&#160;<br/>
STY&#160;$E0&#160;<br/>
Save&#160;pointer.&#160;<br/>
E0E6&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
E0E7&#160;<br/>
A9&#160;30&#160;<br/>
LDA&#160;#$30&#160;<br/>
Set&#160;A&#160;to&#160;&#34;0&#34;.&#160;<br/>
E0E9&#160;<br/>
A6&#160;D0&#160;<br/>
LDX&#160;$D0&#160;<br/>
E0EB&#160;<br/>
D0&#160;03&#160;<br/>
BNE&#160;$E0F0&#160;<br/>
If&#160;number&#160;is&#160;zero&#160;then&#160;set&#160;<br/>
E0ED&#160;<br/>
4C&#160;F8&#160;E1&#160;<br/>
JMP&#160;$E1F8&#160;<br/>
the&#160;string&#160;to&#160;&#34;0&#34;&#160;and&#160;exit.&#160;<br/>
E0F0&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
E0F2&#160;<br/>
E0&#160;80&#160;<br/>
CPX&#160;#$80&#160;<br/>
E0F4&#160;<br/>
F0&#160;02&#160;<br/>
BEQ&#160;$E0F8&#160;<br/>
Exponent&#160;is&#160;zero.&#160;<br/>
E0F6&#160;<br/>
B0&#160;09&#160;<br/>
BCS&#160;$E101&#160;<br/>
Exponent&#160;is&#160;positive.&#160;<br/>
E0F8&#160;<br/>
A9&#160;B5&#160;<br/>
LDA&#160;#$B5&#160;<br/>
E0FA&#160;<br/>
A0&#160;E0&#160;<br/>
LDY&#160;#$E0&#160;<br/>
E0FC&#160;<br/>
20&#160;ED&#160;DC&#160;<br/>
JSR&#160;$DCED&#160;<br/>
Multiply&#160;main&#160;FPA&#160;by&#160;1E9.&#160;<br/>
E0FF&#160;<br/>
A9&#160;F7&#160;<br/>
LDA&#160;#$F7&#160;<br/>
E101&#160;<br/>
85&#160;CC&#160;<br/>
STA&#160;$CC&#160;<br/>
Set&#160;initial&#160;E&#160;value&#160;to&#160;-9.&#160;<br/>
E103&#160;<br/>
A9&#160;B0&#160;<br/>
LDA&#160;#$B0&#160;<br/>
Pag&#160;&#160;e&#160;65&#160;<br/>
<hr/>
<a name=66></a>E105&#160;<br/>
A0&#160;E0&#160;<br/>
LDY&#160;#$E0&#160;<br/>
Compare&#160;main&#160;FPA&#160;with&#160;<br/>
E107&#160;<br/>
20&#160;4C&#160;DF&#160;<br/>
JSR&#160;$DF4C&#160;<br/>
9.9999E8.&#160;<br/>
E10A&#160;<br/>
F0&#160;1E&#160;<br/>
BEQ&#160;$E12A&#160;<br/>
Convert&#160;if&#160;equal.&#160;<br/>
E10C&#160;<br/>
10&#160;12&#160;<br/>
BPL&#160;$E120&#160;<br/>
Main&#160;FPA&#160;is&#160;greater.&#160;<br/>
E10E&#160;<br/>
A9&#160;AB&#160;<br/>
LDA&#160;#$AB&#160;<br/>
E110&#160;<br/>
A0&#160;E0&#160;<br/>
LDY&#160;#$E0&#160;<br/>
E112&#160;<br/>
20&#160;4C&#160;DF&#160;<br/>
JSR&#160;$DF4C&#160;<br/>
Compare&#160;main&#160;FPA&#160;with&#160;1E8.&#160;<br/>
E115&#160;<br/>
F0&#160;02&#160;<br/>
BEQ&#160;$E119&#160;<br/>
Number&#160;in&#160;main&#160;FPA&#160;is&#160;1E8.&#160;<br/>
E117&#160;<br/>
10&#160;0E&#160;<br/>
BPL&#160;$E127&#160;<br/>
Number&#160;in&#160;main&#160;FPA&#160;&gt;&#160;1E8.&#160;<br/>
E119&#160;<br/>
20&#160;A7&#160;DD&#160;<br/>
JSR&#160;$DDA7&#160;<br/>
Multiply&#160;main&#160;FPA&#160;by&#160;10.&#160;<br/>
E11C&#160;<br/>
C6&#160;CC&#160;<br/>
DEC&#160;$CC&#160;<br/>
Adjust&#160;exponent.&#160;<br/>
E11E&#160;<br/>
D0&#160;EE&#160;<br/>
BNE&#160;$E10E&#160;<br/>
Go&#160;round&#160;again.&#160;<br/>
E120&#160;<br/>
20&#160;C3&#160;DD&#160;<br/>
JSR&#160;$DDC3&#160;<br/>
Divide&#160;main&#160;FPA&#160;by&#160;10.&#160;<br/>
E123&#160;<br/>
E6&#160;CC&#160;<br/>
INC&#160;$CC&#160;<br/>
Adjust&#160;exponent.&#160;<br/>
E125&#160;<br/>
D0&#160;DC&#160;<br/>
BNE&#160;$E103&#160;<br/>
Go&#160;round&#160;again.&#160;<br/>
E127&#160;<br/>
20&#160;04&#160;DB&#160;<br/>
JSR&#160;$DB04&#160;<br/>
Add&#160;0.5&#160;to&#160;round&#160;off.&#160;<br/>
E12A&#160;<br/>
20&#160;8C&#160;DF&#160;<br/>
JSR&#160;$DF8C&#160;<br/>
Convert&#160;main&#160;FPA&#160;to&#160;integer.&#160;<br/>
E12D&#160;<br/>
A2&#160;01&#160;<br/>
LDX&#160;#$01&#160;<br/>
Set&#160;X&#160;to&#160;1&#160;place&#160;before&#160;D.P.&#160;<br/>
E12F&#160;<br/>
A5&#160;CC&#160;<br/>
LDA&#160;$CC&#160;<br/>
E131&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
E132&#160;<br/>
69&#160;0A&#160;<br/>
ADC&#160;#$0A&#160;<br/>
Add&#160;10&#160;to&#160;exponent.&#160;<br/>
E134&#160;<br/>
30&#160;09&#160;<br/>
BMI&#160;$E13F&#160;<br/>
If&#160;-ve&#160;then&#160;use&#160;E&#160;form.&#160;<br/>
E136&#160;<br/>
C9&#160;0B&#160;<br/>
CMP&#160;#$0B&#160;<br/>
If&#160;too&#160;big&#160;then&#160;use&#160;E&#160;form.&#160;<br/>
E138&#160;<br/>
B0&#160;06&#160;<br/>
BCS&#160;$E140&#160;<br/>
E13A&#160;<br/>
69&#160;FF&#160;<br/>
ADC&#160;#$FF&#160;<br/>
Set&#160;digit&#160;before&#160;&#34;.&#34;.&#160;<br/>
E13C&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
E13D&#160;<br/>
A9&#160;02&#160;<br/>
LDA&#160;#$02&#160;<br/>
Force&#160;E&#160;value.&#160;<br/>
E13F&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
E140&#160;<br/>
E9&#160;02&#160;<br/>
SBC&#160;#$02&#160;<br/>
Set&#160;proper&#160;exponent.&#160;<br/>
E142&#160;<br/>
85&#160;CD&#160;<br/>
STA&#160;$CD&#160;<br/>
E144&#160;<br/>
86&#160;CC&#160;<br/>
STX&#160;$CC&#160;<br/>
E146&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
E147&#160;<br/>
F0&#160;02&#160;<br/>
BEQ&#160;$E14B&#160;<br/>
Skip&#160;leading&#160;zeroes&#160;before&#160;<br/>
E149&#160;<br/>
10&#160;13&#160;<br/>
BPL&#160;$E15E&#160;<br/>
decimal&#160;point.&#160;<br/>
E14B&#160;<br/>
A4&#160;E0&#160;<br/>
LDY&#160;$E0&#160;<br/>
Get&#160;pointer&#160;to&#160;$&#160;construction&#160;<br/>
E14D&#160;<br/>
A9&#160;2E&#160;<br/>
LDA&#160;#$2E&#160;<br/>
area.&#160;<br/>
E14F&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
E150&#160;<br/>
99&#160;FF&#160;00&#160;<br/>
STA&#160;$00FF,Y&#160;<br/>
Write&#160;a&#160;decimal&#160;point.&#160;<br/>
E153&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
E154&#160;<br/>
F0&#160;06&#160;<br/>
BEQ&#160;$E15C&#160;<br/>
If&#160;not&#160;&#34;.OXXX&#34;&#160;then&#160;skip&#160;&#34;0&#34;.&#160;<br/>
E156&#160;<br/>
A9&#160;30&#160;<br/>
LDA&#160;#$30&#160;<br/>
Write&#160;a&#160;&#34;0&#34;&#160;to&#160;string.&#160;<br/>
E158&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
E159&#160;<br/>
99&#160;FF&#160;00&#160;<br/>
STA&#160;$00FF,Y&#160;<br/>
E15C&#160;<br/>
84&#160;E0&#160;<br/>
STY&#160;$E0&#160;<br/>
Save&#160;pointer.&#160;<br/>
E15E&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
E160&#160;<br/>
A2&#160;80&#160;<br/>
LDX&#160;#$80&#160;<br/>
Initialise&#160;decimal&#160;exponent.&#160;<br/>
E162&#160;<br/>
A5&#160;D4&#160;<br/>
LDA&#160;$D4&#160;<br/>
E164&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
E165&#160;<br/>
79&#160;0D&#160;E2&#160;<br/>
ADC&#160;$E20D,Y&#160;<br/>
Add&#160;or&#160;subtract&#160;the&#160;divisor&#160;<br/>
E168&#160;<br/>
85&#160;D4&#160;<br/>
STA&#160;$D4&#160;<br/>
(depending&#160;on&#160;number&#160;added)&#160;<br/>
E16A&#160;<br/>
A5&#160;D3&#160;<br/>
LDA&#160;$D3&#160;<br/>
from&#160;the&#160;number&#160;in&#160;main&#160;FPA.&#160;<br/>
E16C&#160;<br/>
79&#160;0C&#160;E2&#160;<br/>
ADC&#160;$E20C,Y&#160;<br/>
E16F&#160;<br/>
85&#160;D3&#160;<br/>
STA&#160;$D3&#160;<br/>
E171&#160;<br/>
A5&#160;D2&#160;<br/>
LDA&#160;$D2&#160;<br/>
E173&#160;<br/>
79&#160;0B&#160;E2&#160;<br/>
ADC&#160;$E20B,Y&#160;<br/>
E176&#160;<br/>
85&#160;D2&#160;<br/>
STA&#160;$D2&#160;<br/>
E178&#160;<br/>
A5&#160;D1&#160;<br/>
LDA&#160;$D1&#160;<br/>
E17A&#160;<br/>
79&#160;0A&#160;E2&#160;<br/>
ADC&#160;$E20A,Y&#160;<br/>
E17D&#160;<br/>
85&#160;D1&#160;<br/>
STA&#160;$D1&#160;<br/>
Adjust&#160;exponent.&#160;<br/>
E17F&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
E180&#160;<br/>
B0&#160;04&#160;<br/>
BCS&#160;$E186&#160;<br/>
E182&#160;<br/>
10&#160;DE&#160;<br/>
BPL&#160;$E162&#160;<br/>
If&#160;no&#160;overflow&#160;then&#160;loop.&#160;<br/>
E184&#160;<br/>
30&#160;02&#160;<br/>
BMI&#160;$E188&#160;<br/>
E186&#160;<br/>
30&#160;DA&#160;<br/>
BMI&#160;$E162&#160;<br/>
Pag&#160;&#160;e&#160;66&#160;<br/>
<hr/>
<a name=67></a>E188&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
Number&#160;of&#160;shifts.&#160;<br/>
E189&#160;<br/>
90&#160;04&#160;<br/>
BCC&#160;$E18F&#160;<br/>
E18B&#160;<br/>
49&#160;FF&#160;<br/>
EOR&#160;#$FF&#160;<br/>
If&#160;adding&#160;then&#160;subtract&#160;from&#160;<br/>
E18D&#160;<br/>
69&#160;0A&#160;<br/>
ADC&#160;#$0A&#160;<br/>
10&#160;to&#160;get&#160;digit.&#160;<br/>
E18F&#160;<br/>
69&#160;2F&#160;<br/>
ADC&#160;#$2F&#160;<br/>
Convert&#160;to&#160;Ascii.&#160;<br/>
E191&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
Update&#160;division&#160;pointer.&#160;<br/>
E192&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
E193&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
E194&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
E195&#160;<br/>
84&#160;B6&#160;<br/>
STY&#160;$B6&#160;<br/>
Save&#160;it.&#160;<br/>
E197&#160;<br/>
A4&#160;E0&#160;<br/>
LDY&#160;$E0&#160;<br/>
Get&#160;digit&#160;pointer.&#160;<br/>
E199&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
Advance&#160;it.&#160;<br/>
E19A&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
Save&#160;add/subtraction&#160;direction&#160;<br/>
E19B&#160;<br/>
29&#160;7F&#160;<br/>
AND&#160;#$7F&#160;<br/>
E19D&#160;<br/>
99&#160;FF&#160;00&#160;<br/>
STA&#160;$00FF,Y&#160;<br/>
Write&#160;digit&#160;to&#160;string.&#160;<br/>
E1A0&#160;<br/>
C6&#160;CC&#160;<br/>
DEC&#160;$CC&#160;<br/>
Decrement&#160;digits&#160;before&#160;&#34;.&#34;.&#160;<br/>
E1A2&#160;<br/>
D0&#160;06&#160;<br/>
BNE&#160;$E1AA&#160;<br/>
E1A4&#160;<br/>
A9&#160;2E&#160;<br/>
LDA&#160;#$2E&#160;<br/>
Write&#160;&#34;.&#34;&#160;to&#160;string&#160;if&#160;<br/>
E1A6&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
necessary.&#160;<br/>
E1A7&#160;<br/>
99&#160;FF&#160;00&#160;<br/>
STA&#160;$00FF,Y&#160;<br/>
E1AA&#160;<br/>
84&#160;E0&#160;<br/>
STY&#160;$E0&#160;<br/>
Save&#160;digit&#160;pointer.&#160;<br/>
E1AC&#160;<br/>
A4&#160;B6&#160;<br/>
LDY&#160;$B6&#160;<br/>
Get&#160;division&#160;pointer.&#160;<br/>
E1AE&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
E1AF&#160;<br/>
49&#160;FF&#160;<br/>
EOR&#160;#$FF&#160;<br/>
Swap&#160;add/subtract&#160;flag.&#160;<br/>
E1B1&#160;<br/>
29&#160;80&#160;<br/>
AND&#160;#$80&#160;<br/>
E1B3&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
E1B4&#160;<br/>
C0&#160;24&#160;<br/>
CPY&#160;#$24&#160;<br/>
E1B6&#160;<br/>
D0&#160;AA&#160;<br/>
BNE&#160;$E162&#160;<br/>
Loop&#160;if&#160;not&#160;finished.&#160;<br/>
E1B8&#160;<br/>
A4&#160;E0&#160;<br/>
LDY&#160;$E0&#160;<br/>
Get&#160;digit&#160;pointer.&#160;<br/>
E1BA&#160;<br/>
B9&#160;FF&#160;00&#160;<br/>
LDA&#160;$00FF,Y&#160;<br/>
E1BD&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
E1BE&#160;<br/>
C9&#160;30&#160;<br/>
CMP&#160;#$30&#160;<br/>
E1C0&#160;<br/>
F0&#160;F8&#160;<br/>
BEQ&#160;$E1BA&#160;<br/>
Strip&#160;trailing&#160;zeroes.&#160;<br/>
E1C2&#160;<br/>
C9&#160;2E&#160;<br/>
CMP&#160;#$2E&#160;<br/>
E1C4&#160;<br/>
F0&#160;01&#160;<br/>
BEQ&#160;$E1C7&#160;<br/>
Strip&#160;off&#160;&#34;.&#34;&#160;if&#160;on&#160;end.&#160;<br/>
E1C6&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
E1C7&#160;<br/>
A9&#160;2B&#160;<br/>
LDA&#160;#$2B&#160;<br/>
&#34;+&#34;.&#160;<br/>
E1C9&#160;<br/>
A6&#160;CD&#160;<br/>
LDX&#160;$CD&#160;<br/>
E1CB&#160;<br/>
F0&#160;2E&#160;<br/>
BEQ&#160;$E1FB&#160;<br/>
If&#160;no&#160;E&#160;required&#160;then&#160;exit.&#160;<br/>
E1CD&#160;<br/>
10&#160;08&#160;<br/>
BPL&#160;$E1D7&#160;<br/>
If&#160;positive&#160;E,&#160;skip&#160;negation.&#160;<br/>
E1CF&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
Negate&#160;decimal&#160;exponent&#160;and&#160;<br/>
E1D1&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
use&#160;&#34;-&#34;.&#160;<br/>
E1D2&#160;<br/>
E5&#160;CD&#160;<br/>
SBC&#160;$CD&#160;<br/>
E1D4&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
E1D5&#160;<br/>
A9&#160;2D&#160;<br/>
LDA&#160;#$2D&#160;<br/>
&#34;-&#34;.&#160;<br/>
E1D7&#160;<br/>
99&#160;01&#160;01&#160;<br/>
STA&#160;$0101,Y&#160;<br/>
Put&#160;character&#160;in&#160;string.&#160;<br/>
E1DA&#160;<br/>
A9&#160;45&#160;<br/>
LDA&#160;#$45&#160;<br/>
E1DC&#160;<br/>
99&#160;00&#160;01&#160;<br/>
STA&#160;$0100,Y&#160;<br/>
Put&#160;&#34;E&#34;&#160;in&#160;string.&#160;<br/>
E1DF&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
Get&#160;decimal&#160;exponent.&#160;<br/>
E1E0&#160;<br/>
A2&#160;2F&#160;<br/>
LDX&#160;#$2F&#160;<br/>
Initialise&#160;Ascii&#160;char.&#160;<br/>
E1E2&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
E1E3&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
E1E4&#160;<br/>
E9&#160;0A&#160;<br/>
SBC&#160;#$0A&#160;<br/>
Subtract&#160;10&#160;to&#160;divide&#160;A&#160;by&#160;10.&#160;<br/>
E1E6&#160;<br/>
B0&#160;FB&#160;<br/>
BCS&#160;$E1E3&#160;<br/>
Result&#160;will&#160;be&#160;in&#160;X.&#160;<br/>
E1E8&#160;<br/>
69&#160;3A&#160;<br/>
ADC&#160;#$3A&#160;<br/>
E1EA&#160;<br/>
99&#160;03&#160;01&#160;<br/>
STA&#160;$0103,Y&#160;<br/>
Least&#160;significant&#160;decimal&#160;<br/>
E1ED&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
digit.&#160;<br/>
E1EE&#160;<br/>
99&#160;02&#160;01&#160;<br/>
STA&#160;$0102,Y&#160;<br/>
Write&#160;digit.&#160;<br/>
E1F1&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
E1F3&#160;<br/>
99&#160;04&#160;01&#160;<br/>
STA&#160;$0104,Y&#160;<br/>
E1F6&#160;<br/>
F0&#160;08&#160;<br/>
BEQ&#160;$E200&#160;<br/>
E1F8&#160;<br/>
99&#160;FF&#160;00&#160;<br/>
STA&#160;$00FF,Y&#160;<br/>
E1FB&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
Terminate&#160;string&#160;with&#160;a&#160;null&#160;<br/>
E1FD&#160;<br/>
99&#160;00&#160;01&#160;<br/>
STA&#160;$0100,Y&#160;<br/>
and&#160;exit.&#160;<br/>
Pag&#160;&#160;e&#160;67&#160;<br/>
<hr/>
<a name=68></a>E200&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
E202&#160;<br/>
A0&#160;01&#160;<br/>
LDY&#160;#$01&#160;<br/>
E204&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>E205&#160;<br/>
80&#160;00&#160;00&#160;00&#160;00&#160;<br/>
Floating&#160;point&#160;0.5.&#160;<br/>
E20A&#160;<br/>
FA&#160;0A&#160;1F&#160;00&#160;-1E8&#160;<br/>
4&#160;byte&#160;integers&#160;for&#160;use&#160;with&#160;<br/>
E20E&#160;<br/>
00&#160;98&#160;96&#160;80&#160;+1E7&#160;<br/>
the&#160;routine&#160;that&#160;converts&#160;<br/>
E212&#160;<br/>
FF&#160;F0&#160;BD&#160;C0&#160;-1E6&#160;<br/>
numbers&#160;to&#160;strings.&#160;Decimal&#160;<br/>
E216&#160;<br/>
00&#160;01&#160;86&#160;A0&#160;+1E5&#160;<br/>
values&#160;are&#160;also&#160;listed&#160;in&#160;<br/>
E21A&#160;<br/>
FF&#160;FF&#160;D8&#160;F0&#160;-1E4&#160;<br/>
exponent&#160;form.&#160;<br/>
E21E&#160;<br/>
00&#160;00&#160;03&#160;E8&#160;+1E3&#160;<br/>
E222&#160;<br/>
FF&#160;FF&#160;FF&#160;9C&#160;-1E2&#160;<br/>
E226&#160;<br/>
00&#160;00&#160;00&#160;0A&#160;+1E1&#160;<br/>
E22A&#160;<br/>
FF&#160;FF&#160;FF&#160;FF&#160;-1E0&#160;<br/>
&#160;<br/>E22E&#160;<br/>
20&#160;E5&#160;DE&#160;<br/>
JSR&#160;$DEE5&#160;<br/>
<b>SQR</b>&#160;Copy&#160;main&#160;to&#160;work&#160;FPA.&#160;<br/>
E231&#160;<br/>
A9&#160;05&#160;<br/>
LDA&#160;#$05&#160;<br/>
Point&#160;to&#160;the&#160;number&#160;0.5.&#160;<br/>
E233&#160;<br/>
A0&#160;E2&#160;<br/>
LDY&#160;#$E2&#160;<br/>
E235&#160;<br/>
20&#160;7B&#160;DE&#160;<br/>
JSR&#160;$DE7B&#160;<br/>
Unpack&#160;it&#160;into&#160;main&#160;FPA.&#160;<br/>
E238&#160;<br/>
F0&#160;70&#160;<br/>
BEQ&#160;$E2AA&#160;<br/>
A&#160;OPERATOR.&#160;If&#160;zero&#160;give&#160;1&#160;<br/>
E23A&#160;<br/>
A5&#160;D8&#160;<br/>
LDA&#160;$D8&#160;<br/>
as&#160;result.&#160;<br/>
E23C&#160;<br/>
D0&#160;03&#160;<br/>
BNE&#160;$E241&#160;<br/>
E23E&#160;<br/>
4C&#160;B4&#160;DB&#160;<br/>
JMP&#160;$DBB4&#160;<br/>
If&#160;work&#160;FPA&#160;is&#160;0&#160;so&#160;is&#160;result.&#160;<br/>
E241&#160;<br/>
A2&#160;BD&#160;<br/>
LDX&#160;#$BD&#160;<br/>
E243&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
Pack&#160;main&#160;FPA&#160;to&#160;$BD-$C1.&#160;<br/>
E245&#160;<br/>
20&#160;AD&#160;DE&#160;<br/>
JSR&#160;$DEAD&#160;<br/>
E248&#160;<br/>
A5&#160;DD&#160;<br/>
LDA&#160;$DD&#160;<br/>
E24A&#160;<br/>
10&#160;0F&#160;<br/>
BPL&#160;$E25B&#160;<br/>
Branch&#160;if&#160;work&#160;FPA&#160;is&#160;+ve.&#160;<br/>
E24C&#160;<br/>
20&#160;BD&#160;DF&#160;<br/>
JSR&#160;$DFBD&#160;<br/>
Get&#160;INT&#160;of&#160;main&#160;FPA.&#160;<br/>
E24F&#160;<br/>
A9&#160;BD&#160;<br/>
LDA&#160;#$BD&#160;<br/>
E251&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
Compare&#160;new&#160;main&#160;FPA&#160;against&#160;<br/>
E253&#160;<br/>
20&#160;4C&#160;DF&#160;<br/>
JSR&#160;$DF4C&#160;<br/>
copy&#160;of&#160;old&#160;main&#160;FPA.&#160;<br/>
E256&#160;<br/>
D0&#160;03&#160;<br/>
BNE&#160;$E25B&#160;<br/>
If&#160;no&#160;fractional&#160;part&#160;use&#160;+ve&#160;<br/>
E258&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
result.&#160;<br/>
E259&#160;<br/>
A4&#160;24&#160;<br/>
LDY&#160;$24&#160;<br/>
Get&#160;sign&#160;of&#160;main&#160;FPA&#160;and&#160;copy&#160;<br/>
E25B&#160;<br/>
20&#160;D7&#160;DE&#160;<br/>
JSR&#160;$DED7&#160;<br/>
work&#160;FPA&#160;into&#160;main&#160;FPA.&#160;<br/>
E25E&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
E25F&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
E260&#160;<br/>
20&#160;AF&#160;DC&#160;<br/>
JSR&#160;$DCAF&#160;<br/>
Get&#160;LN&#160;of&#160;main&#160;FPA.&#160;<br/>
E263&#160;<br/>
A9&#160;BD&#160;<br/>
LDA&#160;#$BD&#160;<br/>
E265&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
E267&#160;<br/>
20&#160;ED&#160;DC&#160;<br/>
JSR&#160;$DCED&#160;<br/>
Multiply&#160;by&#160;number&#160;at&#160;$BD-$C1.&#160;<br/>
E26A&#160;<br/>
20&#160;AA&#160;E2&#160;<br/>
JSR&#160;$E2AA&#160;<br/>
Get&#160;EXP&#160;of&#160;main&#160;FPA.&#160;<br/>
E26D&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Get&#160;sign&#160;flag.&#160;<br/>
E26E&#160;<br/>
4A&#160;<br/>
LSR&#160;A&#160;<br/>
E26F&#160;<br/>
90&#160;0A&#160;<br/>
BCC&#160;$E27B&#160;<br/>
Exit&#160;if&#160;positive.&#160;<br/>
E271&#160;<br/>
A5&#160;D0&#160;<br/>
LDA&#160;$D0&#160;<br/>
UNARY&#160;&#34;-&#34;&#160;OPERATOR.&#160;<br/>
E273&#160;<br/>
F0&#160;06&#160;<br/>
BEQ&#160;$E27B&#160;<br/>
Exit&#160;if&#160;zero.&#160;<br/>
E275&#160;<br/>
A5&#160;D5&#160;<br/>
LDA&#160;$D5&#160;<br/>
Swap&#160;sign.&#160;<br/>
E277&#160;<br/>
49&#160;FF&#160;<br/>
EOR&#160;#$FF&#160;<br/>
E279&#160;<br/>
85&#160;D5&#160;<br/>
STA&#160;$D5&#160;<br/>
E27B&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
Exit.&#160;<br/>
&#160;<br/>E27C&#160;<br/>
81&#160;38&#160;AA&#160;3B&#160;29&#160;<br/>
Data&#160;for&#160;EXP&#160;routine.&#160;<br/>
E281&#160;<br/>
07&#160;<br/>
&#160;<br/>E282&#160;<br/>
71&#160;34&#160;58&#160;3E&#160;56&#160;<br/>
E287&#160;<br/>
74&#160;16&#160;7E&#160;B3&#160;1B&#160;<br/>
E28C&#160;<br/>
77&#160;2F&#160;EE&#160;E3&#160;85&#160;<br/>
E291&#160;<br/>
7A&#160;1D&#160;84&#160;1C&#160;2A&#160;<br/>
E296&#160;<br/>
7C&#160;63&#160;59&#160;58&#160;0A&#160;<br/>
E29B&#160;<br/>
7E&#160;75&#160;FD&#160;E7&#160;C6&#160;<br/>
E2A0&#160;<br/>
80&#160;31&#160;72&#160;18&#160;10&#160;<br/>
E2A5&#160;<br/>
81&#160;00&#160;00&#160;00&#160;00&#160;<br/>
Pag&#160;&#160;e&#160;68&#160;<br/>
<hr/>
<a name=69></a>&#160;<br/>E2AA&#160;<br/>
A9&#160;7C&#160;<br/>
LDA&#160;#$7C&#160;<br/>
<b>EXP</b>&#160;<br/>
E2AC&#160;<br/>
A0&#160;E2&#160;<br/>
LDY&#160;#$E2&#160;<br/>
Unpack&#160;number&#160;into&#160;work&#160;FPA&#160;<br/>
E2AE&#160;<br/>
20&#160;ED&#160;DC&#160;<br/>
JSR&#160;$DCED&#160;<br/>
from&#160;$E27C.&#160;<br/>
E2B1&#160;<br/>
A5&#160;DF&#160;<br/>
LDA&#160;$DF&#160;<br/>
Increment&#160;rounding&#160;byte&#160;and&#160;<br/>
E2B3&#160;<br/>
69&#160;50&#160;<br/>
ADC&#160;#$50&#160;<br/>
mantissa&#160;if&#160;need&#160;be.&#160;<br/>
E2B5&#160;<br/>
90&#160;03&#160;<br/>
BCC&#160;$E2BA&#160;<br/>
E2B7&#160;<br/>
20&#160;FC&#160;DE&#160;<br/>
JSR&#160;$DEFC&#160;<br/>
E2BA&#160;<br/>
85&#160;C5&#160;<br/>
STA&#160;$C5&#160;<br/>
Save&#160;copy&#160;of&#160;rounding&#160;byte.&#160;<br/>
E2BC&#160;<br/>
20&#160;E8&#160;DE&#160;<br/>
JSR&#160;$DEE8&#160;<br/>
Copy&#160;main&#160;FPA&#160;to&#160;work&#160;FPA.&#160;<br/>
E2BF&#160;<br/>
A5&#160;D0&#160;<br/>
LDA&#160;$D0&#160;<br/>
E2C1&#160;<br/>
C9&#160;88&#160;<br/>
CMP&#160;#$88&#160;<br/>
E2C3&#160;<br/>
90&#160;03&#160;<br/>
BCC&#160;$E2C8&#160;<br/>
Exponent&#160;less&#160;than&#160;8.&#160;<br/>
E2C5&#160;<br/>
20&#160;99&#160;DD&#160;<br/>
JSR&#160;$DD99&#160;<br/>
Check&#160;size.&#160;<br/>
E2C8&#160;<br/>
20&#160;BD&#160;DF&#160;<br/>
JSR&#160;$DFBD&#160;<br/>
Find&#160;integer&#160;of&#160;number.&#160;<br/>
E2CB&#160;<br/>
A5&#160;24&#160;<br/>
LDA&#160;$24&#160;<br/>
E2CD&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
E2CE&#160;<br/>
69&#160;81&#160;<br/>
ADC&#160;#$81&#160;<br/>
E2D0&#160;<br/>
F0&#160;F3&#160;<br/>
BEQ&#160;$E2C5&#160;<br/>
E2D2&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
E2D3&#160;<br/>
E9&#160;01&#160;<br/>
SBC&#160;#$01&#160;<br/>
E2D5&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
Save&#160;exponent.&#160;<br/>
E2D6&#160;<br/>
A2&#160;05&#160;<br/>
LDX&#160;#$05&#160;<br/>
E2D8&#160;<br/>
B5&#160;D8&#160;<br/>
LDA&#160;$D8,X&#160;<br/>
E2DA&#160;<br/>
B4&#160;D0&#160;<br/>
LDY&#160;$D0,X&#160;<br/>
Swap&#160;the&#160;EPAs.&#160;<br/>
E2DC&#160;<br/>
95&#160;D0&#160;<br/>
STA&#160;$D0,X&#160;<br/>
E2DE&#160;<br/>
94&#160;D8&#160;<br/>
STY&#160;$D8,X&#160;<br/>
E2E0&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
E2E1&#160;<br/>
10&#160;F5&#160;<br/>
BPL&#160;$E2D8&#160;<br/>
E2E3&#160;<br/>
A5&#160;C5&#160;<br/>
LDA&#160;$C5&#160;<br/>
E2E5&#160;<br/>
85&#160;DF&#160;<br/>
STA&#160;$DF&#160;<br/>
Restore&#160;rounding&#160;byte.&#160;<br/>
E2E7&#160;<br/>
20&#160;0E&#160;DB&#160;<br/>
JSR&#160;$DB0E&#160;<br/>
Perform&#160;subtraction.&#160;<br/>
E2EA&#160;<br/>
20&#160;71&#160;E2&#160;<br/>
JSR&#160;$E271&#160;<br/>
Negate&#160;the&#160;result.&#160;<br/>
E2ED&#160;<br/>
A9&#160;81&#160;<br/>
LDA&#160;#$81&#160;<br/>
E2EF&#160;<br/>
A0&#160;E2&#160;<br/>
LDY&#160;#$E2&#160;<br/>
Set&#160;pointer&#160;to&#160;series&#160;data.&#160;<br/>
E2F1&#160;<br/>
20&#160;13&#160;E3&#160;<br/>
JSR&#160;$E313&#160;<br/>
Evaluate&#160;series.&#160;<br/>
E2F4&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
Clear&#160;sign&#160;difference&#160;byte.&#160;<br/>
E2F6&#160;<br/>
85&#160;DE&#160;<br/>
STA&#160;$DE&#160;<br/>
E2F8&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Pull&#160;exponent.&#160;<br/>
E2F9&#160;<br/>
20&#160;7E&#160;DD&#160;<br/>
JSR&#160;$DD7E&#160;<br/>
Check&#160;size&#160;and&#160;set&#160;up&#160;exponent&#160;<br/>
E2FC&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
and&#160;exit.&#160;<br/>
&#160;<br/>E2FD&#160;<br/>
85&#160;E0&#160;<br/>
STA&#160;$E0&#160;<br/>
Set&#160;pointer.&#160;<br/>
E2FF&#160;<br/>
84&#160;E1&#160;<br/>
STY&#160;$E1&#160;<br/>
E301&#160;<br/>
20&#160;A3&#160;DE&#160;<br/>
JSR&#160;$DEA3&#160;<br/>
Store&#160;main&#160;FPA&#160;at&#160;$C6-$CA.&#160;<br/>
E304&#160;<br/>
A9&#160;C6&#160;<br/>
LDA&#160;#$C6&#160;<br/>
Unpack&#160;number&#160;from&#160;memory&#160;<br/>
E306&#160;<br/>
20&#160;ED&#160;DC&#160;<br/>
JSR&#160;$DCED&#160;<br/>
and&#160;multiply.&#160;<br/>
E309&#160;<br/>
20&#160;17&#160;E3&#160;<br/>
JSR&#160;$E317&#160;<br/>
Evaluate&#160;series.&#160;<br/>
E30C&#160;<br/>
A9&#160;C6&#160;<br/>
LDA&#160;#$C6&#160;<br/>
E30E&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
E310&#160;<br/>
4C&#160;ED&#160;DC&#160;<br/>
JMP&#160;$DCED&#160;<br/>
Unpack&#160;main&#160;FPA&#160;from&#160;$C6-$CA.&#160;<br/>
&#160;<br/>E313&#160;<br/>
85&#160;E0&#160;<br/>
STA&#160;$E0&#160;<br/>
<b>SERIES&#160;EVALUATION.</b>&#160;<br/>
E315&#160;<br/>
84&#160;E1&#160;<br/>
STY&#160;$E1&#160;<br/>
Set&#160;pointer&#160;to&#160;data.&#160;<br/>
E317&#160;<br/>
20&#160;A0&#160;DE&#160;<br/>
JSR&#160;$DEA0&#160;<br/>
Store&#160;main&#160;FPA&#160;at&#160;$CB-$CF.&#160;<br/>
E31A&#160;<br/>
B1&#160;E0&#160;<br/>
LDA&#160;($E0),Y&#160;<br/>
Load&#160;and&#160;set&#160;up&#160;loop&#160;counter.&#160;<br/>
E31C&#160;<br/>
85&#160;D6&#160;<br/>
STA&#160;$D6&#160;<br/>
E31E&#160;<br/>
A4&#160;E0&#160;<br/>
LDY&#160;$E0&#160;<br/>
Increment&#160;$E0,$E1&#160;and&#160;leave&#160;a&#160;<br/>
E320&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
copy&#160;of&#160;result&#160;in&#160;A,Y.&#160;<br/>
E321&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
E322&#160;<br/>
D0&#160;02&#160;<br/>
BNE&#160;$E326&#160;<br/>
E324&#160;<br/>
E6&#160;E1&#160;<br/>
INC&#160;$E1&#160;<br/>
E326&#160;<br/>
85&#160;E0&#160;<br/>
STA&#160;$E0&#160;<br/>
E328&#160;<br/>
A4&#160;E1&#160;<br/>
LDY&#160;$E1&#160;<br/>
Pag&#160;&#160;e&#160;69&#160;<br/>
<hr/>
<a name=70></a>E32A&#160;<br/>
20&#160;ED&#160;DC&#160;<br/>
JSR&#160;$DCED&#160;<br/>
Unpack&#160;work&#160;FPA&#160;from&#160;memory&#160;<br/>
E32D&#160;<br/>
A5&#160;E0&#160;<br/>
LDA&#160;$E0&#160;<br/>
and&#160;multiply.&#160;<br/>
E32F&#160;<br/>
A4&#160;E1&#160;<br/>
LDY&#160;$E1&#160;<br/>
E331&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
Add&#160;5&#160;to&#160;pointer&#160;at&#160;$E0,#E1&#160;<br/>
E332&#160;<br/>
69&#160;05&#160;<br/>
ADC&#160;#$05&#160;<br/>
so&#160;that&#160;it&#160;points&#160;to&#160;next&#160;<br/>
E334&#160;<br/>
90&#160;01&#160;<br/>
BCC&#160;$E337&#160;<br/>
piece&#160;of&#160;data.&#160;Leave&#160;copy&#160;of&#160;<br/>
E336&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
result&#160;in&#160;A,Y.&#160;<br/>
E337&#160;<br/>
85&#160;E0&#160;<br/>
STA&#160;$E0&#160;<br/>
E339&#160;<br/>
84&#160;E1&#160;<br/>
STY&#160;$E1&#160;<br/>
E33B&#160;<br/>
20&#160;22&#160;DB&#160;<br/>
JSR&#160;$DB22&#160;<br/>
Unpack&#160;work&#160;FPA&#160;&amp;&#160;add&#160;to&#160;main&#160;<br/>
E33E&#160;<br/>
A9&#160;CB&#160;<br/>
LDA&#160;#$CB&#160;<br/>
FPA.&#160;<br/>
E340&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
Set&#160;A,Y&#160;to&#160;point&#160;to&#160;copy&#160;of&#160;<br/>
E342&#160;<br/>
C6&#160;D6&#160;<br/>
DEC&#160;$D6&#160;<br/>
wok&#160;FPA.&#160;<br/>
E344&#160;<br/>
D0&#160;E4&#160;<br/>
BNE&#160;$E32A&#160;<br/>
Repeat&#160;until&#160;loop&#160;has&#160;counted&#160;<br/>
E346&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
out&#160;and&#160;then&#160;exit.&#160;<br/>
&#160;<br/>E347&#160;<br/>
98&#160;35&#160;44&#160;7A&#160;&#160;<br/>
Data&#160;for&#160;RND&#160;command.&#160;<br/>
E34B&#160;<br/>
68&#160;28&#160;B1&#160;46&#160;<br/>
&#160;<br/>E34F&#160;<br/>
20&#160;13&#160;DF&#160;<br/>
JSR&#160;$DF13&#160;<br/>
<b>RND</b>&#160;Get&#160;sign&#160;of&#160;main&#160;FPA.&#160;<br/>
E352&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
Save&#160;it&#160;in&#160;X.&#160;<br/>
E353&#160;<br/>
30&#160;18&#160;<br/>
BMI&#160;$E36D&#160;<br/>
Main&#160;FPA&#160;is&#160;negative.&#160;<br/>
E355&#160;<br/>
A9&#160;FA&#160;<br/>
LDA&#160;#$FA&#160;<br/>
E357&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
E359&#160;<br/>
20&#160;7B&#160;DE&#160;<br/>
JSR&#160;$DE7B&#160;<br/>
Unpack&#160;number&#160;at&#160;$FA.&#160;<br/>
E35C&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
E35D&#160;<br/>
F0&#160;E7&#160;<br/>
BEQ&#160;$E346&#160;<br/>
Number&#160;is&#160;zero.&#160;<br/>
E35F&#160;<br/>
A9&#160;47&#160;<br/>
LDA&#160;#$47&#160;<br/>
E361&#160;<br/>
A0&#160;E3&#160;<br/>
LDY&#160;#$E3&#160;<br/>
Unpack&#160;work&#160;FPA&#160;from&#160;$E347&#160;<br/>
E363&#160;<br/>
20&#160;ED&#160;DC&#160;<br/>
JSR&#160;$DCED&#160;<br/>
and&#160;multiply&#160;with&#160;main&#160;FPA.&#160;<br/>
E366&#160;<br/>
A9&#160;4B&#160;<br/>
LDA&#160;#$4B&#160;<br/>
E368&#160;<br/>
A0&#160;E3&#160;<br/>
LDY&#160;#$E3&#160;<br/>
Unpack&#160;work&#160;FPA&#160;from&#160;$E34B&#160;<br/>
E36A&#160;<br/>
20&#160;22&#160;DB&#160;<br/>
JSR&#160;$DB22&#160;<br/>
and&#160;add&#160;to&#160;main&#160;FPA.&#160;<br/>
E36D&#160;<br/>
A6&#160;D4&#160;<br/>
LDX&#160;$D4&#160;<br/>
E36F&#160;<br/>
A5&#160;D1&#160;<br/>
LDA&#160;$D1&#160;<br/>
Swap&#160;MSB&#160;and&#160;LSB&#160;of&#160;main&#160;FPA.&#160;<br/>
E371&#160;<br/>
85&#160;D4&#160;<br/>
STA&#160;$D4&#160;<br/>
E373&#160;<br/>
86&#160;D1&#160;<br/>
STX&#160;$D1&#160;<br/>
E375&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
E377&#160;<br/>
85&#160;D5&#160;<br/>
STA&#160;$D5&#160;<br/>
Clear&#160;sign.&#160;<br/>
E379&#160;<br/>
A5&#160;D0&#160;<br/>
LDA&#160;$D0&#160;<br/>
Transfer&#160;exponent&#160;to&#160;rounding&#160;<br/>
E37B&#160;<br/>
85&#160;DF&#160;<br/>
STA&#160;$DF&#160;<br/>
byte.&#160;<br/>
E37D&#160;<br/>
A9&#160;80&#160;<br/>
LDA&#160;#$80&#160;<br/>
Set&#160;exponent&#160;to&#160;zero.&#160;<br/>
E37F&#160;<br/>
85&#160;D0&#160;<br/>
STA&#160;$D0&#160;<br/>
E381&#160;<br/>
20&#160;92&#160;DB&#160;<br/>
JSR&#160;$DB92&#160;<br/>
Normalise&#160;main&#160;FPA.&#160;<br/>
E384&#160;<br/>
A2&#160;FA&#160;<br/>
LDX&#160;#$FA&#160;<br/>
E386&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
Pack&#160;main&#160;FPA&#160;into&#160;memory&#160;at&#160;<br/>
E388&#160;<br/>
4C&#160;AD&#160;DE&#160;<br/>
JMP&#160;$DEAD&#160;<br/>
$FA.&#160;<br/>
&#160;<br/>E38B&#160;<br/>
A9&#160;07&#160;<br/>
LDA&#160;#$07&#160;<br/>
<b>COS</b>&#160;<br/>
E38D&#160;<br/>
A0&#160;E4&#160;<br/>
LDY&#160;#$E4&#160;<br/>
Unpack&#160;work&#160;FPA&#160;from&#160;$E407&#160;and&#160;<br/>
E38F&#160;<br/>
20&#160;22&#160;DB&#160;<br/>
JSR&#160;$DB22&#160;<br/>
add&#160;to&#160;main&#160;FPA.&#160;<br/>
&#160;<br/>E392&#160;<br/>
20&#160;E5&#160;DE&#160;<br/>
JSR&#160;$DEE5&#160;<br/>
<b>SIN</b>&#160;Copy&#160;main&#160;to&#160;work&#160;FPA.&#160;<br/>
E395&#160;<br/>
A9&#160;0C&#160;<br/>
LDA&#160;#$0C&#160;<br/>
E397&#160;<br/>
A0&#160;E4&#160;<br/>
LDY&#160;#$E4&#160;<br/>
E399&#160;<br/>
A6&#160;DD&#160;<br/>
LDX&#160;$DD&#160;<br/>
Unpack&#160;main&#160;FPA&#160;from&#160;$EC04&#160;and&#160;<br/>
E39B&#160;<br/>
20&#160;CC&#160;DD&#160;<br/>
JSR&#160;$DDCC&#160;<br/>
divide&#160;by&#160;work&#160;FPA.&#160;<br/>
E39E&#160;<br/>
20&#160;E5&#160;DE&#160;<br/>
JSR&#160;$DEE5&#160;<br/>
Copy&#160;main&#160;FPA&#160;to&#160;work&#160;FPA.&#160;<br/>
E3A1&#160;<br/>
20&#160;BD&#160;DF&#160;<br/>
JSR&#160;$DFBD&#160;<br/>
Get&#160;INTeger&#160;value.&#160;<br/>
E3A4&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
Clear&#160;sign&#160;difference&#160;byte.&#160;<br/>
E3A6&#160;<br/>
85&#160;DE&#160;<br/>
STA&#160;$DE&#160;<br/>
E3A8&#160;<br/>
20&#160;0E&#160;DB&#160;<br/>
JSR&#160;$DB0E&#160;<br/>
Subtract&#160;FPAs.&#160;<br/>
E3AB&#160;<br/>
A9&#160;11&#160;<br/>
LDA&#160;#$11&#160;<br/>
E3AD&#160;<br/>
A0&#160;E4&#160;<br/>
LDY&#160;#$E4&#160;<br/>
Unpack&#160;work&#160;FPA&#160;from&#160;$E411&#160;<br/>
Pag&#160;&#160;e&#160;70&#160;<br/>
<hr/>
<a name=71></a>E3AF&#160;<br/>
20&#160;0B&#160;DB&#160;<br/>
JSR&#160;$DB0B&#160;<br/>
and&#160;subtact&#160;from&#160;main&#160;FPA.&#160;<br/>
E3B2&#160;<br/>
A5&#160;D5&#160;<br/>
LDA&#160;$D5&#160;<br/>
Save&#160;sign&#160;of&#160;mantissa&#160;<br/>
E3B4&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
E3B5&#160;<br/>
10&#160;0D&#160;<br/>
BPL&#160;$E3C4&#160;<br/>
Sign&#160;of&#160;mantissa&#160;is&#160;positive.&#160;<br/>
E3B7&#160;<br/>
20&#160;04&#160;DB&#160;<br/>
JSR&#160;$DB04&#160;<br/>
Add&#160;0.5&#160;to&#160;result.&#160;<br/>
E3BA&#160;<br/>
A5&#160;D5&#160;<br/>
LDA&#160;$D5&#160;<br/>
E3BC&#160;<br/>
30&#160;09&#160;<br/>
BMI&#160;$E3C7&#160;<br/>
Result&#160;negative.&#160;<br/>
E3BE&#160;<br/>
A5&#160;2D&#160;<br/>
LDA&#160;$2D&#160;<br/>
Invert&#160;temporary&#160;operator&#160;<br/>
E3C0&#160;<br/>
49&#160;FF&#160;<br/>
EOR&#160;#$FF&#160;<br/>
store.&#160;<br/>
E3C2&#160;<br/>
85&#160;2D&#160;<br/>
STA&#160;$2D&#160;<br/>
E3C4&#160;<br/>
20&#160;71&#160;E2&#160;<br/>
JSR&#160;$E271&#160;<br/>
Negate&#160;number.&#160;<br/>
E3C7&#160;<br/>
A9&#160;11&#160;<br/>
LDA&#160;#$11&#160;<br/>
E3C9&#160;<br/>
A0&#160;E4&#160;<br/>
LDY&#160;#$E4&#160;<br/>
Unpack&#160;work&#160;FPA&#160;from&#160;$411&#160;and&#160;<br/>
E3CB&#160;<br/>
20&#160;22&#160;DB&#160;<br/>
JSR&#160;$DB22&#160;<br/>
add&#160;to&#160;main&#160;FPA.&#160;<br/>
E3CE&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
E3CF&#160;<br/>
10&#160;03&#160;<br/>
BPL&#160;$E3D4&#160;<br/>
Sign&#160;is&#160;positive.&#160;<br/>
E3D1&#160;<br/>
20&#160;71&#160;E2&#160;<br/>
JSR&#160;$E271&#160;<br/>
Negate&#160;number.&#160;<br/>
E3D4&#160;<br/>
A9&#160;16&#160;<br/>
LDA&#160;#$16&#160;<br/>
E3D6&#160;<br/>
A0&#160;E4&#160;<br/>
LDY&#160;#$E4&#160;<br/>
Set&#160;pointers.&#160;<br/>
E3D8&#160;<br/>
4C&#160;FD&#160;E2&#160;<br/>
JMP&#160;$E2FD&#160;<br/>
Jump&#160;to&#160;series&#160;evaluation.&#160;<br/>
E3DB&#160;<br/>
20&#160;A3&#160;DE&#160;<br/>
JSR&#160;$DEA3&#160;<br/>
TAN&#160;Store&#160;main&#160;FPA&#160;at&#160;$C6.&#160;<br/>
E3DE&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
E3E0&#160;<br/>
85&#160;2D&#160;<br/>
STA&#160;$2D&#160;<br/>
E3E2&#160;<br/>
20&#160;92&#160;E3&#160;<br/>
JSR&#160;$E392&#160;<br/>
Find&#160;SIN&#160;of&#160;number.&#160;<br/>
E3E5&#160;<br/>
A2&#160;BD&#160;<br/>
LDX&#160;#$BD&#160;<br/>
E3E7&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
E3E9&#160;<br/>
20&#160;88&#160;E3&#160;<br/>
JSR&#160;$E388&#160;<br/>
Save&#160;result&#160;in&#160;memory.&#160;<br/>
E3EC&#160;<br/>
A9&#160;C6&#160;<br/>
LDA&#160;#$C6&#160;<br/>
E3EE&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
Unpack&#160;original&#160;number&#160;from&#160;<br/>
E3F0&#160;<br/>
20&#160;7B&#160;DE&#160;<br/>
JSR&#160;$DE7B&#160;<br/>
$C6.&#160;<br/>
E3F3&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
Clear&#160;main&#160;FPA&#160;sign&#160;byte.&#160;<br/>
E3F5&#160;<br/>
85&#160;D5&#160;<br/>
STA&#160;$D5&#160;<br/>
E3F7&#160;<br/>
A5&#160;2D&#160;<br/>
LDA&#160;$2D&#160;<br/>
E3F9&#160;<br/>
20&#160;03&#160;E4&#160;<br/>
JSR&#160;$E403&#160;<br/>
Execute&#160;latter&#160;half&#160;of&#160;SIN&#160;<br/>
E3FC&#160;<br/>
A9&#160;BD&#160;<br/>
LDA&#160;#$BD&#160;<br/>
routine&#160;-&#160;to&#160;get&#160;cosine.&#160;<br/>
E3FE&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
Unpack&#160;work&#160;FPA&#160;from&#160;$BD&#160;and&#160;<br/>
E400&#160;<br/>
4C&#160;E4&#160;DD&#160;<br/>
JMP&#160;$DDE4&#160;<br/>
divide&#160;to&#160;get&#160;final&#160;result.&#160;<br/>
E403&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
E404&#160;<br/>
4C&#160;C4&#160;E3&#160;<br/>
JMP&#160;$E3C4&#160;<br/>
&#160;<br/>E407&#160;<br/>
81&#160;49&#160;0F&#160;DA&#160;A2&#160;<br/>
Data&#160;for&#160;the&#160;trigonometric&#160;<br/>
E40C&#160;<br/>
83&#160;49&#160;0F&#160;DA&#160;A2&#160;<br/>
functions.&#160;<br/>
E411&#160;<br/>
7F&#160;00&#160;00&#160;00&#160;00&#160;<br/>
E416&#160;<br/>
05&#160;<br/>
&#160;<br/>E417&#160;<br/>
84&#160;E6&#160;1A&#160;2D&#160;1B&#160;<br/>
E41C&#160;<br/>
86&#160;28&#160;07&#160;FB&#160;F8&#160;<br/>
E421&#160;<br/>
87&#160;99&#160;68&#160;89&#160;01&#160;<br/>
E426&#160;<br/>
87&#160;23&#160;35&#160;DF&#160;E1&#160;<br/>
E42B&#160;<br/>
86&#160;A5&#160;5D&#160;E7&#160;28&#160;<br/>
E430&#160;<br/>
83&#160;49&#160;0F&#160;DA&#160;A2&#160;<br/>
E435&#160;<br/>
A1&#160;54&#160;46&#160;8F&#160;13&#160;<br/>
E43A&#160;<br/>
8F&#160;52&#160;43&#160;89&#160;CD&#160;<br/>
&#160;<br/>E43F&#160;<br/>
A5&#160;D5&#160;<br/>
LDA&#160;$D5&#160;<br/>
<b>ATN</b>&#160;<br/>
E441&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
Save&#160;sign&#160;byte&#160;of&#160;main&#160;FPA.&#160;<br/>
E442&#160;<br/>
10&#160;03&#160;<br/>
BPL&#160;$E447&#160;<br/>
Sign&#160;is&#160;positive.&#160;<br/>
E444&#160;<br/>
20&#160;71&#160;E2&#160;<br/>
JSR&#160;$E271&#160;<br/>
Negate&#160;number.&#160;<br/>
E447&#160;<br/>
A5&#160;D0&#160;<br/>
LDA&#160;$D0&#160;<br/>
Save&#160;exponent&#160;of&#160;main&#160;FPA.&#160;<br/>
E449&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
E44A&#160;<br/>
C9&#160;81&#160;<br/>
CMP&#160;#$81&#160;<br/>
E44C&#160;<br/>
90&#160;07&#160;<br/>
BCC&#160;$E455&#160;<br/>
Exponent&#160;is&#160;less&#160;than&#160;1.&#160;<br/>
E44E&#160;<br/>
A9&#160;81&#160;<br/>
LDA&#160;#$81&#160;<br/>
Unpack&#160;work&#160;FPA&#160;from&#160;$DC81&#160;and&#160;<br/>
E450&#160;<br/>
A0&#160;DC&#160;<br/>
LDY&#160;#$DC&#160;<br/>
divide&#160;into&#160;main&#160;FPA.&#160;<br/>
Pag&#160;&#160;e&#160;71&#160;<br/>
<hr/>
<a name=72></a>E452&#160;<br/>
20&#160;E4&#160;DD&#160;<br/>
JSR&#160;$DDE4&#160;<br/>
E455&#160;<br/>
A9&#160;6F&#160;<br/>
LDA&#160;#$6F&#160;<br/>
Evaluate&#160;series&#160;using&#160;data&#160;<br/>
E457&#160;<br/>
A0&#160;E4&#160;<br/>
LDY&#160;#$E4&#160;<br/>
from&#160;table&#160;at&#160;$E46F.&#160;<br/>
E459&#160;<br/>
20&#160;FD&#160;E2&#160;<br/>
JSR&#160;$E2FD&#160;<br/>
E45C&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
E45D&#160;<br/>
C9&#160;81&#160;<br/>
CMP&#160;#$81&#160;<br/>
E45F&#160;<br/>
90&#160;07&#160;<br/>
BCC&#160;$E468&#160;<br/>
Exponent&#160;is&#160;less&#160;than&#160;1.&#160;<br/>
E461&#160;<br/>
A9&#160;07&#160;<br/>
LDA&#160;#$07&#160;<br/>
E463&#160;<br/>
A0&#160;E4&#160;<br/>
LDY&#160;#$E4&#160;<br/>
Unpack&#160;work&#160;FPA&#160;from&#160;$E407&#160;and&#160;<br/>
E465&#160;<br/>
20&#160;0B&#160;DB&#160;<br/>
JSR&#160;$DB0B&#160;<br/>
subtract&#160;from&#160;main&#160;FPA.&#160;<br/>
E468&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
E469&#160;<br/>
10&#160;03&#160;<br/>
BPL&#160;$E46E&#160;<br/>
Branch&#160;if&#160;positive.&#160;<br/>
E46B&#160;<br/>
4C&#160;71&#160;E2&#160;<br/>
JMP&#160;$E271&#160;<br/>
Negate&#160;number.&#160;<br/>
E46E&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
Exit.&#160;<br/>
&#160;<br/>E46F&#160;<br/>
0B&#160;76&#160;B3&#160;83&#160;BD&#160;<br/>
Data&#160;for&#160;ATN.&#160;<br/>
E474&#160;<br/>
D3&#160;79&#160;1E&#160;F4&#160;A6&#160;<br/>
E479&#160;<br/>
F5&#160;7B&#160;83&#160;FC&#160;B0&#160;<br/>
E47E&#160;<br/>
10&#160;<br/>
&#160;<br/>E47F&#160;<br/>
7C&#160;0C&#160;1F&#160;67&#160;CA&#160;<br/>
E484&#160;<br/>
7C&#160;DE&#160;53&#160;CB&#160;C1&#160;<br/>
E489&#160;<br/>
7D&#160;14&#160;64&#160;70&#160;4C&#160;<br/>
E48E&#160;<br/>
7D&#160;B7&#160;EA&#160;51&#160;7A&#160;<br/>
E493&#160;<br/>
7D&#160;63&#160;30&#160;88&#160;7E&#160;<br/>
E498&#160;<br/>
7E&#160;92&#160;44&#160;99&#160;3A&#160;<br/>
E49D&#160;<br/>
7E&#160;4C&#160;CC&#160;91&#160;C7&#160;<br/>
E4A2&#160;<br/>
7F&#160;AA&#160;AA&#160;AA&#160;13&#160;<br/>
E4A7&#160;<br/>
81&#160;00&#160;00&#160;00&#160;00&#160;<br/>
&#160;<br/>E4AC&#160;<br/>
20&#160;35&#160;E7&#160;<br/>
JSR&#160;$E735&#160;<br/>
Get&#160;in&#160;sync&#160;with&#160;tape.&#160;<br/>
E4AF&#160;<br/>
20&#160;C9&#160;E6&#160;<br/>
JSR&#160;$E6C9&#160;<br/>
Read&#160;byte&#160;from&#160;tape.&#160;<br/>
E4B2&#160;<br/>
C9&#160;24&#160;<br/>
CMP&#160;#$24&#160;<br/>
E4B4&#160;<br/>
D0&#160;F9&#160;<br/>
BNE&#160;$E4AF&#160;<br/>
Get&#160;bytes&#160;until&#160;&#34;$&#34;&#160;is&#160;read.&#160;<br/>
E4B6&#160;<br/>
8E&#160;B1&#160;02&#160;<br/>
STX&#160;$02B1&#160;<br/>
E4B9&#160;<br/>
A2&#160;09&#160;<br/>
LDX&#160;#$09&#160;<br/>
E4BB&#160;<br/>
20&#160;C9&#160;E6&#160;<br/>
JSR&#160;$E6C9&#160;<br/>
Read&#160;byte.&#160;<br/>
E4BE&#160;<br/>
9D&#160;A7&#160;02&#160;<br/>
STA&#160;$02A7,X&#160;<br/>
Save&#160;in&#160;header&#160;block.&#160;<br/>
E4C1&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
E4C2&#160;<br/>
D0&#160;F7&#160;<br/>
BNE&#160;$E4BB&#160;<br/>
E4C4&#160;<br/>
20&#160;C9&#160;E6&#160;<br/>
JSR&#160;$E6C9&#160;<br/>
Get&#160;byte.&#160;<br/>
E4C7&#160;<br/>
F0&#160;0A&#160;<br/>
BEQ&#160;$E4D3&#160;<br/>
End&#160;of&#160;file&#160;name.&#160;<br/>
E4C9&#160;<br/>
E0&#160;10&#160;<br/>
CPX&#160;#$10&#160;<br/>
Continue&#160;for&#160;up&#160;to&#160;16&#160;bytes.&#160;<br/>
E4CB&#160;<br/>
B0&#160;F7&#160;<br/>
BCS&#160;$E4C4&#160;<br/>
E4CD&#160;<br/>
9D&#160;93&#160;02&#160;<br/>
STA&#160;$0293,X&#160;<br/>
Save&#160;chars&#160;of&#160;file&#160;name.&#160;<br/>
E4D0&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
E4D1&#160;<br/>
D0&#160;F1&#160;<br/>
BNE&#160;$E4C4&#160;<br/>
E4D3&#160;<br/>
9D&#160;93&#160;02&#160;<br/>
STA&#160;$0293,X&#160;<br/>
Store&#160;end&#160;of&#160;file&#160;indicator.&#160;<br/>
E4D6&#160;<br/>
20&#160;94&#160;E5&#160;<br/>
JSR&#160;$E594&#160;<br/>
Print&#160;&#34;Found&#34;&#160;&lt;filename&gt;.&#160;<br/>
E4D9&#160;<br/>
20&#160;90&#160;E7&#160;<br/>
JSR&#160;$E790&#160;<br/>
Compare&#160;names&#160;of&#160;files.&#160;<br/>
E4DC&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
E4DD&#160;<br/>
D0&#160;CD&#160;<br/>
BNE&#160;$E4AC&#160;<br/>
Correct&#160;filename&#160;is&#160;not&#160;found.&#160;<br/>
E4DF&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
Exit.&#160;<br/>
&#160;<br/>E4E0&#160;<br/>
AD&#160;A9&#160;02&#160;<br/>
LDA&#160;$02A9&#160;<br/>
<b>LOAD/VERIFY&#160;DATA</b>&#160;<br/>
E4E3&#160;<br/>
AC&#160;AA&#160;02&#160;<br/>
LDY&#160;$02AA&#160;<br/>
E4E6&#160;<br/>
85&#160;33&#160;<br/>
STA&#160;$33&#160;<br/>
Transfer&#160;pointer.&#160;<br/>
E4E8&#160;<br/>
84&#160;34&#160;<br/>
STY&#160;$34&#160;<br/>
E4EA&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
E4EC&#160;<br/>
20&#160;C9&#160;E6&#160;<br/>
JSR&#160;$E6C9&#160;<br/>
Read&#160;byte&#160;from&#160;tape.&#160;<br/>
E4EF&#160;<br/>
AE&#160;5B&#160;02&#160;<br/>
LDX&#160;$025B&#160;<br/>
E4F2&#160;<br/>
D0&#160;05&#160;<br/>
BNE&#160;$E4F9&#160;<br/>
<b>VERIFY</b>&#160;the&#160;data.&#160;<br/>
E4F4&#160;<br/>
91&#160;33&#160;<br/>
STA&#160;($33),Y&#160;<br/>
Store&#160;in&#160;memory.&#160;<br/>
E4F6&#160;<br/>
4C&#160;05&#160;E5&#160;<br/>
JMP&#160;$E505&#160;<br/>
Jump&#160;to&#160;increment&#160;pointers.&#160;<br/>
Pag&#160;&#160;e&#160;72&#160;<br/>
<hr/>
<a name=73></a>E4F9&#160;<br/>
D1&#160;33&#160;<br/>
CMP&#160;($33),Y&#160;<br/>
Compare&#160;data&#160;to&#160;verify&#160;it.&#160;<br/>
E4FB&#160;<br/>
F0&#160;08&#160;<br/>
BEQ&#160;$E505&#160;<br/>
Data&#160;match&#160;made.&#160;<br/>
E4FD&#160;<br/>
EE&#160;5C&#160;02&#160;<br/>
INC&#160;$025C&#160;<br/>
Increment&#160;error&#160;counter.&#160;<br/>
E500&#160;<br/>
D0&#160;03&#160;<br/>
BNE&#160;$E505&#160;<br/>
E502&#160;<br/>
EE&#160;5D&#160;02&#160;<br/>
INC&#160;$025D&#160;<br/>
E505&#160;<br/>
20&#160;6C&#160;E5&#160;<br/>
JSR&#160;$E56C&#160;<br/>
Increment&#160;counters.&#160;<br/>
E508&#160;<br/>
90&#160;E2&#160;<br/>
BCC&#160;$E4EC&#160;<br/>
E50A&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>E50B&#160;<br/>
10&#160;07&#160;53&#160;65&#160;61&#160;72&#160;63&#160;68&#160;<br/>
&#160;&#160;Search&#160;<br/>
E513&#160;<br/>
69&#160;6E&#160;67&#160;20&#160;2E&#160;2E&#160;00&#160;10&#160;<br/>
ing&#160;..&#160;&#160;&#160;<br/>
E51B&#160;<br/>
07&#160;4C&#160;6F&#160;61&#160;64&#160;69&#160;6E&#160;67&#160;<br/>
&#160;Loading&#160;<br/>
E523&#160;<br/>
20&#160;2E&#160;2E&#160;00&#160;0A&#160;0D&#160;45&#160;72&#160;<br/>
&#160;..&#160;&#160;&#160;Er&#160;<br/>
E52B&#160;<br/>
72&#160;6F&#160;72&#160;73&#160;20&#160;66&#160;6F&#160;75&#160;<br/>
rors&#160;Fou&#160;<br/>
E533&#160;<br/>
6E&#160;64&#160;0D&#160;0A&#160;00&#160;10&#160;07&#160;46&#160;<br/>
nd&#160;&#160;&#160;&#160;&#160;F&#160;<br/>
E53B&#160;<br/>
6F&#160;75&#160;6E&#160;64&#160;20&#160;2E&#160;2E&#160;00&#160;<br/>
ound&#160;..&#160;&#160;<br/>
E543&#160;<br/>
10&#160;07&#160;56&#160;65&#160;72&#160;69&#160;66&#160;79&#160;<br/>
&#160;&#160;Verify&#160;<br/>
E54B&#160;<br/>
69&#160;6E&#160;67&#160;20&#160;2E&#160;2E&#160;00&#160;20&#160;<br/>
ing&#160;..&#160;&#160;&#160;<br/>
E553&#160;<br/>
56&#160;65&#160;72&#160;69&#160;66&#160;79&#160;20&#160;65&#160;<br/>
Verify&#160;E&#160;<br/>
E55B&#160;<br/>
72&#160;72&#160;6F&#160;72&#160;73&#160;20&#160;64&#160;65&#160;<br/>
rrors&#160;de&#160;<br/>
E563&#160;<br/>
74&#160;65&#160;63&#160;74&#160;65&#160;64&#160;0D&#160;0A&#160;<br/>
tected&#160;&#160;&#160;<br/>
E56B&#160;<br/>
00&#160;<br/>
&#160;<br/>E56C&#160;<br/>
A5&#160;33&#160;<br/>
LDA&#160;$33&#160;<br/>
Increment&#160;counter&#160;for&#160;loading&#160;<br/>
E56E&#160;<br/>
CD&#160;AB&#160;02&#160;<br/>
CMP&#160;$02AB&#160;<br/>
or&#160;verifying&#160;data&#160;from&#160;tape.&#160;<br/>
E571&#160;<br/>
A5&#160;34&#160;<br/>
LDA&#160;$34&#160;<br/>
E573&#160;<br/>
ED&#160;AC&#160;02&#160;<br/>
SBC&#160;$02AC&#160;<br/>
E576&#160;<br/>
E6&#160;33&#160;<br/>
INC&#160;$33&#160;<br/>
E578&#160;<br/>
D0&#160;02&#160;<br/>
BNE&#160;$E57C&#160;<br/>
Compare&#160;pointer&#160;with&#160;final&#160;<br/>
E57A&#160;<br/>
E6&#160;34&#160;<br/>
INC&#160;$34&#160;<br/>
pointer.&#160;C=1&#160;if&#160;end&#160;reached.&#160;<br/>
E57C&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>E57D&#160;<br/>
A9&#160;0B&#160;<br/>
LDA&#160;#$0B&#160;<br/>
Print&#160;&#34;Searching&#160;..&#34;.&#160;<br/>
E57F&#160;<br/>
A0&#160;E5&#160;<br/>
LDY&#160;#$E5&#160;<br/>
E581&#160;<br/>
20&#160;EA&#160;E5&#160;<br/>
JSR&#160;$E5EA&#160;<br/>
E584&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>E585&#160;<br/>
A9&#160;45&#160;<br/>
LDA&#160;#$45&#160;<br/>
Print&#160;&#34;Saving&#160;&#34;.&#160;<br/>
E587&#160;<br/>
A0&#160;E6&#160;<br/>
LDY&#160;#$E6&#160;<br/>
E589&#160;<br/>
20&#160;EA&#160;E5&#160;<br/>
JSR&#160;$E5EA&#160;<br/>
E58C&#160;<br/>
A9&#160;7F&#160;<br/>
LDA&#160;#$7F&#160;<br/>
Print&#160;&lt;filename&gt;.&#160;<br/>
E58E&#160;<br/>
A0&#160;02&#160;<br/>
LDY&#160;#$02&#160;<br/>
E590&#160;<br/>
20&#160;B6&#160;E5&#160;<br/>
JSR&#160;$E5B6&#160;<br/>
E593&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>E594&#160;<br/>
A9&#160;38&#160;<br/>
LDA&#160;#$38&#160;<br/>
Print&#160;&#34;Found&#160;&#34;&#160;&lt;filename&gt;.&#160;<br/>
E596&#160;<br/>
A0&#160;E5&#160;<br/>
LDY&#160;#$E5&#160;<br/>
E598&#160;<br/>
4C&#160;AB&#160;E5&#160;<br/>
JMP&#160;$E5AB&#160;<br/>
E59B&#160;<br/>
AD&#160;5B&#160;02&#160;<br/>
LDA&#160;$025B&#160;<br/>
E59E&#160;<br/>
D0&#160;07&#160;<br/>
BNE&#160;$E5A7&#160;<br/>
VERIFYing&#160;data.&#160;<br/>
E5A0&#160;<br/>
A9&#160;1A&#160;<br/>
LDA&#160;#$1A&#160;<br/>
E5A2&#160;<br/>
A0&#160;E5&#160;<br/>
LDY&#160;#$E5&#160;<br/>
E5A4&#160;<br/>
4C&#160;AB&#160;E5&#160;<br/>
JMP&#160;$E5AB&#160;<br/>
Print&#160;&#34;Loading&#160;..&#160;&#34;.&#160;<br/>
E5A7&#160;<br/>
A9&#160;43&#160;<br/>
LDA&#160;#$43&#160;<br/>
E5A9&#160;<br/>
A0&#160;E5&#160;<br/>
LDY&#160;#$E5&#160;<br/>
E5AB&#160;<br/>
20&#160;EA&#160;E5&#160;<br/>
JSR&#160;$E5EA&#160;<br/>
Print&#160;&#34;Verifying&#160;..&#160;&#34;.&#160;<br/>
E5AE&#160;<br/>
A9&#160;93&#160;<br/>
LDA&#160;#$93&#160;<br/>
E5B0&#160;<br/>
A0&#160;02&#160;<br/>
LDY&#160;#$02&#160;<br/>
E5B2&#160;<br/>
20&#160;B6&#160;E5&#160;<br/>
JSR&#160;$E5B6&#160;<br/>
Print&#160;&lt;filename&gt;.&#160;<br/>
E5B5&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>E5B6&#160;<br/>
20&#160;65&#160;F8&#160;<br/>
JSR&#160;$F865&#160;<br/>
Print&#160;message&#160;to&#160;screen.&#160;<br/>
E5B9&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
E5BA&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
Set&#160;end&#160;of&#160;mesage&#160;indicator.&#160;<br/>
Pag&#160;&#160;e&#160;73&#160;<br/>
<hr/>
<a name=74></a>E5BC&#160;<br/>
8C&#160;5F&#160;02&#160;<br/>
STY&#160;$025F&#160;<br/>
E5BF&#160;<br/>
AD&#160;AE&#160;02&#160;<br/>
LDA&#160;$02AE&#160;<br/>
Using&#160;the&#160;table&#160;below,&#160;load&#160;up&#160;<br/>
E5C2&#160;<br/>
F0&#160;13&#160;<br/>
BEQ&#160;$E5D7&#160;<br/>
the&#160;character&#160;appropiate&#160;to&#160;<br/>
E5C4&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
type&#160;of&#160;file&#160;being&#160;used.&#160;Then&#160;<br/>
E5C5&#160;<br/>
2C&#160;AE&#160;02&#160;<br/>
BIT&#160;$02AE&#160;<br/>
print&#160;it&#160;to&#160;screen&#160;after&#160;the&#160;<br/>
E5C8&#160;<br/>
30&#160;0D&#160;<br/>
BMI&#160;$E5D7&#160;<br/>
other&#160;message.&#160;<br/>
E5CA&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
E5CB&#160;<br/>
2C&#160;AF&#160;02&#160;<br/>
BIT&#160;$02AF&#160;<br/>
E5CE&#160;<br/>
30&#160;07&#160;<br/>
BMI&#160;$E5D7&#160;<br/>
E5D0&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
E5D1&#160;<br/>
2C&#160;B0&#160;02&#160;<br/>
BIT&#160;$02B0&#160;<br/>
E5D4&#160;<br/>
30&#160;01&#160;<br/>
BMI&#160;$E5D7&#160;<br/>
E5D6&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
E5D7&#160;<br/>
B9&#160;E5&#160;E5&#160;<br/>
LDA&#160;$E5E5,Y&#160;<br/>
E5DA&#160;<br/>
8D&#160;5E&#160;02&#160;<br/>
STA&#160;$025E&#160;<br/>
E5DD&#160;<br/>
A9&#160;5E&#160;<br/>
LDA&#160;#$5E&#160;<br/>
E5DF&#160;<br/>
A0&#160;02&#160;<br/>
LDY&#160;#$02&#160;<br/>
E5E1&#160;<br/>
20&#160;65&#160;F8&#160;<br/>
JSR&#160;$F865&#160;<br/>
Print&#160;chars&#160;at&#160;$025E.&#160;<br/>
E5E4&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>E5E5&#160;<br/>
42&#160;43&#160;53&#160;49&#160;52&#160;<br/>
B&#160;C&#160;S&#160;I&#160;R&#160;<br/>
&#160;<br/>E5EA&#160;<br/>
20&#160;F5&#160;E5&#160;<br/>
JSR&#160;$E5F5&#160;<br/>
Clear&#160;status&#160;line&#160;of&#160;screen&#160;<br/>
E5ED&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
and&#160;then&#160;print&#160;message&#160;to&#160;<br/>
E5EF&#160;<br/>
20&#160;65&#160;F8&#160;<br/>
JSR&#160;$F865&#160;<br/>
screen.&#160;<br/>
E5F2&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
E5F3&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
E5F4&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>E5F5&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
Clear&#160;cassette&#160;status&#160;<br/>
E5F6&#160;<br/>
AD&#160;1F&#160;02&#160;<br/>
LDA&#160;$021F&#160;<br/>
message.&#160;<br/>
E5F9&#160;<br/>
D0&#160;0A&#160;<br/>
BNE&#160;$E605&#160;<br/>
In&#160;hires&#160;mode.&#160;<br/>
E5FB&#160;<br/>
A2&#160;22&#160;<br/>
LDX&#160;#$22&#160;<br/>
E5FD&#160;<br/>
A9&#160;10&#160;<br/>
LDA&#160;#$10&#160;<br/>
E5FF&#160;<br/>
9D&#160;80&#160;BB&#160;<br/>
STA&#160;$BB80,X&#160;<br/>
Write&#160;black&#160;paper&#160;to&#160;each&#160;<br/>
E602&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
column&#160;of&#160;status&#160;line&#160;being&#160;<br/>
E603&#160;<br/>
10&#160;FA&#160;<br/>
BPL&#160;$E5FF&#160;<br/>
cleared.&#160;<br/>
E605&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
E606&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>E607&#160;<br/>
20&#160;5A&#160;E7&#160;<br/>
JSR&#160;$E75A&#160;<br/>
<b>OUTPUT&#160;FILE&#160;HEADER.</b>&#160;<br/>
E60A&#160;<br/>
A9&#160;24&#160;<br/>
LDA&#160;#$24&#160;<br/>
Output&#160;tape&#160;leader&#160;and&#160;then&#160;<br/>
E60C&#160;<br/>
20&#160;5E&#160;E6&#160;<br/>
JSR&#160;$E65E&#160;<br/>
a&#160;$&#160;character.&#160;<br/>
E60F&#160;<br/>
A2&#160;09&#160;<br/>
LDX&#160;#$09&#160;<br/>
E611&#160;<br/>
BD&#160;A7&#160;02&#160;<br/>
LDA&#160;$02A7,X&#160;<br/>
Output&#160;header&#160;information.&#160;<br/>
E614&#160;<br/>
20&#160;5E&#160;E6&#160;<br/>
JSR&#160;$E65E&#160;<br/>
E617&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
E618&#160;<br/>
D0&#160;F7&#160;<br/>
BNE&#160;$E611&#160;<br/>
E61A&#160;<br/>
BD&#160;7F&#160;02&#160;<br/>
LDA&#160;$027F,X&#160;<br/>
Output&#160;filename&#160;with&#160;a&#160;null&#160;<br/>
E61D&#160;<br/>
F0&#160;06&#160;<br/>
BEQ&#160;$E625&#160;<br/>
afer&#160;it.&#160;<br/>
E61F&#160;<br/>
20&#160;5E&#160;E6&#160;<br/>
JSR&#160;$E65E&#160;<br/>
E622&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
E623&#160;<br/>
D0&#160;F5&#160;<br/>
BNE&#160;$E61A&#160;<br/>
E625&#160;<br/>
20&#160;5E&#160;E6&#160;<br/>
JSR&#160;$E65E&#160;<br/>
E628&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
E62A&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
Wait&#160;about&#160;1.3mS.&#160;<br/>
E62B&#160;<br/>
D0&#160;FD&#160;<br/>
BNE&#160;$E62A&#160;<br/>
E62D&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
Exit&#160;<br/>
&#160;<br/>E62E&#160;<br/>
AD&#160;A9&#160;02&#160;<br/>
LDA&#160;$02A9&#160;<br/>
E631&#160;<br/>
AC&#160;AA&#160;02&#160;<br/>
LDY&#160;$02AA&#160;<br/>
Transfer&#160;start&#160;of&#160;DATA.&#160;<br/>
E634&#160;<br/>
85&#160;33&#160;<br/>
STA&#160;$33&#160;<br/>
E636&#160;<br/>
84&#160;34&#160;<br/>
STY&#160;$34&#160;<br/>
E638&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
Pag&#160;&#160;e&#160;74&#160;<br/>
<hr/>
<a name=75></a>E63A&#160;<br/>
B1&#160;33&#160;<br/>
LDA&#160;($33),Y&#160;<br/>
Load&#160;next&#160;byte.&#160;<br/>
E63C&#160;<br/>
20&#160;5E&#160;E6&#160;<br/>
JSR&#160;$E65E&#160;<br/>
Output&#160;next&#160;byte.&#160;<br/>
E63F&#160;<br/>
20&#160;6C&#160;E5&#160;<br/>
JSR&#160;$E56C&#160;<br/>
Increment&#160;pointers.&#160;<br/>
E642&#160;<br/>
90&#160;F6&#160;<br/>
BCC&#160;$E63A&#160;<br/>
More&#160;to&#160;do.&#160;<br/>
E644&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>E645&#160;<br/>
10&#160;07&#160;53&#160;61&#160;76&#160;69&#160;<br/>
Data&#160;for&#160;&#34;Saving&#34;&#160;<br/>
E64B&#160;<br/>
6E&#160;67&#160;20&#160;2E&#160;2E&#160;00&#160;<br/>
&#160;<br/>E651&#160;<br/>
AD&#160;B1&#160;02&#160;<br/>
LDA&#160;$02B1&#160;<br/>
Print&#160;out&#160;string&#160;after&#160;&#34;&#160;if&#160;<br/>
E654&#160;<br/>
F0&#160;07&#160;<br/>
BEQ&#160;$E65D&#160;<br/>
there&#160;was&#160;an&#160;error&#160;in&#160;format.&#160;<br/>
E656&#160;<br/>
A9&#160;27&#160;<br/>
LDA&#160;#$27&#160;<br/>
E658&#160;<br/>
A0&#160;E5&#160;<br/>
LDY&#160;#$E5&#160;<br/>
E65A&#160;<br/>
20&#160;B0&#160;CC&#160;<br/>
JSR&#160;$CCB0&#160;<br/>
E65D&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>E65E&#160;<br/>
85&#160;2F&#160;<br/>
STA&#160;$2F&#160;<br/>
<b>OUTPUT&#160;BYTE&#160;TO&#160;CASSETTE.</b>&#160;<br/>
E660&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
$2F&#160;holds&#160;byte&#160;going&#160;out.&#160;<br/>
E661&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
E662&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
E663&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
E664&#160;<br/>
20&#160;C0&#160;E6&#160;<br/>
JSR&#160;$E6C0&#160;<br/>
Wait&#160;until&#160;timer&#160;1&#160;has&#160;counted&#160;<br/>
E667&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
out.&#160;<br/>
E668&#160;<br/>
A0&#160;09&#160;<br/>
LDY&#160;#$09&#160;<br/>
E66A&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
E66C&#160;<br/>
F0&#160;06&#160;<br/>
BEQ&#160;$E674&#160;<br/>
E66E&#160;<br/>
46&#160;2F&#160;<br/>
LSR&#160;$2F&#160;<br/>
E670&#160;<br/>
08&#160;<br/>
PHP&#160;<br/>
Shift&#160;out&#160;the&#160;byte&#160;to&#160;be&#160;sent&#160;<br/>
E671&#160;<br/>
69&#160;00&#160;<br/>
ADC&#160;#$00&#160;<br/>
a&#160;bit&#160;at&#160;a&#160;time&#160;until&#160;whole&#160;<br/>
E673&#160;<br/>
28&#160;<br/>
PLP&#160;<br/>
byte&#160;is&#160;done.&#160;<br/>
E674&#160;<br/>
20&#160;8B&#160;E6&#160;<br/>
JSR&#160;$E68B&#160;<br/>
Output&#160;bit.&#160;<br/>
E677&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
E678&#160;<br/>
D0&#160;F4&#160;<br/>
BNE&#160;$E66E&#160;<br/>
E67A&#160;<br/>
49&#160;01&#160;<br/>
EOR&#160;#$01&#160;<br/>
E67C&#160;<br/>
4A&#160;<br/>
LSR&#160;A&#160;<br/>
E67D&#160;<br/>
A0&#160;04&#160;<br/>
LDY&#160;#$04&#160;<br/>
Output&#160;4&#160;extra&#160;bits&#160;of&#160;zero&#160;<br/>
E67F&#160;<br/>
20&#160;8B&#160;E6&#160;<br/>
JSR&#160;$E68B&#160;<br/>
at&#160;end&#160;of&#160;each&#160;byte.&#160;<br/>
E682&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
E683&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
E684&#160;<br/>
D0&#160;F9&#160;<br/>
BNE&#160;$E67F&#160;<br/>
E686&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
E687&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
E688&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
E689&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
E68A&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
E68B&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
Output&#160;bit&#160;to&#160;tape.&#160;<br/>
E68C&#160;<br/>
08&#160;<br/>
PHP&#160;<br/>
E68D&#160;<br/>
AD&#160;4D&#160;02&#160;<br/>
LDA&#160;$024D&#160;<br/>
E690&#160;<br/>
D0&#160;0A&#160;<br/>
BNE&#160;$E69C&#160;<br/>
Slow&#160;tape&#160;speed.&#160;<br/>
E692&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
E693&#160;<br/>
20&#160;B2&#160;E6&#160;<br/>
JSR&#160;$E6B2&#160;<br/>
Set&#160;timer&#160;1&#160;and&#160;wait&#160;until&#160;<br/>
E696&#160;<br/>
28&#160;<br/>
PLP&#160;<br/>
timeout&#160;twice&#160;so&#160;whole&#160;cycle&#160;<br/>
E697&#160;<br/>
20&#160;B2&#160;E6&#160;<br/>
JSR&#160;$E6B2&#160;<br/>
is&#160;output&#160;on&#160;cassette&#160;line&#160;-&#160;<br/>
E69A&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
PB7.&#160;<br/>
E69B&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>E69C&#160;<br/>
20&#160;B2&#160;E6&#160;<br/>
JSR&#160;$E6B2&#160;<br/>
Slow&#160;tape&#160;speed&#160;-&#160;wait&#160;an&#160;<br/>
E69F&#160;<br/>
A2&#160;0F&#160;<br/>
LDX&#160;#$0F&#160;<br/>
extra&#160;7&#160;times&#160;as&#160;long&#160;for&#160;<br/>
E6A1&#160;<br/>
28&#160;<br/>
PLP&#160;<br/>
cycle.&#160;<br/>
E6A2&#160;<br/>
B0&#160;02&#160;<br/>
BCS&#160;$E6A6&#160;<br/>
E6A4&#160;<br/>
A2&#160;07&#160;<br/>
LDX&#160;#$07&#160;<br/>
E6A6&#160;<br/>
20&#160;AB&#160;E6&#160;<br/>
JSR&#160;$E6AB&#160;<br/>
E6A9&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
E6AA&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
Pag&#160;&#160;e&#160;75&#160;<br/>
<hr/>
<a name=76></a>&#160;<br/>E6AB&#160;<br/>
20&#160;C0&#160;E6&#160;<br/>
JSR&#160;$E6C0&#160;<br/>
Wait&#160;until&#160;timer&#160;1&#160;has&#160;counted&#160;<br/>
E6AE&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
out&#160;X&#160;times&#160;over.&#160;<br/>
E6AF&#160;<br/>
D0&#160;FA&#160;<br/>
BNE&#160;$E6AB&#160;<br/>
E6B1&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>E6B2&#160;<br/>
A9&#160;D0&#160;<br/>
LDA&#160;#$D0&#160;<br/>
Set&#160;timer&#160;1&#160;and&#160;wait&#160;for&#160;a&#160;<br/>
E6B4&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
time&#160;out.&#160;No&#160;interrupt&#160;is&#160;<br/>
E6B6&#160;<br/>
B0&#160;02&#160;<br/>
BCS&#160;$E6BA&#160;<br/>
generated,&#160;the&#160;interrupt&#160;flag&#160;<br/>
E6B8&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
register&#160;is&#160;polled&#160;until&#160;time&#160;<br/>
E6B9&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
out.&#160;<br/>
E6BA&#160;<br/>
8D&#160;06&#160;03&#160;<br/>
STA&#160;$0306&#160;<br/>
E6BD&#160;<br/>
8E&#160;07&#160;03&#160;<br/>
STX&#160;$0307&#160;<br/>
E6C0&#160;<br/>
AD&#160;04&#160;03&#160;<br/>
LDA&#160;$0304&#160;<br/>
E6C3&#160;<br/>
2C&#160;0D&#160;03&#160;<br/>
BIT&#160;$030D&#160;<br/>
E6C6&#160;<br/>
50&#160;FB&#160;<br/>
BVC&#160;$E6C3&#160;<br/>
E6C8&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>E6C9&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
<b>READ&#160;BYTE&#160;FROM&#160;TAPE.</b>&#160;<br/>
E6CA&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
The&#160;byte&#160;is&#160;generated&#160;by&#160;<br/>
E6CB&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
shifting&#160;a&#160;series&#160;of&#160;bits&#160;into&#160;<br/>
E6CC&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
$2F.&#160;This&#160;routine&#160;does&#160;a&#160;<br/>
E6CD&#160;<br/>
20&#160;1C&#160;E7&#160;<br/>
JSR&#160;$E71C&#160;<br/>
series&#160;of&#160;timings&#160;using&#160;timer&#160;<br/>
E6D0&#160;<br/>
20&#160;1C&#160;E7&#160;<br/>
JSR&#160;$E71C&#160;<br/>
2&#160;to&#160;get&#160;each&#160;bit&#160;of&#160;data.&#160;8&#160;<br/>
E6D3&#160;<br/>
B0&#160;FB&#160;<br/>
BCS&#160;$E6D0&#160;<br/>
bits&#160;are&#160;then&#160;compiled&#160;into&#160;<br/>
E6D5&#160;<br/>
20&#160;FF&#160;E6&#160;<br/>
JSR&#160;$E6FF&#160;<br/>
the&#160;next&#160;byte.&#160;<br/>
E6D8&#160;<br/>
B0&#160;16&#160;<br/>
BCS&#160;$E6F0&#160;<br/>
E6DA&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
E6DC&#160;<br/>
A0&#160;08&#160;<br/>
LDY&#160;#$08&#160;<br/>
E6DE&#160;<br/>
20&#160;FC&#160;E6&#160;<br/>
JSR&#160;$E6FC&#160;<br/>
E6E1&#160;<br/>
08&#160;<br/>
PHP&#160;<br/>
E6E2&#160;<br/>
66&#160;2F&#160;<br/>
ROR&#160;$2F&#160;<br/>
E6E4&#160;<br/>
28&#160;<br/>
PLP&#160;<br/>
E6E5&#160;<br/>
69&#160;00&#160;<br/>
ADC&#160;#$00&#160;<br/>
E6E7&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
E6E8&#160;<br/>
D0&#160;F4&#160;<br/>
BNE&#160;$E6DE&#160;<br/>
E6EA&#160;<br/>
20&#160;FC&#160;E6&#160;<br/>
JSR&#160;$E6FC&#160;<br/>
E6ED&#160;<br/>
E9&#160;00&#160;<br/>
SBC&#160;#$00&#160;<br/>
E6EF&#160;<br/>
4A&#160;<br/>
LSR&#160;A&#160;<br/>
E6F0&#160;<br/>
90&#160;03&#160;<br/>
BCC&#160;$E6F5&#160;<br/>
E6F2&#160;<br/>
2E&#160;B1&#160;02&#160;<br/>
ROL&#160;$02B1&#160;<br/>
E6F5&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
E6F6&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
E6F7&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
E6F8&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
E6F9&#160;<br/>
A5&#160;2F&#160;<br/>
LDA&#160;$2F&#160;<br/>
E6FB&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>E6FC&#160;<br/>
20&#160;1C&#160;E7&#160;<br/>
JSR&#160;$E71C&#160;<br/>
Depending&#160;whether&#160;the&#160;<br/>
E6FF&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
cassette&#160;load&#160;is&#160;slow&#160;or&#160;fast&#160;<br/>
E700&#160;<br/>
AD&#160;4D&#160;02&#160;<br/>
LDA&#160;$024D&#160;<br/>
,&#160;this&#160;routine&#160;waits&#160;for&#160;a&#160;<br/>
E703&#160;<br/>
F0&#160;15&#160;<br/>
BEQ&#160;$E71A&#160;<br/>
series&#160;of&#160;active&#160;pulses&#160;from&#160;<br/>
E705&#160;<br/>
20&#160;1C&#160;E7&#160;<br/>
JSR&#160;$E71C&#160;<br/>
the&#160;cassette&#160;input.&#160;<br/>
E708&#160;<br/>
A2&#160;02&#160;<br/>
LDX&#160;#$02&#160;<br/>
E70A&#160;<br/>
90&#160;02&#160;<br/>
BCC&#160;$E70E&#160;<br/>
E70C&#160;<br/>
A2&#160;06&#160;<br/>
LDX&#160;#$06&#160;<br/>
E70E&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
E710&#160;<br/>
20&#160;1C&#160;E7&#160;<br/>
JSR&#160;$E71C&#160;<br/>
E713&#160;<br/>
69&#160;00&#160;<br/>
ADC&#160;#$00&#160;<br/>
E715&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
E716&#160;<br/>
D0&#160;F8&#160;<br/>
BNE&#160;$E710&#160;<br/>
E718&#160;<br/>
C9&#160;04&#160;<br/>
CMP&#160;#$04&#160;<br/>
E71A&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
E71B&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
Pag&#160;&#160;e&#160;76&#160;<br/>
<hr/>
<a name=77></a>&#160;<br/>E71C&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
Cassette&#160;input&#160;timing.&#160;<br/>
E71D&#160;<br/>
AD&#160;00&#160;03&#160;<br/>
LDA&#160;$0300&#160;<br/>
This&#160;routine&#160;waits&#160;for&#160;an&#160;<br/>
E720&#160;<br/>
AD&#160;0D&#160;03&#160;<br/>
LDA&#160;$030D&#160;<br/>
active&#160;transition&#160;of&#160;the&#160;<br/>
E723&#160;<br/>
29&#160;10&#160;<br/>
AND&#160;#$10&#160;<br/>
cassette&#160;input&#160;line&#160;(CB1&#160;of&#160;<br/>
E725&#160;<br/>
F0&#160;F9&#160;<br/>
BEQ&#160;$E720&#160;<br/>
6522).&#160;The&#160;time&#160;taken&#160;to&#160;<br/>
E727&#160;<br/>
AD&#160;09&#160;03&#160;<br/>
LDA&#160;$0309&#160;<br/>
receive&#160;it&#160;is&#160;measured&#160;using&#160;<br/>
E72A&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
timer&#160;2&#160;of&#160;6522.&#160;<br/>
E72B&#160;<br/>
A9&#160;FF&#160;<br/>
LDA&#160;#$FF&#160;<br/>
E72D&#160;<br/>
8D&#160;09&#160;03&#160;<br/>
STA&#160;$0309&#160;<br/>
E730&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
E731&#160;<br/>
C9&#160;FE&#160;<br/>
CMP&#160;#$FE&#160;<br/>
E733&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
E734&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>E735&#160;<br/>
20&#160;FC&#160;E6&#160;<br/>
JSR&#160;$E6FC&#160;<br/>
<b>GET&#160;IN&#160;SYNC&#160;WITH&#160;CASSETTE&#160;DATA</b>&#160;<br/>
E738&#160;<br/>
66&#160;2F&#160;<br/>
ROR&#160;$2F&#160;<br/>
Get&#160;bits&#160;in&#160;until&#160;byte&#160;holds&#160;<br/>
E73A&#160;<br/>
A9&#160;16&#160;<br/>
LDA&#160;#$16&#160;<br/>
#16&#160;-&#160;the&#160;value&#160;of&#160;the&#160;bytes&#160;<br/>
E73C&#160;<br/>
C5&#160;2F&#160;<br/>
CMP&#160;$2F&#160;<br/>
sent&#160;out&#160;as&#160;tape&#160;leader.&#160;<br/>
E73E&#160;<br/>
D0&#160;F5&#160;<br/>
BNE&#160;$E735&#160;<br/>
E740&#160;<br/>
AD&#160;4D&#160;02&#160;<br/>
LDA&#160;$024D&#160;<br/>
E743&#160;<br/>
F0&#160;08&#160;<br/>
BEQ&#160;$E74D&#160;<br/>
Fast&#160;load&#160;(2400&#160;baud).&#160;<br/>
E745&#160;<br/>
20&#160;1C&#160;E7&#160;<br/>
JSR&#160;$E71C&#160;<br/>
E748&#160;<br/>
20&#160;1C&#160;E7&#160;<br/>
JSR&#160;$E71C&#160;<br/>
E74B&#160;<br/>
B0&#160;FB&#160;<br/>
BCS&#160;$E748&#160;<br/>
E74D&#160;<br/>
A2&#160;03&#160;<br/>
LDX&#160;#$03&#160;<br/>
Read&#160;3&#160;successive&#160;bytes&#160;of&#160;#16&#160;<br/>
E74F&#160;<br/>
20&#160;C9&#160;E6&#160;<br/>
JSR&#160;$E6C9&#160;<br/>
from&#160;cassette.&#160;If&#160;any&#160;byte&#160;is&#160;<br/>
E752&#160;<br/>
C9&#160;16&#160;<br/>
CMP&#160;#$16&#160;<br/>
not&#160;#16&#160;then&#160;start&#160;again.&#160;<br/>
E754&#160;<br/>
D0&#160;DF&#160;<br/>
BNE&#160;$E735&#160;<br/>
E756&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
E757&#160;<br/>
D0&#160;F6&#160;<br/>
BNE&#160;$E74F&#160;<br/>
E759&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>E75A&#160;<br/>
A2&#160;02&#160;<br/>
LDX&#160;#$02&#160;<br/>
<b>OUTPUT&#160;TAPE&#160;LEADER.</b>&#160;<br/>
E75C&#160;<br/>
A0&#160;03&#160;<br/>
LDY&#160;#$03&#160;<br/>
E75E&#160;<br/>
A9&#160;16&#160;<br/>
LDA&#160;#$16&#160;<br/>
Use&#160;X&#160;and&#160;Y&#160;to&#160;count&#160;out&#160;259&#160;<br/>
E760&#160;<br/>
20&#160;5E&#160;E6&#160;<br/>
JSR&#160;$E65E&#160;<br/>
bytes&#160;of&#160;#16&#160;that&#160;are&#160;sent&#160;out&#160;<br/>
E763&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
as&#160;tape&#160;leader.&#160;<br/>
E764&#160;<br/>
D0&#160;F8&#160;<br/>
BNE&#160;$E75E&#160;<br/>
E766&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
E767&#160;<br/>
D0&#160;F5&#160;<br/>
BNE&#160;$E75E&#160;<br/>
E769&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>E76A&#160;<br/>
20&#160;1A&#160;EE&#160;<br/>
JSR&#160;$EE1A&#160;<br/>
<b>SET&#160;6522&#160;FOR&#160;CASSETTE&#160;SYSTEM.</b>&#160;<br/>
E76D&#160;<br/>
A0&#160;06&#160;<br/>
LDY&#160;#$06&#160;<br/>
Disable&#160;timer&#160;1&#160;interrupts&#160;and&#160;<br/>
E76F&#160;<br/>
78&#160;<br/>
SEI&#160;<br/>
then&#160;load&#160;up&#160;the&#160;6522's&#160;<br/>
E770&#160;<br/>
BE&#160;82&#160;E7&#160;<br/>
LDX&#160;$E782,Y&#160;<br/>
registers&#160;with&#160;data&#160;in&#160;the&#160;<br/>
E773&#160;<br/>
B9&#160;89&#160;E7&#160;<br/>
LDA&#160;$E789,Y&#160;<br/>
table&#160;below.&#160;<br/>
E776&#160;<br/>
9D&#160;00&#160;03&#160;<br/>
STA&#160;$0300,X&#160;<br/>
E779&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
E77A&#160;<br/>
10&#160;F4&#160;<br/>
BPL&#160;$E770&#160;<br/>
E77C&#160;<br/>
A9&#160;40&#160;<br/>
LDA&#160;#$40&#160;<br/>
E77E&#160;<br/>
8D&#160;00&#160;03&#160;<br/>
STA&#160;$0300&#160;<br/>
E781&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>E782&#160;<br/>
05&#160;04&#160;0B&#160;02&#160;0C&#160;08&#160;0E&#160;<br/>
List&#160;of&#160;registers&#160;and&#160;data&#160;for&#160;<br/>
E789&#160;<br/>
00&#160;D0&#160;C0&#160;FF&#160;10&#160;F4&#160;7F&#160;<br/>
the&#160;routine&#160;above.&#160;<br/>
&#160;<br/>E790&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
Routine&#160;to&#160;compare&#160;the&#160;names&#160;<br/>
E792&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
of&#160;the&#160;file&#160;wanted&#160;and&#160;that&#160;<br/>
E794&#160;<br/>
AD&#160;7F&#160;02&#160;<br/>
LDA&#160;$027F&#160;<br/>
whose&#160;header&#160;has&#160;just&#160;been&#160;<br/>
E797&#160;<br/>
F0&#160;15&#160;<br/>
BEQ&#160;$E7AE&#160;<br/>
loaded.&#160;<br/>
E799&#160;<br/>
B9&#160;7F&#160;02&#160;<br/>
LDA&#160;$027F,Y&#160;<br/>
E79C&#160;<br/>
D9&#160;93&#160;02&#160;<br/>
CMP&#160;$0293,Y&#160;<br/>
Pag&#160;&#160;e&#160;77&#160;<br/>
<hr/>
<a name=78></a>E79F&#160;<br/>
F0&#160;01&#160;<br/>
BEQ&#160;$E7A2&#160;<br/>
E7A1&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
E7A2&#160;<br/>
99&#160;93&#160;02&#160;<br/>
STA&#160;$0293,Y&#160;<br/>
E7A5&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
E7A6&#160;<br/>
C0&#160;11&#160;<br/>
CPY&#160;#$11&#160;<br/>
E7A8&#160;<br/>
B0&#160;04&#160;<br/>
BCS&#160;$E7AE&#160;<br/>
E7AA&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
E7AB&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
E7AC&#160;<br/>
D0&#160;EB&#160;<br/>
BNE&#160;$E799&#160;<br/>
E7AE&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>E7AF&#160;<br/>
4C&#160;70&#160;D0&#160;<br/>
JMP&#160;$D070&#160;<br/>
Print&#160;&#34;SYNTAX&#160;ERROR&#34;.&#160;<br/>
&#160;<br/>E7B2&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
<b>CHECK&#160;CSAVE/CLOAD&#160;PARAMETERS</b>&#160;<br/>
E7B4&#160;<br/>
8D&#160;4D&#160;02&#160;<br/>
STA&#160;$024D&#160;<br/>
Default&#160;Speed.&#160;<br/>
E7B7&#160;<br/>
8D&#160;AD&#160;02&#160;<br/>
STA&#160;$02AD&#160;<br/>
Reset&#160;AUTO&#160;flag.&#160;<br/>
E7BA&#160;<br/>
8D&#160;AE&#160;02&#160;<br/>
STA&#160;$02AE&#160;<br/>
Reset&#160;file&#160;type&#160;to&#160;Basic.&#160;<br/>
E7BD&#160;<br/>
8D&#160;5B&#160;02&#160;<br/>
STA&#160;$025B&#160;<br/>
Clear&#160;VERIFY&#160;flag.&#160;<br/>
E7C0&#160;<br/>
8D&#160;5A&#160;02&#160;<br/>
STA&#160;$025A&#160;<br/>
Clear&#160;JOIN&#160;fig.&#160;<br/>
E7C3&#160;<br/>
8D&#160;5C&#160;02&#160;<br/>
STA&#160;$025C&#160;<br/>
Clear&#160;error&#160;counter&#160;LSB.&#160;<br/>
E7C6&#160;<br/>
8D&#160;5D&#160;02&#160;<br/>
STA&#160;$025D&#160;<br/>
Clear&#160;error&#160;counter&#160;MSB.&#160;<br/>
E7C9&#160;<br/>
8D&#160;B1&#160;02&#160;<br/>
STA&#160;$02B1&#160;<br/>
Clear&#160;error&#160;in&#160;file&#160;format.&#160;<br/>
E7CC&#160;<br/>
20&#160;17&#160;CF&#160;<br/>
JSR&#160;$CF17&#160;<br/>
Evaluate&#160;expression.&#160;<br/>
E7CF&#160;<br/>
24&#160;28&#160;<br/>
BIT&#160;$28&#160;<br/>
E7D1&#160;<br/>
10&#160;DC&#160;<br/>
BPL&#160;$E7AF&#160;<br/>
Error&#160;if&#160;not&#160;string&#160;type.&#160;<br/>
E7D3&#160;<br/>
20&#160;D0&#160;D7&#160;<br/>
JSR&#160;$D7D0&#160;<br/>
Set&#160;up&#160;string&#160;in&#160;main&#160;FPA.&#160;<br/>
E7D6&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
E7D7&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
E7D9&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
E7DA&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
E7DB&#160;<br/>
F0&#160;0A&#160;<br/>
BEQ&#160;$E7E7&#160;<br/>
E7DD&#160;<br/>
B1&#160;91&#160;<br/>
LDA&#160;($91),Y&#160;<br/>
Transfer&#160;name&#160;of&#160;file&#160;to&#160;be&#160;<br/>
E7DF&#160;<br/>
99&#160;7F&#160;02&#160;<br/>
STA&#160;$027F,Y&#160;<br/>
loaded,&#160;saved&#160;or&#160;verified.&#160;<br/>
E7E2&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
E7E3&#160;<br/>
C0&#160;10&#160;<br/>
CPY&#160;#$10&#160;<br/>
E7E5&#160;<br/>
D0&#160;F3&#160;<br/>
BNE&#160;$E7DA&#160;<br/>
E7E7&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
E7E9&#160;<br/>
99&#160;7F&#160;02&#160;<br/>
STA&#160;$027F,Y&#160;<br/>
End&#160;filename&#160;with&#160;a&#160;null.&#160;<br/>
E7EC&#160;<br/>
20&#160;E8&#160;00&#160;<br/>
JSR&#160;$00E8&#160;<br/>
Clear&#160;spaces&#160;in&#160;text.&#160;<br/>
E7EF&#160;<br/>
F0&#160;61&#160;<br/>
BEQ&#160;$E852&#160;<br/>
End&#160;of&#160;statement.&#160;<br/>
E7F1&#160;<br/>
C9&#160;2C&#160;<br/>
CMP&#160;#$2C&#160;<br/>
Error&#160;if&#160;next&#160;character&#160;is&#160;not&#160;<br/>
E7F3&#160;<br/>
D0&#160;BA&#160;<br/>
BNE&#160;$E7AF&#160;<br/>
a&#160;comma.&#160;<br/>
E7F5&#160;<br/>
20&#160;E2&#160;00&#160;<br/>
JSR&#160;$00E2&#160;<br/>
Clear&#160;spaces.&#160;<br/>
E7F8&#160;<br/>
F0&#160;58&#160;<br/>
BEQ&#160;$E852&#160;<br/>
End&#160;of&#160;statement.&#160;<br/>
E7FA&#160;<br/>
C9&#160;2C&#160;<br/>
CMP&#160;#$2C&#160;<br/>
Get&#160;next&#160;character&#160;if&#160;comma&#160;<br/>
E7FC&#160;<br/>
F0&#160;F7&#160;<br/>
BEQ&#160;$E7F5&#160;<br/>
found.&#160;<br/>
E7FE&#160;<br/>
C9&#160;C7&#160;<br/>
CMP&#160;#$C7&#160;<br/>
E800&#160;<br/>
D0&#160;05&#160;<br/>
BNE&#160;$E807&#160;<br/>
'AUTO'&#160;token&#160;not&#160;found.&#160;<br/>
E802&#160;<br/>
8D&#160;AD&#160;02&#160;<br/>
STA&#160;$02AD&#160;<br/>
Set&#160;AUTO&#160;indicator.&#160;<br/>
E805&#160;<br/>
B0&#160;EE&#160;<br/>
BCS&#160;$E7F5&#160;<br/>
E807&#160;<br/>
C9&#160;53&#160;<br/>
CMP&#160;#$53&#160;<br/>
E809&#160;<br/>
D0&#160;05&#160;<br/>
BNE&#160;$E810&#160;<br/>
No&#160;'S'&#160;for&#160;slow&#160;tape&#160;speed.&#160;<br/>
E80B&#160;<br/>
8D&#160;4D&#160;02&#160;<br/>
STA&#160;$024D&#160;<br/>
Set&#160;slow&#160;tape&#160;speed.&#160;<br/>
E80E&#160;<br/>
B0&#160;E5&#160;<br/>
BCS&#160;$E7F5&#160;<br/>
E810&#160;<br/>
C9&#160;56&#160;<br/>
CMP&#160;#$56&#160;<br/>
E812&#160;<br/>
D0&#160;05&#160;<br/>
BNE&#160;$E819&#160;<br/>
No&#160;'V'&#160;for&#160;file&#160;verify.&#160;<br/>
E814&#160;<br/>
8D&#160;5B&#160;02&#160;<br/>
STA&#160;$025B&#160;<br/>
Set&#160;verify&#160;flag.&#160;<br/>
E817&#160;<br/>
B0&#160;DC&#160;<br/>
BCS&#160;$E7F5&#160;<br/>
E819&#160;<br/>
C9&#160;4A&#160;<br/>
CMP&#160;#$4A&#160;<br/>
E81B&#160;<br/>
D0&#160;05&#160;<br/>
BNE&#160;$E822&#160;<br/>
No&#160;'J'&#160;for&#160;JOINing&#160;files.&#160;<br/>
E81D&#160;<br/>
8D&#160;5A&#160;02&#160;<br/>
STA&#160;$025A&#160;<br/>
Set&#160;JOIN&#160;flag.&#160;<br/>
E820&#160;<br/>
B0&#160;D3&#160;<br/>
BCS&#160;$E7F5&#160;<br/>
E822&#160;<br/>
C9&#160;41&#160;<br/>
CMP&#160;#$41&#160;<br/>
E824&#160;<br/>
F0&#160;04&#160;<br/>
BEQ&#160;$E82A&#160;<br/>
'A'&#160;found&#160;-&#160;machine&#160;code&#160;prog.&#160;<br/>
Pag&#160;&#160;e&#160;78&#160;<br/>
<hr/>
<a name=79></a>E826&#160;<br/>
C9&#160;45&#160;<br/>
CMP&#160;#$45&#160;<br/>
No&#160;'E'&#160;to&#160;indicate&#160;end&#160;of&#160;<br/>
E828&#160;<br/>
D0&#160;47&#160;<br/>
BNE&#160;$E871&#160;<br/>
machine&#160;code&#160;program&#160;<br/>
E82A&#160;<br/>
85&#160;0E&#160;<br/>
STA&#160;$0E&#160;<br/>
Save&#160;A/E&#160;-&#160;start/end&#160;indic'r.&#160;<br/>
E82C&#160;<br/>
20&#160;E2&#160;00&#160;<br/>
JSR&#160;$00E2&#160;<br/>
Clear&#160;space.&#160;<br/>
E82F&#160;<br/>
A2&#160;80&#160;<br/>
LDX&#160;#$80&#160;<br/>
Inhibit&#160;AUTO&#160;loading&#160;of&#160;<br/>
E831&#160;<br/>
8E&#160;AE&#160;02&#160;<br/>
STX&#160;$02AE&#160;<br/>
machine&#160;code&#160;programs.&#160;<br/>
E834&#160;<br/>
20&#160;53&#160;E8&#160;<br/>
JSR&#160;$E853&#160;<br/>
Get&#160;numeric&#160;integer.&#160;<br/>
E837&#160;<br/>
A5&#160;33&#160;<br/>
LDA&#160;$33&#160;<br/>
E839&#160;<br/>
A4&#160;34&#160;<br/>
LDY&#160;$34&#160;<br/>
Transfer&#160;integer&#160;to&#160;pointers&#160;<br/>
E83B&#160;<br/>
A6&#160;0E&#160;<br/>
LDX&#160;$0E&#160;<br/>
in&#160;page&#160;2&#160;depending&#160;whether&#160;it&#160;<br/>
E83D&#160;<br/>
E0&#160;41&#160;<br/>
CPX&#160;#$41&#160;<br/>
it&#160;is&#160;the&#160;start&#160;or&#160;end&#160;address&#160;<br/>
E83F&#160;<br/>
D0&#160;08&#160;<br/>
BNE&#160;$E849&#160;<br/>
of&#160;the&#160;machine&#160;code&#160;routine&#160;or&#160;<br/>
E841&#160;<br/>
8D&#160;A9&#160;02&#160;<br/>
STA&#160;$02A9&#160;<br/>
block&#160;of&#160;data.&#160;<br/>
E844&#160;<br/>
8C&#160;AA&#160;02&#160;<br/>
STY&#160;$02AA&#160;<br/>
E847&#160;<br/>
B0&#160;A3&#160;<br/>
BCS&#160;$E7EC&#160;<br/>
E849&#160;<br/>
8D&#160;AB&#160;02&#160;<br/>
STA&#160;$02AB&#160;<br/>
E84C&#160;<br/>
8C&#160;AC&#160;02&#160;<br/>
STY&#160;$02AC&#160;<br/>
E84F&#160;<br/>
4C&#160;EC&#160;E7&#160;<br/>
JMP&#160;$E7EC&#160;<br/>
Jump&#160;back&#160;for&#160;more&#160;input.&#160;<br/>
E852&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
Exit.&#160;<br/>
&#160;<br/>E853&#160;<br/>
20&#160;03&#160;CF&#160;<br/>
JSR&#160;$CF03&#160;<br/>
Get&#160;numeric&#160;expression&#160;and&#160;<br/>
E856&#160;<br/>
20&#160;22&#160;D9&#160;<br/>
JSR&#160;$D922&#160;<br/>
convert&#160;it&#160;into&#160;integer&#160;at&#160;$33&#160;<br/>
E859&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
and&#160;$34.&#160;<br/>
E85A&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>E85B&#160;<br/>
08&#160;<br/>
PHP&#160;<br/>
<b>CLOAD</b>&#160;<br/>
E85C&#160;<br/>
20&#160;B2&#160;E7&#160;<br/>
JSR&#160;$E7B2&#160;<br/>
Set&#160;up&#160;variables.&#160;<br/>
E85F&#160;<br/>
AD&#160;AD&#160;02&#160;<br/>
LDA&#160;$02AD&#160;<br/>
E862&#160;<br/>
0D&#160;AE&#160;02&#160;<br/>
ORA&#160;$02AE&#160;<br/>
Error&#160;if&#160;trying&#160;the&#160;AUTO&#160;load&#160;<br/>
E865&#160;<br/>
D0&#160;0A&#160;<br/>
BNE&#160;$E871&#160;<br/>
of&#160;a&#160;non&#160;Basic&#160;program.&#160;<br/>
E867&#160;<br/>
AD&#160;5A&#160;02&#160;<br/>
LDA&#160;$025A&#160;<br/>
Give&#160;error&#160;also&#160;if&#160;JOIN&#160;and&#160;<br/>
E86A&#160;<br/>
F0&#160;08&#160;<br/>
BEQ&#160;$E874&#160;<br/>
VERIFY&#160;both&#160;set.&#160;<br/>
E86C&#160;<br/>
AD&#160;5B&#160;02&#160;<br/>
LDA&#160;$025B&#160;<br/>
E86F&#160;<br/>
F0&#160;03&#160;<br/>
BEQ&#160;$E874&#160;<br/>
E871&#160;<br/>
4C&#160;70&#160;D0&#160;<br/>
JMP&#160;$D070&#160;<br/>
Print&#160;&#34;SYNTAX&#160;ERROR&#34;.&#160;<br/>
E874&#160;<br/>
20&#160;6A&#160;E7&#160;<br/>
JSR&#160;$E76A&#160;<br/>
Set&#160;6522.&#160;<br/>
E877&#160;<br/>
20&#160;7D&#160;E5&#160;<br/>
JSR&#160;$E57D&#160;<br/>
Print&#160;&#34;SEARCHING&#34;.&#160;<br/>
E87A&#160;<br/>
20&#160;AC&#160;E4&#160;<br/>
JSR&#160;$E4AC&#160;<br/>
Read&#160;file&#160;header.&#160;<br/>
E87D&#160;<br/>
2C&#160;AE&#160;02&#160;<br/>
BIT&#160;$02AE&#160;<br/>
E880&#160;<br/>
70&#160;F8&#160;<br/>
BVS&#160;$E87A&#160;<br/>
E882&#160;<br/>
AD&#160;5A&#160;02&#160;<br/>
LDA&#160;$025A&#160;<br/>
E885&#160;<br/>
F0&#160;2C&#160;<br/>
BEQ&#160;$E8B3&#160;<br/>
E887&#160;<br/>
AD&#160;AE&#160;02&#160;<br/>
LDA&#160;$02AE&#160;<br/>
E88A&#160;<br/>
D0&#160;EE&#160;<br/>
BNE&#160;$E87A&#160;<br/>
E88C&#160;<br/>
A5&#160;9C&#160;<br/>
LDA&#160;$9C&#160;<br/>
E88E&#160;<br/>
A4&#160;9D&#160;<br/>
LDY&#160;$9D&#160;<br/>
E890&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
E891&#160;<br/>
E9&#160;02&#160;<br/>
SBC&#160;#$02&#160;<br/>
E893&#160;<br/>
B0&#160;01&#160;<br/>
BCS&#160;$E896&#160;<br/>
E895&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
E896&#160;<br/>
8D&#160;A9&#160;02&#160;<br/>
STA&#160;$02A9&#160;<br/>
E899&#160;<br/>
8C&#160;AA&#160;02&#160;<br/>
STY&#160;$02AA&#160;<br/>
E89C&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
Set&#160;pointers&#160;to&#160;the&#160;amount&#160;of&#160;<br/>
E89D&#160;<br/>
E5&#160;9A&#160;<br/>
SBC&#160;$9A&#160;<br/>
data&#160;and&#160;where&#160;it&#160;is&#160;to&#160;be&#160;<br/>
E89F&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
loaded.&#160;<br/>
E8A0&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
E8A1&#160;<br/>
E5&#160;9B&#160;<br/>
SBC&#160;$9B&#160;<br/>
E8A3&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
E8A4&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
E8A5&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
E8A6&#160;<br/>
6D&#160;AB&#160;02&#160;<br/>
ADC&#160;$02AB&#160;<br/>
E8A9&#160;<br/>
8D&#160;AB&#160;02&#160;<br/>
STA&#160;$02AB&#160;<br/>
E8AC&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
E8AD&#160;<br/>
6D&#160;AC&#160;02&#160;<br/>
ADC&#160;$02AC&#160;<br/>
Pag&#160;&#160;e&#160;79&#160;<br/>
<hr/>
<a name=80></a>E8B0&#160;<br/>
8D&#160;AC&#160;02&#160;<br/>
STA&#160;$02AC&#160;<br/>
E8B3&#160;<br/>
20&#160;9B&#160;E5&#160;<br/>
JSR&#160;$E59B&#160;<br/>
&#34;Loading/Verifying&#34;&#160;filename.&#160;<br/>
E8B6&#160;<br/>
20&#160;E0&#160;E4&#160;<br/>
JSR&#160;$E4E0&#160;<br/>
Load/verify&#160;data&#160;from&#160;tape.&#160;<br/>
E8B9&#160;<br/>
20&#160;3D&#160;E9&#160;<br/>
JSR&#160;$E93D&#160;<br/>
Reset&#160;cassette&#160;status.&#160;<br/>
E8BC&#160;<br/>
28&#160;<br/>
PLP&#160;<br/>
E8BD&#160;<br/>
AD&#160;5B&#160;02&#160;<br/>
LDA&#160;$025B&#160;<br/>
E8C0&#160;<br/>
F0&#160;11&#160;<br/>
BEQ&#160;$E8D3&#160;<br/>
Not&#160;VERIFYing&#160;data.&#160;<br/>
E8C2&#160;<br/>
AE&#160;5C&#160;02&#160;<br/>
LDX&#160;$025C&#160;<br/>
Print&#160;number&#160;of&#160;verify&#160;errors.&#160;<br/>
E8C5&#160;<br/>
AD&#160;5D&#160;02&#160;<br/>
LDA&#160;$025D&#160;<br/>
E8C8&#160;<br/>
20&#160;C5&#160;E0&#160;<br/>
JSR&#160;$E0C5&#160;<br/>
E8CB&#160;<br/>
A9&#160;52&#160;<br/>
LDA&#160;#$52&#160;<br/>
E8CD&#160;<br/>
A0&#160;E5&#160;<br/>
LDY&#160;#$E5&#160;<br/>
Print&#160;&#34;Verify&#160;errors&#160;<br/>
E8CF&#160;<br/>
20&#160;B0&#160;CC&#160;<br/>
JSR&#160;$CCB0&#160;<br/>
detected&#34;.&#160;<br/>
E8D2&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>E8D3&#160;<br/>
20&#160;51&#160;E6&#160;<br/>
JSR&#160;$E651&#160;<br/>
Print&#160;filename&#160;if&#160;there&#160;is&#160;a&#160;<br/>
E8D6&#160;<br/>
AD&#160;AE&#160;02&#160;<br/>
LDA&#160;$02AE&#160;<br/>
format&#160;error.&#160;<br/>
E8D9&#160;<br/>
F0&#160;0E&#160;<br/>
BEQ&#160;$E8E9&#160;<br/>
E8DB&#160;<br/>
AD&#160;AD&#160;02&#160;<br/>
LDA&#160;$02AD&#160;<br/>
Jump&#160;to&#160;start&#160;of&#160;machine&#160;code&#160;<br/>
E8DE&#160;<br/>
F0&#160;08&#160;<br/>
BEQ&#160;$E8E8&#160;<br/>
program&#160;if&#160;correct&#160;file&#160;type&#160;<br/>
E8E0&#160;<br/>
AD&#160;B1&#160;02&#160;<br/>
LDA&#160;$02B1&#160;<br/>
and&#160;there&#160;are&#160;no&#160;loading&#160;errors.&#160;<br/>
E8E3&#160;<br/>
EA&#160;<br/>
NOP&#160;<br/>
E8E4&#160;<br/>
EA&#160;<br/>
NOP&#160;<br/>
E8E5&#160;<br/>
6C&#160;A9&#160;02&#160;<br/>
JMP&#160;($02A9)&#160;<br/>
E8E8&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>E8E9&#160;<br/>
AE&#160;AB&#160;02&#160;<br/>
LDX&#160;$02AB&#160;<br/>
Transfer&#160;end&#160;of&#160;Basic&#160;to&#160;zero&#160;<br/>
E8EC&#160;<br/>
AD&#160;AC&#160;02&#160;<br/>
LDA&#160;$02AC&#160;<br/>
page&#160;pointer.&#160;<br/>
E8EF&#160;<br/>
86&#160;9C&#160;<br/>
STX&#160;$9C&#160;<br/>
E8F1&#160;<br/>
85&#160;9D&#160;<br/>
STA&#160;$9D&#160;<br/>
E8F3&#160;<br/>
20&#160;5F&#160;C5&#160;<br/>
JSR&#160;$C55F&#160;<br/>
Set&#160;up&#160;line&#160;link&#160;pointers.&#160;<br/>
E8F6&#160;<br/>
AD&#160;AD&#160;02&#160;<br/>
LDA&#160;$02AD&#160;<br/>
E8F9&#160;<br/>
F0&#160;08&#160;<br/>
BEQ&#160;$E903&#160;<br/>
Not&#160;AUTO&#160;run.&#160;<br/>
E8FB&#160;<br/>
AD&#160;B1&#160;02&#160;<br/>
LDA&#160;$02B1&#160;<br/>
E8FE&#160;<br/>
EA&#160;<br/>
NOP&#160;<br/>
E8FF&#160;<br/>
EA&#160;<br/>
NOP&#160;<br/>
E900&#160;<br/>
4C&#160;08&#160;C7&#160;<br/>
JMP&#160;$C708&#160;<br/>
Jump&#160;to&#160;CLEAR&#160;&amp;&#160;run&#160;program.&#160;<br/>
&#160;<br/>E903&#160;<br/>
20&#160;08&#160;C7&#160;<br/>
JSR&#160;$C708&#160;<br/>
<b>CLEAR</b>.&#160;<br/>
E906&#160;<br/>
4C&#160;A8&#160;C4&#160;<br/>
JMP&#160;$C4A8&#160;<br/>
Restart&#160;Basic.&#160;<br/>
&#160;<br/>E909&#160;<br/>
A5&#160;9A&#160;<br/>
LDA&#160;$9A&#160;<br/>
<b>CSAVE</b>&#160;<br/>
E90B&#160;<br/>
A4&#160;9B&#160;<br/>
LDY&#160;$9B&#160;<br/>
Transfer&#160;Start&#160;Basic&#160;pointer&#160;-&#160;<br/>
E90D&#160;<br/>
8D&#160;A9&#160;02&#160;<br/>
STA&#160;$02A9&#160;<br/>
start&#160;of&#160;data.&#160;<br/>
E910&#160;<br/>
8C&#160;AA&#160;02&#160;<br/>
STY&#160;$02AA&#160;<br/>
E913&#160;<br/>
A5&#160;9C&#160;<br/>
LDA&#160;$9C&#160;<br/>
Transfer&#160;End&#160;Basic&#160;pointer&#160;-&#160;<br/>
E915&#160;<br/>
A4&#160;9D&#160;<br/>
LDY&#160;$9D&#160;<br/>
end&#160;of&#160;data.&#160;<br/>
E917&#160;<br/>
8D&#160;AB&#160;02&#160;<br/>
STA&#160;$02AB&#160;<br/>
E91A&#160;<br/>
8C&#160;AC&#160;02&#160;<br/>
STY&#160;$02AC&#160;<br/>
E91D&#160;<br/>
08&#160;<br/>
PHP&#160;<br/>
E91E&#160;<br/>
20&#160;B2&#160;E7&#160;<br/>
JSR&#160;$E7B2&#160;<br/>
Process&#160;rest&#160;of&#160;statement.&#160;<br/>
E921&#160;<br/>
AD&#160;5A&#160;02&#160;<br/>
LDA&#160;$025A&#160;<br/>
Give&#160;error&#160;if&#160;trying&#160;to&#160;JOIN&#160;<br/>
E924&#160;<br/>
0D&#160;5B&#160;02&#160;<br/>
ORA&#160;$025B&#160;<br/>
and&#160;VERIFY&#160;program&#160;together.&#160;<br/>
E927&#160;<br/>
F0&#160;03&#160;<br/>
BEQ&#160;$E92C&#160;<br/>
E929&#160;<br/>
4C&#160;70&#160;D0&#160;<br/>
JMP&#160;$D070&#160;<br/>
Print&#160;&#34;SYNTAX&#160;ERROR&#34;.&#160;<br/>
&#160;<br/>E92C&#160;<br/>
20&#160;6A&#160;E7&#160;<br/>
JSR&#160;$E76A&#160;<br/>
Set&#160;6522&#160;for&#160;cassette&#160;routine.&#160;<br/>
E92F&#160;<br/>
20&#160;85&#160;E5&#160;<br/>
JSR&#160;$E585&#160;<br/>
Print&#160;&#34;Saving&#34;&#160;<br/>
E932&#160;<br/>
20&#160;07&#160;E6&#160;<br/>
JSR&#160;$E607&#160;<br/>
Output&#160;file&#160;header.&#160;<br/>
E935&#160;<br/>
20&#160;2E&#160;E6&#160;<br/>
JSR&#160;$E62E&#160;<br/>
Output&#160;data&#160;to&#160;cassette.&#160;<br/>
E938&#160;<br/>
20&#160;3D&#160;E9&#160;<br/>
JSR&#160;$E93D&#160;<br/>
Reset&#160;cassette&#160;status.&#160;<br/>
E93B&#160;<br/>
28&#160;<br/>
PLP&#160;<br/>
E93C&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>
Pag&#160;&#160;e&#160;80&#160;<br/>
<hr/>
<a name=81></a>E93D&#160;<br/>
20&#160;F5&#160;E5&#160;<br/>
JSR&#160;$E5F5&#160;<br/>
Reset&#160;cassette&#160;status&#160;by&#160;<br/>
E940&#160;<br/>
20&#160;AA&#160;F9&#160;<br/>
JSR&#160;$F9AA&#160;<br/>
clearing&#160;status&#160;line,&#160;reset&#160;<br/>
E943&#160;<br/>
4C&#160;E0&#160;ED&#160;<br/>
JMP&#160;$EDE0&#160;<br/>
6522&#160;and&#160;the&#160;16&#160;bit&#160;counters.&#160;<br/>
&#160;<br/>E946&#160;<br/>
20&#160;53&#160;E8&#160;<br/>
JSR&#160;$E853&#160;<br/>
<b>CALL</b>&#160;Evaluate&#160;numeric&#160;<br/>
E949&#160;<br/>
6C&#160;33&#160;00&#160;<br/>
JMP&#160;($0033)&#160;<br/>
integer&#160;and&#160;jump&#160;through&#160;it.&#160;<br/>
&#160;<br/>E94C&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
Get&#160;hex&#160;number&#160;into&#160;A&#160;and&#160;Y.&#160;<br/>
E94E&#160;<br/>
86&#160;0C&#160;<br/>
STX&#160;$0C&#160;<br/>
Set&#160;initial&#160;value&#160;to&#160;0.&#160;<br/>
E950&#160;<br/>
86&#160;0D&#160;<br/>
STX&#160;$0D&#160;<br/>
E952&#160;<br/>
F0&#160;13&#160;<br/>
BEQ&#160;$E967&#160;<br/>
E954&#160;<br/>
A2&#160;03&#160;<br/>
LDX&#160;#$03&#160;<br/>
Set&#160;bit&#160;counter.&#160;<br/>
E956&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
Shift&#160;digit&#160;into&#160;top&#160;nibble.&#160;<br/>
E957&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
E958&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
E959&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
E95A&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
E95B&#160;<br/>
26&#160;0C&#160;<br/>
ROL&#160;$0C&#160;<br/>
Shift&#160;bit&#160;into&#160;number.&#160;<br/>
E95D&#160;<br/>
26&#160;0D&#160;<br/>
ROL&#160;$0D&#160;<br/>
E95F&#160;<br/>
90&#160;03&#160;<br/>
BCC&#160;$E964&#160;<br/>
E961&#160;<br/>
4C&#160;39&#160;DC&#160;<br/>
JMP&#160;$DC39&#160;<br/>
&#34;OVERFLOW&#160;ERROR&#34;.&#160;<br/>
E964&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
If&#160;another&#160;bit&#160;then&#160;do&#160;<br/>
E965&#160;<br/>
10&#160;F3&#160;<br/>
BPL&#160;$E95A&#160;<br/>
another&#160;shift.&#160;<br/>
E967&#160;<br/>
20&#160;E2&#160;00&#160;<br/>
JSR&#160;$00E2&#160;<br/>
Get&#160;next&#160;char.&#160;<br/>
E96A&#160;<br/>
C9&#160;80&#160;<br/>
CMP&#160;#$80&#160;<br/>
E96C&#160;<br/>
B0&#160;0E&#160;<br/>
BCS&#160;$E97C&#160;<br/>
Exit&#160;if&#160;token.&#160;<br/>
E96E&#160;<br/>
09&#160;80&#160;<br/>
ORA&#160;#$80&#160;<br/>
E970&#160;<br/>
49&#160;B0&#160;<br/>
EOR&#160;#$B0&#160;<br/>
Reduce&#160;to&#160;digit&#160;range.&#160;<br/>
E972&#160;<br/>
C9&#160;0A&#160;<br/>
CMP&#160;#$0A&#160;<br/>
E974&#160;<br/>
90&#160;DE&#160;<br/>
BCC&#160;$E954&#160;<br/>
If&#160;0-9&#160;then&#160;put&#160;in&#160;hex&#160;digit.&#160;<br/>
E976&#160;<br/>
69&#160;88&#160;<br/>
ADC&#160;#$88&#160;<br/>
E978&#160;<br/>
C9&#160;FA&#160;<br/>
CMP&#160;#$FA&#160;<br/>
If&#160;A-F&#160;then&#160;put&#160;in&#160;hex&#160;digit.&#160;<br/>
E97A&#160;<br/>
B0&#160;D8&#160;<br/>
BCS&#160;$E954&#160;<br/>
E97C&#160;<br/>
A5&#160;0D&#160;<br/>
LDA&#160;$0D&#160;<br/>
Exit&#160;with&#160;number&#160;in&#160;A&#160;(MSB)&#160;<br/>
E97E&#160;<br/>
A4&#160;0C&#160;<br/>
LDY&#160;$0C&#160;<br/>
and&#160;Y&#160;(LSB).&#160;<br/>
E980&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>E981&#160;<br/>
20&#160;4C&#160;E9&#160;<br/>
JSR&#160;$E94C&#160;<br/>
Get&#160;hex&#160;number&#160;and&#160;put&#160;it&#160;into&#160;<br/>
E984&#160;<br/>
4C&#160;40&#160;DF&#160;<br/>
JMP&#160;$DF40&#160;<br/>
main&#160;Floating&#160;Point&#160;Acc.&#160;<br/>
&#160;<br/>E987&#160;<br/>
08&#160;<br/>
PHP&#160;<br/>
<b>STORE</b>&#160;<br/>
E988&#160;<br/>
20&#160;57&#160;EA&#160;<br/>
JSR&#160;$EA57&#160;<br/>
Process&#160;rest&#160;of&#160;statement.&#160;<br/>
E98B&#160;<br/>
A9&#160;40&#160;<br/>
LDA&#160;#$40&#160;<br/>
Set&#160;type&#160;of&#160;data.&#160;<br/>
E98D&#160;<br/>
8D&#160;AE&#160;02&#160;<br/>
STA&#160;$02AE&#160;<br/>
E990&#160;<br/>
A5&#160;28&#160;<br/>
LDA&#160;$28&#160;<br/>
Set&#160;type&#160;of&#160;Array.&#160;<br/>
E992&#160;<br/>
8D&#160;AF&#160;02&#160;<br/>
STA&#160;$02AF&#160;<br/>
E995&#160;<br/>
A5&#160;29&#160;<br/>
LDA&#160;$29&#160;<br/>
E997&#160;<br/>
8D&#160;B0&#160;02&#160;<br/>
STA&#160;$02B0&#160;<br/>
E99A&#160;<br/>
20&#160;85&#160;E5&#160;<br/>
JSR&#160;$E585&#160;<br/>
Print&#160;&#34;Saving&#34;.&#160;<br/>
E99D&#160;<br/>
20&#160;07&#160;E6&#160;<br/>
JSR&#160;$E607&#160;<br/>
Output&#160;file&#160;header.&#160;<br/>
E9A0&#160;<br/>
20&#160;9E&#160;EA&#160;<br/>
JSR&#160;$EA9E&#160;<br/>
E9A3&#160;<br/>
20&#160;2E&#160;E6&#160;<br/>
JSR&#160;$E62E&#160;<br/>
Transfer&#160;data.&#160;<br/>
E9A6&#160;<br/>
24&#160;28&#160;<br/>
BIT&#160;$28&#160;<br/>
E9A8&#160;<br/>
10&#160;22&#160;<br/>
BPL&#160;$E9CC&#160;<br/>
Not&#160;string&#160;type.&#160;<br/>
E9AA&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
E9AC&#160;<br/>
B1&#160;0C&#160;<br/>
LDA&#160;($0C),Y&#160;<br/>
E9AE&#160;<br/>
F0&#160;17&#160;<br/>
BEQ&#160;$E9C7&#160;<br/>
E9B0&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
E9B1&#160;<br/>
A0&#160;02&#160;<br/>
LDY&#160;#$02&#160;<br/>
E9B3&#160;<br/>
B1&#160;0C&#160;<br/>
LDA&#160;($0C),Y&#160;<br/>
E9B5&#160;<br/>
99&#160;D0&#160;00&#160;<br/>
STA&#160;$00D0,Y&#160;<br/>
E9B8&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
E9B9&#160;<br/>
D0&#160;F8&#160;<br/>
BNE&#160;$E9B3&#160;<br/>
E9BB&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
Pag&#160;&#160;e&#160;81&#160;<br/>
<hr/>
<a name=82></a>E9BC&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
E9BD&#160;<br/>
F0&#160;08&#160;<br/>
BEQ&#160;$E9C7&#160;<br/>
E9BF&#160;<br/>
B1&#160;D1&#160;<br/>
LDA&#160;($D1),Y&#160;<br/>
Output&#160;next&#160;string&#160;from&#160;array&#160;<br/>
E9C1&#160;<br/>
20&#160;5E&#160;E6&#160;<br/>
JSR&#160;$E65E&#160;<br/>
to&#160;cassette.&#160;<br/>
E9C4&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
E9C5&#160;<br/>
D0&#160;F5&#160;<br/>
BNE&#160;$E9BC&#160;<br/>
E9C7&#160;<br/>
20&#160;42&#160;EA&#160;<br/>
JSR&#160;$EA42&#160;<br/>
Advance&#160;pointer&#160;to&#160;next&#160;string&#160;<br/>
E9CA&#160;<br/>
90&#160;DE&#160;<br/>
BCC&#160;$E9AA&#160;<br/>
pointer.&#160;Branch&#160;if&#160;more.&#160;<br/>
E9CC&#160;<br/>
20&#160;3D&#160;E9&#160;<br/>
JSR&#160;$E93D&#160;<br/>
Reset&#160;cassette&#160;status.&#160;<br/>
E9CF&#160;<br/>
28&#160;<br/>
PLP&#160;<br/>
E9D0&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>E9D1&#160;<br/>
20&#160;50&#160;D6&#160;<br/>
JSR&#160;$D650&#160;<br/>
<b>RECALL</b>&#160;Attempt&#160;Garbage&#160;<br/>
E9D4&#160;<br/>
08&#160;<br/>
PHP&#160;<br/>
Collection.&#160;<br/>
E9D5&#160;<br/>
20&#160;57&#160;EA&#160;<br/>
JSR&#160;$EA57&#160;<br/>
Get&#160;parameters&#160;&amp;&#160;test&#160;syntax.&#160;<br/>
E9D8&#160;<br/>
20&#160;7D&#160;E5&#160;<br/>
JSR&#160;$E57D&#160;<br/>
Print&#160;&#34;Searching&#34;.&#160;<br/>
E9DB&#160;<br/>
20&#160;AC&#160;E4&#160;<br/>
JSR&#160;$E4AC&#160;<br/>
Get&#160;in&#160;sync&#160;with&#160;tape.&#160;<br/>
E9DE&#160;<br/>
2C&#160;AE&#160;02&#160;<br/>
BIT&#160;$02AE&#160;<br/>
E9E1&#160;<br/>
50&#160;F8&#160;<br/>
BVC&#160;$E9DB&#160;<br/>
E9E3&#160;<br/>
AD&#160;AF&#160;02&#160;<br/>
LDA&#160;$02AF&#160;<br/>
E9E6&#160;<br/>
45&#160;28&#160;<br/>
EOR&#160;$28&#160;<br/>
String&#160;array&#160;flags&#160;do&#160;not&#160;<br/>
E9E8&#160;<br/>
D0&#160;F1&#160;<br/>
BNE&#160;$E9DB&#160;<br/>
match.&#160;<br/>
E9EA&#160;<br/>
AD&#160;B0&#160;02&#160;<br/>
LDA&#160;$02B0&#160;<br/>
E9ED&#160;<br/>
45&#160;29&#160;<br/>
EOR&#160;$29&#160;<br/>
Integer&#160;array&#160;flags&#160;do&#160;not&#160;<br/>
E9EF&#160;<br/>
D0&#160;EA&#160;<br/>
BNE&#160;$E9DB&#160;<br/>
match.&#160;<br/>
E9F1&#160;<br/>
20&#160;9B&#160;E5&#160;<br/>
JSR&#160;$E59B&#160;<br/>
&#34;Loading/Verifying&#34;&#160;filename.&#160;<br/>
E9F4&#160;<br/>
A0&#160;02&#160;<br/>
LDY&#160;#$02&#160;<br/>
E9F6&#160;<br/>
B1&#160;CE&#160;<br/>
LDA&#160;($CE),Y&#160;<br/>
E9F8&#160;<br/>
CD&#160;A9&#160;02&#160;<br/>
CMP&#160;$02A9&#160;<br/>
E9FB&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
E9FC&#160;<br/>
B1&#160;CE&#160;<br/>
LDA&#160;($CE),Y&#160;<br/>
Test&#160;if&#160;there&#160;is&#160;enough&#160;space&#160;<br/>
E9FE&#160;<br/>
ED&#160;AA&#160;02&#160;<br/>
SBC&#160;$02AA&#160;<br/>
to&#160;load&#160;in&#160;array.&#160;<br/>
EA01&#160;<br/>
B0&#160;06&#160;<br/>
BCS&#160;$EA09&#160;<br/>
EA03&#160;<br/>
20&#160;3D&#160;E9&#160;<br/>
JSR&#160;$E93D&#160;<br/>
Reset&#160;cassette&#160;status.&#160;<br/>
EA06&#160;<br/>
4C&#160;7C&#160;C4&#160;<br/>
JMP&#160;$C47C&#160;<br/>
Print&#160;&#34;OUT&#160;0F&#160;MEMORY&#160;ERROR&#34;.&#160;<br/>
EA09&#160;<br/>
20&#160;9E&#160;EA&#160;<br/>
JSR&#160;$EA9E&#160;<br/>
EA0C&#160;<br/>
20&#160;E0&#160;E4&#160;<br/>
JSR&#160;$E4E0&#160;<br/>
Load/Verify&#160;the&#160;data.&#160;<br/>
EA0F&#160;<br/>
24&#160;28&#160;<br/>
BIT&#160;$28&#160;<br/>
EA11&#160;<br/>
10&#160;27&#160;<br/>
BPL&#160;$EA3A&#160;<br/>
EA13&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
EA15&#160;<br/>
B1&#160;0C&#160;<br/>
LDA&#160;($0C),Y&#160;<br/>
EA17&#160;<br/>
F0&#160;1C&#160;<br/>
BEQ&#160;$EA35&#160;<br/>
EA19&#160;<br/>
20&#160;AB&#160;D5&#160;<br/>
JSR&#160;$D5AB&#160;<br/>
Get&#160;space&#160;for&#160;string.&#160;<br/>
EA1C&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
EA1E&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
EA1F&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
EA20&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
EA21&#160;<br/>
F0&#160;08&#160;<br/>
BEQ&#160;$EA2B&#160;<br/>
EA23&#160;<br/>
20&#160;C9&#160;E6&#160;<br/>
JSR&#160;$E6C9&#160;<br/>
Read&#160;and&#160;save&#160;next&#160;string&#160;from&#160;<br/>
EA26&#160;<br/>
91&#160;D1&#160;<br/>
STA&#160;($D1),Y&#160;<br/>
cassette&#160;and&#160;put&#160;it&#160;into&#160;the&#160;<br/>
EA28&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
array.&#160;<br/>
EA29&#160;<br/>
D0&#160;F5&#160;<br/>
BNE&#160;$EA20&#160;<br/>
EA2B&#160;<br/>
A0&#160;02&#160;<br/>
LDY&#160;#$02&#160;<br/>
EA2D&#160;<br/>
B9&#160;D0&#160;00&#160;<br/>
LDA&#160;$00D0,Y&#160;<br/>
EA30&#160;<br/>
91&#160;0C&#160;<br/>
STA&#160;($0C),Y&#160;<br/>
EA32&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
EA33&#160;<br/>
D0&#160;F8&#160;<br/>
BNE&#160;$EA2D&#160;<br/>
EA35&#160;<br/>
20&#160;42&#160;EA&#160;<br/>
JSR&#160;$EA42&#160;<br/>
Advance&#160;pointer&#160;in&#160;array&#160;to&#160;<br/>
EA38&#160;<br/>
90&#160;D9&#160;<br/>
BCC&#160;$EA13&#160;<br/>
next&#160;string&#160;pointer.&#160;<br/>
EA3A&#160;<br/>
20&#160;3D&#160;E9&#160;<br/>
JSR&#160;$E93D&#160;<br/>
Reset&#160;6522.&#160;<br/>
EA3D&#160;<br/>
20&#160;51&#160;E6&#160;<br/>
JSR&#160;$E651&#160;<br/>
Print&#160;out&#160;string&#160;name&#160;if&#160;there&#160;<br/>
EA40&#160;<br/>
28&#160;<br/>
PLP&#160;<br/>
is&#160;a&#160;format&#160;error.&#160;<br/>
EA41&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>
Pag&#160;&#160;e&#160;82&#160;<br/>
<hr/>
<a name=83></a>EA42&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
Advance&#160;pointer&#160;at&#160;$0C/$0D&#160;to&#160;<br/>
EA43&#160;<br/>
A9&#160;03&#160;<br/>
LDA&#160;#$03&#160;<br/>
point&#160;to&#160;next&#160;string&#160;pointer&#160;<br/>
EA45&#160;<br/>
65&#160;0C&#160;<br/>
ADC&#160;$0C&#160;<br/>
in&#160;array&#160;and&#160;test&#160;if&#160;all&#160;<br/>
EA47&#160;<br/>
85&#160;0C&#160;<br/>
STA&#160;$0C&#160;<br/>
loaded&#160;yet.&#160;<br/>
EA49&#160;<br/>
90&#160;02&#160;<br/>
BCC&#160;$EA4D&#160;<br/>
EA4B&#160;<br/>
E6&#160;0D&#160;<br/>
INC&#160;$0D&#160;<br/>
EA4D&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
EA4E&#160;<br/>
A5&#160;0D&#160;<br/>
LDA&#160;$0D&#160;<br/>
EA50&#160;<br/>
CC&#160;AB&#160;02&#160;<br/>
CPY&#160;$02AB&#160;<br/>
EA53&#160;<br/>
ED&#160;AC&#160;02&#160;<br/>
SBC&#160;$02AC&#160;<br/>
EA56&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
C=0&#160;if&#160;more&#160;strings&#160;to&#160;load.&#160;<br/>
&#160;<br/>EA57&#160;<br/>
A9&#160;40&#160;<br/>
LDA&#160;#$40&#160;<br/>
Set&#160;STORE/RECALL&#160;flag.&#160;<br/>
EA59&#160;<br/>
85&#160;2B&#160;<br/>
STA&#160;$2B&#160;<br/>
EA5B&#160;<br/>
20&#160;88&#160;D1&#160;<br/>
JSR&#160;$D188&#160;<br/>
Get&#160;variable&#160;from&#160;text.&#160;<br/>
EA5E&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
Clear&#160;STORE/RECALL&#160;flag.&#160;<br/>
EA60&#160;<br/>
85&#160;2B&#160;<br/>
STA&#160;$2B&#160;<br/>
EA62&#160;<br/>
A0&#160;03&#160;<br/>
LDY&#160;#$03&#160;<br/>
Load&#160;$02A9/$02AA&#160;with&#160;start&#160;of&#160;<br/>
EA64&#160;<br/>
B1&#160;CE&#160;<br/>
LDA&#160;($CE),Y&#160;<br/>
data.&#160;<br/>
EA66&#160;<br/>
8D&#160;AA&#160;02&#160;<br/>
STA&#160;$02AA&#160;<br/>
EA69&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
EA6A&#160;<br/>
B1&#160;CE&#160;<br/>
LDA&#160;($CE),Y&#160;<br/>
EA6C&#160;<br/>
8D&#160;A9&#160;02&#160;<br/>
STA&#160;$02A9&#160;<br/>
EA6F&#160;<br/>
D0&#160;03&#160;<br/>
BNE&#160;$EA74&#160;<br/>
EA71&#160;<br/>
CE&#160;AA&#160;02&#160;<br/>
DEC&#160;$02AA&#160;<br/>
Decrement&#160;address.&#160;<br/>
EA74&#160;<br/>
CE&#160;A9&#160;02&#160;<br/>
DEC&#160;$02A9&#160;<br/>
EA77&#160;<br/>
20&#160;65&#160;D0&#160;<br/>
JSR&#160;$D065&#160;<br/>
Test&#160;comma.&#160;<br/>
EA7A&#160;<br/>
A5&#160;29&#160;<br/>
LDA&#160;$29&#160;<br/>
Save&#160;Variable&#160;type&#160;bytes.&#160;<br/>
EA7C&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
EA7D&#160;<br/>
A5&#160;28&#160;<br/>
LDA&#160;$28&#160;<br/>
EA7F&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
EA80&#160;<br/>
20&#160;B2&#160;E7&#160;<br/>
JSR&#160;$E7B2&#160;<br/>
Process&#160;syntax&#160;of&#160;rest&#160;of&#160;<br/>
EA83&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
command.&#160;<br/>
EA84&#160;<br/>
85&#160;28&#160;<br/>
STA&#160;$28&#160;<br/>
EA86&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Restore&#160;variable&#160;type&#160;bytes.&#160;<br/>
EA87&#160;<br/>
85&#160;29&#160;<br/>
STA&#160;$29&#160;<br/>
EA89&#160;<br/>
AD&#160;5B&#160;02&#160;<br/>
LDA&#160;$025B&#160;<br/>
Ensure&#160;that&#160;incorrect&#160;<br/>
EA8C&#160;<br/>
0D&#160;AD&#160;02&#160;<br/>
ORA&#160;$02AD&#160;<br/>
combinations&#160;of&#160;join,&#160;verify,&#160;<br/>
EA8F&#160;<br/>
0D&#160;AE&#160;02&#160;<br/>
ORA&#160;$02AE&#160;<br/>
AUTO&#160;are&#160;not&#160;allowed&#160;-&#160;can&#160;<br/>
EA92&#160;<br/>
0D&#160;5A&#160;02&#160;<br/>
ORA&#160;$025A&#160;<br/>
have&#160;default&#160;values.&#160;<br/>
EA95&#160;<br/>
F0&#160;03&#160;<br/>
BEQ&#160;$EA9A&#160;<br/>
EA97&#160;<br/>
4C&#160;70&#160;D0&#160;<br/>
JMP&#160;$D070&#160;<br/>
Print&#160;&#34;SYNTAX&#160;ERROR&#34;.&#160;<br/>
EA9A&#160;<br/>
20&#160;6A&#160;E7&#160;<br/>
JSR&#160;$E76A&#160;<br/>
Set&#160;6522&#160;for&#160;cassette&#160;system.&#160;<br/>
EA9D&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>EA9E&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
EA9F&#160;<br/>
A5&#160;CE&#160;<br/>
LDA&#160;$CE&#160;<br/>
EAA1&#160;<br/>
6D&#160;A9&#160;02&#160;<br/>
ADC&#160;$02A9&#160;<br/>
EAA4&#160;<br/>
8D&#160;AB&#160;02&#160;<br/>
STA&#160;$02AB&#160;<br/>
EAA7&#160;<br/>
A5&#160;CF&#160;<br/>
LDA&#160;$CF&#160;<br/>
EAA9&#160;<br/>
6D&#160;AA&#160;02&#160;<br/>
ADC&#160;$02AA&#160;<br/>
EAAC&#160;<br/>
8D&#160;AC&#160;02&#160;<br/>
STA&#160;$02AC&#160;<br/>
EAAF&#160;<br/>
A0&#160;04&#160;<br/>
LDY&#160;#$04&#160;<br/>
EAB1&#160;<br/>
B1&#160;CE&#160;<br/>
LDA&#160;($CE),Y&#160;<br/>
EAB3&#160;<br/>
20&#160;88&#160;D2&#160;<br/>
JSR&#160;$D288&#160;<br/>
EAB6&#160;<br/>
8D&#160;A9&#160;02&#160;<br/>
STA&#160;$02A9&#160;<br/>
EAB9&#160;<br/>
8C&#160;AA&#160;02&#160;<br/>
STY&#160;$02AA&#160;<br/>
EABC&#160;<br/>
85&#160;0C&#160;<br/>
STA&#160;$0C&#160;<br/>
EABE&#160;<br/>
84&#160;0D&#160;<br/>
STY&#160;$0D&#160;<br/>
EAC0&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>EAC1&#160;<br/>
3F&#160;FB&#160;17&#160;FC&#160;CF&#160;FB&#160;C7&#160;F0&#160;<br/>
This&#160;table&#160;holds&#160;the&#160;start&#160;<br/>
EAC9&#160;<br/>
FC&#160;F0&#160;0F&#160;F1&#160;7E&#160;F3&#160;1C&#160;F1&#160;<br/>
addresses&#160;less&#160;1&#160;for&#160;the&#160;<br/>
EAD1&#160;<br/>
67&#160;F2&#160;2C&#160;F1&#160;03&#160;F2&#160;0F&#160;F2&#160;<br/>
sound&#160;and&#160;hires&#160;commands.&#160;They&#160;<br/>
Pag&#160;&#160;e&#160;83&#160;<br/>
<hr/>
<a name=84></a>EAD9&#160;<br/>
03&#160;04&#160;04&#160;03&#160;03&#160;03&#160;02&#160;01&#160;<br/>
are&#160;in&#160;order&#160;of&#160;token&#160;value.&#160;<br/>
EAE1&#160;<br/>
03&#160;03&#160;01&#160;01&#160;00&#160;00&#160;00&#160;00&#160;<br/>
The&#160;second&#160;part&#160;holds&#160;data&#160;<br/>
EAE9&#160;<br/>
01&#160;01&#160;00&#160;00&#160;00&#160;00&#160;00&#160;<br/>
associated&#160;with&#160;each&#160;routine.&#160;<br/>
&#160;<br/>EAF0&#160;<br/>
AD&#160;C0&#160;02&#160;<br/>
LDA&#160;$02C0&#160;<br/>
Entry&#160;point&#160;for&#160;the&#160;hires&#160;<br/>
EAF3&#160;<br/>
29&#160;01&#160;<br/>
AND&#160;#$01&#160;<br/>
screen&#160;commands.&#160;Test&#160;that&#160;one&#160;<br/>
EAF5&#160;<br/>
D0&#160;05&#160;<br/>
BNE&#160;$EAFC&#160;<br/>
is&#160;in&#160;hires&#160;first-&#160;else&#160;print&#160;<br/>
EAF7&#160;<br/>
A2&#160;A3&#160;<br/>
LDX&#160;#$A3&#160;<br/>
DISP&#160;TYPE&#160;MISMATCH.&#160;<br/>
EAF9&#160;<br/>
4C&#160;7E&#160;C4&#160;<br/>
JMP&#160;$C47E&#160;<br/>
EAFC&#160;<br/>
C0&#160;4E&#160;<br/>
CPY&#160;#$4E&#160;<br/>
Entry&#160;point&#160;for&#160;sound&#160;commands&#160;<br/>
EAFE&#160;<br/>
B0&#160;03&#160;<br/>
BCS&#160;$EB03&#160;<br/>
No&#160;need&#160;to&#160;test&#160;if&#160;in&#160;hires.&#160;<br/>
EB00&#160;<br/>
4C&#160;70&#160;D0&#160;<br/>
JMP&#160;$D070&#160;<br/>
Test&#160;that&#160;tokens&#160;are&#160;in&#160;<br/>
EB03&#160;<br/>
C0&#160;66&#160;<br/>
CPY&#160;#$66&#160;<br/>
correct&#160;range&#160;-&#160;else&#160;error.&#160;<br/>
EB05&#160;<br/>
B0&#160;F9&#160;<br/>
BCS&#160;$EB00&#160;<br/>
EB07&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
Use&#160;the&#160;token&#160;value&#160;to&#160;look&#160;<br/>
EB08&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
up&#160;the&#160;start&#160;address&#160;of&#160;the&#160;<br/>
EB09&#160;<br/>
E9&#160;4E&#160;<br/>
SBC&#160;#$4E&#160;<br/>
appropriate&#160;routine.&#160;The&#160;<br/>
EB0B&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
address&#160;-1&#160;is&#160;used&#160;as&#160;it&#160;is&#160;<br/>
EB0C&#160;<br/>
B9&#160;C2&#160;EA&#160;<br/>
LDA&#160;$EAC2,Y&#160;<br/>
saved&#160;on&#160;the&#160;stack&#160;and&#160;an&#160;<br/>
EB0F&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
RTS&#160;is&#160;done&#160;which&#160;increments&#160;<br/>
EB10&#160;<br/>
B9&#160;C1&#160;EA&#160;<br/>
LDA&#160;$EAC1,Y&#160;<br/>
the&#160;address&#160;pulled&#160;of&#160;stack.&#160;<br/>
EB13&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
EB14&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
Halve&#160;the&#160;value&#160;in&#160;Y&#160;and&#160;use&#160;<br/>
EB15&#160;<br/>
4A&#160;<br/>
LSR&#160;A&#160;<br/>
it&#160;to&#160;load&#160;the&#160;number&#160;of&#160;<br/>
EB16&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
parameters&#160;for&#160;each&#160;command&#160;<br/>
EB17&#160;<br/>
B9&#160;D9&#160;EA&#160;<br/>
LDA&#160;$EAD9,Y&#160;<br/>
and&#160;whether&#160;the&#160;hires&#160;cursor&#160;<br/>
EB1A&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
is&#160;to&#160;be&#160;moved&#160;relative&#160;to&#160;its&#160;<br/>
EB1B&#160;<br/>
B9&#160;E5&#160;EA&#160;<br/>
LDA&#160;$EAE5,Y&#160;<br/>
current&#160;position&#160;or&#160;not&#160;<br/>
EB1E&#160;<br/>
8D&#160;C3&#160;02&#160;<br/>
STA&#160;$02C3&#160;<br/>
respectively.&#160;<br/>
EB21&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
EB23&#160;<br/>
8D&#160;F0&#160;02&#160;<br/>
STA&#160;$02F0&#160;<br/>
EB26&#160;<br/>
20&#160;03&#160;CF&#160;<br/>
JSR&#160;$CF03&#160;<br/>
Evaluate&#160;next&#160;argument.&#160;<br/>
EB29&#160;<br/>
AD&#160;C3&#160;02&#160;<br/>
LDA&#160;$02C3&#160;<br/>
EB2C&#160;<br/>
D0&#160;06&#160;<br/>
BNE&#160;$EB34&#160;<br/>
EB2E&#160;<br/>
20&#160;22&#160;D9&#160;<br/>
JSR&#160;$D922&#160;<br/>
Convert&#160;Floating&#160;point&#160;acc'r&#160;<br/>
EB31&#160;<br/>
4C&#160;3B&#160;EB&#160;<br/>
JMP&#160;$EB3B&#160;<br/>
to&#160;integer.&#160;<br/>
EB34&#160;<br/>
A5&#160;D0&#160;<br/>
LDA&#160;$D0&#160;<br/>
EB36&#160;<br/>
C9&#160;90&#160;<br/>
CMP&#160;#$90&#160;<br/>
EB38&#160;<br/>
20&#160;2A&#160;D9&#160;<br/>
JSR&#160;$D92A&#160;<br/>
EB3B&#160;<br/>
AC&#160;F0&#160;02&#160;<br/>
LDY&#160;$02F0&#160;<br/>
Place&#160;the&#160;next&#160;argument&#160;into&#160;<br/>
EB3E&#160;<br/>
A5&#160;33&#160;<br/>
LDA&#160;$33&#160;<br/>
its&#160;correct&#160;place&#160;in&#160;the&#160;<br/>
EB40&#160;<br/>
99&#160;E1&#160;02&#160;<br/>
STA&#160;$02E1,Y&#160;<br/>
parameter&#160;block&#160;starting&#160;at&#160;<br/>
EB43&#160;<br/>
A5&#160;34&#160;<br/>
LDA&#160;$34&#160;<br/>
#02E1.&#160;<br/>
EB45&#160;<br/>
99&#160;E2&#160;02&#160;<br/>
STA&#160;$02E2,Y&#160;<br/>
EB48&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
#2F0&#160;now&#160;points&#160;just&#160;beyond&#160;<br/>
EB49&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
the&#160;last&#160;parameter&#160;placed&#160;in&#160;<br/>
EB4A&#160;<br/>
8C&#160;F0&#160;02&#160;<br/>
STY&#160;$02F0&#160;<br/>
block&#160;at&#160;#2E1.&#160;<br/>
EB4D&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
EB4E&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
Decrement&#160;the&#160;counter&#160;of&#160;the&#160;<br/>
EB4F&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
number&#160;of&#160;parameters&#160;to&#160;be&#160;<br/>
EB50&#160;<br/>
F0&#160;08&#160;<br/>
BEQ&#160;$EB5A&#160;<br/>
evaluated.&#160;Continue&#160;evaluation&#160;<br/>
EB52&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
until&#160;the&#160;appropriate&#160;number&#160;<br/>
EB53&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
is&#160;done.&#160;<br/>
EB54&#160;<br/>
20&#160;65&#160;D0&#160;<br/>
JSR&#160;$D065&#160;<br/>
Search&#160;for&#160;comma,&#160;return&#160;only&#160;<br/>
EB57&#160;<br/>
4C&#160;26&#160;EB&#160;<br/>
JMP&#160;$EB26&#160;<br/>
if&#160;found.&#160;Continue&#160;arg.&#160;eval.&#160;<br/>
EB5A&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
Initialise&#160;the&#160;error&#160;status.&#160;<br/>
EB5C&#160;<br/>
8D&#160;E0&#160;02&#160;<br/>
STA&#160;$02E0&#160;<br/>
EB5F&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
This&#160;section&#160;inserts&#160;on&#160;to&#160;the&#160;<br/>
EB60&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
stack&#160;an&#160;address&#160;such&#160;that&#160;<br/>
EB61&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
when&#160;the&#160;appropriate&#160;sound&#160;/&#160;<br/>
EB62&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
graphics&#160;command&#160;is&#160;finished,&#160;<br/>
EB63&#160;<br/>
A9&#160;EB&#160;<br/>
LDA&#160;#$EB&#160;<br/>
the&#160;next&#160;RTS&#160;instruction&#160;will&#160;<br/>
EB65&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
take&#160;the&#160;program&#160;to&#160;a&#160;routine&#160;<br/>
EB66&#160;<br/>
A9&#160;6D&#160;<br/>
LDA&#160;#$6D&#160;<br/>
that&#160;checks&#160;the&#160;error&#160;status&#160;<br/>
Pag&#160;&#160;e&#160;84&#160;<br/>
<hr/>
<a name=85></a>EB68&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
of&#160;#02E0.&#160;<br/>
EB69&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
EB6A&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
EB6B&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
EB6C&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
The&#160;RTS&#160;is&#160;used&#160;as&#160;a&#160;means&#160;<br/>
EB6D&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
of&#160;doing&#160;an&#160;indirect&#160;jump.&#160;<br/>
&#160;<br/>EB6E&#160;<br/>
A9&#160;01&#160;<br/>
LDA&#160;#$01&#160;<br/>
If&#160;contents&#160;of&#160;#02E0&#160;is&#160;not&#160;<br/>
EB70&#160;<br/>
2C&#160;E0&#160;02&#160;<br/>
BIT&#160;$02E0&#160;<br/>
zero&#160;then&#160;print&#160;ILLEGAL&#160;<br/>
EB73&#160;<br/>
F0&#160;F8&#160;<br/>
BEQ&#160;$EB6D&#160;<br/>
QUANTITY&#160;ERROR.&#160;<br/>
EB75&#160;<br/>
4C&#160;36&#160;D3&#160;<br/>
JMP&#160;$D336&#160;<br/>
EB78&#160;<br/>
AD&#160;DF&#160;02&#160;<br/>
LDA&#160;$02DF&#160;<br/>
This&#160;routine&#160;checks&#160;whether&#160;a&#160;<br/>
EB7B&#160;<br/>
10&#160;0B&#160;<br/>
BPL&#160;$EB88&#160;<br/>
new&#160;key&#160;is&#160;ready&#160;to&#160;be&#160;<br/>
EB7D&#160;<br/>
08&#160;<br/>
PHP&#160;<br/>
processed.&#160;If&#160;there&#160;is,&#160;the&#160;<br/>
EB7E&#160;<br/>
29&#160;7F&#160;<br/>
AND&#160;#$7F&#160;<br/>
Ascii&#160;char&#160;for&#160;it&#160;is&#160;loaded&#160;<br/>
EB80&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
into&#160;A&#160;and&#160;#02DF&#160;cleared.&#160;<br/>
EB81&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
EB83&#160;<br/>
8D&#160;DF&#160;02&#160;<br/>
STA&#160;$02DF&#160;<br/>
If&#160;N=0&#160;at&#160;exit&#160;then&#160;no&#160;new&#160;<br/>
EB86&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
key&#160;has&#160;been&#160;received.&#160;<br/>
EB87&#160;<br/>
28&#160;<br/>
PLP&#160;<br/>
EB88&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>EB89&#160;<br/>
C4&#160;9D&#160;<br/>
CPY&#160;$9D&#160;<br/>
Test&#160;if&#160;new&#160;Himem&#160;is&#160;not&#160;<br/>
EB8B&#160;<br/>
B0&#160;02&#160;<br/>
BCS&#160;$EB8F&#160;<br/>
below&#160;end&#160;of&#160;Basic&#160;pointer.&#160;<br/>
EB8D&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
C=1&#160;if&#160;Himem&#160;is&#160;too&#160;low.&#160;<br/>
EB8E&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>EB8F&#160;<br/>
D0&#160;06&#160;<br/>
BNE&#160;$EB97&#160;<br/>
Test&#160;if&#160;low&#160;half&#160;of&#160;new&#160;<br/>
EB91&#160;<br/>
C5&#160;9C&#160;<br/>
CMP&#160;$9C&#160;<br/>
Himem&#160;is&#160;below&#160;end&#160;Basic.&#160;<br/>
EB93&#160;<br/>
90&#160;F9&#160;<br/>
BCC&#160;$EB8E&#160;<br/>
The&#160;branches&#160;are&#160;in&#160;error,&#160;<br/>
EB95&#160;<br/>
F0&#160;F7&#160;<br/>
BEQ&#160;$EB8E&#160;<br/>
they&#160;should&#160;go&#160;to&#160;#EB8D&#160;!&#160;<br/>
EB97&#160;<br/>
20&#160;B5&#160;EB&#160;<br/>
JSR&#160;$EBB5&#160;<br/>
Test&#160;if&#160;Hires&#160;screen&#160;could&#160;be&#160;<br/>
EB9A&#160;<br/>
90&#160;F2&#160;<br/>
BCC&#160;$EB8E&#160;<br/>
affected&#160;and&#160;branch&#160;if&#160;not.&#160;<br/>
EB9C&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
EB9D&#160;<br/>
AD&#160;C0&#160;02&#160;<br/>
LDA&#160;$02C0&#160;<br/>
EBA0&#160;<br/>
29&#160;02&#160;<br/>
AND&#160;#$02&#160;<br/>
An&#160;error&#160;will&#160;be&#160;given&#160;if&#160;<br/>
EBA2&#160;<br/>
08&#160;<br/>
PHP&#160;<br/>
one&#160;tries&#160;to&#160;put&#160;Himem&#160;beyond&#160;<br/>
EBA3&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
character&#160;sets&#160;when&#160;in&#160;hires&#160;<br/>
EBA4&#160;<br/>
28&#160;<br/>
PLP&#160;<br/>
mode.&#160;<br/>
EBA5&#160;<br/>
D0&#160;E6&#160;<br/>
BNE&#160;$EB8D&#160;<br/>
EBA7&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
This&#160;section&#160;tests&#160;whether&#160;<br/>
EBA8&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
the&#160;character&#160;sets&#160;of&#160;the&#160;text&#160;<br/>
EBA9&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
mode&#160;would&#160;be&#160;lower&#160;than&#160;the&#160;<br/>
EBAA&#160;<br/>
E9&#160;1C&#160;<br/>
SBC&#160;#$1C&#160;<br/>
new&#160;Himem.&#160;The&#160;appropriate&#160;<br/>
EBAC&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
value&#160;of&#160;the&#160;C&#160;flag&#160;is&#160;left&#160;in&#160;<br/>
EBAD&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
the&#160;status&#160;register&#160;at&#160;the&#160;end&#160;<br/>
EBAE&#160;<br/>
20&#160;B5&#160;EB&#160;<br/>
JSR&#160;$EBB5&#160;<br/>
of&#160;the&#160;routine.&#160;<br/>
EBB1&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
EBB2&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
EBB3&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
EBB4&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>EBB5&#160;<br/>
CC&#160;C2&#160;02&#160;<br/>
CPY&#160;$02C2&#160;<br/>
This&#160;routine&#160;tests&#160;whether&#160;the&#160;<br/>
EBB8&#160;<br/>
90&#160;02&#160;<br/>
BCC&#160;$EBBC&#160;<br/>
address&#160;in&#160;A&#160;(low)&#160;and&#160;Y&#160;<br/>
EBBA&#160;<br/>
F0&#160;01&#160;<br/>
BEQ&#160;$EBBD&#160;<br/>
(high)&#160;is&#160;greater&#160;than&#160;that&#160;of&#160;<br/>
EBBC&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
the&#160;character&#160;sets&#160;in&#160;hires&#160;<br/>
EBBD&#160;<br/>
CD&#160;C1&#160;02&#160;<br/>
CMP&#160;$02C1&#160;<br/>
mode.&#160;C&#160;is&#160;set&#160;if&#160;A,Y&#160;are&#160;<br/>
EBC0&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
greater.&#160;<br/>
&#160;<br/>EBC1&#160;<br/>
AC&#160;C2&#160;02&#160;<br/>
LDY&#160;$02C2&#160;<br/>
This&#160;routine&#160;loads&#160;A&#160;(low)&#160;<br/>
EBC4&#160;<br/>
AD&#160;C1&#160;02&#160;<br/>
LDA&#160;$02C1&#160;<br/>
and&#160;Y&#160;(high)&#160;with&#160;the&#160;address&#160;<br/>
EBC7&#160;<br/>
D0&#160;01&#160;<br/>
BNE&#160;$EBCA&#160;<br/>
of&#160;the&#160;start&#160;of&#160;the&#160;character&#160;<br/>
EBC9&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
sets&#160;in&#160;the&#160;hires&#160;mode&#160;and&#160;<br/>
EBCA&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
then&#160;subtracts&#160;1&#160;from&#160;that&#160;<br/>
Pag&#160;&#160;e&#160;85&#160;<br/>
<hr/>
<a name=86></a>EBCB&#160;<br/>
E9&#160;01&#160;<br/>
SBC&#160;#$01&#160;<br/>
address.&#160;<br/>
EBCD&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>EBCE&#160;<br/>
20&#160;03&#160;CF&#160;<br/>
JSR&#160;$CF03&#160;<br/>
<b>HIMEM</b>&#160;<br/>
EBD1&#160;<br/>
20&#160;22&#160;D9&#160;<br/>
JSR&#160;$D922&#160;<br/>
Evaluate&#160;argument&#160;and&#160;convert&#160;<br/>
EBD4&#160;<br/>
A5&#160;33&#160;<br/>
LDA&#160;$33&#160;<br/>
it&#160;to&#160;a&#160;2&#160;byte&#160;integer.&#160;<br/>
EBD6&#160;<br/>
A4&#160;34&#160;<br/>
LDY&#160;$34&#160;<br/>
EBD8&#160;<br/>
20&#160;89&#160;EB&#160;<br/>
JSR&#160;$EB89&#160;<br/>
Test&#160;and&#160;branch&#160;if&#160;sufficient&#160;<br/>
EBDB&#160;<br/>
90&#160;03&#160;<br/>
BCC&#160;$EBE0&#160;<br/>
memory&#160;to&#160;allow&#160;new&#160;Himem.&#160;<br/>
EBDD&#160;<br/>
4C&#160;7C&#160;C4&#160;<br/>
JMP&#160;$C47C&#160;<br/>
Print&#160;&#34;OUT&#160;0F&#160;MEMORY&#160;ERROR&#34;.&#160;<br/>
EBE0&#160;<br/>
85&#160;A6&#160;<br/>
STA&#160;$A6&#160;<br/>
Update&#160;current&#160;himem&#160;pointer.&#160;<br/>
EBE2&#160;<br/>
84&#160;A7&#160;<br/>
STY&#160;$A7&#160;<br/>
EBE4&#160;<br/>
4C&#160;0F&#160;C7&#160;<br/>
JMP&#160;$C70F&#160;<br/>
Clear&#160;up&#160;pointers&#160;and&#160;finish.&#160;<br/>
EBE7&#160;<br/>
AD&#160;60&#160;02&#160;<br/>
LDA&#160;$0260&#160;<br/>
GRAB&#160;<br/>
EBEA&#160;<br/>
D0&#160;F1&#160;<br/>
BNE&#160;$EBDD&#160;<br/>
EBEC&#160;<br/>
AD&#160;C0&#160;02&#160;<br/>
LDA&#160;$02C0&#160;<br/>
Load&#160;Screen&#160;status.&#160;Give&#160;error&#160;<br/>
EBEF&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
if&#160;already&#160;in&#160;hires&#160;mode.&#160;<br/>
EBF0&#160;<br/>
29&#160;01&#160;<br/>
AND&#160;#$01&#160;<br/>
EBF2&#160;<br/>
F0&#160;05&#160;<br/>
BEQ&#160;$EBF9&#160;<br/>
EBF4&#160;<br/>
A2&#160;A3&#160;<br/>
LDX&#160;#$A3&#160;<br/>
Print&#160;&#34;DISP&#160;TYPE&#160;MISMATCH&#160;<br/>
EBF6&#160;<br/>
4C&#160;7E&#160;C4&#160;<br/>
JMP&#160;$C47E&#160;<br/>
ERROR&#34;.&#160;<br/>
EBF9&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
EBFA&#160;<br/>
29&#160;FD&#160;<br/>
AND&#160;#$FD&#160;<br/>
Set&#160;screen&#160;to&#160;GRAB&#160;status.&#160;<br/>
EBFC&#160;<br/>
8D&#160;C0&#160;02&#160;<br/>
STA&#160;$02C0&#160;<br/>
EBFF&#160;<br/>
20&#160;C1&#160;EB&#160;<br/>
JSR&#160;$EBC1&#160;<br/>
Load&#160;A&#160;and&#160;Y&#160;with&#160;the&#160;address&#160;<br/>
EC02&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
before&#160;the&#160;start&#160;of&#160;the&#160;hires&#160;<br/>
EC03&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
character&#160;set&#160;<br/>
EC04&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
EC05&#160;<br/>
69&#160;1C&#160;<br/>
ADC&#160;#$1C&#160;<br/>
EC07&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
EC08&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
EC09&#160;<br/>
4C&#160;E0&#160;EB&#160;<br/>
JMP&#160;$EBE0&#160;<br/>
&#160;<br/>EC0C&#160;<br/>
20&#160;C1&#160;EB&#160;<br/>
JSR&#160;$EBC1&#160;<br/>
<b>RELEASE</b>&#160;<br/>
EC0F&#160;<br/>
20&#160;89&#160;EB&#160;<br/>
JSR&#160;$EB89&#160;<br/>
Load&#160;address&#160;of&#160;byte&#160;below&#160;<br/>
EC12&#160;<br/>
B0&#160;C9&#160;<br/>
BCS&#160;$EBDD&#160;<br/>
start&#160;of&#160;hires&#160;char&#160;set&#160;and&#160;<br/>
EC14&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
test&#160;that&#160;it&#160;is&#160;not&#160;below&#160;end&#160;<br/>
EC15&#160;<br/>
AD&#160;C0&#160;02&#160;<br/>
LDA&#160;$02C0&#160;<br/>
of&#160;Basic.&#160;Set&#160;screen&#160;status&#160;<br/>
EC18&#160;<br/>
09&#160;02&#160;<br/>
ORA&#160;#$02&#160;<br/>
to&#160;allow&#160;hires&#160;mode.&#160;Finally&#160;<br/>
EC1A&#160;<br/>
8D&#160;C0&#160;02&#160;<br/>
STA&#160;$02C0&#160;<br/>
write&#160;the&#160;new&#160;value&#160;of&#160;himem.&#160;<br/>
EC1D&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
EC1E&#160;<br/>
4C&#160;E0&#160;EB&#160;<br/>
JMP&#160;$EBE0&#160;<br/>
&#160;<br/>EC21&#160;<br/>
AD&#160;C0&#160;02&#160;<br/>
LDA&#160;$02C0&#160;<br/>
<b>TEXT</b>&#160;<br/>
EC24&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
EC25&#160;<br/>
29&#160;01&#160;<br/>
AND&#160;#$01&#160;<br/>
EC27&#160;<br/>
F0&#160;09&#160;<br/>
BEQ&#160;$EC32&#160;<br/>
Already&#160;in&#160;text&#160;mode.&#160;<br/>
EC29&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
EC2A&#160;<br/>
29&#160;FE&#160;<br/>
AND&#160;#$FE&#160;<br/>
Set&#160;screen&#160;status&#160;to&#160;text.&#160;<br/>
EC2C&#160;<br/>
8D&#160;C0&#160;02&#160;<br/>
STA&#160;$02C0&#160;<br/>
EC2F&#160;<br/>
20&#160;67&#160;F9&#160;<br/>
JSR&#160;$F967&#160;<br/>
Set&#160;screen&#160;to&#160;text.&#160;<br/>
EC32&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>EC33&#160;<br/>
AD&#160;C0&#160;02&#160;<br/>
LDA&#160;$02C0&#160;<br/>
<b>HIRES</b>&#160;<br/>
EC36&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
EC37&#160;<br/>
29&#160;02&#160;<br/>
AND&#160;#$02&#160;<br/>
Error&#160;if&#160;hires&#160;mode&#160;cannot&#160;be&#160;<br/>
EC39&#160;<br/>
F0&#160;B9&#160;<br/>
BEQ&#160;$EBF4&#160;<br/>
entered.&#160;<br/>
EC3B&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Set&#160;status&#160;to&#160;indicate&#160;hires&#160;<br/>
EC3C&#160;<br/>
09&#160;01&#160;<br/>
ORA&#160;#$01&#160;<br/>
mode.&#160;<br/>
EC3E&#160;<br/>
8D&#160;C0&#160;02&#160;<br/>
STA&#160;$02C0&#160;<br/>
EC41&#160;<br/>
20&#160;20&#160;F9&#160;<br/>
JSR&#160;$F920&#160;<br/>
Set&#160;screen&#160;to&#160;hires&#160;mode.&#160;<br/>
EC44&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>EC45&#160;<br/>
20&#160;62&#160;D0&#160;<br/>
JSR&#160;$D062&#160;<br/>
<b>POINT</b>&#160;<br/>
Pag&#160;&#160;e&#160;86&#160;<br/>
<hr/>
<a name=87></a>EC48&#160;<br/>
20&#160;17&#160;CF&#160;<br/>
JSR&#160;$CF17&#160;<br/>
Check&#160;'('&#160;is&#160;present;&#160;if&#160;so&#160;<br/>
EC4B&#160;<br/>
A5&#160;34&#160;<br/>
LDA&#160;$34&#160;<br/>
then&#160;evaluate&#160;the&#160;X&#160;parameter.&#160;<br/>
EC4D&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
Save&#160;contents&#160;of&#160;#33&#160;and&#160;#34&#160;<br/>
EC4E&#160;<br/>
A5&#160;33&#160;<br/>
LDA&#160;$33&#160;<br/>
on&#160;the&#160;stack.&#160;<br/>
EC50&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
EC51&#160;<br/>
20&#160;22&#160;D9&#160;<br/>
JSR&#160;$D922&#160;<br/>
Convert&#160;X&#160;parameter&#160;to&#160;integer&#160;<br/>
EC54&#160;<br/>
A5&#160;33&#160;<br/>
LDA&#160;$33&#160;<br/>
and&#160;transfer&#160;result&#160;to&#160;page&#160;2.&#160;<br/>
EC56&#160;<br/>
8D&#160;E1&#160;02&#160;<br/>
STA&#160;$02E1&#160;<br/>
EC59&#160;<br/>
A5&#160;34&#160;<br/>
LDA&#160;$34&#160;<br/>
EC5B&#160;<br/>
8D&#160;E2&#160;02&#160;<br/>
STA&#160;$02E2&#160;<br/>
EC5E&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Restore&#160;values&#160;in&#160;#33&#160;and&#160;#34.&#160;<br/>
EC5F&#160;<br/>
85&#160;33&#160;<br/>
STA&#160;$33&#160;<br/>
EC61&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
EC62&#160;<br/>
85&#160;34&#160;<br/>
STA&#160;$34&#160;<br/>
EC64&#160;<br/>
20&#160;65&#160;D0&#160;<br/>
JSR&#160;$D065&#160;<br/>
Search&#160;for&#160;','&#160;<br/>
EC67&#160;<br/>
20&#160;17&#160;CF&#160;<br/>
JSR&#160;$CF17&#160;<br/>
Evaluate&#160;Y&#160;parameter.&#160;<br/>
EC6A&#160;<br/>
A5&#160;34&#160;<br/>
LDA&#160;$34&#160;<br/>
Save&#160;contents&#160;of&#160;#33&#160;and&#160;#34&#160;<br/>
EC6C&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
on&#160;the&#160;stack.&#160;Must&#160;be&#160;done&#160;<br/>
EC6D&#160;<br/>
A5&#160;33&#160;<br/>
LDA&#160;$33&#160;<br/>
twice&#160;in&#160;case&#160;of&#160;error&#160;in&#160;<br/>
EC6F&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
searching&#160;for&#160;','&#160;etc..&#160;<br/>
EC70&#160;<br/>
20&#160;22&#160;D9&#160;<br/>
JSR&#160;$D922&#160;<br/>
Convert&#160;Y&#160;parameter&#160;to&#160;integer&#160;<br/>
EC73&#160;<br/>
A5&#160;34&#160;<br/>
LDA&#160;$34&#160;<br/>
and&#160;transfer&#160;result&#160;to&#160;page&#160;2.&#160;<br/>
EC75&#160;<br/>
8D&#160;E4&#160;02&#160;<br/>
STA&#160;$02E4&#160;<br/>
EC78&#160;<br/>
A5&#160;33&#160;<br/>
LDA&#160;$33&#160;<br/>
EC7A&#160;<br/>
8D&#160;E3&#160;02&#160;<br/>
STA&#160;$02E3&#160;<br/>
EC7D&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Restore&#160;contents&#160;of&#160;#33&#160;and&#160;<br/>
EC7E&#160;<br/>
85&#160;33&#160;<br/>
STA&#160;$33&#160;<br/>
#34&#160;to&#160;original&#160;state.&#160;<br/>
EC80&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
EC81&#160;<br/>
85&#160;34&#160;<br/>
STA&#160;$34&#160;<br/>
EC83&#160;<br/>
20&#160;C8&#160;F1&#160;<br/>
JSR&#160;$F1C8&#160;<br/>
Test&#160;pixel&#160;in&#160;question.&#160;<br/>
EC86&#160;<br/>
AC&#160;E1&#160;02&#160;<br/>
LDY&#160;$02E1&#160;<br/>
EC89&#160;<br/>
AD&#160;E0&#160;02&#160;<br/>
LDA&#160;$02E0&#160;<br/>
EC8C&#160;<br/>
29&#160;01&#160;<br/>
AND&#160;#$01&#160;<br/>
EC8E&#160;<br/>
D0&#160;09&#160;<br/>
BNE&#160;$EC99&#160;<br/>
Error&#160;found.&#160;<br/>
EC90&#160;<br/>
AD&#160;E2&#160;02&#160;<br/>
LDA&#160;$02E2&#160;<br/>
EC93&#160;<br/>
20&#160;99&#160;D4&#160;<br/>
JSR&#160;$D499&#160;<br/>
Put&#160;signed&#160;integer&#160;in&#160;FPA.&#160;<br/>
EC96&#160;<br/>
4C&#160;5F&#160;D0&#160;<br/>
JMP&#160;$D05F&#160;<br/>
Jump&#160;to&#160;test&#160;for&#160;'('.&#160;<br/>
EC99&#160;<br/>
4C&#160;C2&#160;D8&#160;<br/>
JMP&#160;$D8C2&#160;<br/>
&#34;ILLEGAL&#160;QUANTITY&#160;ERROR&#34;.&#160;<br/>
&#160;<br/>EC9C&#160;<br/>
E6&#160;E9&#160;<br/>
INC&#160;$E9&#160;<br/>
This&#160;is&#160;data&#160;for&#160;the&#160;routine&#160;<br/>
EC9E&#160;<br/>
D0&#160;02&#160;<br/>
BNE&#160;$ECA2&#160;<br/>
which&#160;gets&#160;copied&#160;into&#160;page&#160;<br/>
ECA0&#160;<br/>
E6&#160;EA&#160;<br/>
INC&#160;$EA&#160;<br/>
zero&#160;of&#160;memory&#160;at&#160;$E2.&#160;It&#160;<br/>
ECA2&#160;<br/>
AD&#160;60&#160;EA&#160;<br/>
LDA&#160;$EA60&#160;<br/>
holds&#160;the&#160;current&#160;program&#160;<br/>
ECA5&#160;<br/>
C9&#160;20&#160;<br/>
CMP&#160;#$20&#160;<br/>
position&#160;and&#160;is&#160;used&#160;to&#160;step&#160;<br/>
ECA7&#160;<br/>
F0&#160;F3&#160;<br/>
BEQ&#160;$EC9C&#160;<br/>
through&#160;the&#160;spaces&#160;in&#160;a&#160;<br/>
ECA9&#160;<br/>
20&#160;B9&#160;EC&#160;<br/>
JSR&#160;$ECB9&#160;<br/>
program&#160;until&#160;a&#160;non&#160;space&#160;char&#160;<br/>
ECAC&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
is&#160;found.&#160;<br/>
&#160;<br/>ECAD&#160;<br/>
2C&#160;60&#160;EA&#160;<br/>
BIT&#160;$EA60&#160;<br/>
ECB0&#160;<br/>
2C&#160;60&#160;EA&#160;<br/>
BIT&#160;$EA60&#160;<br/>
ECB3&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>ECB4&#160;<br/>
80&#160;4F&#160;C7&#160;52&#160;58&#160;<br/>
Initial&#160;random&#160;number.&#160;<br/>
&#160;<br/>ECB9&#160;<br/>
C9&#160;C8&#160;<br/>
CMP&#160;#$C8&#160;<br/>
Routine&#160;to&#160;test&#160;for&#160;statement&#160;<br/>
ECBB&#160;<br/>
F0&#160;0E&#160;<br/>
BEQ&#160;$ECCB&#160;<br/>
delimiter&#160;or&#160;a&#160;number.&#160;<br/>
ECBD&#160;<br/>
C9&#160;27&#160;<br/>
CMP&#160;#$27&#160;<br/>
ECBF&#160;<br/>
F0&#160;0A&#160;<br/>
BEQ&#160;$ECCB&#160;<br/>
ECC1&#160;<br/>
C9&#160;3A&#160;<br/>
CMP&#160;#$3A&#160;<br/>
ECC3&#160;<br/>
B0&#160;06&#160;<br/>
BCS&#160;$ECCB&#160;<br/>
ECC5&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
ECC6&#160;<br/>
E9&#160;30&#160;<br/>
SBC&#160;#$30&#160;<br/>
ECC8&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
Z&#160;is&#160;set&#160;if&#160;colon&#160;or&#160;null&#160;<br/>
ECC9&#160;<br/>
E9&#160;D0&#160;<br/>
SBC&#160;#$D0&#160;<br/>
found,&#160;C&#160;is&#160;cleared&#160;if&#160;digit&#160;<br/>
Pag&#160;&#160;e&#160;87&#160;<br/>
<hr/>
<a name=88></a>ECCB&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
between&#160;0-9&#160;found.&#160;<br/>
&#160;<br/>ECCC&#160;<br/>
D8&#160;<br/>
CLD&#160;<br/>
<b>START&#160;OF&#160;BASIC</b>&#160;<br/>
ECCD&#160;<br/>
A2&#160;FF&#160;<br/>
LDX&#160;#$FF&#160;<br/>
ECCF&#160;<br/>
86&#160;A9&#160;<br/>
STX&#160;$A9&#160;<br/>
Set&#160;immediate&#160;mode.&#160;<br/>
ECD1&#160;<br/>
9A&#160;<br/>
TXS&#160;<br/>
Set&#160;stack&#160;pointer.&#160;<br/>
ECD2&#160;<br/>
A9&#160;CC&#160;<br/>
LDA&#160;#$CC&#160;<br/>
Set&#160;up&#160;address&#160;of&#160;start&#160;of&#160;<br/>
ECD4&#160;<br/>
A0&#160;EC&#160;<br/>
LDY&#160;#$EC&#160;<br/>
Basic&#160;as&#160;a&#160;jump&#160;at&#160;#1A.&#160;<br/>
ECD6&#160;<br/>
85&#160;1B&#160;<br/>
STA&#160;$1B&#160;<br/>
ECD8&#160;<br/>
84&#160;1C&#160;<br/>
STY&#160;$1C&#160;<br/>
ECDA&#160;<br/>
A9&#160;4C&#160;<br/>
LDA&#160;#$4C&#160;<br/>
ECDC&#160;<br/>
85&#160;1A&#160;<br/>
STA&#160;$1A&#160;<br/>
ECDE&#160;<br/>
85&#160;C3&#160;<br/>
STA&#160;$C3&#160;<br/>
Set&#160;up&#160;jump&#160;opcodes&#160;for&#160;USR,&#160;&amp;&#160;<br/>
ECE0&#160;<br/>
85&#160;21&#160;<br/>
STA&#160;$21&#160;<br/>
and&#160;numeric&#160;function&#160;executer.&#160;<br/>
ECE2&#160;<br/>
8D&#160;FB&#160;02&#160;<br/>
STA&#160;$02FB&#160;<br/>
ECE5&#160;<br/>
A9&#160;36&#160;<br/>
LDA&#160;#$36&#160;<br/>
ECE7&#160;<br/>
A0&#160;D3&#160;<br/>
LDY&#160;#$D3&#160;<br/>
ECE9&#160;<br/>
85&#160;22&#160;<br/>
STA&#160;$22&#160;<br/>
Set&#160;up&#160;default&#160;USR&#160;address&#160;-&#160;<br/>
ECEB&#160;<br/>
84&#160;23&#160;<br/>
STY&#160;$23&#160;<br/>
to&#160;give&#160;ILLEGAL&#160;QUANTITY&#160;<br/>
ECED&#160;<br/>
8D&#160;FC&#160;02&#160;<br/>
STA&#160;$02FC&#160;<br/>
ERROR.&#160;Do&#160;same&#160;for&#160;&amp;&#160;command&#160;<br/>
ECF0&#160;<br/>
8C&#160;FD&#160;02&#160;<br/>
STY&#160;$02FD&#160;<br/>
and&#160;!&#160;command.&#160;<br/>
ECF3&#160;<br/>
8D&#160;F5&#160;02&#160;<br/>
STA&#160;$02F5&#160;<br/>
ECF6&#160;<br/>
8C&#160;F6&#160;02&#160;<br/>
STY&#160;$02F6&#160;<br/>
ECF9&#160;<br/>
A2&#160;1C&#160;<br/>
LDX&#160;#$1C&#160;<br/>
Copy&#160;the&#160;self-modifying-code&#160;<br/>
ECFB&#160;<br/>
BD&#160;9B&#160;EC&#160;<br/>
LDA&#160;$EC9B,X&#160;<br/>
routine&#160;into&#160;zero&#160;page.&#160;It&#160;is&#160;<br/>
ECFE&#160;<br/>
95&#160;E1&#160;<br/>
STA&#160;$E1,X&#160;<br/>
used&#160;to&#160;step&#160;through&#160;the&#160;<br/>
ED00&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
commands&#160;being&#160;executed&#160;(in&#160;<br/>
ED01&#160;<br/>
D0&#160;F8&#160;<br/>
BNE&#160;$ECFB&#160;<br/>
program&#160;or&#160;immediate&#160;mode).&#160;<br/>
ED03&#160;<br/>
A9&#160;03&#160;<br/>
LDA&#160;#$03&#160;<br/>
ED05&#160;<br/>
85&#160;C2&#160;<br/>
STA&#160;$C2&#160;<br/>
This&#160;section&#160;sets&#160;up&#160;a&#160;series&#160;<br/>
ED07&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
of&#160;variables.&#160;<br/>
ED08&#160;<br/>
85&#160;D7&#160;<br/>
STA&#160;$D7&#160;<br/>
Clear&#160;sign&#160;extend&#160;byte.&#160;<br/>
ED0A&#160;<br/>
85&#160;87&#160;<br/>
STA&#160;$87&#160;<br/>
Clear&#160;top&#160;active&#160;string&#160;ptr.&#160;<br/>
ED0C&#160;<br/>
85&#160;2F&#160;<br/>
STA&#160;$2F&#160;<br/>
Clear&#160;next&#160;byte&#160;to&#160;tape.&#160;<br/>
ED0E&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
ED0F&#160;<br/>
85&#160;2E&#160;<br/>
STA&#160;$2E&#160;<br/>
Clear&#160;CTRL&#160;0&#160;flag.&#160;<br/>
ED11&#160;<br/>
8D&#160;F2&#160;02&#160;<br/>
STA&#160;$02F2&#160;<br/>
Clear&#160;EDIT&#160;flag.&#160;<br/>
ED14&#160;<br/>
A2&#160;88&#160;<br/>
LDX&#160;#$88&#160;<br/>
Set&#160;string&#160;block&#160;pointer.&#160;<br/>
ED16&#160;<br/>
86&#160;85&#160;<br/>
STX&#160;$85&#160;<br/>
ED18&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
ED19&#160;<br/>
A9&#160;02&#160;<br/>
LDA&#160;#$02&#160;<br/>
Set&#160;screen&#160;to&#160;text.&#160;<br/>
ED1B&#160;<br/>
8D&#160;C0&#160;02&#160;<br/>
STA&#160;$02C0&#160;<br/>
ED1E&#160;<br/>
A9&#160;28&#160;<br/>
LDA&#160;#$28&#160;<br/>
Set&#160;up&#160;line&#160;width&#160;on&#160;screen.&#160;<br/>
ED20&#160;<br/>
8D&#160;57&#160;02&#160;<br/>
STA&#160;$0257&#160;<br/>
ED23&#160;<br/>
A9&#160;50&#160;<br/>
LDA&#160;#$50&#160;<br/>
Set&#160;up&#160;line&#160;width&#160;on&#160;printer.&#160;<br/>
ED25&#160;<br/>
8D&#160;56&#160;02&#160;<br/>
STA&#160;$0256&#160;<br/>
ED28&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
Set&#160;up&#160;TAB&#160;positon&#160;of&#160;cursor.&#160;<br/>
ED2A&#160;<br/>
85&#160;30&#160;<br/>
STA&#160;$30&#160;<br/>
Set&#160;Basic's&#160;cursor&#160;column.&#160;<br/>
ED2C&#160;<br/>
8D&#160;58&#160;02&#160;<br/>
STA&#160;$0258&#160;<br/>
Clear&#160;printer&#160;cursor&#160;position.&#160;<br/>
ED2F&#160;<br/>
8D&#160;59&#160;02&#160;<br/>
STA&#160;$0259&#160;<br/>
Clear&#160;screen&#160;cursor&#160;position.&#160;<br/>
ED32&#160;<br/>
20&#160;3E&#160;C8&#160;<br/>
JSR&#160;$C83E&#160;<br/>
Printer&#160;off&#160;&amp;&#160;set&#160;variables.&#160;<br/>
ED35&#160;<br/>
20&#160;CE&#160;CC&#160;<br/>
JSR&#160;$CCCE&#160;<br/>
CLS&#160;command.&#160;<br/>
ED38&#160;<br/>
A9&#160;96&#160;<br/>
LDA&#160;#$96&#160;<br/>
Load&#160;start&#160;address&#160;of&#160;initial&#160;<br/>
ED3A&#160;<br/>
A0&#160;ED&#160;<br/>
LDY&#160;#$ED&#160;<br/>
message&#160;printed&#160;on&#160;screen.&#160;<br/>
ED3C&#160;<br/>
20&#160;B0&#160;CC&#160;<br/>
JSR&#160;$CCB0&#160;<br/>
Print&#160;message&#160;&#34;ORIC&#160;EXT...&#34;&#160;<br/>
ED3F&#160;<br/>
20&#160;F0&#160;CB&#160;<br/>
JSR&#160;$CBF0&#160;<br/>
ED42&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
Set&#160;up&#160;Start&#160;Basic&#160;pointer&#160;to&#160;<br/>
ED44&#160;<br/>
A0&#160;05&#160;<br/>
LDY&#160;#$05&#160;<br/>
#0500.&#160;<br/>
ED46&#160;<br/>
86&#160;9A&#160;<br/>
STX&#160;$9A&#160;<br/>
ED48&#160;<br/>
84&#160;9B&#160;<br/>
STY&#160;$9B&#160;<br/>
ED4A&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
ED4C&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
ED4D&#160;<br/>
91&#160;9A&#160;<br/>
STA&#160;($9A),Y&#160;<br/>
Zero&#160;the&#160;first&#160;byte&#160;in&#160;Basic&#160;<br/>
ED4F&#160;<br/>
E6&#160;9A&#160;<br/>
INC&#160;$9A&#160;<br/>
and&#160;increment&#160;Start&#160;Basic&#160;<br/>
Pag&#160;&#160;e&#160;88&#160;<br/>
<hr/>
<a name=89></a>ED51&#160;<br/>
D0&#160;02&#160;<br/>
BNE&#160;$ED55&#160;<br/>
pointer&#160;by&#160;1.&#160;<br/>
ED53&#160;<br/>
E6&#160;9B&#160;<br/>
INC&#160;$9B&#160;<br/>
ED55&#160;<br/>
20&#160;F0&#160;C6&#160;<br/>
JSR&#160;$C6F0&#160;<br/>
Set&#160;up&#160;other&#160;Basic&#160;Pointers.&#160;<br/>
ED58&#160;<br/>
A5&#160;9A&#160;<br/>
LDA&#160;$9A&#160;<br/>
ED5A&#160;<br/>
A4&#160;9B&#160;<br/>
LDY&#160;$9B&#160;<br/>
Test&#160;if&#160;Begin&#160;Basic&#160;is&#160;beyond&#160;<br/>
ED5C&#160;<br/>
20&#160;44&#160;C4&#160;<br/>
JSR&#160;$C444&#160;<br/>
last&#160;string&#160;allocated.&#160;<br/>
ED5F&#160;<br/>
20&#160;F0&#160;CB&#160;<br/>
JSR&#160;$CBF0&#160;<br/>
ED62&#160;<br/>
A5&#160;A6&#160;<br/>
LDA&#160;$A6&#160;<br/>
ED64&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
Calculate&#160;amount&#160;of&#160;free&#160;<br/>
ED65&#160;<br/>
E5&#160;9A&#160;<br/>
SBC&#160;$9A&#160;<br/>
memory&#160;between&#160;Start&#160;Basic&#160;<br/>
ED67&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
and&#160;Himem.&#160;Then&#160;print&#160;it&#160;on&#160;<br/>
ED68&#160;<br/>
A5&#160;A7&#160;<br/>
LDA&#160;$A7&#160;<br/>
the&#160;screen&#160;in&#160;decimal.&#160;<br/>
ED6A&#160;<br/>
E5&#160;9B&#160;<br/>
SBC&#160;$9B&#160;<br/>
ED6C&#160;<br/>
20&#160;C5&#160;E0&#160;<br/>
JSR&#160;$E0C5&#160;<br/>
ED6F&#160;<br/>
A9&#160;88&#160;<br/>
LDA&#160;#$88&#160;<br/>
Load&#160;address&#160;of&#160;message&#160;&#34;BYTES&#160;<br/>
ED71&#160;<br/>
A0&#160;ED&#160;<br/>
LDY&#160;#$ED&#160;<br/>
FREE&#34;&#160;<br/>
ED73&#160;<br/>
20&#160;B0&#160;CC&#160;<br/>
JSR&#160;$CCB0&#160;<br/>
Print&#160;above&#160;message.&#160;<br/>
ED76&#160;<br/>
A9&#160;B0&#160;<br/>
LDA&#160;#$B0&#160;<br/>
ED78&#160;<br/>
A0&#160;CC&#160;<br/>
LDY&#160;#$CC&#160;<br/>
Alter&#160;jump&#160;location&#160;at&#160;#1A&#160;to&#160;<br/>
ED7A&#160;<br/>
85&#160;1B&#160;<br/>
STA&#160;$1B&#160;<br/>
be&#160;able&#160;to&#160;print&#160;&#34;Ready&#34;&#160;<br/>
ED7C&#160;<br/>
84&#160;1C&#160;<br/>
STY&#160;$1C&#160;<br/>
messages.&#160;<br/>
ED7E&#160;<br/>
A9&#160;10&#160;<br/>
LDA&#160;#$10&#160;<br/>
ED80&#160;<br/>
8D&#160;F8&#160;02&#160;<br/>
STA&#160;$02F8&#160;<br/>
ED83&#160;<br/>
4C&#160;A8&#160;C4&#160;<br/>
JMP&#160;$C4A8&#160;<br/>
Goto&#160;main&#160;part&#160;of&#160;Basic.&#160;<br/>
&#160;<br/>ED86&#160;<br/>
00&#160;00&#160;20&#160;42&#160;59&#160;54&#160;45&#160;53&#160;<br/>
..&#160;BYTES&#160;<br/>
ED8E&#160;<br/>
20&#160;46&#160;52&#160;45&#160;45&#160;0A&#160;0D&#160;00&#160;<br/>
&#160;FREE...&#160;<br/>
ED96&#160;<br/>
4F&#160;52&#160;49&#160;43&#160;20&#160;45&#160;58&#160;54&#160;<br/>
ORIC&#160;EXT&#160;<br/>
ED9E&#160;<br/>
45&#160;4E&#160;44&#160;45&#160;44&#160;20&#160;42&#160;41&#160;<br/>
ENDED&#160;BA&#160;<br/>
EDA6&#160;<br/>
53&#160;49&#160;43&#160;20&#160;56&#160;31&#160;2E&#160;31&#160;<br/>
SIC&#160;V1.1&#160;<br/>
EDAE&#160;<br/>
0D&#160;0A&#160;60&#160;20&#160;31&#160;39&#160;38&#160;33&#160;<br/>
..&#160;1983&#160;<br/>
EDB6&#160;<br/>
20&#160;54&#160;41&#160;4E&#160;47&#160;45&#160;52&#160;49&#160;<br/>
&#160;TANGERI&#160;<br/>
EDBE&#160;<br/>
4E&#160;45&#160;0D&#160;0A&#160;00&#160;00&#160;<br/>
NE&#160;<br/>
&#160;<br/>EDC4&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
This&#160;routine&#160;transfers&#160;a&#160;block&#160;<br/>
EDC6&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
of&#160;data&#160;using&#160;#0C&#160;as&#160;the&#160;<br/>
EDC8&#160;<br/>
C4&#160;10&#160;<br/>
CPY&#160;$10&#160;<br/>
source&#160;pointer&#160;and&#160;#0E&#160;as&#160;the&#160;<br/>
EDCA&#160;<br/>
D0&#160;04&#160;<br/>
BNE&#160;$EDD0&#160;<br/>
destination&#160;pointer.&#160;The&#160;<br/>
EDCC&#160;<br/>
E4&#160;11&#160;<br/>
CPX&#160;$11&#160;<br/>
length&#160;of&#160;data&#160;to&#160;be&#160;moved&#160;is&#160;<br/>
EDCE&#160;<br/>
F0&#160;0F&#160;<br/>
BEQ&#160;$EDDF&#160;<br/>
held&#160;in&#160;locations&#160;#10/#11.&#160;<br/>
EDD0&#160;<br/>
B1&#160;0C&#160;<br/>
LDA&#160;($0C),Y&#160;<br/>
EDD2&#160;<br/>
91&#160;0E&#160;<br/>
STA&#160;($0E),Y&#160;<br/>
EDD4&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
EDD5&#160;<br/>
D0&#160;F1&#160;<br/>
BNE&#160;$EDC8&#160;<br/>
EDD7&#160;<br/>
E6&#160;0D&#160;<br/>
INC&#160;$0D&#160;<br/>
EDD9&#160;<br/>
E6&#160;0F&#160;<br/>
INC&#160;$0F&#160;<br/>
EDDB&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
EDDC&#160;<br/>
4C&#160;C8&#160;ED&#160;<br/>
JMP&#160;$EDC8&#160;<br/>
EDDF&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>EDE0&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
This&#160;routine&#160;sets&#160;the&#160;three&#160;16&#160;<br/>
EDE1&#160;<br/>
20&#160;8C&#160;EE&#160;<br/>
JSR&#160;$EE8C&#160;<br/>
bit&#160;counters&#160;(#272/3,&#160;#274/5&#160;&amp;&#160;<br/>
EDE4&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
#276/7)&#160;after&#160;setting&#160;them&#160;to&#160;<br/>
EDE6&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
zero.&#160;<br/>
EDE8&#160;<br/>
A0&#160;03&#160;<br/>
LDY&#160;#$03&#160;<br/>
#272/3&#160;is&#160;set&#160;to&#160;3&#160;and&#160;is&#160;used&#160;<br/>
EDEA&#160;<br/>
20&#160;AB&#160;EE&#160;<br/>
JSR&#160;$EEAB&#160;<br/>
as&#160;a&#160;counter&#160;for&#160;keyboard&#160;<br/>
EDED&#160;<br/>
A9&#160;01&#160;<br/>
LDA&#160;#$01&#160;<br/>
scanning.&#160;#274/5&#160;is&#160;set&#160;to&#160;25&#160;<br/>
EDEF&#160;<br/>
A0&#160;19&#160;<br/>
LDY&#160;#$19&#160;<br/>
and&#160;is&#160;used&#160;as&#160;a&#160;counter&#160;for&#160;<br/>
EDF1&#160;<br/>
20&#160;AB&#160;EE&#160;<br/>
JSR&#160;$EEAB&#160;<br/>
toggling&#160;the&#160;cursor.&#160;#276/7&#160;is&#160;<br/>
EDF4&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
not&#160;set&#160;here&#160;but&#160;is&#160;used&#160;in&#160;<br/>
EDF6&#160;<br/>
8D&#160;71&#160;02&#160;<br/>
STA&#160;$0271&#160;<br/>
the&#160;WAIT&#160;command.&#160;<br/>
EDF9&#160;<br/>
AD&#160;0B&#160;03&#160;<br/>
LDA&#160;$030B&#160;<br/>
EDFC&#160;<br/>
29&#160;7F&#160;<br/>
AND&#160;#$7F&#160;<br/>
This&#160;section&#160;sets&#160;up&#160;the&#160;6522&#160;<br/>
EDFE&#160;<br/>
09&#160;40&#160;<br/>
ORA&#160;#$40&#160;<br/>
to&#160;generate&#160;interrupts&#160;from&#160;<br/>
Pag&#160;&#160;e&#160;89&#160;<br/>
<hr/>
<a name=90></a>EE00&#160;<br/>
8D&#160;0B&#160;03&#160;<br/>
STA&#160;$030B&#160;<br/>
timer&#160;1&#160;every&#160;10mS&#160;(in&#160;its&#160;<br/>
EE03&#160;<br/>
A9&#160;C0&#160;<br/>
LDA&#160;#$C0&#160;<br/>
free&#160;running&#160;mode).&#160;<br/>
EE05&#160;<br/>
8D&#160;0E&#160;03&#160;<br/>
STA&#160;$030E&#160;<br/>
EE08&#160;<br/>
A9&#160;10&#160;<br/>
LDA&#160;#$10&#160;<br/>
EE0A&#160;<br/>
8D&#160;06&#160;03&#160;<br/>
STA&#160;$0306&#160;<br/>
EE0D&#160;<br/>
8D&#160;04&#160;03&#160;<br/>
STA&#160;$0304&#160;<br/>
EE10&#160;<br/>
A9&#160;27&#160;<br/>
LDA&#160;#$27&#160;<br/>
EE12&#160;<br/>
8D&#160;07&#160;03&#160;<br/>
STA&#160;$0307&#160;<br/>
EE15&#160;<br/>
8D&#160;05&#160;03&#160;<br/>
STA&#160;$0305&#160;<br/>
EE18&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
EE19&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>EE1A&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
Disable&#160;timer&#160;1&#160;interrupts&#160;<br/>
EE1B&#160;<br/>
A9&#160;40&#160;<br/>
LDA&#160;#$40&#160;<br/>
from&#160;the&#160;6522.&#160;This&#160;routine&#160;<br/>
EE1D&#160;<br/>
8D&#160;0E&#160;03&#160;<br/>
STA&#160;$030E&#160;<br/>
is&#160;used&#160;by&#160;the&#160;cassette&#160;<br/>
EE20&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
commands.&#160;<br/>
EE21&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>EE22&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
<b>IRQ&#160;Handler.</b>&#160;<br/>
EE23&#160;<br/>
AD&#160;0D&#160;03&#160;<br/>
LDA&#160;$030D&#160;<br/>
Test&#160;that&#160;timer&#160;1&#160;has&#160;timed&#160;<br/>
EE26&#160;<br/>
29&#160;40&#160;<br/>
AND&#160;#$40&#160;<br/>
out;&#160;if&#160;so&#160;then&#160;go&#160;to&#160;service&#160;<br/>
EE28&#160;<br/>
F0&#160;06&#160;<br/>
BEQ&#160;$EE30&#160;<br/>
subroutine.&#160;The&#160;interrupt&#160;<br/>
EE2A&#160;<br/>
8D&#160;0D&#160;03&#160;<br/>
STA&#160;$030D&#160;<br/>
routine&#160;is&#160;terminated&#160;by&#160;<br/>
EE2D&#160;<br/>
20&#160;34&#160;EE&#160;<br/>
JSR&#160;$EE34&#160;<br/>
jumping&#160;to&#160;the&#160;RTI&#160;instruction&#160;<br/>
EE30&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
at&#160;#24A.&#160;<br/>
EE31&#160;<br/>
4C&#160;4A&#160;02&#160;<br/>
JMP&#160;$024A&#160;<br/>
EE34&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
EE35&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
EE36&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
EE37&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
EE38&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
EE39&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
This&#160;section&#160;decrements&#160;each&#160;<br/>
EE3B&#160;<br/>
B9&#160;72&#160;02&#160;<br/>
LDA&#160;$0272,Y&#160;<br/>
of&#160;the&#160;three&#160;16&#160;bit&#160;counters&#160;<br/>
EE3E&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
in&#160;page&#160;2&#160;by&#160;1.&#160;<br/>
EE3F&#160;<br/>
E9&#160;01&#160;<br/>
SBC&#160;#$01&#160;<br/>
EE41&#160;<br/>
99&#160;72&#160;02&#160;<br/>
STA&#160;$0272,Y&#160;<br/>
EE44&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
EE45&#160;<br/>
B9&#160;72&#160;02&#160;<br/>
LDA&#160;$0272,Y&#160;<br/>
EE48&#160;<br/>
E9&#160;00&#160;<br/>
SBC&#160;#$00&#160;<br/>
EE4A&#160;<br/>
99&#160;72&#160;02&#160;<br/>
STA&#160;$0272,Y&#160;<br/>
EE4D&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
EE4E&#160;<br/>
C0&#160;06&#160;<br/>
CPY&#160;#$06&#160;<br/>
EE50&#160;<br/>
D0&#160;E9&#160;<br/>
BNE&#160;$EE3B&#160;<br/>
EE52&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
Load&#160;X&#160;(high)&#160;and&#160;Y&#160;(low)&#160;with&#160;<br/>
EE54&#160;<br/>
20&#160;9D&#160;EE&#160;<br/>
JSR&#160;$EE9D&#160;<br/>
content&#160;of&#160;first&#160;counter.&#160;If&#160;<br/>
EE57&#160;<br/>
C0&#160;00&#160;<br/>
CPY&#160;#$00&#160;<br/>
has&#160;reached&#160;zero&#160;then&#160;reload&#160;<br/>
EE59&#160;<br/>
D0&#160;10&#160;<br/>
BNE&#160;$EE6B&#160;<br/>
it&#160;with&#160;the&#160;value&#160;of&#160;3.&#160;<br/>
EE5B&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
EE5D&#160;<br/>
A0&#160;03&#160;<br/>
LDY&#160;#$03&#160;<br/>
EE5F&#160;<br/>
20&#160;AB&#160;EE&#160;<br/>
JSR&#160;$EEAB&#160;<br/>
After&#160;each&#160;countdown&#160;to&#160;zero&#160;<br/>
EE62&#160;<br/>
20&#160;95&#160;F4&#160;<br/>
JSR&#160;$F495&#160;<br/>
strobe&#160;the&#160;keyboard;&#160;the&#160;<br/>
EE65&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
result&#160;will&#160;be&#160;in&#160;X&#160;and&#160;bit&#160;7&#160;<br/>
EE66&#160;<br/>
10&#160;03&#160;<br/>
BPL&#160;$EE6B&#160;<br/>
set&#160;if&#160;a&#160;valid&#160;key.&#160;<br/>
EE68&#160;<br/>
8E&#160;DF&#160;02&#160;<br/>
STX&#160;$02DF&#160;<br/>
Save&#160;the&#160;new&#160;key.&#160;<br/>
EE6B&#160;<br/>
A9&#160;01&#160;<br/>
LDA&#160;#$01&#160;<br/>
Load&#160;X&#160;and&#160;Y&#160;with&#160;content&#160;of&#160;<br/>
EE6D&#160;<br/>
20&#160;9D&#160;EE&#160;<br/>
JSR&#160;$EE9D&#160;<br/>
the&#160;second&#160;16&#160;bit&#160;counter.&#160;If&#160;<br/>
EE70&#160;<br/>
C0&#160;00&#160;<br/>
CPY&#160;#$00&#160;<br/>
it&#160;has&#160;reached&#160;zero&#160;then&#160;<br/>
EE72&#160;<br/>
D0&#160;12&#160;<br/>
BNE&#160;$EE86&#160;<br/>
reload&#160;it&#160;with&#160;the&#160;value&#160;of&#160;<br/>
EE74&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
25.&#160;When&#160;zero,&#160;toggle&#160;the&#160;<br/>
EE76&#160;<br/>
A0&#160;19&#160;<br/>
LDY&#160;#$19&#160;<br/>
cursor&#160;flag&#160;in&#160;#271.&#160;<br/>
EE78&#160;<br/>
20&#160;AB&#160;EE&#160;<br/>
JSR&#160;$EEAB&#160;<br/>
Then&#160;place&#160;a&#160;copy&#160;of&#160;cursor&#160;<br/>
EE7B&#160;<br/>
AD&#160;71&#160;02&#160;<br/>
LDA&#160;$0271&#160;<br/>
on&#160;screen&#160;if&#160;it&#160;is&#160;enabled.&#160;<br/>
EE7E&#160;<br/>
49&#160;01&#160;<br/>
EOR&#160;#$01&#160;<br/>
EE80&#160;<br/>
8D&#160;71&#160;02&#160;<br/>
STA&#160;$0271&#160;<br/>
Pag&#160;&#160;e&#160;90&#160;<br/>
<hr/>
<a name=91></a>EE83&#160;<br/>
20&#160;01&#160;F8&#160;<br/>
JSR&#160;$F801&#160;<br/>
EE86&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
EE87&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
EE88&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
EE89&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
EE8A&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
EE8B&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>EE8C&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
This&#160;routine&#160;sets&#160;to&#160;zero&#160;<br/>
EE8D&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
the&#160;three&#160;16&#160;bit&#160;counters&#160;<br/>
EE8E&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
at&#160;#272/3,&#160;#274/5&#160;and&#160;#276/7.&#160;<br/>
EE8F&#160;<br/>
A0&#160;05&#160;<br/>
LDY&#160;#$05&#160;<br/>
EE91&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
EE93&#160;<br/>
99&#160;72&#160;02&#160;<br/>
STA&#160;$0272,Y&#160;<br/>
EE96&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
EE97&#160;<br/>
10&#160;FA&#160;<br/>
BPL&#160;$EE93&#160;<br/>
EE99&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
EE9A&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
EE9B&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
EE9C&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>EE9D&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
This&#160;routine&#160;loads&#160;X&#160;(high)&#160;<br/>
EE9E&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
and&#160;Y&#160;(low)&#160;with&#160;the&#160;content&#160;<br/>
EE9F&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
of&#160;the&#160;16&#160;bit&#160;counter&#160;<br/>
EEA0&#160;<br/>
78&#160;<br/>
SEI&#160;<br/>
specified&#160;by&#160;the&#160;content&#160;of&#160;A.&#160;<br/>
EEA1&#160;<br/>
B9&#160;72&#160;02&#160;<br/>
LDA&#160;$0272,Y&#160;<br/>
The&#160;valid&#160;values&#160;of&#160;A&#160;are&#160;0,&#160;1&#160;<br/>
EEA4&#160;<br/>
BE&#160;73&#160;02&#160;<br/>
LDX&#160;$0273,Y&#160;<br/>
and&#160;2&#160;which&#160;load&#160;the&#160;1st,&#160;2nd&#160;<br/>
EEA7&#160;<br/>
58&#160;<br/>
CLI&#160;<br/>
and&#160;3rd&#160;counters&#160;respectively.&#160;<br/>
EEA8&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
EEA9&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
EEAA&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>EEAB&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
This&#160;routine&#160;loads&#160;the&#160;16&#160;bit&#160;<br/>
EEAC&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
counter&#160;specified&#160;by&#160;A&#160;with&#160;<br/>
EEAD&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
the&#160;contents&#160;of&#160;X&#160;(high)&#160;and&#160;<br/>
EEAE&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
Y&#160;(low).&#160;<br/>
EEAF&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
Values&#160;of&#160;0,&#160;1&#160;and&#160;2&#160;in&#160;A&#160;<br/>
EEB0&#160;<br/>
BA&#160;<br/>
TSX&#160;<br/>
access&#160;the&#160;1st,&#160;2nd&#160;and&#160;3rd&#160;<br/>
EEB1&#160;<br/>
BD&#160;03&#160;01&#160;<br/>
LDA&#160;$0103,X&#160;<br/>
counters&#160;respectively.&#160;<br/>
EEB4&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
EEB5&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
EEB6&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
EEB7&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
EEB8&#160;<br/>
78&#160;<br/>
SEI&#160;<br/>
EEB9&#160;<br/>
99&#160;72&#160;02&#160;<br/>
STA&#160;$0272,Y&#160;<br/>
EEBC&#160;<br/>
BD&#160;02&#160;01&#160;<br/>
LDA&#160;$0102,X&#160;<br/>
EEBF&#160;<br/>
99&#160;73&#160;02&#160;<br/>
STA&#160;$0273,Y&#160;<br/>
EEC2&#160;<br/>
58&#160;<br/>
CLI&#160;<br/>
EEC3&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
EEC4&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
EEC5&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
EEC6&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
EEC7&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
EEC8&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>EEC9&#160;<br/>
20&#160;AB&#160;EE&#160;<br/>
JSR&#160;$EEAB&#160;<br/>
Load&#160;the&#160;16&#160;bit&#160;counter&#160;<br/>
EECC&#160;<br/>
20&#160;9D&#160;EE&#160;<br/>
JSR&#160;$EE9D&#160;<br/>
specified&#160;by&#160;A&#160;with&#160;the&#160;<br/>
EECF&#160;<br/>
C0&#160;00&#160;<br/>
CPY&#160;#$00&#160;<br/>
contents&#160;of&#160;X&#160;and&#160;Y&#160;and&#160;then&#160;<br/>
EED1&#160;<br/>
D0&#160;F9&#160;<br/>
BNE&#160;$EECC&#160;<br/>
wait&#160;until&#160;that&#160;counter&#160;has&#160;<br/>
EED3&#160;<br/>
E0&#160;00&#160;<br/>
CPX&#160;#$00&#160;<br/>
decremented&#160;to&#160;zero.&#160;<br/>
EED5&#160;<br/>
D0&#160;F5&#160;<br/>
BNE&#160;$EECC&#160;<br/>
EED7&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>EED8&#160;<br/>
AD&#160;13&#160;02&#160;<br/>
LDA&#160;$0213&#160;<br/>
Transfer&#160;the&#160;FB&#160;code&#160;from&#160;bits&#160;<br/>
Pag&#160;&#160;e&#160;91&#160;<br/>
<hr/>
<a name=92></a>EEDB&#160;<br/>
8D&#160;14&#160;02&#160;<br/>
STA&#160;$0214&#160;<br/>
0&#160;and&#160;1&#160;to&#160;bits&#160;6&#160;and&#160;7&#160;of&#160;<br/>
EEDE&#160;<br/>
4E&#160;12&#160;02&#160;<br/>
LSR&#160;$0212&#160;<br/>
$0212.&#160;The&#160;pattern&#160;code&#160;is&#160;<br/>
EEE1&#160;<br/>
6E&#160;12&#160;02&#160;<br/>
ROR&#160;$0212&#160;<br/>
transferred&#160;to&#160;a&#160;works&#160;<br/>
EEE4&#160;<br/>
6E&#160;12&#160;02&#160;<br/>
ROR&#160;$0212&#160;<br/>
register&#160;at&#160;$214.&#160;<br/>
EEE7&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>EEE8&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
Write&#160;a&#160;pixel&#160;to&#160;the&#160;hires&#160;<br/>
EEE9&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
screen.&#160;<br/>
EEEA&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
Calculate&#160;the&#160;address&#160;of&#160;the&#160;<br/>
EEEB&#160;<br/>
20&#160;DE&#160;EE&#160;<br/>
JSR&#160;$EEDE&#160;<br/>
byte&#160;to&#160;write&#160;to&#160;the&#160;screen,&#160;<br/>
EEEE&#160;<br/>
20&#160;49&#160;F0&#160;<br/>
JSR&#160;$F049&#160;<br/>
the&#160;position&#160;of&#160;the&#160;pixel&#160;in&#160;<br/>
EEF1&#160;<br/>
20&#160;24&#160;F0&#160;<br/>
JSR&#160;$F024&#160;<br/>
that&#160;byte&#160;and&#160;the&#160;FB&#160;code.&#160;<br/>
EEF4&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
EEF5&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
EEF6&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
EEF7&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>EEF8&#160;<br/>
D8&#160;<br/>
CLD&#160;<br/>
This&#160;routine&#160;puts&#160;lines&#160;on&#160;the&#160;<br/>
EEF9&#160;<br/>
20&#160;D8&#160;EE&#160;<br/>
JSR&#160;$EED8&#160;<br/>
screen&#160;for&#160;the&#160;DRAW&#160;command.&#160;<br/>
EEFC&#160;<br/>
2C&#160;E2&#160;02&#160;<br/>
BIT&#160;$02E2&#160;<br/>
Test&#160;and&#160;branch&#160;if&#160;X&#160;arg't&#160;is&#160;<br/>
EEFF&#160;<br/>
10&#160;0A&#160;<br/>
BPL&#160;$EF0B&#160;<br/>
a&#160;positive&#160;number.&#160;<br/>
EF01&#160;<br/>
A9&#160;FF&#160;<br/>
LDA&#160;#$FF&#160;<br/>
Gets&#160;2's&#160;complement&#160;of&#160;the&#160;low&#160;<br/>
EF03&#160;<br/>
4D&#160;E1&#160;02&#160;<br/>
EOR&#160;$02E1&#160;<br/>
byte&#160;of&#160;X&#160;argument.&#160;<br/>
EF06&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
EF07&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
EF08&#160;<br/>
8E&#160;E1&#160;02&#160;<br/>
STX&#160;$02E1&#160;<br/>
EF0B&#160;<br/>
2C&#160;E4&#160;02&#160;<br/>
BIT&#160;$02E4&#160;<br/>
EF0E&#160;<br/>
10&#160;0A&#160;<br/>
BPL&#160;$EF1A&#160;<br/>
Y&#160;argument&#160;is&#160;positive.&#160;<br/>
EF10&#160;<br/>
A9&#160;FF&#160;<br/>
LDA&#160;#$FF&#160;<br/>
Get&#160;2's&#160;complement&#160;of&#160;the&#160;low&#160;<br/>
EF12&#160;<br/>
4D&#160;E3&#160;02&#160;<br/>
EOR&#160;$02E3&#160;<br/>
byte&#160;of&#160;the&#160;Y&#160;argument.&#160;<br/>
EF15&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
EF16&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
EF17&#160;<br/>
8E&#160;E3&#160;02&#160;<br/>
STX&#160;$02E3&#160;<br/>
EF1A&#160;<br/>
AD&#160;E1&#160;02&#160;<br/>
LDA&#160;$02E1&#160;<br/>
EF1D&#160;<br/>
CD&#160;E3&#160;02&#160;<br/>
CMP&#160;$02E3&#160;<br/>
X&#160;argument&#160;is&#160;smaller&#160;than&#160;<br/>
EF20&#160;<br/>
90&#160;0F&#160;<br/>
BCC&#160;$EF31&#160;<br/>
that&#160;of&#160;Y.&#160;<br/>
EF22&#160;<br/>
AE&#160;E1&#160;02&#160;<br/>
LDX&#160;$02E1&#160;<br/>
EF25&#160;<br/>
F0&#160;09&#160;<br/>
BEQ&#160;$EF30&#160;<br/>
Both&#160;X&#160;and&#160;Y&#160;args&#160;are&#160;zero.&#160;<br/>
EF27&#160;<br/>
AD&#160;E3&#160;02&#160;<br/>
LDA&#160;$02E3&#160;<br/>
Calculate&#160;the&#160;slope&#160;Y/X&#160;of&#160;the&#160;<br/>
EF2A&#160;<br/>
20&#160;40&#160;EF&#160;<br/>
JSR&#160;$EF40&#160;<br/>
line.&#160;<br/>
EF2D&#160;<br/>
20&#160;84&#160;EF&#160;<br/>
JSR&#160;$EF84&#160;<br/>
Draw&#160;the&#160;line.&#160;<br/>
EF30&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>EF31&#160;<br/>
AE&#160;E3&#160;02&#160;<br/>
LDX&#160;$02E3&#160;<br/>
EF34&#160;<br/>
F0&#160;09&#160;<br/>
BEQ&#160;$EF3F&#160;<br/>
Both&#160;X&#160;and&#160;Y&#160;args&#160;are&#160;zero.&#160;<br/>
EF36&#160;<br/>
AD&#160;E1&#160;02&#160;<br/>
LDA&#160;$02E1&#160;<br/>
Calculate&#160;the&#160;slope&#160;X/Y&#160;of&#160;the&#160;<br/>
EF39&#160;<br/>
20&#160;40&#160;EF&#160;<br/>
JSR&#160;$EF40&#160;<br/>
line.&#160;<br/>
EF3C&#160;<br/>
20&#160;5C&#160;EF&#160;<br/>
JSR&#160;$EF5C&#160;<br/>
Draw&#160;the&#160;line.&#160;<br/>
EF3F&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>EF40&#160;<br/>
85&#160;0D&#160;<br/>
STA&#160;$0D&#160;<br/>
Set&#160;up&#160;the&#160;variables&#160;for&#160;the&#160;<br/>
EF42&#160;<br/>
8E&#160;00&#160;02&#160;<br/>
STX&#160;$0200&#160;<br/>
division&#160;routine&#160;to&#160;find&#160;the&#160;<br/>
EF45&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
slope&#160;of&#160;the&#160;line.&#160;<br/>
EF47&#160;<br/>
85&#160;0C&#160;<br/>
STA&#160;$0C&#160;<br/>
EF49&#160;<br/>
8D&#160;01&#160;02&#160;<br/>
STA&#160;$0201&#160;<br/>
EF4C&#160;<br/>
20&#160;C8&#160;EF&#160;<br/>
JSR&#160;$EFC8&#160;<br/>
Calculate&#160;slope.&#160;<br/>
EF4F&#160;<br/>
20&#160;FA&#160;EF&#160;<br/>
JSR&#160;$EFFA&#160;<br/>
Round&#160;up&#160;answer.&#160;<br/>
EF52&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
Clear&#160;remainder&#160;and&#160;divisor.&#160;<br/>
EF54&#160;<br/>
85&#160;0E&#160;<br/>
STA&#160;$0E&#160;<br/>
EF56&#160;<br/>
85&#160;0F&#160;<br/>
STA&#160;$0F&#160;<br/>
EF58&#160;<br/>
8D&#160;00&#160;02&#160;<br/>
STA&#160;$0200&#160;<br/>
EF5B&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>EF5C&#160;<br/>
2C&#160;E4&#160;02&#160;<br/>
BIT&#160;$02E4&#160;<br/>
Draw&#160;line&#160;for&#160;the&#160;case&#160;Y&#160;&gt;&#160;X.&#160;<br/>
Pag&#160;&#160;e&#160;92&#160;<br/>
<hr/>
<a name=93></a>EF5F&#160;<br/>
10&#160;06&#160;<br/>
BPL&#160;$EF67&#160;<br/>
Y&#160;is&#160;positive.&#160;<br/>
EF61&#160;<br/>
20&#160;95&#160;F0&#160;<br/>
JSR&#160;$F095&#160;<br/>
Move&#160;cursor&#160;up&#160;a&#160;line.&#160;<br/>
EF64&#160;<br/>
4C&#160;6A&#160;EF&#160;<br/>
JMP&#160;$EF6A&#160;<br/>
EF67&#160;<br/>
20&#160;89&#160;F0&#160;<br/>
JSR&#160;$F089&#160;<br/>
Move&#160;cursor&#160;down&#160;a&#160;line.&#160;<br/>
EF6A&#160;<br/>
20&#160;AC&#160;EF&#160;<br/>
JSR&#160;$EFAC&#160;<br/>
EF6D&#160;<br/>
F0&#160;0E&#160;<br/>
BEQ&#160;$EF7D&#160;<br/>
Line&#160;is&#160;off&#160;target.&#160;<br/>
EF6F&#160;<br/>
2C&#160;E2&#160;02&#160;<br/>
BIT&#160;$02E2&#160;<br/>
EF72&#160;<br/>
10&#160;06&#160;<br/>
BPL&#160;$EF7A&#160;<br/>
X&#160;argument&#160;is&#160;positive.&#160;<br/>
EF74&#160;<br/>
20&#160;B2&#160;F0&#160;<br/>
JSR&#160;$F0B2&#160;<br/>
Move&#160;cursor&#160;left&#160;a&#160;pixel.&#160;<br/>
EF77&#160;<br/>
4C&#160;7D&#160;EF&#160;<br/>
JMP&#160;$EF7D&#160;<br/>
EF7A&#160;<br/>
20&#160;A1&#160;F0&#160;<br/>
JSR&#160;$F0A1&#160;<br/>
Move&#160;cursor&#160;right&#160;a&#160;pixel.&#160;<br/>
EF7D&#160;<br/>
20&#160;16&#160;F0&#160;<br/>
JSR&#160;$F016&#160;<br/>
Send&#160;pixel&#160;to&#160;screen.&#160;<br/>
EF80&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
Continue&#160;until&#160;correct&#160;number&#160;<br/>
EF81&#160;<br/>
D0&#160;D9&#160;<br/>
BNE&#160;$EF5C&#160;<br/>
of&#160;rows&#160;are&#160;done.&#160;<br/>
EF83&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>EF84&#160;<br/>
2C&#160;E2&#160;02&#160;<br/>
BIT&#160;$02E2&#160;<br/>
Draw&#160;line&#160;for&#160;the&#160;case&#160;X&#160;&gt;&#160;Y.&#160;<br/>
EF87&#160;<br/>
10&#160;06&#160;<br/>
BPL&#160;$EF8F&#160;<br/>
X&#160;argument&#160;is&#160;positive.&#160;<br/>
EF89&#160;<br/>
20&#160;B2&#160;F0&#160;<br/>
JSR&#160;$F0B2&#160;<br/>
Move&#160;cursor&#160;left&#160;a&#160;pixel.&#160;<br/>
EF8C&#160;<br/>
4C&#160;92&#160;EF&#160;<br/>
JMP&#160;$EF92&#160;<br/>
EF8F&#160;<br/>
20&#160;A1&#160;F0&#160;<br/>
JSR&#160;$F0A1&#160;<br/>
Move&#160;cursor&#160;right&#160;a&#160;pixel.&#160;<br/>
EF92&#160;<br/>
20&#160;AC&#160;EF&#160;<br/>
JSR&#160;$EFAC&#160;<br/>
EF95&#160;<br/>
F0&#160;0E&#160;<br/>
BEQ&#160;$EFA5&#160;<br/>
Line&#160;is&#160;off&#160;target.&#160;<br/>
EF97&#160;<br/>
2C&#160;E4&#160;02&#160;<br/>
BIT&#160;$02E4&#160;<br/>
EF9A&#160;<br/>
10&#160;06&#160;<br/>
BPL&#160;$EFA2&#160;<br/>
Y&#160;argument&#160;is&#160;positive.&#160;<br/>
EF9C&#160;<br/>
20&#160;95&#160;F0&#160;<br/>
JSR&#160;$F095&#160;<br/>
Move&#160;cursor&#160;up&#160;a&#160;line.&#160;<br/>
EF9F&#160;<br/>
4C&#160;A5&#160;EF&#160;<br/>
JMP&#160;$EFA5&#160;<br/>
EFA2&#160;<br/>
20&#160;89&#160;F0&#160;<br/>
JSR&#160;$F089&#160;<br/>
Move&#160;cursor&#160;down&#160;a&#160;line.&#160;<br/>
EFA5&#160;<br/>
20&#160;16&#160;F0&#160;<br/>
JSR&#160;$F016&#160;<br/>
Send&#160;pixel&#160;to&#160;screen.&#160;<br/>
EFA8&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
Continue&#160;until&#160;correct&#160;number&#160;<br/>
EFA9&#160;<br/>
D0&#160;D9&#160;<br/>
BNE&#160;$EF84&#160;<br/>
of&#160;columns&#160;are&#160;done.&#160;<br/>
EFAB&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>EFAC&#160;<br/>
D8&#160;<br/>
CLD&#160;<br/>
This&#160;routine&#160;adds&#160;the&#160;slope&#160;of&#160;<br/>
EFAD&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
the&#160;line&#160;being&#160;drawn&#160;to&#160;#E/F.&#160;<br/>
EFAE&#160;<br/>
A5&#160;0E&#160;<br/>
LDA&#160;$0E&#160;<br/>
This&#160;is&#160;done&#160;so&#160;that&#160;the&#160;<br/>
EFB0&#160;<br/>
65&#160;0C&#160;<br/>
ADC&#160;$0C&#160;<br/>
drawing&#160;routines&#160;can&#160;keep&#160;the&#160;<br/>
EFB2&#160;<br/>
85&#160;0E&#160;<br/>
STA&#160;$0E&#160;<br/>
slope&#160;of&#160;the&#160;line&#160;on&#160;target.&#160;<br/>
EFB4&#160;<br/>
A5&#160;0F&#160;<br/>
LDA&#160;$0F&#160;<br/>
This&#160;is&#160;indicated&#160;by&#160;Z&#160;at&#160;the&#160;<br/>
EFB6&#160;<br/>
65&#160;0D&#160;<br/>
ADC&#160;$0D&#160;<br/>
end&#160;of&#160;the&#160;routine;&#160;if&#160;set&#160;<br/>
EFB8&#160;<br/>
85&#160;0F&#160;<br/>
STA&#160;$0F&#160;<br/>
the&#160;calling&#160;routine&#160;misses&#160;<br/>
EFBA&#160;<br/>
24&#160;0E&#160;<br/>
BIT&#160;$0E&#160;<br/>
out&#160;drawing&#160;a&#160;pixel&#160;in&#160;one&#160;<br/>
EFBC&#160;<br/>
10&#160;03&#160;<br/>
BPL&#160;$EFC1&#160;<br/>
direction.&#160;On&#160;shallow&#160;or&#160;<br/>
EFBE&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
steep&#160;lines&#160;this&#160;will&#160;give&#160;the&#160;<br/>
EFBF&#160;<br/>
69&#160;01&#160;<br/>
ADC&#160;#$01&#160;<br/>
line&#160;a&#160;step&#160;like&#160;appearance.&#160;<br/>
EFC1&#160;<br/>
CD&#160;00&#160;02&#160;<br/>
CMP&#160;$0200&#160;<br/>
EFC4&#160;<br/>
8D&#160;00&#160;02&#160;<br/>
STA&#160;$0200&#160;<br/>
EFC7&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>EFC8&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
This&#160;is&#160;a&#160;division&#160;routine&#160;<br/>
EFC9&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
that&#160;is&#160;used&#160;to&#160;calculate&#160;the&#160;<br/>
EFCA&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
slope&#160;of&#160;a&#160;line&#160;being&#160;drawn.&#160;<br/>
EFCB&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
EFCC&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
The&#160;routine&#160;acts&#160;on&#160;16&#160;bit&#160;<br/>
EFCD&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
numbers.&#160;<br/>
EFCF&#160;<br/>
85&#160;0E&#160;<br/>
STA&#160;$0E&#160;<br/>
EFD1&#160;<br/>
85&#160;0F&#160;<br/>
STA&#160;$0F&#160;<br/>
Divisor&#160;is&#160;in&#160;#0200/1&#160;and&#160;<br/>
EFD3&#160;<br/>
A2&#160;10&#160;<br/>
LDX&#160;#$10&#160;<br/>
dividend&#160;is&#160;in&#160;#0C/0D.&#160;Must&#160;be&#160;<br/>
EFD5&#160;<br/>
06&#160;0C&#160;<br/>
ASL&#160;$0C&#160;<br/>
set&#160;before&#160;routine&#160;is&#160;called.&#160;<br/>
EFD7&#160;<br/>
26&#160;0D&#160;<br/>
ROL&#160;$0D&#160;<br/>
The&#160;quotient&#160;ends&#160;up&#160;in&#160;#0C/0D&#160;<br/>
EFD9&#160;<br/>
26&#160;0E&#160;<br/>
ROL&#160;$0E&#160;<br/>
and&#160;the&#160;remainder&#160;in&#160;#0E/0F.&#160;<br/>
EFDB&#160;<br/>
26&#160;0F&#160;<br/>
ROL&#160;$0F&#160;<br/>
EFDD&#160;<br/>
A5&#160;0E&#160;<br/>
LDA&#160;$0E&#160;<br/>
A,&#160;X&#160;and&#160;Y&#160;are&#160;unaffected&#160;by&#160;<br/>
EFDF&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
this&#160;routine.&#160;<br/>
Pag&#160;&#160;e&#160;93&#160;<br/>
<hr/>
<a name=94></a>EFE0&#160;<br/>
ED&#160;00&#160;02&#160;<br/>
SBC&#160;$0200&#160;<br/>
EFE3&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
EFE4&#160;<br/>
A5&#160;0F&#160;<br/>
LDA&#160;$0F&#160;<br/>
EFE6&#160;<br/>
ED&#160;01&#160;02&#160;<br/>
SBC&#160;$0201&#160;<br/>
EFE9&#160;<br/>
90&#160;06&#160;<br/>
BCC&#160;$EFF1&#160;<br/>
EFEB&#160;<br/>
E6&#160;0C&#160;<br/>
INC&#160;$0C&#160;<br/>
EFED&#160;<br/>
84&#160;0E&#160;<br/>
STY&#160;$0E&#160;<br/>
EFEF&#160;<br/>
85&#160;0F&#160;<br/>
STA&#160;$0F&#160;<br/>
EFF1&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
EFF2&#160;<br/>
D0&#160;E1&#160;<br/>
BNE&#160;$EFD5&#160;<br/>
EFF4&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
EFF5&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
EFF6&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
EFF7&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
EFF8&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
EFF9&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>EFFA&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
This&#160;routine&#160;rounds&#160;up&#160;the&#160;<br/>
EFFB&#160;<br/>
0E&#160;00&#160;02&#160;<br/>
ASL&#160;$0200&#160;<br/>
quotient&#160;of&#160;the&#160;above&#160;routine&#160;<br/>
EFFE&#160;<br/>
2E&#160;01&#160;02&#160;<br/>
ROL&#160;$0201&#160;<br/>
if&#160;twice&#160;the&#160;divisor&#160;is&#160;less&#160;<br/>
F001&#160;<br/>
AD&#160;00&#160;02&#160;<br/>
LDA&#160;$0200&#160;<br/>
than&#160;the&#160;remainder.&#160;<br/>
F004&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
F005&#160;<br/>
E5&#160;0E&#160;<br/>
SBC&#160;$0E&#160;<br/>
F007&#160;<br/>
AD&#160;01&#160;02&#160;<br/>
LDA&#160;$0201&#160;<br/>
F00A&#160;<br/>
E5&#160;0F&#160;<br/>
SBC&#160;$0F&#160;<br/>
F00C&#160;<br/>
B0&#160;06&#160;<br/>
BCS&#160;$F014&#160;<br/>
F00E&#160;<br/>
E6&#160;0C&#160;<br/>
INC&#160;$0C&#160;<br/>
F010&#160;<br/>
D0&#160;02&#160;<br/>
BNE&#160;$F014&#160;<br/>
F012&#160;<br/>
E6&#160;0D&#160;<br/>
INC&#160;$0D&#160;<br/>
F014&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
F015&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F016&#160;<br/>
2C&#160;14&#160;02&#160;<br/>
BIT&#160;$0214&#160;<br/>
This&#160;routine&#160;places&#160;a&#160;pixel&#160;<br/>
F019&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
on&#160;the&#160;screen&#160;at&#160;the&#160;current&#160;<br/>
F01A&#160;<br/>
10&#160;04&#160;<br/>
BPL&#160;$F020&#160;<br/>
cursor&#160;position&#160;subject&#160;to&#160;<br/>
F01C&#160;<br/>
20&#160;24&#160;F0&#160;<br/>
JSR&#160;$F024&#160;<br/>
the&#160;data&#160;in&#160;the&#160;PATTERN&#160;<br/>
F01F&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
register&#160;(in&#160;#213).&#160;<br/>
F020&#160;<br/>
2E&#160;14&#160;02&#160;<br/>
ROL&#160;$0214&#160;<br/>
F023&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F024&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
Write&#160;a&#160;pixel&#160;to&#160;current&#160;<br/>
F026&#160;<br/>
B1&#160;10&#160;<br/>
LDA&#160;($10),Y&#160;<br/>
cursor&#160;position&#160;unless&#160;cursor&#160;<br/>
F028&#160;<br/>
29&#160;40&#160;<br/>
AND&#160;#$40&#160;<br/>
is&#160;over&#160;a&#160;location&#160;holding&#160;a&#160;<br/>
F02A&#160;<br/>
F0&#160;1C&#160;<br/>
BEQ&#160;$F048&#160;<br/>
colour&#160;attribute.&#160;<br/>
F02C&#160;<br/>
AD&#160;15&#160;02&#160;<br/>
LDA&#160;$0215&#160;<br/>
Load&#160;bit&#160;pat'rn&#160;for&#160;that&#160;byte.&#160;<br/>
F02F&#160;<br/>
2C&#160;12&#160;02&#160;<br/>
BIT&#160;$0212&#160;<br/>
Test&#160;and&#160;branch&#160;if&#160;the&#160;FB&#160;code&#160;<br/>
F032&#160;<br/>
30&#160;0E&#160;<br/>
BMI&#160;$F042&#160;<br/>
is&#160;2&#160;or&#160;3.&#160;<br/>
F034&#160;<br/>
70&#160;07&#160;<br/>
BVS&#160;$F03D&#160;<br/>
FB&#160;code&#160;is&#160;1.&#160;<br/>
F036&#160;<br/>
49&#160;FF&#160;<br/>
EOR&#160;#$FF&#160;<br/>
FB&#160;code&#160;is&#160;0&#160;therefore&#160;set&#160;<br/>
F038&#160;<br/>
31&#160;10&#160;<br/>
AND&#160;($10),Y&#160;<br/>
pixel&#160;to&#160;background.&#160;<br/>
F03A&#160;<br/>
91&#160;10&#160;<br/>
STA&#160;($10),Y&#160;<br/>
F03C&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F03D&#160;<br/>
11&#160;10&#160;<br/>
ORA&#160;($10),Y&#160;<br/>
FB&#160;code&#160;is&#160;1&#160;therefore&#160;set&#160;<br/>
F03F&#160;<br/>
91&#160;10&#160;<br/>
STA&#160;($10),Y&#160;<br/>
pixel&#160;to&#160;foreground.&#160;<br/>
F041&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F042&#160;<br/>
70&#160;04&#160;<br/>
BVS&#160;$F048&#160;<br/>
Exit&#160;if&#160;FB&#160;code&#160;is&#160;3.&#160;<br/>
F044&#160;<br/>
51&#160;10&#160;<br/>
EOR&#160;($10),Y&#160;<br/>
FB&#160;code&#160;is&#160;2&#160;therefore&#160;invert&#160;<br/>
F046&#160;<br/>
91&#160;10&#160;<br/>
STA&#160;($10),Y&#160;<br/>
the&#160;current&#160;pixel.&#160;<br/>
F048&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F049&#160;<br/>
D8&#160;<br/>
CLD&#160;<br/>
This&#160;routine&#160;is&#160;entered&#160;with&#160;<br/>
F04A&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
X&#160;and&#160;Y&#160;holding&#160;the&#160;horiz'l&#160;<br/>
Pag&#160;&#160;e&#160;94&#160;<br/>
<hr/>
<a name=95></a>F04B&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
and&#160;vertical&#160;cursor&#160;positions&#160;<br/>
F04C&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
on&#160;the&#160;hires&#160;screen&#160;<br/>
F04D&#160;<br/>
20&#160;31&#160;F7&#160;<br/>
JSR&#160;$F731&#160;<br/>
respectively.&#160;This&#160;routine&#160;<br/>
F050&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
calculates&#160;the&#160;corresponding&#160;<br/>
F051&#160;<br/>
69&#160;00&#160;<br/>
ADC&#160;#$00&#160;<br/>
address&#160;of&#160;the&#160;byte&#160;on&#160;the&#160;<br/>
F053&#160;<br/>
85&#160;10&#160;<br/>
STA&#160;$10&#160;<br/>
screen&#160;and&#160;the&#160;position&#160;of&#160;the&#160;<br/>
F055&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
cursor&#160;in&#160;that&#160;byte.&#160;The&#160;<br/>
F056&#160;<br/>
69&#160;A0&#160;<br/>
ADC&#160;#$A0&#160;<br/>
latter&#160;is&#160;held&#160;in&#160;#215.&#160;<br/>
F058&#160;<br/>
85&#160;11&#160;<br/>
STA&#160;$11&#160;<br/>
F05A&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
The&#160;address&#160;of&#160;the&#160;cursor&#160;byte&#160;<br/>
F05C&#160;<br/>
85&#160;0D&#160;<br/>
STA&#160;$0D&#160;<br/>
ends&#160;up&#160;in&#160;#10&#160;and&#160;#11.&#160;<br/>
F05E&#160;<br/>
8D&#160;01&#160;02&#160;<br/>
STA&#160;$0201&#160;<br/>
F061&#160;<br/>
86&#160;0C&#160;<br/>
STX&#160;$0C&#160;<br/>
F063&#160;<br/>
A9&#160;06&#160;<br/>
LDA&#160;#$06&#160;<br/>
F065&#160;<br/>
8D&#160;00&#160;02&#160;<br/>
STA&#160;$0200&#160;<br/>
F068&#160;<br/>
20&#160;C8&#160;EF&#160;<br/>
JSR&#160;$EFC8&#160;<br/>
F06B&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
F06C&#160;<br/>
A5&#160;0C&#160;<br/>
LDA&#160;$0C&#160;<br/>
F06E&#160;<br/>
65&#160;10&#160;<br/>
ADC&#160;$10&#160;<br/>
F070&#160;<br/>
85&#160;10&#160;<br/>
STA&#160;$10&#160;<br/>
F072&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
F074&#160;<br/>
65&#160;11&#160;<br/>
ADC&#160;$11&#160;<br/>
F076&#160;<br/>
85&#160;11&#160;<br/>
STA&#160;$11&#160;<br/>
F078&#160;<br/>
A9&#160;20&#160;<br/>
LDA&#160;#$20&#160;<br/>
F07A&#160;<br/>
A4&#160;0E&#160;<br/>
LDY&#160;$0E&#160;<br/>
F07C&#160;<br/>
F0&#160;04&#160;<br/>
BEQ&#160;$F082&#160;<br/>
F07E&#160;<br/>
4A&#160;<br/>
LSR&#160;A&#160;<br/>
F07F&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
F080&#160;<br/>
90&#160;FA&#160;<br/>
BCC&#160;$F07C&#160;<br/>
F082&#160;<br/>
8D&#160;15&#160;02&#160;<br/>
STA&#160;$0215&#160;<br/>
F085&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
F086&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
F087&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
F088&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F089&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
This&#160;routine&#160;moves&#160;the&#160;address&#160;<br/>
F08A&#160;<br/>
A5&#160;10&#160;<br/>
LDA&#160;$10&#160;<br/>
of&#160;the&#160;cursor&#160;to&#160;the&#160;<br/>
F08C&#160;<br/>
69&#160;28&#160;<br/>
ADC&#160;#$28&#160;<br/>
corresponding&#160;position&#160;on&#160;the&#160;<br/>
F08E&#160;<br/>
85&#160;10&#160;<br/>
STA&#160;$10&#160;<br/>
line&#160;below.&#160;<br/>
F090&#160;<br/>
90&#160;02&#160;<br/>
BCC&#160;$F094&#160;<br/>
F092&#160;<br/>
E6&#160;11&#160;<br/>
INC&#160;$11&#160;<br/>
F094&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F095&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
This&#160;routine&#160;moves&#160;the&#160;address&#160;<br/>
F096&#160;<br/>
A5&#160;10&#160;<br/>
LDA&#160;$10&#160;<br/>
of&#160;the&#160;cursor&#160;to&#160;the&#160;<br/>
F098&#160;<br/>
E9&#160;28&#160;<br/>
SBC&#160;#$28&#160;<br/>
corresponding&#160;position&#160;on&#160;the&#160;<br/>
F09A&#160;<br/>
85&#160;10&#160;<br/>
STA&#160;$10&#160;<br/>
line&#160;above.&#160;<br/>
F09C&#160;<br/>
B0&#160;02&#160;<br/>
BCS&#160;$F0A0&#160;<br/>
F09E&#160;<br/>
C6&#160;11&#160;<br/>
DEC&#160;$11&#160;<br/>
F0A0&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F0A1&#160;<br/>
4E&#160;15&#160;02&#160;<br/>
LSR&#160;$0215&#160;<br/>
Move&#160;the&#160;pixel&#160;position&#160;within&#160;<br/>
F0A4&#160;<br/>
90&#160;0B&#160;<br/>
BCC&#160;$F0B1&#160;<br/>
the&#160;byte&#160;on&#160;the&#160;hires&#160;screen&#160;<br/>
F0A6&#160;<br/>
A9&#160;20&#160;<br/>
LDA&#160;#$20&#160;<br/>
one&#160;place&#160;to&#160;the&#160;right.&#160;Wrap-&#160;<br/>
F0A8&#160;<br/>
8D&#160;15&#160;02&#160;<br/>
STA&#160;$0215&#160;<br/>
around&#160;will&#160;occur.&#160;<br/>
F0AB&#160;<br/>
E6&#160;10&#160;<br/>
INC&#160;$10&#160;<br/>
F0AD&#160;<br/>
D0&#160;02&#160;<br/>
BNE&#160;$F0B1&#160;<br/>
F0AF&#160;<br/>
E6&#160;11&#160;<br/>
INC&#160;$11&#160;<br/>
F0B1&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F0B2&#160;<br/>
0E&#160;15&#160;02&#160;<br/>
ASL&#160;$0215&#160;<br/>
Move&#160;the&#160;pixel&#160;positon&#160;within&#160;<br/>
F0B5&#160;<br/>
2C&#160;15&#160;02&#160;<br/>
BIT&#160;$0215&#160;<br/>
the&#160;byte&#160;on&#160;the&#160;hires&#160;screen&#160;<br/>
F0B8&#160;<br/>
50&#160;0D&#160;<br/>
BVC&#160;$F0C7&#160;<br/>
one&#160;place&#160;to&#160;the&#160;left.&#160;Wrap-&#160;<br/>
F0BA&#160;<br/>
A9&#160;01&#160;<br/>
LDA&#160;#$01&#160;<br/>
around&#160;will&#160;occur.&#160;<br/>
Pag&#160;&#160;e&#160;95&#160;<br/>
<hr/>
<a name=96></a>F0BC&#160;<br/>
8D&#160;15&#160;02&#160;<br/>
STA&#160;$0215&#160;<br/>
F0BF&#160;<br/>
A5&#160;10&#160;<br/>
LDA&#160;$10&#160;<br/>
F0C1&#160;<br/>
D0&#160;02&#160;<br/>
BNE&#160;$F0C5&#160;<br/>
F0C3&#160;<br/>
C6&#160;11&#160;<br/>
DEC&#160;$11&#160;<br/>
F0C5&#160;<br/>
C6&#160;10&#160;<br/>
DEC&#160;$10&#160;<br/>
F0C7&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F0C8&#160;<br/>
A9&#160;04&#160;<br/>
LDA&#160;#$04&#160;<br/>
<b>CURSET</b>&#160;<br/>
F0CA&#160;<br/>
A2&#160;E5&#160;<br/>
LDX&#160;#$E5&#160;<br/>
F0CC&#160;<br/>
20&#160;F8&#160;F2&#160;<br/>
JSR&#160;$F2F8&#160;<br/>
Test&#160;FB&#160;code&#160;range.&#160;<br/>
F0CF&#160;<br/>
B0&#160;28&#160;<br/>
BCS&#160;$F0F9&#160;<br/>
FB&#160;code&#160;is&#160;out&#160;of&#160;range.&#160;<br/>
F0D1&#160;<br/>
AD&#160;E5&#160;02&#160;<br/>
LDA&#160;$02E5&#160;<br/>
Transfer&#160;FB&#160;code&#160;to&#160;a&#160;work's&#160;<br/>
F0D4&#160;<br/>
8D&#160;12&#160;02&#160;<br/>
STA&#160;$0212&#160;<br/>
byte.&#160;<br/>
F0D7&#160;<br/>
A9&#160;F0&#160;<br/>
LDA&#160;#$F0&#160;<br/>
F0D9&#160;<br/>
A2&#160;E1&#160;<br/>
LDX&#160;#$E1&#160;<br/>
F0DB&#160;<br/>
20&#160;F8&#160;F2&#160;<br/>
JSR&#160;$F2F8&#160;<br/>
Test&#160;and&#160;branch&#160;if&#160;X&#160;coord'te&#160;<br/>
F0DE&#160;<br/>
B0&#160;19&#160;<br/>
BCS&#160;$F0F9&#160;<br/>
is&#160;out&#160;of&#160;range.&#160;<br/>
F0E0&#160;<br/>
A9&#160;C8&#160;<br/>
LDA&#160;#$C8&#160;<br/>
F0E2&#160;<br/>
A2&#160;E3&#160;<br/>
LDX&#160;#$E3&#160;<br/>
F0E4&#160;<br/>
20&#160;F8&#160;F2&#160;<br/>
JSR&#160;$F2F8&#160;<br/>
Test&#160;Y&#160;co-ordinate&#160;range.&#160;<br/>
F0E7&#160;<br/>
B0&#160;10&#160;<br/>
BCS&#160;$F0F9&#160;<br/>
Y&#160;co-ordinate&#160;out&#160;of&#160;range.&#160;<br/>
F0E9&#160;<br/>
AE&#160;E1&#160;02&#160;<br/>
LDX&#160;$02E1&#160;<br/>
Update&#160;value&#160;of&#160;hires&#160;cursor&#160;<br/>
F0EC&#160;<br/>
8E&#160;19&#160;02&#160;<br/>
STX&#160;$0219&#160;<br/>
and&#160;call&#160;routine&#160;that&#160;<br/>
F0EF&#160;<br/>
AC&#160;E3&#160;02&#160;<br/>
LDY&#160;$02E3&#160;<br/>
calculates&#160;its&#160;new&#160;address&#160;and&#160;<br/>
F0F2&#160;<br/>
8C&#160;1A&#160;02&#160;<br/>
STY&#160;$021A&#160;<br/>
writes&#160;it&#160;on&#160;screen.&#160;<br/>
F0F5&#160;<br/>
20&#160;E8&#160;EE&#160;<br/>
JSR&#160;$EEE8&#160;<br/>
F0F8&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F0F9&#160;<br/>
EE&#160;E0&#160;02&#160;<br/>
INC&#160;$02E0&#160;<br/>
Indicate&#160;error.&#160;<br/>
F0FC&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F0FD&#160;<br/>
20&#160;0A&#160;F3&#160;<br/>
JSR&#160;$F30A&#160;<br/>
<b>CURMOV</b>&#160;<br/>
F100&#160;<br/>
B0&#160;0A&#160;<br/>
BCS&#160;$F10C&#160;<br/>
Calculate&#160;destination&#160;cursor&#160;<br/>
F102&#160;<br/>
AE&#160;19&#160;02&#160;<br/>
LDX&#160;$0219&#160;<br/>
position;&#160;if&#160;C&#160;is&#160;1&#160;then&#160;it&#160;is&#160;<br/>
F105&#160;<br/>
AC&#160;1A&#160;02&#160;<br/>
LDY&#160;$021A&#160;<br/>
out&#160;of&#160;range.&#160;Update&#160;cursor&#160;<br/>
F108&#160;<br/>
20&#160;E8&#160;EE&#160;<br/>
JSR&#160;$EEE8&#160;<br/>
position&#160;and&#160;write&#160;cursor&#160;to&#160;<br/>
F10B&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
screen.&#160;<br/>
&#160;<br/>F10C&#160;<br/>
EE&#160;E0&#160;02&#160;<br/>
INC&#160;$02E0&#160;<br/>
Indicates&#160;error.&#160;<br/>
F10F&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F110&#160;<br/>
20&#160;0A&#160;F3&#160;<br/>
JSR&#160;$F30A&#160;<br/>
<b>DRAW</b>&#160;<br/>
F113&#160;<br/>
B0&#160;04&#160;<br/>
BCS&#160;$F119&#160;<br/>
Calculate&#160;cursor&#160;destination&#160;<br/>
F115&#160;<br/>
20&#160;F8&#160;EE&#160;<br/>
JSR&#160;$EEF8&#160;<br/>
and&#160;call&#160;a&#160;routine&#160;to&#160;draw&#160;<br/>
F118&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
line&#160;on&#160;screen.&#160;<br/>
&#160;<br/>F119&#160;<br/>
EE&#160;E0&#160;02&#160;<br/>
INC&#160;$02E0&#160;<br/>
Indicates&#160;error.&#160;<br/>
F11C&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F11D&#160;<br/>
AE&#160;E2&#160;02&#160;<br/>
LDX&#160;$02E2&#160;<br/>
<b>PATTERN</b>&#160;<br/>
F120&#160;<br/>
D0&#160;07&#160;<br/>
BNE&#160;$F129&#160;<br/>
Branch&#160;if&#160;pattern&#160;argument&#160;is&#160;<br/>
F122&#160;<br/>
AE&#160;E1&#160;02&#160;<br/>
LDX&#160;$02E1&#160;<br/>
over&#160;255&#160;otherwise&#160;update&#160;<br/>
F125&#160;<br/>
8E&#160;13&#160;02&#160;<br/>
STX&#160;$0213&#160;<br/>
pattern&#160;register.&#160;<br/>
F128&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F129&#160;<br/>
EE&#160;E0&#160;02&#160;<br/>
INC&#160;$02E0&#160;<br/>
Indicates&#160;error.&#160;<br/>
F12C&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F12D&#160;<br/>
AE&#160;E2&#160;02&#160;<br/>
LDX&#160;$02E2&#160;<br/>
<b>CHAR</b>&#160;<br/>
F130&#160;<br/>
D0&#160;3B&#160;<br/>
BNE&#160;$F16D&#160;<br/>
Error&#160;if&#160;character&#160;is&#160;out&#160;of&#160;<br/>
F132&#160;<br/>
AE&#160;E1&#160;02&#160;<br/>
LDX&#160;$02E1&#160;<br/>
range&#160;or&#160;is&#160;a&#160;control&#160;char.&#160;<br/>
F135&#160;<br/>
E0&#160;20&#160;<br/>
CPX&#160;#$20&#160;<br/>
F137&#160;<br/>
90&#160;34&#160;<br/>
BCC&#160;$F16D&#160;<br/>
F139&#160;<br/>
E0&#160;80&#160;<br/>
CPX&#160;#$80&#160;<br/>
Pag&#160;&#160;e&#160;96&#160;<br/>
<hr/>
<a name=97></a>F13B&#160;<br/>
B0&#160;30&#160;<br/>
BCS&#160;$F16D&#160;<br/>
F13D&#160;<br/>
A9&#160;02&#160;<br/>
LDA&#160;#$02&#160;<br/>
Set&#160;parameter&#160;limit&#160;to&#160;2.&#160;<br/>
F13F&#160;<br/>
A2&#160;E3&#160;<br/>
LDX&#160;#$E3&#160;<br/>
Error&#160;if&#160;character&#160;set&#160;<br/>
F141&#160;<br/>
20&#160;F8&#160;F2&#160;<br/>
JSR&#160;$F2F8&#160;<br/>
indicator&#160;is&#160;out&#160;of&#160;range.&#160;<br/>
F144&#160;<br/>
B0&#160;27&#160;<br/>
BCS&#160;$F16D&#160;<br/>
F146&#160;<br/>
A9&#160;04&#160;<br/>
LDA&#160;#$04&#160;<br/>
F148&#160;<br/>
A2&#160;E5&#160;<br/>
LDX&#160;#$E5&#160;<br/>
F14A&#160;<br/>
20&#160;F8&#160;F2&#160;<br/>
JSR&#160;$F2F8&#160;<br/>
Check&#160;FB&#160;code&#160;range.&#160;<br/>
F14D&#160;<br/>
B0&#160;1E&#160;<br/>
BCS&#160;$F16D&#160;<br/>
FB&#160;code&#160;is&#160;out&#160;of&#160;range.&#160;<br/>
F14F&#160;<br/>
AD&#160;19&#160;02&#160;<br/>
LDA&#160;$0219&#160;<br/>
Check&#160;that&#160;the&#160;character&#160;will&#160;<br/>
F152&#160;<br/>
C9&#160;EB&#160;<br/>
CMP&#160;#$EB&#160;<br/>
fit&#160;on&#160;the&#160;screen,&#160;i.e.&#160;it&#160;is&#160;<br/>
F154&#160;<br/>
B0&#160;17&#160;<br/>
BCS&#160;$F16D&#160;<br/>
not&#160;too&#160;close&#160;to&#160;the&#160;edge.&#160;<br/>
F156&#160;<br/>
AD&#160;1A&#160;02&#160;<br/>
LDA&#160;$021A&#160;<br/>
F159&#160;<br/>
C9&#160;C1&#160;<br/>
CMP&#160;#$C1&#160;<br/>
F15B&#160;<br/>
B0&#160;10&#160;<br/>
BCS&#160;$F16D&#160;<br/>
F15D&#160;<br/>
20&#160;71&#160;F1&#160;<br/>
JSR&#160;$F171&#160;<br/>
Get&#160;start&#160;address&#160;of&#160;char&#160;code&#160;<br/>
F160&#160;<br/>
20&#160;9B&#160;F1&#160;<br/>
JSR&#160;$F19B&#160;<br/>
and&#160;write&#160;it&#160;to&#160;the&#160;screen.&#160;<br/>
F163&#160;<br/>
AE&#160;19&#160;02&#160;<br/>
LDX&#160;$0219&#160;<br/>
Write&#160;new&#160;cursor&#160;position&#160;to&#160;<br/>
F166&#160;<br/>
AC&#160;1A&#160;02&#160;<br/>
LDY&#160;$021A&#160;<br/>
the&#160;screen.&#160;<br/>
F169&#160;<br/>
20&#160;49&#160;F0&#160;<br/>
JSR&#160;$F049&#160;<br/>
F16C&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F16D&#160;<br/>
EE&#160;E0&#160;02&#160;<br/>
INC&#160;$02E0&#160;<br/>
Indicates&#160;error.&#160;<br/>
F170&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F171&#160;<br/>
D8&#160;<br/>
CLD&#160;<br/>
Calculate&#160;start&#160;address&#160;of&#160;<br/>
F172&#160;<br/>
AD&#160;E5&#160;02&#160;<br/>
LDA&#160;$02E5&#160;<br/>
character's&#160;bit&#160;pattern.&#160;<br/>
F175&#160;<br/>
8D&#160;12&#160;02&#160;<br/>
STA&#160;$0212&#160;<br/>
Transfer&#160;FB&#160;code&#160;to&#160;bits&#160;6&#160;and&#160;<br/>
F178&#160;<br/>
20&#160;DE&#160;EE&#160;<br/>
JSR&#160;$EEDE&#160;<br/>
7&#160;of&#160;#212.&#160;<br/>
F17B&#160;<br/>
AD&#160;E1&#160;02&#160;<br/>
LDA&#160;$02E1&#160;<br/>
Transfer&#160;character&#160;code&#160;to&#160;#0C&#160;<br/>
F17E&#160;<br/>
85&#160;0C&#160;<br/>
STA&#160;$0C&#160;<br/>
and&#160;multiply&#160;it&#160;by&#160;8&#160;since&#160;<br/>
F180&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
each&#160;character&#160;has&#160;8&#160;bytes&#160;of&#160;<br/>
F182&#160;<br/>
85&#160;0D&#160;<br/>
STA&#160;$0D&#160;<br/>
pattern&#160;information.&#160;<br/>
F184&#160;<br/>
A2&#160;03&#160;<br/>
LDX&#160;#$03&#160;<br/>
F186&#160;<br/>
06&#160;0C&#160;<br/>
ASL&#160;$0C&#160;<br/>
F188&#160;<br/>
26&#160;0D&#160;<br/>
ROL&#160;$0D&#160;<br/>
F18A&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
F18B&#160;<br/>
D0&#160;F9&#160;<br/>
BNE&#160;$F186&#160;<br/>
F18D&#160;<br/>
AD&#160;E3&#160;02&#160;<br/>
LDA&#160;$02E3&#160;<br/>
If&#160;alternate&#160;char&#160;set&#160;is&#160;used&#160;<br/>
F190&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
then&#160;add&#160;length&#160;of&#160;standard&#160;<br/>
F191&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
character&#160;set.&#160;<br/>
F192&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
F193&#160;<br/>
69&#160;98&#160;<br/>
ADC&#160;#$98&#160;<br/>
Add&#160;start&#160;address&#160;of&#160;standard&#160;<br/>
F195&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
char&#160;set;&#160;$0C/D&#160;now&#160;holds&#160;<br/>
F196&#160;<br/>
65&#160;0D&#160;<br/>
ADC&#160;$0D&#160;<br/>
start&#160;address&#160;of&#160;bit&#160;pattern&#160;<br/>
F198&#160;<br/>
85&#160;0D&#160;<br/>
STA&#160;$0D&#160;<br/>
for&#160;that&#160;character.&#160;<br/>
F19A&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F19B&#160;<br/>
D8&#160;<br/>
CLD&#160;<br/>
This&#160;routine&#160;writes&#160;to&#160;the&#160;<br/>
F19C&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
hires&#160;screen&#160;the&#160;char&#160;whose&#160;<br/>
F19E&#160;<br/>
84&#160;0F&#160;<br/>
STY&#160;$0F&#160;<br/>
bit&#160;pattern&#160;start&#160;address&#160;is&#160;<br/>
F1A0&#160;<br/>
B1&#160;0C&#160;<br/>
LDA&#160;($0C),Y&#160;<br/>
in&#160;#0C/D.&#160;<br/>
F1A2&#160;<br/>
85&#160;0E&#160;<br/>
STA&#160;$0E&#160;<br/>
Store&#160;bit&#160;pattern&#160;for&#160;row.&#160;<br/>
F1A4&#160;<br/>
20&#160;5D&#160;F3&#160;<br/>
JSR&#160;$F35D&#160;<br/>
Save&#160;current&#160;hires&#160;cursor.&#160;<br/>
F1A7&#160;<br/>
26&#160;0E&#160;<br/>
ROL&#160;$0E&#160;<br/>
Shift&#160;bit&#160;pattern&#160;in&#160;to&#160;top&#160;<br/>
F1A9&#160;<br/>
26&#160;0E&#160;<br/>
ROL&#160;$0E&#160;<br/>
6&#160;bits&#160;of&#160;#0E.&#160;<br/>
F1AB&#160;<br/>
A2&#160;06&#160;<br/>
LDX&#160;#$06&#160;<br/>
Used&#160;as&#160;a&#160;pixel&#160;counter.&#160;<br/>
F1AD&#160;<br/>
26&#160;0E&#160;<br/>
ROL&#160;$0E&#160;<br/>
Branch&#160;if&#160;next&#160;pixel&#160;is&#160;off,&#160;<br/>
F1AF&#160;<br/>
90&#160;03&#160;<br/>
BCC&#160;$F1B4&#160;<br/>
no&#160;need&#160;to&#160;print&#160;it&#160;to&#160;screen.&#160;<br/>
F1B1&#160;<br/>
20&#160;24&#160;F0&#160;<br/>
JSR&#160;$F024&#160;<br/>
Print&#160;pixel&#160;to&#160;screen.&#160;<br/>
F1B4&#160;<br/>
20&#160;A1&#160;F0&#160;<br/>
JSR&#160;$F0A1&#160;<br/>
Shift&#160;right&#160;pixel&#160;pos'n.&#160;<br/>
F1B7&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
F1B8&#160;<br/>
D0&#160;F3&#160;<br/>
BNE&#160;$F1AD&#160;<br/>
Continue&#160;until&#160;end&#160;of&#160;row.&#160;<br/>
F1BA&#160;<br/>
20&#160;6E&#160;F3&#160;<br/>
JSR&#160;$F36E&#160;<br/>
Restore&#160;original&#160;hires&#160;cursor.&#160;<br/>
Pag&#160;&#160;e&#160;97&#160;<br/>
<hr/>
<a name=98></a>F1BD&#160;<br/>
20&#160;89&#160;F0&#160;<br/>
JSR&#160;$F089&#160;<br/>
Move&#160;cursor&#160;down&#160;a&#160;line.&#160;<br/>
F1C0&#160;<br/>
A4&#160;0F&#160;<br/>
LDY&#160;$0F&#160;<br/>
F1C2&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
F1C3&#160;<br/>
C0&#160;08&#160;<br/>
CPY&#160;#$08&#160;<br/>
Repeat&#160;for&#160;8&#160;rows.&#160;<br/>
F1C5&#160;<br/>
D0&#160;D7&#160;<br/>
BNE&#160;$F19E&#160;<br/>
F1C7&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F1C8&#160;<br/>
A9&#160;F0&#160;<br/>
LDA&#160;#$F0&#160;<br/>
Main&#160;routine&#160;for&#160;'POINT'.&#160;<br/>
F1CA&#160;<br/>
A2&#160;E1&#160;<br/>
LDX&#160;#$E1&#160;<br/>
F1CC&#160;<br/>
20&#160;F8&#160;F2&#160;<br/>
JSR&#160;$F2F8&#160;<br/>
Test&#160;X&#160;parameter.&#160;<br/>
F1CF&#160;<br/>
B0&#160;2F&#160;<br/>
BCS&#160;$F200&#160;<br/>
Out&#160;of&#160;range&#160;-&#160;over&#160;239.&#160;<br/>
F1D1&#160;<br/>
A9&#160;C8&#160;<br/>
LDA&#160;#$C8&#160;<br/>
F1D3&#160;<br/>
A2&#160;E3&#160;<br/>
LDX&#160;#$E3&#160;<br/>
F1D5&#160;<br/>
20&#160;F8&#160;F2&#160;<br/>
JSR&#160;$F2F8&#160;<br/>
Test&#160;Y&#160;parameter.&#160;<br/>
F1D8&#160;<br/>
B0&#160;26&#160;<br/>
BCS&#160;$F200&#160;<br/>
Out&#160;of&#160;range&#160;-&#160;over&#160;199.&#160;<br/>
F1DA&#160;<br/>
AE&#160;E1&#160;02&#160;<br/>
LDX&#160;$02E1&#160;<br/>
Set&#160;hires&#160;cursor&#160;location&#160;to&#160;<br/>
F1DD&#160;<br/>
8E&#160;19&#160;02&#160;<br/>
STX&#160;$0219&#160;<br/>
position&#160;given.&#160;<br/>
F1E0&#160;<br/>
AC&#160;E3&#160;02&#160;<br/>
LDY&#160;$02E3&#160;<br/>
F1E3&#160;<br/>
8C&#160;1A&#160;02&#160;<br/>
STY&#160;$021A&#160;<br/>
F1E6&#160;<br/>
20&#160;49&#160;F0&#160;<br/>
JSR&#160;$F049&#160;<br/>
Calculate&#160;address&#160;of&#160;cursor.&#160;<br/>
F1E9&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
F1EB&#160;<br/>
B1&#160;10&#160;<br/>
LDA&#160;($10),Y&#160;<br/>
Load&#160;pixel&#160;byte.&#160;<br/>
F1ED&#160;<br/>
2D&#160;15&#160;02&#160;<br/>
AND&#160;$0215&#160;<br/>
Isolate&#160;pixel.&#160;<br/>
F1F0&#160;<br/>
F0&#160;05&#160;<br/>
BEQ&#160;$F1F7&#160;<br/>
Pixel&#160;is&#160;background.&#160;<br/>
F1F2&#160;<br/>
A9&#160;FF&#160;<br/>
LDA&#160;#$FF&#160;<br/>
Load&#160;A&#160;for&#160;result&#160;of&#160;-1.&#160;<br/>
F1F4&#160;<br/>
4C&#160;F9&#160;F1&#160;<br/>
JMP&#160;$F1F9&#160;<br/>
F1F7&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
F1F9&#160;<br/>
8D&#160;E1&#160;02&#160;<br/>
STA&#160;$02E1&#160;<br/>
Result&#160;is&#160;0&#160;if&#160;background&#160;and&#160;<br/>
F1FC&#160;<br/>
8D&#160;E2&#160;02&#160;<br/>
STA&#160;$02E2&#160;<br/>
-1&#160;if&#160;foreground.&#160;<br/>
F1FF&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F200&#160;<br/>
EE&#160;E0&#160;02&#160;<br/>
INC&#160;$02E0&#160;<br/>
Indicate&#160;error.&#160;<br/>
F203&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F204&#160;<br/>
A9&#160;10&#160;<br/>
LDA&#160;#$10&#160;<br/>
<b>PAPER</b>&#160;<br/>
F206&#160;<br/>
85&#160;0C&#160;<br/>
STA&#160;$0C&#160;<br/>
Content&#160;of&#160;#0C&#160;is&#160;added&#160;to&#160;the&#160;<br/>
F208&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
paper&#160;colour&#160;to&#160;give&#160;attribute&#160;<br/>
F20A&#160;<br/>
85&#160;0D&#160;<br/>
STA&#160;$0D&#160;<br/>
code.&#160;#D=0&#160;indicates&#160;paper.&#160;<br/>
F20C&#160;<br/>
20&#160;1C&#160;F2&#160;<br/>
JSR&#160;$F21C&#160;<br/>
Process&#160;argument&#160;and&#160;write&#160;new&#160;<br/>
F20F&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
paper&#160;colour&#160;to&#160;screen.&#160;<br/>
&#160;<br/>F210&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
<b>INK</b>&#160;<br/>
F212&#160;<br/>
85&#160;0C&#160;<br/>
STA&#160;$0C&#160;<br/>
Content&#160;of&#160;#0C&#160;is&#160;added&#160;to&#160;the&#160;<br/>
F214&#160;<br/>
A9&#160;01&#160;<br/>
LDA&#160;#$01&#160;<br/>
ink&#160;colour&#160;to&#160;give&#160;attribute&#160;<br/>
F216&#160;<br/>
85&#160;0D&#160;<br/>
STA&#160;$0D&#160;<br/>
code.&#160;#D=1&#160;indicates&#160;ink.&#160;<br/>
F218&#160;<br/>
20&#160;1C&#160;F2&#160;<br/>
JSR&#160;$F21C&#160;<br/>
Process&#160;argument&#160;and&#160;write&#160;new&#160;<br/>
F21B&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
ink&#160;colour&#160;to&#160;screen.&#160;<br/>
&#160;<br/>F21C&#160;<br/>
A9&#160;08&#160;<br/>
LDA&#160;#$08&#160;<br/>
Set&#160;parameter&#160;limit&#160;to&#160;8.&#160;<br/>
F21E&#160;<br/>
A2&#160;E1&#160;<br/>
LDX&#160;#$E1&#160;<br/>
F220&#160;<br/>
20&#160;F8&#160;F2&#160;<br/>
JSR&#160;$F2F8&#160;<br/>
Test&#160;paper/ink&#160;value&#160;given.&#160;<br/>
F223&#160;<br/>
B0&#160;3F&#160;<br/>
BCS&#160;$F264&#160;<br/>
Out&#160;of&#160;range.&#160;<br/>
F225&#160;<br/>
20&#160;5D&#160;F3&#160;<br/>
JSR&#160;$F35D&#160;<br/>
Save&#160;hires&#160;cursor&#160;location.&#160;<br/>
F228&#160;<br/>
AD&#160;E1&#160;02&#160;<br/>
LDA&#160;$02E1&#160;<br/>
F22B&#160;<br/>
05&#160;0C&#160;<br/>
ORA&#160;$0C&#160;<br/>
Produce&#160;and&#160;save&#160;the&#160;correct&#160;<br/>
F22D&#160;<br/>
8D&#160;02&#160;02&#160;<br/>
STA&#160;$0202&#160;<br/>
paper/ink&#160;attribute&#160;code.&#160;<br/>
F230&#160;<br/>
AE&#160;1F&#160;02&#160;<br/>
LDX&#160;$021F&#160;<br/>
F233&#160;<br/>
D0&#160;12&#160;<br/>
BNE&#160;$F247&#160;<br/>
In&#160;Hires&#160;mode.&#160;<br/>
F235&#160;<br/>
A6&#160;0D&#160;<br/>
LDX&#160;$0D&#160;<br/>
Save&#160;the&#160;paper/ink&#160;colour&#160;in&#160;<br/>
F237&#160;<br/>
9D&#160;6B&#160;02&#160;<br/>
STA&#160;$026B,X&#160;<br/>
appropriate&#160;location.&#160;<br/>
F23A&#160;<br/>
A9&#160;A8&#160;<br/>
LDA&#160;#$A8&#160;<br/>
Set&#160;X&#160;to&#160;low&#160;half&#160;of&#160;address&#160;<br/>
F23C&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
of&#160;first&#160;row&#160;on&#160;text&#160;screen&#160;to&#160;<br/>
F23D&#160;<br/>
65&#160;0D&#160;<br/>
ADC&#160;$0D&#160;<br/>
have&#160;its&#160;paper/ink&#160;changed.&#160;<br/>
F23F&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
Load&#160;A&#160;with&#160;number&#160;of&#160;rows&#160;to&#160;<br/>
Pag&#160;&#160;e&#160;98&#160;<br/>
<hr/>
<a name=99></a>F240&#160;<br/>
A0&#160;BB&#160;<br/>
LDY&#160;#$BB&#160;<br/>
be&#160;changed&#160;and&#160;Y&#160;with&#160;high&#160;<br/>
F242&#160;<br/>
A9&#160;1B&#160;<br/>
LDA&#160;#$1B&#160;<br/>
byte&#160;of&#160;start&#160;address.&#160;<br/>
F244&#160;<br/>
4C&#160;51&#160;F2&#160;<br/>
JMP&#160;$F251&#160;<br/>
F247&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
Set&#160;X&#160;and&#160;Y&#160;to&#160;the&#160;low&#160;and&#160;<br/>
F249&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
high&#160;halves&#160;of&#160;the&#160;first&#160;row&#160;<br/>
F24A&#160;<br/>
65&#160;0D&#160;<br/>
ADC&#160;$0D&#160;<br/>
to&#160;have&#160;ink/paper&#160;changed.&#160;<br/>
F24C&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
Load&#160;A&#160;with&#160;number&#160;of&#160;rows&#160;to&#160;<br/>
F24D&#160;<br/>
A0&#160;A0&#160;<br/>
LDY&#160;#$A0&#160;<br/>
be&#160;done&#160;for&#160;hires&#160;screen.&#160;<br/>
F24F&#160;<br/>
A9&#160;C8&#160;<br/>
LDA&#160;#$C8&#160;<br/>
F251&#160;<br/>
8D&#160;00&#160;02&#160;<br/>
STA&#160;$0200&#160;<br/>
F254&#160;<br/>
86&#160;10&#160;<br/>
STX&#160;$10&#160;<br/>
F256&#160;<br/>
84&#160;11&#160;<br/>
STY&#160;$11&#160;<br/>
F258&#160;<br/>
A9&#160;01&#160;<br/>
LDA&#160;#$01&#160;<br/>
F25A&#160;<br/>
8D&#160;01&#160;02&#160;<br/>
STA&#160;$0201&#160;<br/>
Fill&#160;the&#160;appropriate&#160;number&#160;<br/>
F25D&#160;<br/>
20&#160;CD&#160;F2&#160;<br/>
JSR&#160;$F2CD&#160;<br/>
of&#160;rows&#160;with&#160;new&#160;ink/paper.&#160;<br/>
F260&#160;<br/>
20&#160;6E&#160;F3&#160;<br/>
JSR&#160;$F36E&#160;<br/>
Restore&#160;old&#160;hires&#160;cursor&#160;<br/>
F263&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
address.&#160;<br/>
&#160;<br/>F264&#160;<br/>
EE&#160;E0&#160;02&#160;<br/>
INC&#160;$02E0&#160;<br/>
Indicates&#160;error.&#160;<br/>
F267&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F268&#160;<br/>
D8&#160;<br/>
CLD&#160;<br/>
<b>FILL</b>&#160;Parameters&#160;passed&#160;in&#160;<br/>
F269&#160;<br/>
AD&#160;E3&#160;02&#160;<br/>
LDA&#160;$02E3&#160;<br/>
block&#160;at&#160;$02E1.&#160;<br/>
F26C&#160;<br/>
8D&#160;01&#160;02&#160;<br/>
STA&#160;$0201&#160;<br/>
F26F&#160;<br/>
F0&#160;58&#160;<br/>
BEQ&#160;$F2C9&#160;<br/>
Error;&#160;can't&#160;fill&#160;0&#160;coloumns.&#160;<br/>
F271&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
F273&#160;<br/>
AD&#160;19&#160;02&#160;<br/>
LDA&#160;$0219&#160;<br/>
Horizontal&#160;cursor&#160;position.&#160;<br/>
F276&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
F277&#160;<br/>
E9&#160;06&#160;<br/>
SBC&#160;#$06&#160;<br/>
Find&#160;byte&#160;position&#160;of&#160;cursor&#160;<br/>
F279&#160;<br/>
90&#160;04&#160;<br/>
BCC&#160;$F27F&#160;<br/>
in&#160;row&#160;by&#160;repeated&#160;subtraction&#160;<br/>
F27B&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
of&#160;6&#160;until&#160;0&#160;is&#160;passed.&#160;<br/>
F27C&#160;<br/>
4C&#160;76&#160;F2&#160;<br/>
JMP&#160;$F276&#160;<br/>
F27F&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
F280&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
F281&#160;<br/>
6D&#160;E3&#160;02&#160;<br/>
ADC&#160;$02E3&#160;<br/>
Test&#160;if&#160;the&#160;final&#160;column&#160;<br/>
F284&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
of&#160;fill&#160;will&#160;go&#160;off&#160;screen.&#160;<br/>
F285&#160;<br/>
AD&#160;E4&#160;02&#160;<br/>
LDA&#160;$02E4&#160;<br/>
Generate&#160;error&#160;if&#160;so.&#160;<br/>
F288&#160;<br/>
69&#160;00&#160;<br/>
ADC&#160;#$00&#160;<br/>
F28A&#160;<br/>
D0&#160;3D&#160;<br/>
BNE&#160;$F2C9&#160;<br/>
F28C&#160;<br/>
C0&#160;29&#160;<br/>
CPY&#160;#$29&#160;<br/>
F28E&#160;<br/>
B0&#160;39&#160;<br/>
BCS&#160;$F2C9&#160;<br/>
Third&#160;parameter&#160;(the&#160;byte&#160;to&#160;<br/>
F290&#160;<br/>
AD&#160;E6&#160;02&#160;<br/>
LDA&#160;$02E6&#160;<br/>
be&#160;written&#160;to&#160;screen)&#160;must&#160;not&#160;<br/>
F293&#160;<br/>
D0&#160;34&#160;<br/>
BNE&#160;$F2C9&#160;<br/>
be&#160;over&#160;255.&#160;<br/>
F295&#160;<br/>
AD&#160;E1&#160;02&#160;<br/>
LDA&#160;$02E1&#160;<br/>
Transfer&#160;number&#160;of&#160;rows&#160;to&#160;be&#160;<br/>
F298&#160;<br/>
8D&#160;00&#160;02&#160;<br/>
STA&#160;$0200&#160;<br/>
filled.&#160;<br/>
F29B&#160;<br/>
F0&#160;2C&#160;<br/>
BEQ&#160;$F2C9&#160;<br/>
Error;&#160;can't&#160;fill&#160;0&#160;rows.&#160;<br/>
F29D&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
F29E&#160;<br/>
6D&#160;1A&#160;02&#160;<br/>
ADC&#160;$021A&#160;<br/>
F2A1&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
F2A2&#160;<br/>
AD&#160;E2&#160;02&#160;<br/>
LDA&#160;$02E2&#160;<br/>
Check&#160;that&#160;the&#160;final&#160;row&#160;will&#160;<br/>
F2A5&#160;<br/>
69&#160;00&#160;<br/>
ADC&#160;#$00&#160;<br/>
not&#160;go&#160;off&#160;bottom&#160;of&#160;screen.&#160;<br/>
F2A7&#160;<br/>
D0&#160;20&#160;<br/>
BNE&#160;$F2C9&#160;<br/>
F2A9&#160;<br/>
C0&#160;C9&#160;<br/>
CPY&#160;#$C9&#160;<br/>
Test&#160;that&#160;final&#160;row&#160;is&#160;not&#160;201&#160;<br/>
F2AB&#160;<br/>
B0&#160;1C&#160;<br/>
BCS&#160;$F2C9&#160;<br/>
or&#160;greater.&#160;<br/>
F2AD&#160;<br/>
C0&#160;C8&#160;<br/>
CPY&#160;#$C8&#160;<br/>
F2AF&#160;<br/>
D0&#160;02&#160;<br/>
BNE&#160;$F2B3&#160;<br/>
Set&#160;row&#160;to&#160;0&#160;if&#160;it&#160;would&#160;<br/>
F2B1&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
otherwise&#160;end&#160;up&#160;at&#160;row&#160;200.&#160;<br/>
F2B3&#160;<br/>
8C&#160;1A&#160;02&#160;<br/>
STY&#160;$021A&#160;<br/>
Save&#160;final&#160;Y&#160;cursor&#160;position.&#160;<br/>
F2B6&#160;<br/>
AD&#160;E5&#160;02&#160;<br/>
LDA&#160;$02E5&#160;<br/>
Transfer&#160;byte&#160;to&#160;be&#160;written&#160;<br/>
F2B9&#160;<br/>
8D&#160;02&#160;02&#160;<br/>
STA&#160;$0202&#160;<br/>
on&#160;screen.&#160;<br/>
F2BC&#160;<br/>
20&#160;CD&#160;F2&#160;<br/>
JSR&#160;$F2CD&#160;<br/>
Fill&#160;each&#160;row&#160;until&#160;finished.&#160;<br/>
F2BF&#160;<br/>
AC&#160;1A&#160;02&#160;<br/>
LDY&#160;$021A&#160;<br/>
F2C2&#160;<br/>
AE&#160;19&#160;02&#160;<br/>
LDX&#160;$0219&#160;<br/>
Write&#160;current&#160;hires&#160;cursor&#160;<br/>
F2C5&#160;<br/>
20&#160;49&#160;F0&#160;<br/>
JSR&#160;$F049&#160;<br/>
position&#160;to&#160;screen.&#160;<br/>
Pag&#160;&#160;e&#160;99&#160;<br/>
<hr/>
<a name=100></a>F2C8&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F2C9&#160;<br/>
EE&#160;E0&#160;02&#160;<br/>
INC&#160;$02E0&#160;<br/>
Indicates&#160;error&#160;in&#160;routine.&#160;<br/>
F2CC&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F2CD&#160;<br/>
D8&#160;<br/>
CLD&#160;<br/>
This&#160;routine&#160;puts&#160;the&#160;bit&#160;<br/>
F2CE&#160;<br/>
AD&#160;02&#160;02&#160;<br/>
LDA&#160;$0202&#160;<br/>
pattern&#160;held&#160;in&#160;$202&#160;on&#160;the&#160;<br/>
F2D1&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
screen.&#160;This&#160;is&#160;repeated&#160;<br/>
F2D3&#160;<br/>
91&#160;10&#160;<br/>
STA&#160;($10),Y&#160;<br/>
on&#160;the&#160;following&#160;row&#160;until&#160;<br/>
F2D5&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
the&#160;content&#160;of&#160;$200&#160;is&#160;<br/>
F2D6&#160;<br/>
CC&#160;01&#160;02&#160;<br/>
CPY&#160;$0201&#160;<br/>
decremented&#160;to&#160;zero.&#160;<br/>
F2D9&#160;<br/>
D0&#160;F8&#160;<br/>
BNE&#160;$F2D3&#160;<br/>
F2DB&#160;<br/>
20&#160;89&#160;F0&#160;<br/>
JSR&#160;$F089&#160;<br/>
F2DE&#160;<br/>
CE&#160;00&#160;02&#160;<br/>
DEC&#160;$0200&#160;<br/>
F2E1&#160;<br/>
D0&#160;EB&#160;<br/>
BNE&#160;$F2CE&#160;<br/>
F2E3&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F2E4&#160;<br/>
8D&#160;04&#160;02&#160;<br/>
STA&#160;$0204&#160;<br/>
This&#160;routine&#160;tests&#160;whether&#160;<br/>
F2E7&#160;<br/>
BD&#160;01&#160;02&#160;<br/>
LDA&#160;$0201,X&#160;<br/>
the&#160;content&#160;of&#160;$204&#160;is&#160;<br/>
F2EA&#160;<br/>
D0&#160;0A&#160;<br/>
BNE&#160;$F2F6&#160;<br/>
greater&#160;than&#160;the&#160;content&#160;of&#160;<br/>
F2EC&#160;<br/>
BD&#160;00&#160;02&#160;<br/>
LDA&#160;$0200,X&#160;<br/>
indexed&#160;location.&#160;This&#160;<br/>
F2EF&#160;<br/>
F0&#160;05&#160;<br/>
BEQ&#160;$F2F6&#160;<br/>
routine&#160;is&#160;used&#160;in&#160;range&#160;<br/>
F2F1&#160;<br/>
CD&#160;04&#160;02&#160;<br/>
CMP&#160;$0204&#160;<br/>
checking&#160;of&#160;arguments.&#160;The&#160;<br/>
F2F4&#160;<br/>
90&#160;01&#160;<br/>
BCC&#160;$F2F7&#160;<br/>
argument&#160;is&#160;given&#160;the&#160;error&#160;<br/>
F2F6&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
status&#160;(C=1)&#160;if&#160;zero.&#160;<br/>
F2F7&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F2F8&#160;<br/>
8D&#160;04&#160;02&#160;<br/>
STA&#160;$0204&#160;<br/>
This&#160;routine&#160;operates&#160;in&#160;the&#160;<br/>
F2FB&#160;<br/>
BD&#160;01&#160;02&#160;<br/>
LDA&#160;$0201,X&#160;<br/>
same&#160;way&#160;as&#160;the&#160;one&#160;above&#160;<br/>
F2FE&#160;<br/>
D0&#160;08&#160;<br/>
BNE&#160;$F308&#160;<br/>
but&#160;does&#160;not&#160;set&#160;the&#160;error&#160;<br/>
F300&#160;<br/>
BD&#160;00&#160;02&#160;<br/>
LDA&#160;$0200,X&#160;<br/>
condition&#160;if&#160;the&#160;argument&#160;is&#160;<br/>
F303&#160;<br/>
CD&#160;04&#160;02&#160;<br/>
CMP&#160;$0204&#160;<br/>
zero.&#160;<br/>
F306&#160;<br/>
90&#160;01&#160;<br/>
BCC&#160;$F309&#160;<br/>
F308&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
F309&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F30A&#160;<br/>
A9&#160;04&#160;<br/>
LDA&#160;#$04&#160;<br/>
This&#160;routine&#160;is&#160;used&#160;by&#160;DRAW&#160;<br/>
F30C&#160;<br/>
A2&#160;E5&#160;<br/>
LDX&#160;#$E5&#160;<br/>
and&#160;CURMOV&#160;to&#160;calculate&#160;the&#160;<br/>
F30E&#160;<br/>
20&#160;F8&#160;F2&#160;<br/>
JSR&#160;$F2F8&#160;<br/>
destination&#160;of&#160;the&#160;hires&#160;<br/>
F311&#160;<br/>
B0&#160;49&#160;<br/>
BCS&#160;$F35C&#160;<br/>
cursor.&#160;Each&#160;parameter&#160;is&#160;<br/>
F313&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
checked&#160;so&#160;that&#160;the&#160;cursor&#160;<br/>
F314&#160;<br/>
AD&#160;E1&#160;02&#160;<br/>
LDA&#160;$02E1&#160;<br/>
does&#160;not&#160;go&#160;off&#160;the&#160;screen&#160;<br/>
F317&#160;<br/>
6D&#160;19&#160;02&#160;<br/>
ADC&#160;$0219&#160;<br/>
and&#160;that&#160;the&#160;wrong&#160;FB&#160;code&#160;is&#160;<br/>
F31A&#160;<br/>
8D&#160;00&#160;02&#160;<br/>
STA&#160;$0200&#160;<br/>
used.&#160;<br/>
F31D&#160;<br/>
AD&#160;E2&#160;02&#160;<br/>
LDA&#160;$02E2&#160;<br/>
$2E1/2&#160;and&#160;$2E3/4&#160;hold&#160;the&#160;<br/>
F320&#160;<br/>
69&#160;00&#160;<br/>
ADC&#160;#$00&#160;<br/>
respective&#160;X&#160;and&#160;Y&#160;arguments.&#160;<br/>
F322&#160;<br/>
8D&#160;01&#160;02&#160;<br/>
STA&#160;$0201&#160;<br/>
F325&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
The&#160;address&#160;of&#160;the&#160;hires&#160;<br/>
F327&#160;<br/>
A9&#160;F0&#160;<br/>
LDA&#160;#$F0&#160;<br/>
cursor&#160;is&#160;not&#160;calculated.&#160;<br/>
F329&#160;<br/>
20&#160;F8&#160;F2&#160;<br/>
JSR&#160;$F2F8&#160;<br/>
F32C&#160;<br/>
B0&#160;2E&#160;<br/>
BCS&#160;$F35C&#160;<br/>
F32E&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
F32F&#160;<br/>
AD&#160;E3&#160;02&#160;<br/>
LDA&#160;$02E3&#160;<br/>
F332&#160;<br/>
6D&#160;1A&#160;02&#160;<br/>
ADC&#160;$021A&#160;<br/>
F335&#160;<br/>
8D&#160;02&#160;02&#160;<br/>
STA&#160;$0202&#160;<br/>
F338&#160;<br/>
AD&#160;E4&#160;02&#160;<br/>
LDA&#160;$02E4&#160;<br/>
F33B&#160;<br/>
69&#160;00&#160;<br/>
ADC&#160;#$00&#160;<br/>
F33D&#160;<br/>
8D&#160;03&#160;02&#160;<br/>
STA&#160;$0203&#160;<br/>
F340&#160;<br/>
A2&#160;02&#160;<br/>
LDX&#160;#$02&#160;<br/>
F342&#160;<br/>
A9&#160;C8&#160;<br/>
LDA&#160;#$C8&#160;<br/>
F344&#160;<br/>
20&#160;F8&#160;F2&#160;<br/>
JSR&#160;$F2F8&#160;<br/>
F347&#160;<br/>
B0&#160;13&#160;<br/>
BCS&#160;$F35C&#160;<br/>
F349&#160;<br/>
AD&#160;E5&#160;02&#160;<br/>
LDA&#160;$02E5&#160;<br/>
F34C&#160;<br/>
8D&#160;12&#160;02&#160;<br/>
STA&#160;$0212&#160;<br/>
Pag&#160;&#160;<br/>
e&#160;100&#160;<br/>
<hr/>
<a name=101></a>F34F&#160;<br/>
AD&#160;00&#160;02&#160;<br/>
LDA&#160;$0200&#160;<br/>
F352&#160;<br/>
8D&#160;19&#160;02&#160;<br/>
STA&#160;$0219&#160;<br/>
F355&#160;<br/>
AD&#160;02&#160;02&#160;<br/>
LDA&#160;$0202&#160;<br/>
F358&#160;<br/>
8D&#160;1A&#160;02&#160;<br/>
STA&#160;$021A&#160;<br/>
F35B&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
F35C&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F35D&#160;<br/>
A5&#160;10&#160;<br/>
LDA&#160;$10&#160;<br/>
This&#160;routine&#160;saves&#160;the&#160;<br/>
F35F&#160;<br/>
8D&#160;16&#160;02&#160;<br/>
STA&#160;$0216&#160;<br/>
address&#160;of&#160;the&#160;hires&#160;cursor&#160;<br/>
F362&#160;<br/>
A5&#160;11&#160;<br/>
LDA&#160;$11&#160;<br/>
at&#160;locations&#160;$216/7.&#160;The&#160;<br/>
F364&#160;<br/>
8D&#160;17&#160;02&#160;<br/>
STA&#160;$0217&#160;<br/>
pixel&#160;byte&#160;($215)&#160;is&#160;also&#160;<br/>
F367&#160;<br/>
AD&#160;15&#160;02&#160;<br/>
LDA&#160;$0215&#160;<br/>
saved&#160;at&#160;$218.&#160;<br/>
F36A&#160;<br/>
8D&#160;18&#160;02&#160;<br/>
STA&#160;$0218&#160;<br/>
F36D&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F36E&#160;<br/>
AD&#160;16&#160;02&#160;<br/>
LDA&#160;$0216&#160;<br/>
This&#160;routine&#160;restores&#160;the&#160;<br/>
F371&#160;<br/>
85&#160;10&#160;<br/>
STA&#160;$10&#160;<br/>
hires&#160;cursor&#160;and&#160;pixel&#160;<br/>
F373&#160;<br/>
AD&#160;17&#160;02&#160;<br/>
LDA&#160;$0217&#160;<br/>
position&#160;to&#160;their&#160;original&#160;<br/>
F376&#160;<br/>
85&#160;11&#160;<br/>
STA&#160;$11&#160;<br/>
positions.&#160;Used&#160;in&#160;<br/>
F378&#160;<br/>
AD&#160;18&#160;02&#160;<br/>
LDA&#160;$0218&#160;<br/>
conjunction&#160;with&#160;routine&#160;<br/>
F37B&#160;<br/>
8D&#160;15&#160;02&#160;<br/>
STA&#160;$0215&#160;<br/>
above.&#160;<br/>
F37E&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F37F&#160;<br/>
D8&#160;<br/>
CLD&#160;<br/>
<b>CIRCLE</b>&#160;<br/>
F380&#160;<br/>
AD&#160;E2&#160;02&#160;<br/>
LDA&#160;$02E2&#160;<br/>
Check&#160;that&#160;radius&#160;is&#160;not&#160;0&#160;or&#160;<br/>
F383&#160;<br/>
D0&#160;3D&#160;<br/>
BNE&#160;$F3C2&#160;<br/>
over&#160;255.&#160;<br/>
F385&#160;<br/>
AD&#160;E1&#160;02&#160;<br/>
LDA&#160;$02E1&#160;<br/>
F388&#160;<br/>
F0&#160;38&#160;<br/>
BEQ&#160;$F3C2&#160;<br/>
F38A&#160;<br/>
AD&#160;19&#160;02&#160;<br/>
LDA&#160;$0219&#160;<br/>
Check&#160;that&#160;the&#160;circle&#160;will&#160;fit&#160;<br/>
F38D&#160;<br/>
CD&#160;E1&#160;02&#160;<br/>
CMP&#160;$02E1&#160;<br/>
on&#160;the&#160;screen&#160;horizontally.&#160;<br/>
F390&#160;<br/>
90&#160;30&#160;<br/>
BCC&#160;$F3C2&#160;<br/>
F392&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
F393&#160;<br/>
6D&#160;E1&#160;02&#160;<br/>
ADC&#160;$02E1&#160;<br/>
F396&#160;<br/>
C9&#160;F0&#160;<br/>
CMP&#160;#$F0&#160;<br/>
F398&#160;<br/>
B0&#160;28&#160;<br/>
BCS&#160;$F3C2&#160;<br/>
F39A&#160;<br/>
AD&#160;1A&#160;02&#160;<br/>
LDA&#160;$021A&#160;<br/>
Check&#160;that&#160;the&#160;cursor&#160;will&#160;fit&#160;<br/>
F39D&#160;<br/>
CD&#160;E1&#160;02&#160;<br/>
CMP&#160;$02E1&#160;<br/>
on&#160;the&#160;screen&#160;vertically.&#160;<br/>
F3A0&#160;<br/>
90&#160;20&#160;<br/>
BCC&#160;$F3C2&#160;<br/>
F3A2&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
F3A3&#160;<br/>
6D&#160;E1&#160;02&#160;<br/>
ADC&#160;$02E1&#160;<br/>
F3A6&#160;<br/>
C9&#160;C8&#160;<br/>
CMP&#160;#$C8&#160;<br/>
F3A8&#160;<br/>
B0&#160;18&#160;<br/>
BCS&#160;$F3C2&#160;<br/>
F3AA&#160;<br/>
A2&#160;E3&#160;<br/>
LDX&#160;#$E3&#160;<br/>
Check&#160;that&#160;the&#160;FB&#160;code&#160;is&#160;not&#160;<br/>
F3AC&#160;<br/>
A9&#160;04&#160;<br/>
LDA&#160;#$04&#160;<br/>
out&#160;of&#160;range.&#160;<br/>
F3AE&#160;<br/>
20&#160;F8&#160;F2&#160;<br/>
JSR&#160;$F2F8&#160;<br/>
F3B1&#160;<br/>
B0&#160;0F&#160;<br/>
BCS&#160;$F3C2&#160;<br/>
F3B3&#160;<br/>
AD&#160;E3&#160;02&#160;<br/>
LDA&#160;$02E3&#160;<br/>
F3B6&#160;<br/>
8D&#160;12&#160;02&#160;<br/>
STA&#160;$0212&#160;<br/>
F3B9&#160;<br/>
20&#160;D8&#160;EE&#160;<br/>
JSR&#160;$EED8&#160;<br/>
Put&#160;FB&#160;in&#160;bits&#160;6,7&#160;of&#160;$212.&#160;<br/>
F3BC&#160;<br/>
20&#160;C6&#160;F3&#160;<br/>
JSR&#160;$F3C6&#160;<br/>
Draw&#160;the&#160;circle.&#160;<br/>
F3BF&#160;<br/>
4C&#160;C5&#160;F3&#160;<br/>
JMP&#160;$F3C5&#160;<br/>
F3C2&#160;<br/>
EE&#160;E0&#160;02&#160;<br/>
INC&#160;$02E0&#160;<br/>
F3C5&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F3C6&#160;<br/>
20&#160;5D&#160;F3&#160;<br/>
JSR&#160;$F35D&#160;<br/>
Save&#160;hires&#160;cursor&#160;address.&#160;<br/>
F3C9&#160;<br/>
AD&#160;1A&#160;02&#160;<br/>
LDA&#160;$021A&#160;<br/>
F3CC&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
Calculate&#160;smallest&#160;Y&#160;co-ord.&#160;<br/>
F3CD&#160;<br/>
ED&#160;E1&#160;02&#160;<br/>
SBC&#160;$02E1&#160;<br/>
F3D0&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
F3D1&#160;<br/>
AE&#160;19&#160;02&#160;<br/>
LDX&#160;$0219&#160;<br/>
Load&#160;horizontal&#160;cursor.&#160;<br/>
F3D4&#160;<br/>
20&#160;49&#160;F0&#160;<br/>
JSR&#160;$F049&#160;<br/>
Draw&#160;cursor&#160;at&#160;top&#160;of&#160;circle.&#160;<br/>
F3D7&#160;<br/>
AD&#160;E1&#160;02&#160;<br/>
LDA&#160;$02E1&#160;<br/>
F3DA&#160;<br/>
85&#160;0F&#160;<br/>
STA&#160;$0F&#160;<br/>
F3DC&#160;<br/>
20&#160;85&#160;F4&#160;<br/>
JSR&#160;$F485&#160;<br/>
Pag&#160;&#160;<br/>
e&#160;101&#160;<br/>
<hr/>
<a name=102></a>F3DF&#160;<br/>
A9&#160;80&#160;<br/>
LDA&#160;#$80&#160;<br/>
F3E1&#160;<br/>
8D&#160;1B&#160;02&#160;<br/>
STA&#160;$021B&#160;<br/>
F3E4&#160;<br/>
8D&#160;1D&#160;02&#160;<br/>
STA&#160;$021D&#160;<br/>
F3E7&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
F3E9&#160;<br/>
8D&#160;1C&#160;02&#160;<br/>
STA&#160;$021C&#160;<br/>
F3EC&#160;<br/>
AD&#160;E1&#160;02&#160;<br/>
LDA&#160;$02E1&#160;<br/>
F3EF&#160;<br/>
8D&#160;1E&#160;02&#160;<br/>
STA&#160;$021E&#160;<br/>
F3F2&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
F3F4&#160;<br/>
85&#160;0F&#160;<br/>
STA&#160;$0F&#160;<br/>
F3F6&#160;<br/>
20&#160;14&#160;F4&#160;<br/>
JSR&#160;$F414&#160;<br/>
F3F9&#160;<br/>
20&#160;44&#160;F4&#160;<br/>
JSR&#160;$F444&#160;<br/>
F3FC&#160;<br/>
A5&#160;0F&#160;<br/>
LDA&#160;$0F&#160;<br/>
F3FE&#160;<br/>
F0&#160;03&#160;<br/>
BEQ&#160;$F403&#160;<br/>
F400&#160;<br/>
20&#160;16&#160;F0&#160;<br/>
JSR&#160;$F016&#160;<br/>
F403&#160;<br/>
AD&#160;1C&#160;02&#160;<br/>
LDA&#160;$021C&#160;<br/>
F406&#160;<br/>
D0&#160;EA&#160;<br/>
BNE&#160;$F3F2&#160;<br/>
F408&#160;<br/>
AD&#160;1E&#160;02&#160;<br/>
LDA&#160;$021E&#160;<br/>
F40B&#160;<br/>
CD&#160;E1&#160;02&#160;<br/>
CMP&#160;$02E1&#160;<br/>
F40E&#160;<br/>
D0&#160;E2&#160;<br/>
BNE&#160;$F3F2&#160;<br/>
F410&#160;<br/>
20&#160;6E&#160;F3&#160;<br/>
JSR&#160;$F36E&#160;<br/>
F413&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F414&#160;<br/>
AD&#160;1D&#160;02&#160;<br/>
LDA&#160;$021D&#160;<br/>
F417&#160;<br/>
AE&#160;1E&#160;02&#160;<br/>
LDX&#160;$021E&#160;<br/>
F41A&#160;<br/>
20&#160;74&#160;F4&#160;<br/>
JSR&#160;$F474&#160;<br/>
F41D&#160;<br/>
A5&#160;0C&#160;<br/>
LDA&#160;$0C&#160;<br/>
F41F&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
F420&#160;<br/>
6D&#160;1B&#160;02&#160;<br/>
ADC&#160;$021B&#160;<br/>
F423&#160;<br/>
8D&#160;1B&#160;02&#160;<br/>
STA&#160;$021B&#160;<br/>
F426&#160;<br/>
AD&#160;1C&#160;02&#160;<br/>
LDA&#160;$021C&#160;<br/>
F429&#160;<br/>
85&#160;0C&#160;<br/>
STA&#160;$0C&#160;<br/>
F42B&#160;<br/>
65&#160;0D&#160;<br/>
ADC&#160;$0D&#160;<br/>
F42D&#160;<br/>
8D&#160;1C&#160;02&#160;<br/>
STA&#160;$021C&#160;<br/>
F430&#160;<br/>
C5&#160;0C&#160;<br/>
CMP&#160;$0C&#160;<br/>
F432&#160;<br/>
F0&#160;0F&#160;<br/>
BEQ&#160;$F443&#160;<br/>
F434&#160;<br/>
B0&#160;06&#160;<br/>
BCS&#160;$F43C&#160;<br/>
F436&#160;<br/>
20&#160;A1&#160;F0&#160;<br/>
JSR&#160;$F0A1&#160;<br/>
F439&#160;<br/>
4C&#160;3F&#160;F4&#160;<br/>
JMP&#160;$F43F&#160;<br/>
F43C&#160;<br/>
20&#160;B2&#160;F0&#160;<br/>
JSR&#160;$F0B2&#160;<br/>
F43F&#160;<br/>
A9&#160;01&#160;<br/>
LDA&#160;#$01&#160;<br/>
F441&#160;<br/>
85&#160;0F&#160;<br/>
STA&#160;$0F&#160;<br/>
F443&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F444&#160;<br/>
AD&#160;1B&#160;02&#160;<br/>
LDA&#160;$021B&#160;<br/>
F447&#160;<br/>
AE&#160;1C&#160;02&#160;<br/>
LDX&#160;$021C&#160;<br/>
F44A&#160;<br/>
20&#160;74&#160;F4&#160;<br/>
JSR&#160;$F474&#160;<br/>
F44D&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
F44E&#160;<br/>
AD&#160;1D&#160;02&#160;<br/>
LDA&#160;$021D&#160;<br/>
F451&#160;<br/>
E5&#160;0C&#160;<br/>
SBC&#160;$0C&#160;<br/>
F453&#160;<br/>
8D&#160;1D&#160;02&#160;<br/>
STA&#160;$021D&#160;<br/>
F456&#160;<br/>
AD&#160;1E&#160;02&#160;<br/>
LDA&#160;$021E&#160;<br/>
F459&#160;<br/>
85&#160;0C&#160;<br/>
STA&#160;$0C&#160;<br/>
F45B&#160;<br/>
E5&#160;0D&#160;<br/>
SBC&#160;$0D&#160;<br/>
F45D&#160;<br/>
8D&#160;1E&#160;02&#160;<br/>
STA&#160;$021E&#160;<br/>
F460&#160;<br/>
C5&#160;0C&#160;<br/>
CMP&#160;$0C&#160;<br/>
F462&#160;<br/>
F0&#160;0F&#160;<br/>
BEQ&#160;$F473&#160;<br/>
F464&#160;<br/>
B0&#160;06&#160;<br/>
BCS&#160;$F46C&#160;<br/>
F466&#160;<br/>
20&#160;89&#160;F0&#160;<br/>
JSR&#160;$F089&#160;<br/>
F469&#160;<br/>
4C&#160;6F&#160;F4&#160;<br/>
JMP&#160;$F46F&#160;<br/>
F46C&#160;<br/>
20&#160;95&#160;F0&#160;<br/>
JSR&#160;$F095&#160;<br/>
F46F&#160;<br/>
A9&#160;01&#160;<br/>
LDA&#160;#$01&#160;<br/>
F471&#160;<br/>
85&#160;0F&#160;<br/>
STA&#160;$0F&#160;<br/>
F473&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>
Pag&#160;&#160;<br/>
e&#160;102&#160;<br/>
<hr/>
<a name=103></a>F474&#160;<br/>
85&#160;0C&#160;<br/>
STA&#160;$0C&#160;<br/>
This&#160;routine&#160;does&#160;an&#160;<br/>
F476&#160;<br/>
86&#160;0D&#160;<br/>
STX&#160;$0D&#160;<br/>
arithmetic&#160;shift&#160;right&#160;on&#160;the&#160;<br/>
F478&#160;<br/>
A6&#160;0E&#160;<br/>
LDX&#160;$0E&#160;<br/>
16&#160;bit&#160;integer&#160;in&#160;$C&#160;and&#160;$D.&#160;<br/>
F47A&#160;<br/>
A5&#160;0D&#160;<br/>
LDA&#160;$0D&#160;<br/>
This&#160;is&#160;repeated&#160;according&#160;to&#160;<br/>
F47C&#160;<br/>
2A&#160;<br/>
ROL&#160;A&#160;<br/>
the&#160;content&#160;of&#160;$E.&#160;<br/>
F47D&#160;<br/>
66&#160;0D&#160;<br/>
ROR&#160;$0D&#160;<br/>
F47F&#160;<br/>
66&#160;0C&#160;<br/>
ROR&#160;$0C&#160;<br/>
F481&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
F482&#160;<br/>
D0&#160;F6&#160;<br/>
BNE&#160;$F47A&#160;<br/>
F484&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F485&#160;<br/>
E6&#160;0F&#160;<br/>
INC&#160;$0F&#160;<br/>
Set&#160;A&#160;to&#160;2&#160;raised&#160;to&#160;the&#160;<br/>
F487&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
power&#160;of&#160;the&#160;content&#160;of&#160;$0F.&#160;<br/>
F489&#160;<br/>
85&#160;0E&#160;<br/>
STA&#160;$0E&#160;<br/>
$0E&#160;used&#160;as&#160;a&#160;counter.&#160;<br/>
F48B&#160;<br/>
A9&#160;01&#160;<br/>
LDA&#160;#$01&#160;<br/>
F48D&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
F48E&#160;<br/>
E6&#160;0E&#160;<br/>
INC&#160;$0E&#160;<br/>
F490&#160;<br/>
C5&#160;0F&#160;<br/>
CMP&#160;$0F&#160;<br/>
F492&#160;<br/>
90&#160;F9&#160;<br/>
BCC&#160;$F48D&#160;<br/>
F494&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F495&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
<b>STROBE&#160;KEYBOARD.</b>&#160;<br/>
F496&#160;<br/>
08&#160;<br/>
PHP&#160;<br/>
F497&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
F498&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
F499&#160;<br/>
D8&#160;<br/>
CLD&#160;<br/>
F49A&#160;<br/>
AD&#160;08&#160;02&#160;<br/>
LDA&#160;$0208&#160;<br/>
F49D&#160;<br/>
10&#160;1E&#160;<br/>
BPL&#160;$F4BD&#160;<br/>
No&#160;key&#160;pressed&#160;from&#160;last&#160;time.&#160;<br/>
F49F&#160;<br/>
29&#160;87&#160;<br/>
AND&#160;#$87&#160;<br/>
F4A1&#160;<br/>
8D&#160;10&#160;02&#160;<br/>
STA&#160;$0210&#160;<br/>
Test&#160;if&#160;same&#160;key&#160;is&#160;still&#160;<br/>
F4A4&#160;<br/>
AE&#160;0A&#160;02&#160;<br/>
LDX&#160;$020A&#160;<br/>
pressed.&#160;<br/>
F4A7&#160;<br/>
20&#160;61&#160;F5&#160;<br/>
JSR&#160;$F561&#160;<br/>
F4AA&#160;<br/>
CD&#160;10&#160;02&#160;<br/>
CMP&#160;$0210&#160;<br/>
F4AD&#160;<br/>
D0&#160;0E&#160;<br/>
BNE&#160;$F4BD&#160;<br/>
Key&#160;is&#160;no&#160;longer&#160;pressed.&#160;<br/>
F4AF&#160;<br/>
CE&#160;0E&#160;02&#160;<br/>
DEC&#160;$020E&#160;<br/>
Decrement&#160;repeat&#160;counter.&#160;<br/>
F4B2&#160;<br/>
D0&#160;33&#160;<br/>
BNE&#160;$F4E7&#160;<br/>
F4B4&#160;<br/>
AD&#160;4F&#160;02&#160;<br/>
LDA&#160;$024F&#160;<br/>
Reload&#160;repeat&#160;counter&#160;for&#160;<br/>
F4B7&#160;<br/>
8D&#160;0E&#160;02&#160;<br/>
STA&#160;$020E&#160;<br/>
following&#160;repeat.&#160;<br/>
F4BA&#160;<br/>
4C&#160;C6&#160;F4&#160;<br/>
JMP&#160;$F4C6&#160;<br/>
F4BD&#160;<br/>
AD&#160;4E&#160;02&#160;<br/>
LDA&#160;$024E&#160;<br/>
Reset&#160;repeat&#160;counter&#160;for&#160;<br/>
F4C0&#160;<br/>
8D&#160;0E&#160;02&#160;<br/>
STA&#160;$020E&#160;<br/>
first&#160;repeat.&#160;<br/>
F4C3&#160;<br/>
20&#160;23&#160;F5&#160;<br/>
JSR&#160;$F523&#160;<br/>
Find&#160;key.&#160;<br/>
F4C6&#160;<br/>
20&#160;EF&#160;F4&#160;<br/>
JSR&#160;$F4EF&#160;<br/>
Convert&#160;key&#160;to&#160;Ascii&#160;code.&#160;<br/>
F4C9&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
F4CA&#160;<br/>
10&#160;1D&#160;<br/>
BPL&#160;$F4E9&#160;<br/>
Unrecognised&#160;key.&#160;<br/>
F4CC&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
F4CD&#160;<br/>
AD&#160;6A&#160;02&#160;<br/>
LDA&#160;$026A&#160;<br/>
F4D0&#160;<br/>
29&#160;08&#160;<br/>
AND&#160;#$08&#160;<br/>
F4D2&#160;<br/>
D0&#160;0F&#160;<br/>
BNE&#160;$F4E3&#160;<br/>
Keyclick&#160;disabled.&#160;<br/>
F4D4&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
F4D5&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
F4D6&#160;<br/>
C9&#160;A0&#160;<br/>
CMP&#160;#$A0&#160;<br/>
F4D8&#160;<br/>
90&#160;06&#160;<br/>
BCC&#160;$F4E0&#160;<br/>
Change&#160;keyclick&#160;if&#160;CTRL&#160;char.&#160;<br/>
F4DA&#160;<br/>
20&#160;14&#160;FB&#160;<br/>
JSR&#160;$FB14&#160;<br/>
High&#160;pitch&#160;keyclick.&#160;<br/>
F4DD&#160;<br/>
4C&#160;E3&#160;F4&#160;<br/>
JMP&#160;$F4E3&#160;<br/>
F4E0&#160;<br/>
20&#160;2A&#160;FB&#160;<br/>
JSR&#160;$FB2A&#160;<br/>
Low&#160;pitch&#160;keyclick.&#160;<br/>
F4E3&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
F4E4&#160;<br/>
4C&#160;E9&#160;F4&#160;<br/>
JMP&#160;$F4E9&#160;<br/>
F4E7&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
X&#160;holds&#160;the&#160;Ascii&#160;code&#160;of&#160;the&#160;<br/>
F4E9&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
key&#160;pressed&#160;and&#160;bit&#160;7&#160;will&#160;be&#160;<br/>
F4EA&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
set.&#160;If&#160;no&#160;key&#160;is&#160;pressed&#160;then&#160;<br/>
F4EB&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
bit&#160;7&#160;of&#160;X&#160;will&#160;be&#160;clear.&#160;<br/>
F4EC&#160;<br/>
28&#160;<br/>
PLP&#160;<br/>
F4ED&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
A,&#160;Y&#160;and&#160;P&#160;are&#160;unaffected.&#160;<br/>
Pag&#160;&#160;<br/>
e&#160;103&#160;<br/>
<hr/>
<a name=104></a>F4EE&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F4EF&#160;<br/>
AD&#160;09&#160;02&#160;<br/>
LDA&#160;$0209&#160;<br/>
<b>CONVERT&#160;KEY&#160;TO&#160;ASCII&#160;CODE.</b>&#160;<br/>
F4F2&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
Test&#160;if&#160;the&#160;shift&#160;keys&#160;are&#160;<br/>
F4F3&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
pressed.&#160;If&#160;so&#160;then&#160;add&#160;#40&#160;<br/>
F4F5&#160;<br/>
C0&#160;A4&#160;<br/>
CPY&#160;#$A4&#160;<br/>
to&#160;the&#160;keycode.&#160;<br/>
F4F7&#160;<br/>
F0&#160;04&#160;<br/>
BEQ&#160;$F4FD&#160;<br/>
F4F9&#160;<br/>
C0&#160;A7&#160;<br/>
CPY&#160;#$A7&#160;<br/>
F4FB&#160;<br/>
D0&#160;03&#160;<br/>
BNE&#160;$F500&#160;<br/>
F4FD&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
F4FE&#160;<br/>
69&#160;40&#160;<br/>
ADC&#160;#$40&#160;<br/>
F500&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
F501&#160;<br/>
6D&#160;08&#160;02&#160;<br/>
ADC&#160;$0208&#160;<br/>
F504&#160;<br/>
10&#160;1C&#160;<br/>
BPL&#160;$F522&#160;<br/>
F506&#160;<br/>
29&#160;7F&#160;<br/>
AND&#160;#$7F&#160;<br/>
Transfer&#160;keycode&#160;to&#160;X&#160;for&#160;use&#160;<br/>
F508&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
as&#160;an&#160;index&#160;into&#160;look&#160;up&#160;<br/>
F509&#160;<br/>
BD&#160;78&#160;FF&#160;<br/>
LDA&#160;$FF78,X&#160;<br/>
table.&#160;<br/>
F50C&#160;<br/>
2D&#160;0C&#160;02&#160;<br/>
AND&#160;$020C&#160;<br/>
F50F&#160;<br/>
10&#160;03&#160;<br/>
BPL&#160;$F514&#160;<br/>
CAPS&#160;is&#160;off.&#160;<br/>
F511&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
F512&#160;<br/>
E9&#160;20&#160;<br/>
SBC&#160;#$20&#160;<br/>
Alter&#160;code&#160;if&#160;CAPS&#160;is&#160;on.&#160;<br/>
F514&#160;<br/>
29&#160;7F&#160;<br/>
AND&#160;#$7F&#160;<br/>
F516&#160;<br/>
C0&#160;A2&#160;<br/>
CPY&#160;#$A2&#160;<br/>
F518&#160;<br/>
D0&#160;06&#160;<br/>
BNE&#160;$F520&#160;<br/>
CONTROL&#160;key&#160;is&#160;not&#160;pressed.&#160;<br/>
F51A&#160;<br/>
C9&#160;40&#160;<br/>
CMP&#160;#$40&#160;<br/>
Don't&#160;convert&#160;characters&#160;<br/>
F51C&#160;<br/>
30&#160;02&#160;<br/>
BMI&#160;$F520&#160;<br/>
before&#160;@&#160;in&#160;the&#160;Ascii&#160;set&#160;to&#160;<br/>
F51E&#160;<br/>
29&#160;1F&#160;<br/>
AND&#160;#$1F&#160;<br/>
control&#160;characters.&#160;<br/>
F520&#160;<br/>
09&#160;80&#160;<br/>
ORA&#160;#$80&#160;<br/>
Set&#160;bit&#160;7&#160;to&#160;indicate&#160;valid&#160;<br/>
F522&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
Ascii&#160;code.&#160;<br/>
&#160;<br/>F523&#160;<br/>
A9&#160;38&#160;<br/>
LDA&#160;#$38&#160;<br/>
<b>FIND&#160;KEY.</b>&#160;<br/>
F525&#160;<br/>
8D&#160;0D&#160;02&#160;<br/>
STA&#160;$020D&#160;<br/>
Initialise&#160;counters.&#160;<br/>
F528&#160;<br/>
8D&#160;08&#160;02&#160;<br/>
STA&#160;$0208&#160;<br/>
F52B&#160;<br/>
8D&#160;09&#160;02&#160;<br/>
STA&#160;$0209&#160;<br/>
F52E&#160;<br/>
A9&#160;7F&#160;<br/>
LDA&#160;#$7F&#160;<br/>
Set&#160;up&#160;first&#160;column.&#160;<br/>
F530&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
F531&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
F532&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
F533&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
X&#160;holds&#160;column&#160;data.&#160;<br/>
F534&#160;<br/>
A9&#160;07&#160;<br/>
LDA&#160;#$07&#160;<br/>
F536&#160;<br/>
20&#160;61&#160;F5&#160;<br/>
JSR&#160;$F561&#160;<br/>
Send&#160;X&#160;to&#160;8912&#160;I/O&#160;port.&#160;<br/>
F539&#160;<br/>
0D&#160;0D&#160;02&#160;<br/>
ORA&#160;$020D&#160;<br/>
F53C&#160;<br/>
10&#160;12&#160;<br/>
BPL&#160;$F550&#160;<br/>
F53E&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
F540&#160;<br/>
A0&#160;20&#160;<br/>
LDY&#160;#$20&#160;<br/>
F542&#160;<br/>
CC&#160;0D&#160;02&#160;<br/>
CPY&#160;$020D&#160;<br/>
F545&#160;<br/>
D0&#160;01&#160;<br/>
BNE&#160;$F548&#160;<br/>
Column&#160;4&#160;of&#160;KB&#160;not&#160;being&#160;used.&#160;<br/>
F547&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
Save&#160;the&#160;code&#160;of&#160;the&#160;pressed&#160;<br/>
F548&#160;<br/>
9D&#160;08&#160;02&#160;<br/>
STA&#160;$0208,X&#160;<br/>
key,&#160;different&#160;location&#160;is&#160;<br/>
F54B&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
used&#160;if&#160;key&#160;is&#160;SHIFT/CTRL.&#160;<br/>
F54C&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
F54D&#160;<br/>
9D&#160;0A&#160;02&#160;<br/>
STA&#160;$020A,X&#160;<br/>
F550&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
F551&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Shift&#160;the&#160;zero&#160;bit&#160;in&#160;A&#160;to&#160;<br/>
F552&#160;<br/>
6A&#160;<br/>
ROR&#160;A&#160;<br/>
select&#160;the&#160;next&#160;column.&#160;<br/>
F553&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
F554&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
F555&#160;<br/>
AD&#160;0D&#160;02&#160;<br/>
LDA&#160;$020D&#160;<br/>
Decrement&#160;key&#160;counter&#160;by&#160;8&#160;<br/>
F558&#160;<br/>
E9&#160;08&#160;<br/>
SBC&#160;#$08&#160;<br/>
so&#160;as&#160;to&#160;obtain&#160;start&#160;of&#160;next&#160;<br/>
F55A&#160;<br/>
8D&#160;0D&#160;02&#160;<br/>
STA&#160;$020D&#160;<br/>
column.&#160;Continue&#160;until&#160;all&#160;8&#160;<br/>
F55D&#160;<br/>
10&#160;D2&#160;<br/>
BPL&#160;$F531&#160;<br/>
F55F&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
columns&#160;have&#160;been&#160;done.&#160;<br/>
F560&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>
Pag&#160;&#160;<br/>
e&#160;104&#160;<br/>
<hr/>
<a name=105></a>F561&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
<b>TEST&#160;KEYS&#160;IN&#160;COLUMN&#160;HELD&#160;IN&#160;X.</b>&#160;<br/>
F562&#160;<br/>
A9&#160;0E&#160;<br/>
LDA&#160;#$0E&#160;<br/>
Set&#160;A&#160;to&#160;I/O&#160;register&#160;E.&#160;<br/>
F564&#160;<br/>
20&#160;90&#160;F5&#160;<br/>
JSR&#160;$F590&#160;<br/>
Write&#160;X&#160;to&#160;register&#160;A.&#160;<br/>
F567&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
F568&#160;<br/>
29&#160;07&#160;<br/>
AND&#160;#$07&#160;<br/>
F56A&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
Send&#160;content&#160;of&#160;A&#160;to&#160;the&#160;row/&#160;<br/>
F56B&#160;<br/>
8D&#160;11&#160;02&#160;<br/>
STA&#160;$0211&#160;<br/>
multiplexer&#160;which&#160;is&#160;accessed&#160;<br/>
F56E&#160;<br/>
09&#160;B8&#160;<br/>
ORA&#160;#$B8&#160;<br/>
via&#160;bits&#160;0-2&#160;of&#160;port&#160;B&#160;of&#160;the&#160;<br/>
F570&#160;<br/>
8D&#160;00&#160;03&#160;<br/>
STA&#160;$0300&#160;<br/>
6522&#160;(at&#160;$300).&#160;<br/>
F573&#160;<br/>
A0&#160;04&#160;<br/>
LDY&#160;#$04&#160;<br/>
Pause&#160;for&#160;a&#160;while.&#160;<br/>
F575&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
F576&#160;<br/>
D0&#160;FD&#160;<br/>
BNE&#160;$F575&#160;<br/>
F578&#160;<br/>
AD&#160;00&#160;03&#160;<br/>
LDA&#160;$0300&#160;<br/>
Read&#160;in&#160;input&#160;and&#160;test&#160;if&#160;<br/>
F57B&#160;<br/>
29&#160;08&#160;<br/>
AND&#160;#$08&#160;<br/>
that&#160;key&#160;is&#160;pressed.&#160;<br/>
F57D&#160;<br/>
D0&#160;0D&#160;<br/>
BNE&#160;$F58C&#160;<br/>
Key&#160;is&#160;pressed.&#160;<br/>
F57F&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
F580&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
Continue&#160;with&#160;other&#160;rows&#160;<br/>
F581&#160;<br/>
29&#160;07&#160;<br/>
AND&#160;#$07&#160;<br/>
until&#160;a&#160;key&#160;is&#160;found&#160;or&#160;end&#160;<br/>
F583&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
of&#160;row&#160;is&#160;reached.&#160;<br/>
F584&#160;<br/>
CD&#160;11&#160;02&#160;<br/>
CMP&#160;$0211&#160;<br/>
F587&#160;<br/>
D0&#160;E5&#160;<br/>
BNE&#160;$F56E&#160;<br/>
F589&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
Set&#160;bit&#160;7&#160;of&#160;A&#160;to&#160;0&#160;to&#160;<br/>
F58B&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
indicate&#160;key&#160;not&#160;found.&#160;<br/>
&#160;<br/>F58C&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
F58D&#160;<br/>
09&#160;80&#160;<br/>
ORA&#160;#$80&#160;<br/>
Set&#160;bit&#160;7&#160;of&#160;A&#160;to&#160;1&#160;to&#160;<br/>
F58F&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
indicate&#160;key&#160;found.&#160;<br/>
&#160;<br/>F590&#160;<br/>
08&#160;<br/>
PHP&#160;<br/>
<b>WRITE&#160;X&#160;TO&#160;REGISTER&#160;A&#160;0F&#160;8912.</b>&#160;<br/>
F591&#160;<br/>
78&#160;<br/>
SEI&#160;<br/>
F592&#160;<br/>
8D&#160;0F&#160;03&#160;<br/>
STA&#160;$030F&#160;<br/>
Send&#160;A&#160;to&#160;port&#160;A&#160;of&#160;6522.&#160;<br/>
F595&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
F596&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
F597&#160;<br/>
C0&#160;07&#160;<br/>
CPY&#160;#$07&#160;<br/>
If&#160;writing&#160;to&#160;register&#160;7,&#160;set&#160;<br/>
F599&#160;<br/>
D0&#160;02&#160;<br/>
BNE&#160;$F59D&#160;<br/>
1/0&#160;port&#160;to&#160;output.&#160;<br/>
F59B&#160;<br/>
09&#160;40&#160;<br/>
ORA&#160;#$40&#160;<br/>
F59D&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
F59E&#160;<br/>
AD&#160;0C&#160;03&#160;<br/>
LDA&#160;$030C&#160;<br/>
Set&#160;CA2&#160;(BC1&#160;of&#160;8912)&#160;to&#160;1,&#160;<br/>
F5A1&#160;<br/>
09&#160;EE&#160;<br/>
ORA&#160;#$EE&#160;<br/>
set&#160;CB2&#160;(BDIR&#160;of&#160;8912)&#160;to&#160;1.&#160;<br/>
F5A3&#160;<br/>
8D&#160;0C&#160;03&#160;<br/>
STA&#160;$030C&#160;<br/>
8912&#160;latches&#160;the&#160;address.&#160;<br/>
F5A6&#160;<br/>
29&#160;11&#160;<br/>
AND&#160;#$11&#160;<br/>
Set&#160;CA2&#160;and&#160;CB2&#160;to&#160;0,&#160;BC1&#160;and&#160;<br/>
F5A8&#160;<br/>
09&#160;CC&#160;<br/>
ORA&#160;#$CC&#160;<br/>
BDIR&#160;in&#160;inactive&#160;state.&#160;<br/>
F5AA&#160;<br/>
8D&#160;0C&#160;03&#160;<br/>
STA&#160;$030C&#160;<br/>
F5AD&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
F5AE&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
F5AF&#160;<br/>
8D&#160;0F&#160;03&#160;<br/>
STA&#160;$030F&#160;<br/>
Send&#160;data&#160;to&#160;8912&#160;register.&#160;<br/>
F5B2&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
F5B3&#160;<br/>
09&#160;EC&#160;<br/>
ORA&#160;#$EC&#160;<br/>
Set&#160;CA2&#160;to&#160;0&#160;and&#160;CB2&#160;to&#160;1,&#160;<br/>
F5B5&#160;<br/>
8D&#160;0C&#160;03&#160;<br/>
STA&#160;$030C&#160;<br/>
8912&#160;latches&#160;data.&#160;<br/>
F5B8&#160;<br/>
29&#160;11&#160;<br/>
AND&#160;#$11&#160;<br/>
Set&#160;CA2&#160;and&#160;CB2&#160;to&#160;0,&#160;BC1&#160;and&#160;<br/>
F5BA&#160;<br/>
09&#160;CC&#160;<br/>
ORA&#160;#$CC&#160;<br/>
BDIR&#160;in&#160;inactive&#160;state.&#160;<br/>
F5BC&#160;<br/>
8D&#160;0C&#160;03&#160;<br/>
STA&#160;$030C&#160;<br/>
F5BF&#160;<br/>
28&#160;<br/>
PLP&#160;<br/>
F5C0&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F5C1&#160;<br/>
08&#160;<br/>
PHP&#160;<br/>
<b>SEND&#160;CHAR&#160;TO&#160;PRINTER&#160;PORT.</b>&#160;<br/>
F5C2&#160;<br/>
78&#160;<br/>
SEI&#160;<br/>
F5C3&#160;<br/>
8D&#160;01&#160;03&#160;<br/>
STA&#160;$0301&#160;<br/>
Send&#160;A&#160;to&#160;port&#160;A&#160;of&#160;6522.&#160;<br/>
F5C6&#160;<br/>
AD&#160;00&#160;03&#160;<br/>
LDA&#160;$0300&#160;<br/>
F5C9&#160;<br/>
29&#160;EF&#160;<br/>
AND&#160;#$EF&#160;<br/>
Send&#160;the&#160;strobe&#160;line&#160;low.&#160;<br/>
F5CB&#160;<br/>
8D&#160;00&#160;03&#160;<br/>
STA&#160;$0300&#160;<br/>
F5CE&#160;<br/>
AD&#160;00&#160;03&#160;<br/>
LDA&#160;$0300&#160;<br/>
F5D1&#160;<br/>
09&#160;10&#160;<br/>
ORA&#160;#$10&#160;<br/>
Send&#160;the&#160;strobe&#160;line&#160;high.&#160;<br/>
F5D3&#160;<br/>
8D&#160;00&#160;03&#160;<br/>
STA&#160;$0300&#160;<br/>
Pag&#160;&#160;<br/>
e&#160;105&#160;<br/>
<hr/>
<a name=106></a>F5D6&#160;<br/>
28&#160;<br/>
PLP&#160;<br/>
F5D7&#160;<br/>
AD&#160;0D&#160;03&#160;<br/>
LDA&#160;$030D&#160;<br/>
Wait&#160;in&#160;a&#160;loop&#160;until&#160;active&#160;<br/>
F5DA&#160;<br/>
29&#160;02&#160;<br/>
AND&#160;#$02&#160;<br/>
transition&#160;of&#160;CA1&#160;-&#160;<br/>
F5DC&#160;<br/>
F0&#160;F9&#160;<br/>
BEQ&#160;$F5D7&#160;<br/>
acknowledging&#160;the&#160;byte.&#160;<br/>
F5DE&#160;<br/>
AD&#160;0D&#160;03&#160;<br/>
LDA&#160;$030D&#160;<br/>
F5E1&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F5E2&#160;<br/>
CF&#160;CF&#160;CF&#160;CF&#160;A3&#160;CF&#160;A6&#160;CC&#160;<br/>
Offset&#160;table&#160;for&#160;each&#160;of&#160;the&#160;<br/>
F5EA&#160;<br/>
00&#160;27&#160;34&#160;0F&#160;66&#160;99&#160;60&#160;CF&#160;<br/>
control&#160;character&#160;routines.&#160;<br/>
F5F2&#160;<br/>
A7&#160;B3&#160;CF&#160;A8&#160;BE&#160;CF&#160;CF&#160;CF&#160;<br/>
F5FA&#160;<br/>
CF&#160;CF&#160;A5&#160;A5&#160;CF&#160;A4&#160;84&#160;CF&#160;<br/>
&#160;<br/>F602&#160;<br/>
29&#160;1F&#160;<br/>
AND&#160;#$1F&#160;<br/>
<b>CONTROL&#160;CHARACTER&#160;ROUTINE.</b>&#160;<br/>
F604&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
F605&#160;<br/>
BD&#160;E2&#160;F5&#160;<br/>
LDA&#160;$F5E2,X&#160;<br/>
Use&#160;char&#160;code&#160;to&#160;look&#160;up&#160;<br/>
F608&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
routine&#160;offset&#160;and&#160;calculate&#160;<br/>
F609&#160;<br/>
69&#160;2F&#160;<br/>
ADC&#160;#$2F&#160;<br/>
an&#160;indirect&#160;jump&#160;address&#160;at&#160;<br/>
F60B&#160;<br/>
8D&#160;61&#160;02&#160;<br/>
STA&#160;$0261&#160;<br/>
$0261.&#160;<br/>
F60E&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
F610&#160;<br/>
69&#160;F6&#160;<br/>
ADC&#160;#$F6&#160;<br/>
F612&#160;<br/>
8D&#160;62&#160;02&#160;<br/>
STA&#160;$0262&#160;<br/>
F615&#160;<br/>
AD&#160;6A&#160;02&#160;<br/>
LDA&#160;$026A&#160;<br/>
F618&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
F619&#160;<br/>
29&#160;FE&#160;<br/>
AND&#160;#$FE&#160;<br/>
Temporarily&#160;disable&#160;cursor.&#160;<br/>
F61B&#160;<br/>
8D&#160;6A&#160;02&#160;<br/>
STA&#160;$026A&#160;<br/>
F61E&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
F61F&#160;<br/>
29&#160;01&#160;<br/>
AND&#160;#$01&#160;<br/>
F621&#160;<br/>
8D&#160;51&#160;02&#160;<br/>
STA&#160;$0251&#160;<br/>
F624&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
Turn&#160;the&#160;cursor&#160;off.&#160;<br/>
F626&#160;<br/>
20&#160;01&#160;F8&#160;<br/>
JSR&#160;$F801&#160;<br/>
F629&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
F62A&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
F62C&#160;<br/>
6C&#160;61&#160;02&#160;<br/>
JMP&#160;($0261)&#160;<br/>
Jump&#160;to&#160;appropriate&#160;routine.&#160;<br/>
F62F&#160;<br/>
CE&#160;69&#160;02&#160;<br/>
DEC&#160;$0269&#160;<br/>
Cursor&#160;left&#160;one&#160;place.&#160;<br/>
F632&#160;<br/>
30&#160;05&#160;<br/>
BMI&#160;$F639&#160;<br/>
F634&#160;<br/>
20&#160;D7&#160;F7&#160;<br/>
JSR&#160;$F7D7&#160;<br/>
F637&#160;<br/>
D0&#160;40&#160;<br/>
BNE&#160;$F679&#160;<br/>
Finish.&#160;<br/>
F639&#160;<br/>
A9&#160;27&#160;<br/>
LDA&#160;#$27&#160;<br/>
F63B&#160;<br/>
8D&#160;69&#160;02&#160;<br/>
STA&#160;$0269&#160;<br/>
F63E&#160;<br/>
AD&#160;68&#160;02&#160;<br/>
LDA&#160;$0268&#160;<br/>
Cursor&#160;up&#160;one&#160;place.&#160;<br/>
F641&#160;<br/>
C9&#160;01&#160;<br/>
CMP&#160;#$01&#160;<br/>
F643&#160;<br/>
F0&#160;34&#160;<br/>
BEQ&#160;$F679&#160;<br/>
Finish&#160;if&#160;on&#160;top&#160;line.&#160;<br/>
F645&#160;<br/>
CE&#160;68&#160;02&#160;<br/>
DEC&#160;$0268&#160;<br/>
Cursor&#160;row&#160;number.&#160;<br/>
F648&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
Adjust&#160;start&#160;of&#160;line&#160;pointer.&#160;<br/>
F649&#160;<br/>
A5&#160;12&#160;<br/>
LDA&#160;$12&#160;<br/>
F64B&#160;<br/>
E9&#160;28&#160;<br/>
SBC&#160;#$28&#160;<br/>
F64D&#160;<br/>
85&#160;12&#160;<br/>
STA&#160;$12&#160;<br/>
F64F&#160;<br/>
B0&#160;02&#160;<br/>
BCS&#160;$F653&#160;<br/>
F651&#160;<br/>
C6&#160;13&#160;<br/>
DEC&#160;$13&#160;<br/>
F653&#160;<br/>
4C&#160;FE&#160;F6&#160;<br/>
JMP&#160;$F6FE&#160;<br/>
Finish.&#160;<br/>
F656&#160;<br/>
EE&#160;69&#160;02&#160;<br/>
INC&#160;$0269&#160;<br/>
Cursor&#160;right&#160;one&#160;place.&#160;<br/>
F659&#160;<br/>
A2&#160;27&#160;<br/>
LDX&#160;#$27&#160;<br/>
F65B&#160;<br/>
EC&#160;69&#160;02&#160;<br/>
CPX&#160;$0269&#160;<br/>
F65E&#160;<br/>
10&#160;19&#160;<br/>
BPL&#160;$F679&#160;<br/>
F660&#160;<br/>
20&#160;0D&#160;F7&#160;<br/>
JSR&#160;$F70D&#160;<br/>
F663&#160;<br/>
AD&#160;68&#160;02&#160;<br/>
LDA&#160;$0268&#160;<br/>
Cursor&#160;down&#160;one&#160;place.&#160;<br/>
F666&#160;<br/>
CD&#160;7E&#160;02&#160;<br/>
CMP&#160;$027E&#160;<br/>
F669&#160;<br/>
F0&#160;11&#160;<br/>
BEQ&#160;$F67C&#160;<br/>
F66B&#160;<br/>
EE&#160;68&#160;02&#160;<br/>
INC&#160;$0268&#160;<br/>
Cursor&#160;row&#160;number.&#160;<br/>
F66E&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
Adjust&#160;start&#160;of&#160;line&#160;pointer.&#160;<br/>
F66F&#160;<br/>
A5&#160;12&#160;<br/>
LDA&#160;$12&#160;<br/>
F671&#160;<br/>
69&#160;28&#160;<br/>
ADC&#160;#$28&#160;<br/>
F673&#160;<br/>
85&#160;12&#160;<br/>
STA&#160;$12&#160;<br/>
F675&#160;<br/>
90&#160;02&#160;<br/>
BCC&#160;$F679&#160;<br/>
Pag&#160;&#160;<br/>
e&#160;106&#160;<br/>
<hr/>
<a name=107></a>F677&#160;<br/>
E6&#160;13&#160;<br/>
INC&#160;$13&#160;<br/>
F679&#160;<br/>
4C&#160;FE&#160;F6&#160;<br/>
JMP&#160;$F6FE&#160;<br/>
Finish.&#160;<br/>
F67C&#160;<br/>
20&#160;5D&#160;F3&#160;<br/>
JSR&#160;$F35D&#160;<br/>
F67F&#160;<br/>
A2&#160;06&#160;<br/>
LDX&#160;#$06&#160;<br/>
F681&#160;<br/>
BD&#160;77&#160;02&#160;<br/>
LDA&#160;$0277,X&#160;<br/>
F684&#160;<br/>
95&#160;0B&#160;<br/>
STA&#160;$0B,X&#160;<br/>
F686&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
F687&#160;<br/>
D0&#160;F8&#160;<br/>
BNE&#160;$F681&#160;<br/>
F689&#160;<br/>
20&#160;C4&#160;ED&#160;<br/>
JSR&#160;$EDC4&#160;<br/>
Block&#160;transfer.&#160;<br/>
F68C&#160;<br/>
20&#160;6E&#160;F3&#160;<br/>
JSR&#160;$F36E&#160;<br/>
F68F&#160;<br/>
20&#160;1A&#160;F7&#160;<br/>
JSR&#160;$F71A&#160;<br/>
CTRL&#160;N.&#160;Clear&#160;current&#160;row.&#160;<br/>
F692&#160;<br/>
4C&#160;FE&#160;F6&#160;<br/>
JMP&#160;$F6FE&#160;<br/>
Finish.&#160;<br/>
F695&#160;<br/>
AE&#160;7E&#160;02&#160;<br/>
LDX&#160;$027E&#160;<br/>
CTRL&#160;L.&#160;Clear&#160;screen.&#160;<br/>
F698&#160;<br/>
AD&#160;7A&#160;02&#160;<br/>
LDA&#160;$027A&#160;<br/>
Reset&#160;row&#160;start&#160;address&#160;to&#160;top&#160;<br/>
F69B&#160;<br/>
85&#160;12&#160;<br/>
STA&#160;$12&#160;<br/>
line.&#160;<br/>
F69D&#160;<br/>
AD&#160;7B&#160;02&#160;<br/>
LDA&#160;$027B&#160;<br/>
F6A0&#160;<br/>
85&#160;13&#160;<br/>
STA&#160;$13&#160;<br/>
F6A2&#160;<br/>
20&#160;1A&#160;F7&#160;<br/>
JSR&#160;$F71A&#160;<br/>
Clear&#160;current&#160;line.&#160;<br/>
F6A5&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
F6A6&#160;<br/>
A5&#160;12&#160;<br/>
LDA&#160;$12&#160;<br/>
Adjust&#160;start&#160;of&#160;row&#160;pointer.&#160;<br/>
F6A8&#160;<br/>
69&#160;28&#160;<br/>
ADC&#160;#$28&#160;<br/>
F6AA&#160;<br/>
85&#160;12&#160;<br/>
STA&#160;$12&#160;<br/>
F6AC&#160;<br/>
90&#160;02&#160;<br/>
BCC&#160;$F6B0&#160;<br/>
F6AE&#160;<br/>
E6&#160;13&#160;<br/>
INC&#160;$13&#160;<br/>
F6B0&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
Clear&#160;lines&#160;until&#160;whole&#160;<br/>
F6B1&#160;<br/>
D0&#160;EF&#160;<br/>
BNE&#160;$F6A2&#160;<br/>
screen&#160;is&#160;done.&#160;<br/>
F6B3&#160;<br/>
20&#160;0D&#160;F7&#160;<br/>
JSR&#160;$F70D&#160;<br/>
Set&#160;cursor&#160;to&#160;start&#160;of&#160;line.&#160;<br/>
F6B6&#160;<br/>
A9&#160;01&#160;<br/>
LDA&#160;#$01&#160;<br/>
Set&#160;cursor&#160;row&#160;to&#160;top&#160;line.&#160;<br/>
F6B8&#160;<br/>
8D&#160;68&#160;02&#160;<br/>
STA&#160;$0268&#160;<br/>
F6BB&#160;<br/>
AD&#160;7A&#160;02&#160;<br/>
LDA&#160;$027A&#160;<br/>
Set&#160;row&#160;start&#160;address&#160;to&#160;that&#160;<br/>
F6BE&#160;<br/>
85&#160;12&#160;<br/>
STA&#160;$12&#160;<br/>
of&#160;top&#160;line&#160;of&#160;text.&#160;<br/>
F6C0&#160;<br/>
AD&#160;7B&#160;02&#160;<br/>
LDA&#160;$027B&#160;<br/>
F6C3&#160;<br/>
85&#160;13&#160;<br/>
STA&#160;$13&#160;<br/>
F6C5&#160;<br/>
4C&#160;FE&#160;F6&#160;<br/>
JMP&#160;$F6FE&#160;<br/>
Finish.&#160;<br/>
F6C8&#160;<br/>
20&#160;0D&#160;F7&#160;<br/>
JSR&#160;$F70D&#160;<br/>
CTRL&#160;M.&#160;Carriage&#160;return.&#160;<br/>
F6CB&#160;<br/>
8E&#160;53&#160;02&#160;<br/>
STX&#160;$0253&#160;<br/>
F6CE&#160;<br/>
4C&#160;FE&#160;F6&#160;<br/>
JMP&#160;$F6FE&#160;<br/>
Finish.&#160;<br/>
F6D1&#160;<br/>
2A&#160;<br/>
ROL&#160;A&#160;<br/>
F6D2&#160;<br/>
2A&#160;<br/>
ROL&#160;A&#160;<br/>
CTRL&#160;D.&#160;<br/>
F6D3&#160;<br/>
2A&#160;<br/>
ROL&#160;A&#160;<br/>
CTRL&#160;].&#160;<br/>
F6D4&#160;<br/>
2A&#160;<br/>
ROL&#160;A&#160;<br/>
ESCAPE.&#160;<br/>
F6D5&#160;<br/>
2A&#160;<br/>
ROL&#160;A&#160;<br/>
CTRL&#160;F.&#160;<br/>
F6D6&#160;<br/>
2A&#160;<br/>
ROL&#160;A&#160;<br/>
CTRL&#160;P.&#160;<br/>
F6D7&#160;<br/>
2A&#160;<br/>
ROL&#160;A&#160;<br/>
CTRL&#160;S.&#160;<br/>
F6D8&#160;<br/>
2A&#160;<br/>
ROL&#160;A&#160;<br/>
F6D9&#160;<br/>
4D&#160;6A&#160;02&#160;<br/>
EOR&#160;$026A&#160;<br/>
Toggle&#160;appropriate&#160;flag&#160;in&#160;<br/>
F6DC&#160;<br/>
8D&#160;6A&#160;02&#160;<br/>
STA&#160;$026A&#160;<br/>
$026A.&#160;<br/>
F6DF&#160;<br/>
4C&#160;FE&#160;F6&#160;<br/>
JMP&#160;$F6FE&#160;<br/>
Finish.&#160;<br/>
F6E2&#160;<br/>
AD&#160;51&#160;02&#160;<br/>
LDA&#160;$0251&#160;<br/>
CTRL&#160;Q.&#160;<br/>
F6E5&#160;<br/>
49&#160;01&#160;<br/>
EOR&#160;#$01&#160;<br/>
F6E7&#160;<br/>
8D&#160;51&#160;02&#160;<br/>
STA&#160;$0251&#160;<br/>
F6EA&#160;<br/>
4C&#160;FE&#160;F6&#160;<br/>
JMP&#160;$F6FE&#160;<br/>
Finish.&#160;<br/>
F6ED&#160;<br/>
AD&#160;0C&#160;02&#160;<br/>
LDA&#160;$020C&#160;<br/>
CTRL&#160;T.&#160;<br/>
F6F0&#160;<br/>
49&#160;80&#160;<br/>
EOR&#160;#$80&#160;<br/>
Invert&#160;CAPS&#160;flag.&#160;<br/>
F6F2&#160;<br/>
8D&#160;0C&#160;02&#160;<br/>
STA&#160;$020C&#160;<br/>
F6F5&#160;<br/>
20&#160;5A&#160;F7&#160;<br/>
JSR&#160;$F75A&#160;<br/>
Write&#160;message&#160;to&#160;status&#160;line.&#160;<br/>
F6F8&#160;<br/>
4C&#160;FE&#160;F6&#160;<br/>
JMP&#160;$F6FE&#160;<br/>
Finish.&#160;<br/>
F6FB&#160;<br/>
20&#160;9F&#160;FA&#160;<br/>
JSR&#160;$FA9F&#160;<br/>
CTRL&#160;G.&#160;Calls&#160;PING&#160;routine.&#160;<br/>
F6FE&#160;<br/>
AD&#160;6A&#160;02&#160;<br/>
LDA&#160;$026A&#160;<br/>
All&#160;control&#160;char&#160;routines&#160;<br/>
F701&#160;<br/>
0D&#160;51&#160;02&#160;<br/>
ORA&#160;$0251&#160;<br/>
end&#160;here&#160;by&#160;restoring&#160;the&#160;<br/>
F704&#160;<br/>
8D&#160;6A&#160;02&#160;<br/>
STA&#160;$026A&#160;<br/>
original&#160;cursor&#160;status.&#160;<br/>
F707&#160;<br/>
A9&#160;01&#160;<br/>
LDA&#160;#$01&#160;<br/>
F709&#160;<br/>
20&#160;01&#160;F8&#160;<br/>
JSR&#160;$F801&#160;<br/>
F70C&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
Pag&#160;&#160;<br/>
e&#160;107&#160;<br/>
<hr/>
<a name=108></a>&#160;<br/>F70D&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
This&#160;routine&#160;sets&#160;the&#160;cursor&#160;<br/>
F70F&#160;<br/>
20&#160;DE&#160;F7&#160;<br/>
JSR&#160;$F7DE&#160;<br/>
to&#160;the&#160;start&#160;of&#160;the&#160;line,&#160;<br/>
F712&#160;<br/>
D0&#160;02&#160;<br/>
BNE&#160;$F716&#160;<br/>
taking&#160;in&#160;to&#160;account&#160;if&#160;the&#160;<br/>
F714&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
screen&#160;is&#160;protected&#160;or&#160;not.&#160;<br/>
F715&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
F716&#160;<br/>
8E&#160;69&#160;02&#160;<br/>
STX&#160;$0269&#160;<br/>
F719&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F71A&#160;<br/>
A0&#160;27&#160;<br/>
LDY&#160;#$27&#160;<br/>
<b>CLEAR&#160;CURRENT&#160;LINE.</b>&#160;<br/>
F71C&#160;<br/>
A9&#160;20&#160;<br/>
LDA&#160;#$20&#160;<br/>
This&#160;routine&#160;writes&#160;space&#160;<br/>
F71E&#160;<br/>
91&#160;12&#160;<br/>
STA&#160;($12),Y&#160;<br/>
characters&#160;to&#160;the&#160;whole&#160;line&#160;<br/>
F720&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
and&#160;then&#160;wites&#160;the&#160;paper&#160;and&#160;<br/>
F721&#160;<br/>
10&#160;FB&#160;<br/>
BPL&#160;$F71E&#160;<br/>
ink&#160;colours&#160;to&#160;the&#160;first&#160;two&#160;<br/>
F723&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
columns.&#160;<br/>
F725&#160;<br/>
AD&#160;6B&#160;02&#160;<br/>
LDA&#160;$026B&#160;<br/>
F728&#160;<br/>
91&#160;12&#160;<br/>
STA&#160;($12),Y&#160;<br/>
F72A&#160;<br/>
AD&#160;6C&#160;02&#160;<br/>
LDA&#160;$026C&#160;<br/>
F72D&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
F72E&#160;<br/>
91&#160;12&#160;<br/>
STA&#160;($12),Y&#160;<br/>
F730&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F731&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
This&#160;routine&#160;multiplies&#160;the&#160;<br/>
F733&#160;<br/>
8C&#160;63&#160;02&#160;<br/>
STY&#160;$0263&#160;<br/>
content&#160;of&#160;the&#160;accumulator&#160;by&#160;<br/>
F736&#160;<br/>
8D&#160;64&#160;02&#160;<br/>
STA&#160;$0264&#160;<br/>
#28&#160;(40).&#160;Y&#160;holds&#160;the&#160;high&#160;<br/>
F739&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
byte&#160;of&#160;the&#160;result.&#160;The&#160;page&#160;<br/>
F73A&#160;<br/>
2E&#160;63&#160;02&#160;<br/>
ROL&#160;$0263&#160;<br/>
2&#160;locations&#160;store&#160;temporary&#160;<br/>
F73D&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
results.&#160;<br/>
F73E&#160;<br/>
2E&#160;63&#160;02&#160;<br/>
ROL&#160;$0263&#160;<br/>
F741&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
F742&#160;<br/>
6D&#160;64&#160;02&#160;<br/>
ADC&#160;$0264&#160;<br/>
The&#160;result&#160;is&#160;calculated&#160;by&#160;<br/>
F745&#160;<br/>
90&#160;03&#160;<br/>
BCC&#160;$F74A&#160;<br/>
adding&#160;4&#160;x&#160;A&#160;to&#160;A&#160;and&#160;then&#160;<br/>
F747&#160;<br/>
EE&#160;63&#160;02&#160;<br/>
INC&#160;$0263&#160;<br/>
double&#160;the&#160;result.&#160;<br/>
F74A&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
F74B&#160;<br/>
2E&#160;63&#160;02&#160;<br/>
ROL&#160;$0263&#160;<br/>
F74E&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
F74F&#160;<br/>
2E&#160;63&#160;02&#160;<br/>
ROL&#160;$0263&#160;<br/>
F752&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
F753&#160;<br/>
2E&#160;63&#160;02&#160;<br/>
ROL&#160;$0263&#160;<br/>
F756&#160;<br/>
AC&#160;63&#160;02&#160;<br/>
LDY&#160;$0263&#160;<br/>
F759&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F75A&#160;<br/>
AD&#160;0C&#160;02&#160;<br/>
LDA&#160;$020C&#160;<br/>
This&#160;routine&#160;writes&#160;a&#160;message&#160;<br/>
F75D&#160;<br/>
10&#160;07&#160;<br/>
BPL&#160;$F766&#160;<br/>
to&#160;the&#160;status&#160;line&#160;depending&#160;<br/>
F75F&#160;<br/>
A9&#160;70&#160;<br/>
LDA&#160;#$70&#160;<br/>
on&#160;the&#160;state&#160;of&#160;the&#160;CAPS&#160;flag.&#160;<br/>
F761&#160;<br/>
A0&#160;F7&#160;<br/>
LDY&#160;#$F7&#160;<br/>
F763&#160;<br/>
4C&#160;6A&#160;F7&#160;<br/>
JMP&#160;$F76A&#160;<br/>
If&#160;CAPS&#160;is&#160;on&#160;then&#160;&#34;CAPS&#34;&#160;is&#160;<br/>
F766&#160;<br/>
A9&#160;76&#160;<br/>
LDA&#160;#$76&#160;<br/>
written&#160;to&#160;screen&#160;otherwise&#160;<br/>
F768&#160;<br/>
A0&#160;F7&#160;<br/>
LDY&#160;#$F7&#160;<br/>
cleared&#160;by&#160;writing&#160;spaces&#160;in&#160;<br/>
F76A&#160;<br/>
A2&#160;23&#160;<br/>
LDX&#160;#$23&#160;<br/>
same&#160;place.&#160;<br/>
F76C&#160;<br/>
20&#160;65&#160;F8&#160;<br/>
JSR&#160;$F865&#160;<br/>
F76F&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F770&#160;<br/>
07&#160;43&#160;41&#160;50&#160;53&#160;00&#160;<br/>
Data&#160;for&#160;the&#160;above&#160;routine.&#160;<br/>
F776&#160;<br/>
07&#160;20&#160;20&#160;20&#160;20&#160;00&#160;<br/>
&#160;<br/>F77C&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
<b>PRINT&#160;CHAR&#160;TO&#160;SCREEN&#160;(in&#160;X).</b>&#160;<br/>
F77D&#160;<br/>
08&#160;<br/>
PHP&#160;<br/>
F77E&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
Save&#160;all&#160;registers&#160;on&#160;stack.&#160;<br/>
F77F&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
F780&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
F781&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
Leave&#160;a&#160;copy&#160;of&#160;X&#160;in&#160;A.&#160;<br/>
F782&#160;<br/>
D8&#160;<br/>
CLD&#160;<br/>
F783&#160;<br/>
E0&#160;13&#160;<br/>
CPX&#160;#$13&#160;<br/>
Test&#160;for&#160;CTRL&#160;S,&#160;T,&#160;and&#160;F.&#160;<br/>
Pag&#160;&#160;<br/>
e&#160;108&#160;<br/>
<hr/>
<a name=109></a>F785&#160;<br/>
F0&#160;46&#160;<br/>
BEQ&#160;$F7CD&#160;<br/>
If&#160;either&#160;of&#160;them&#160;are&#160;in&#160;X&#160;<br/>
F787&#160;<br/>
E0&#160;14&#160;<br/>
CPX&#160;#$14&#160;<br/>
then&#160;go&#160;to&#160;CTRL&#160;CHAR&#160;routine.&#160;<br/>
F789&#160;<br/>
F0&#160;42&#160;<br/>
BEQ&#160;$F7CD&#160;<br/>
F78B&#160;<br/>
E0&#160;06&#160;<br/>
CPX&#160;#$06&#160;<br/>
F78D&#160;<br/>
F0&#160;3E&#160;<br/>
BEQ&#160;$F7CD&#160;<br/>
F78F&#160;<br/>
AD&#160;6A&#160;02&#160;<br/>
LDA&#160;$026A&#160;<br/>
F792&#160;<br/>
29&#160;02&#160;<br/>
AND&#160;#$02&#160;<br/>
F794&#160;<br/>
F0&#160;3A&#160;<br/>
BEQ&#160;$F7D0&#160;<br/>
Screen&#160;printing&#160;inhibited.&#160;<br/>
F796&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
F797&#160;<br/>
C9&#160;20&#160;<br/>
CMP&#160;#$20&#160;<br/>
F799&#160;<br/>
90&#160;32&#160;<br/>
BCC&#160;$F7CD&#160;<br/>
Control&#160;character&#160;present.&#160;<br/>
F79B&#160;<br/>
AD&#160;6A&#160;02&#160;<br/>
LDA&#160;$026A&#160;<br/>
Test&#160;and&#160;branch&#160;if&#160;the&#160;<br/>
F79E&#160;<br/>
29&#160;10&#160;<br/>
AND&#160;#$10&#160;<br/>
ESCAPE&#160;key&#160;was&#160;not&#160;the&#160;last&#160;<br/>
F7A0&#160;<br/>
F0&#160;13&#160;<br/>
BEQ&#160;$F7B5&#160;<br/>
printed.&#160;<br/>
F7A2&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
If&#160;character&#160;after&#160;ESCAPE&#160;is&#160;<br/>
F7A3&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
a&#160;CTRL&#160;character&#160;then&#160;print&#160;a&#160;<br/>
F7A4&#160;<br/>
E9&#160;40&#160;<br/>
SBC&#160;#$40&#160;<br/>
space&#160;instead.&#160;Otherwise&#160;<br/>
F7A6&#160;<br/>
30&#160;09&#160;<br/>
BMI&#160;$F7B1&#160;<br/>
convert&#160;key&#160;to&#160;attribute&#160;code&#160;<br/>
F7A8&#160;<br/>
29&#160;1F&#160;<br/>
AND&#160;#$1F&#160;<br/>
and&#160;print&#160;to&#160;screen.&#160;<br/>
F7AA&#160;<br/>
20&#160;E4&#160;F7&#160;<br/>
JSR&#160;$F7E4&#160;<br/>
F7AD&#160;<br/>
A9&#160;1B&#160;<br/>
LDA&#160;#$1B&#160;<br/>
F7AF&#160;<br/>
D0&#160;1C&#160;<br/>
BNE&#160;$F7CD&#160;<br/>
F7B1&#160;<br/>
A9&#160;20&#160;<br/>
LDA&#160;#$20&#160;<br/>
F7B3&#160;<br/>
10&#160;F5&#160;<br/>
BPL&#160;$F7AA&#160;<br/>
F7B5&#160;<br/>
E0&#160;7F&#160;<br/>
CPX&#160;#$7F&#160;<br/>
Character&#160;is&#160;DELete.&#160;<br/>
F7B7&#160;<br/>
F0&#160;08&#160;<br/>
BEQ&#160;$F7C1&#160;<br/>
F7B9&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
F7BA&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
&#160;<br/>F7BB&#160;<br/>
20&#160;E4&#160;F7&#160;<br/>
JSR&#160;$F7E4&#160;<br/>
Print&#160;accumulator&#160;on&#160;screen.&#160;<br/>
F7BE&#160;<br/>
4C&#160;D0&#160;F7&#160;<br/>
JMP&#160;$F7D0&#160;<br/>
F7C1&#160;<br/>
A9&#160;08&#160;<br/>
LDA&#160;#$08&#160;<br/>
DEL&#160;is&#160;done&#160;by&#160;moving&#160;cursor&#160;<br/>
F7C3&#160;<br/>
20&#160;02&#160;F6&#160;<br/>
JSR&#160;$F602&#160;<br/>
back&#160;1&#160;place&#160;and&#160;printing&#160;a&#160;<br/>
F7C6&#160;<br/>
A9&#160;20&#160;<br/>
LDA&#160;#$20&#160;<br/>
space&#160;character,&#160;and&#160;moving&#160;<br/>
F7C8&#160;<br/>
20&#160;E4&#160;F7&#160;<br/>
JSR&#160;$F7E4&#160;<br/>
cursor&#160;back&#160;again&#160;1&#160;place.&#160;<br/>
F7CB&#160;<br/>
A9&#160;08&#160;<br/>
LDA&#160;#$08&#160;<br/>
F7CD&#160;<br/>
20&#160;02&#160;F6&#160;<br/>
JSR&#160;$F602&#160;<br/>
F7D0&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
F7D1&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
F7D2&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
Registers&#160;not&#160;affected&#160;at&#160;<br/>
F7D3&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
end&#160;of&#160;the&#160;routine.&#160;<br/>
F7D4&#160;<br/>
28&#160;<br/>
PLP&#160;<br/>
F7D5&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
F7D6&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F7D7&#160;<br/>
AD&#160;69&#160;02&#160;<br/>
LDA&#160;$0269&#160;<br/>
This&#160;routine&#160;sets&#160;1=1&#160;if&#160;the&#160;<br/>
F7DA&#160;<br/>
29&#160;FE&#160;<br/>
AND&#160;#$FE&#160;<br/>
cursor&#160;is&#160;on&#160;columns&#160;1&#160;and&#160;2&#160;<br/>
F7DC&#160;<br/>
D0&#160;05&#160;<br/>
BNE&#160;$F7E3&#160;<br/>
of&#160;a&#160;protected&#160;screen.&#160;<br/>
F7DE&#160;<br/>
AD&#160;6A&#160;02&#160;<br/>
LDA&#160;$026A&#160;<br/>
F7E1&#160;<br/>
29&#160;20&#160;<br/>
AND&#160;#$20&#160;<br/>
F7E3&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F7E4&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
<b>PRINT&#160;ACCUMULATOR&#160;ON&#160;SCREEN.</b>&#160;<br/>
F7E5&#160;<br/>
AC&#160;69&#160;02&#160;<br/>
LDY&#160;$0269&#160;<br/>
F7E8&#160;<br/>
91&#160;12&#160;<br/>
STA&#160;($12),Y&#160;<br/>
F7EA&#160;<br/>
2C&#160;6A&#160;02&#160;<br/>
BIT&#160;$026A&#160;<br/>
F7ED&#160;<br/>
50&#160;0B&#160;<br/>
BVC&#160;$F7FA&#160;<br/>
Double&#160;height&#160;flag&#160;is&#160;clear.&#160;<br/>
F7EF&#160;<br/>
AD&#160;69&#160;02&#160;<br/>
LDA&#160;$0269&#160;<br/>
F7F2&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
In&#160;double&#160;height&#160;mode&#160;the&#160;<br/>
F7F3&#160;<br/>
69&#160;28&#160;<br/>
ADC&#160;#$28&#160;<br/>
char&#160;is&#160;printed&#160;on&#160;the&#160;line&#160;<br/>
F7F5&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
below&#160;in&#160;the&#160;same&#160;column.&#160;<br/>
F7F6&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
F7F7&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
F7F8&#160;<br/>
91&#160;12&#160;<br/>
STA&#160;($12),Y&#160;<br/>
Put&#160;A&#160;on&#160;screen.&#160;<br/>
Pag&#160;&#160;<br/>
e&#160;109&#160;<br/>
<hr/>
<a name=110></a>F7FA&#160;<br/>
A9&#160;09&#160;<br/>
LDA&#160;#$09&#160;<br/>
Move&#160;cursor&#160;forward&#160;by&#160;1&#160;<br/>
F7FC&#160;<br/>
20&#160;02&#160;F6&#160;<br/>
JSR&#160;$F602&#160;<br/>
column.&#160;<br/>
F7FF&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
F800&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F801&#160;<br/>
2D&#160;6A&#160;02&#160;<br/>
AND&#160;$026A&#160;<br/>
This&#160;routine&#160;turns&#160;the&#160;cursor&#160;<br/>
F804&#160;<br/>
4A&#160;<br/>
LSR&#160;A&#160;<br/>
on&#160;or&#160;off&#160;depending&#160;on&#160;value&#160;<br/>
F805&#160;<br/>
6A&#160;<br/>
ROR&#160;A&#160;<br/>
in&#160;A.&#160;0&#160;for&#160;off,&#160;1&#160;for&#160;on.&#160;<br/>
F806&#160;<br/>
8D&#160;65&#160;02&#160;<br/>
STA&#160;$0265&#160;<br/>
Cursor&#160;being&#160;turned&#160;on&#160;is&#160;<br/>
F809&#160;<br/>
AC&#160;69&#160;02&#160;<br/>
LDY&#160;$0269&#160;<br/>
subject&#160;to&#160;cursor&#160;flag&#160;being&#160;<br/>
F80C&#160;<br/>
B1&#160;12&#160;<br/>
LDA&#160;($12),Y&#160;<br/>
enabled.&#160;<br/>
F80E&#160;<br/>
29&#160;7F&#160;<br/>
AND&#160;#$7F&#160;<br/>
F810&#160;<br/>
0D&#160;65&#160;02&#160;<br/>
ORA&#160;$0265&#160;<br/>
F813&#160;<br/>
91&#160;12&#160;<br/>
STA&#160;($12),Y&#160;<br/>
F815&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F816&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
<b>GENERATE&#160;ALT.&#160;CHAR&#160;SET.</b>&#160;<br/>
F818&#160;<br/>
85&#160;0C&#160;<br/>
STA&#160;$0C&#160;<br/>
F81A&#160;<br/>
A9&#160;B9&#160;<br/>
LDA&#160;#$B9&#160;<br/>
The&#160;set&#160;is&#160;generated&#160;in&#160;two&#160;<br/>
F81C&#160;<br/>
85&#160;0D&#160;<br/>
STA&#160;$0D&#160;<br/>
halves&#160;with&#160;A&#160;counting&#160;from&#160;<br/>
F81E&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
#0&#160;to&#160;#1F&#160;and&#160;then&#160;#20&#160;to&#160;#3F.&#160;<br/>
F820&#160;<br/>
20&#160;2D&#160;F8&#160;<br/>
JSR&#160;$F82D&#160;<br/>
F823&#160;<br/>
A0&#160;BA&#160;<br/>
LDY&#160;#$BA&#160;<br/>
The&#160;set&#160;is&#160;dumped&#160;between&#160;<br/>
F825&#160;<br/>
84&#160;0D&#160;<br/>
STY&#160;$0D&#160;<br/>
$B900&#160;and&#160;$BAFF.&#160;<br/>
F827&#160;<br/>
A9&#160;20&#160;<br/>
LDA&#160;#$20&#160;<br/>
F829&#160;<br/>
20&#160;2D&#160;F8&#160;<br/>
JSR&#160;$F82D&#160;<br/>
F82C&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F82D&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
This&#160;and&#160;the&#160;following&#160;<br/>
F82F&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
routine&#160;create&#160;the&#160;alternate&#160;<br/>
F830&#160;<br/>
20&#160;54&#160;F8&#160;<br/>
JSR&#160;$F854&#160;<br/>
set&#160;by&#160;producing&#160;all&#160;<br/>
F833&#160;<br/>
91&#160;0C&#160;<br/>
STA&#160;($0C),Y&#160;<br/>
combinations&#160;of&#160;data&#160;and&#160;<br/>
F835&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
placing&#160;it&#160;in&#160;memory.&#160;<br/>
F836&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
F837&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
F838&#160;<br/>
20&#160;52&#160;F8&#160;<br/>
JSR&#160;$F852&#160;<br/>
F83B&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
F83C&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
F83D&#160;<br/>
20&#160;50&#160;F8&#160;<br/>
JSR&#160;$F850&#160;<br/>
F840&#160;<br/>
91&#160;0C&#160;<br/>
STA&#160;($0C),Y&#160;<br/>
F842&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
F843&#160;<br/>
C0&#160;00&#160;<br/>
CPY&#160;#$00&#160;<br/>
F845&#160;<br/>
F0&#160;07&#160;<br/>
BEQ&#160;$F84E&#160;<br/>
F847&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
F848&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
F849&#160;<br/>
69&#160;01&#160;<br/>
ADC&#160;#$01&#160;<br/>
F84B&#160;<br/>
4C&#160;2F&#160;F8&#160;<br/>
JMP&#160;$F82F&#160;<br/>
F84E&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
F84F&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F850&#160;<br/>
4A&#160;<br/>
LSR&#160;A&#160;<br/>
Part&#160;of&#160;the&#160;routine&#160;to&#160;<br/>
F851&#160;<br/>
4A&#160;<br/>
LSR&#160;A&#160;<br/>
produce&#160;the&#160;alternate&#160;char.&#160;<br/>
F852&#160;<br/>
4A&#160;<br/>
LSR&#160;A&#160;<br/>
set.&#160;Has&#160;2&#160;entry&#160;points,&#160;at&#160;<br/>
F853&#160;<br/>
4A&#160;<br/>
LSR&#160;A&#160;<br/>
$F850&#160;and&#160;$F854&#160;which&#160;copy&#160;<br/>
F854&#160;<br/>
29&#160;03&#160;<br/>
AND&#160;#$03&#160;<br/>
the&#160;data&#160;into&#160;two&#160;successive&#160;<br/>
F856&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
memory&#160;locations&#160;<br/>
F857&#160;<br/>
BD&#160;61&#160;F8&#160;<br/>
LDA&#160;$F861,X&#160;<br/>
F85A&#160;<br/>
91&#160;0C&#160;<br/>
STA&#160;($0C),Y&#160;<br/>
F85C&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
F85D&#160;<br/>
91&#160;0C&#160;<br/>
STA&#160;($0C),Y&#160;<br/>
F85F&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
F860&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F861&#160;<br/>
00&#160;38&#160;07&#160;3F&#160;&#160;<br/>
Data&#160;for&#160;alt.&#160;char.&#160;set.&#160;<br/>
Pag&#160;&#160;<br/>
e&#160;110&#160;<br/>
<hr/>
<a name=111></a>&#160;<br/>F865&#160;<br/>
85&#160;0C&#160;<br/>
STA&#160;$0C&#160;<br/>
<b>PRINT&#160;TO&#160;STATUS&#160;LINE.</b>&#160;<br/>
F867&#160;<br/>
84&#160;0D&#160;<br/>
STY&#160;$0D&#160;<br/>
Subject&#160;to&#160;the&#160;content&#160;of&#160;<br/>
F869&#160;<br/>
AD&#160;1F&#160;02&#160;<br/>
LDA&#160;$021F&#160;<br/>
$021F&#160;being&#160;zero,&#160;the&#160;message&#160;<br/>
F86C&#160;<br/>
D0&#160;0D&#160;<br/>
BNE&#160;$F87B&#160;<br/>
whose&#160;start&#160;address&#160;is&#160;held&#160;<br/>
F86E&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
in&#160;A&#160;(low)&#160;and&#160;Y&#160;(high)&#160;is&#160;<br/>
F870&#160;<br/>
B1&#160;0C&#160;<br/>
LDA&#160;($0C),Y&#160;<br/>
printed&#160;on&#160;to&#160;the&#160;status&#160;line&#160;<br/>
F872&#160;<br/>
F0&#160;07&#160;<br/>
BEQ&#160;$F87B&#160;<br/>
of&#160;the&#160;screen&#160;starting&#160;at&#160;<br/>
F874&#160;<br/>
9D&#160;80&#160;BB&#160;<br/>
STA&#160;$BB80,X&#160;<br/>
$BB80.&#160;Message&#160;must&#160;terminate&#160;<br/>
F877&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
with&#160;a&#160;zero&#160;byte.&#160;<br/>
F878&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
F879&#160;<br/>
D0&#160;F5&#160;<br/>
BNE&#160;$F870&#160;<br/>
F87B&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F87C&#160;<br/>
4C&#160;7C&#160;F7&#160;<br/>
JMP&#160;$F77C&#160;<br/>
This&#160;is&#160;data&#160;that&#160;is&#160;copied&#160;<br/>
F87F&#160;<br/>
4C&#160;78&#160;EB&#160;<br/>
JMP&#160;$EB78&#160;<br/>
in&#160;to&#160;page&#160;2&#160;of&#160;memory&#160;as&#160;<br/>
F882&#160;<br/>
4C&#160;C1&#160;F5&#160;<br/>
JMP&#160;$F5C1&#160;<br/>
various&#160;jump&#160;vectors.&#160;Set&#160;up&#160;<br/>
F885&#160;<br/>
4C&#160;65&#160;F8&#160;<br/>
JMP&#160;$F865&#160;<br/>
by&#160;reset&#160;of&#160;machine.&#160;<br/>
F888&#160;<br/>
4C&#160;22&#160;EE&#160;<br/>
JMP&#160;$EE22&#160;<br/>
F88B&#160;<br/>
4C&#160;B2&#160;F8&#160;<br/>
JMP&#160;$F8B2&#160;<br/>
F88E&#160;<br/>
40&#160;<br/>
RTI&#160;<br/>
&#160;<br/>F88F&#160;<br/>
A2&#160;FF&#160;<br/>
LDX&#160;#$FF&#160;<br/>
<b>RESET</b>&#160;<br/>
F891&#160;<br/>
9A&#160;<br/>
TXS&#160;<br/>
Set&#160;stack&#160;pointer&#160;to&#160;#FF.&#160;<br/>
F892&#160;<br/>
58&#160;<br/>
CLI&#160;<br/>
F893&#160;<br/>
D8&#160;<br/>
CLD&#160;<br/>
Clear&#160;decimal&#160;mode.&#160;<br/>
F894&#160;<br/>
A2&#160;12&#160;<br/>
LDX&#160;#$12&#160;<br/>
Copy&#160;the&#160;above&#160;jump&#160;table&#160;in&#160;<br/>
F896&#160;<br/>
BD&#160;7C&#160;F8&#160;<br/>
LDA&#160;$F87C,X&#160;<br/>
to&#160;page&#160;2&#160;of&#160;memory.&#160;<br/>
F899&#160;<br/>
9D&#160;38&#160;02&#160;<br/>
STA&#160;$0238,X&#160;<br/>
F89C&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
F89D&#160;<br/>
10&#160;F7&#160;<br/>
BPL&#160;$F896&#160;<br/>
F89F&#160;<br/>
A9&#160;20&#160;<br/>
LDA&#160;#$20&#160;<br/>
Set&#160;up&#160;initial&#160;repeat&#160;delay.&#160;<br/>
F8A1&#160;<br/>
8D&#160;4E&#160;02&#160;<br/>
STA&#160;$024E&#160;<br/>
F8A4&#160;<br/>
A9&#160;04&#160;<br/>
LDA&#160;#$04&#160;<br/>
Set&#160;up&#160;successive&#160;repeat&#160;<br/>
F8A6&#160;<br/>
8D&#160;4F&#160;02&#160;<br/>
STA&#160;$024F&#160;<br/>
delay.&#160;<br/>
F8A9&#160;<br/>
20&#160;14&#160;FA&#160;<br/>
JSR&#160;$FA14&#160;<br/>
Find&#160;quantity&#160;and&#160;test&#160;RAM.&#160;<br/>
F8AC&#160;<br/>
20&#160;B8&#160;F8&#160;<br/>
JSR&#160;$F8B8&#160;<br/>
Set&#160;up&#160;system.&#160;<br/>
&#160;<br/>F8AF&#160;<br/>
4C&#160;CC&#160;EC&#160;<br/>
JMP&#160;$ECCC&#160;<br/>
<b>START&#160;BASIC</b>&#160;<br/>
F8B2&#160;<br/>
20&#160;B8&#160;F8&#160;<br/>
JSR&#160;$F8B8&#160;<br/>
NMI&#160;service&#160;routine.&#160;<br/>
&#160;<br/>F8B5&#160;<br/>
4C&#160;71&#160;C4&#160;<br/>
JMP&#160;$C471&#160;<br/>
<b>RESTART&#160;BASIC.</b>&#160;<br/>
F8B8&#160;<br/>
20&#160;AA&#160;F9&#160;<br/>
JSR&#160;$F9AA&#160;<br/>
Set&#160;6522,&#160;with&#160;no&#160;interrupts.&#160;<br/>
F8BB&#160;<br/>
A9&#160;07&#160;<br/>
LDA&#160;#$07&#160;<br/>
F8BD&#160;<br/>
A2&#160;40&#160;<br/>
LDX&#160;#$40&#160;<br/>
Set&#160;I/0&#160;port&#160;on&#160;8912&#160;to&#160;<br/>
F8BF&#160;<br/>
20&#160;90&#160;F5&#160;<br/>
JSR&#160;$F590&#160;<br/>
output.&#160;<br/>
F8C2&#160;<br/>
20&#160;E0&#160;ED&#160;<br/>
JSR&#160;$EDE0&#160;<br/>
Set&#160;the&#160;3&#160;16&#160;bit&#160;counters.&#160;<br/>
F8C5&#160;<br/>
20&#160;0E&#160;F9&#160;<br/>
JSR&#160;$F90E&#160;<br/>
Set&#160;up&#160;paper/ink&#160;colours.&#160;<br/>
F8C8&#160;<br/>
A9&#160;FF&#160;<br/>
LDA&#160;#$FF&#160;<br/>
F8CA&#160;<br/>
8D&#160;0C&#160;02&#160;<br/>
STA&#160;$020C&#160;<br/>
Set&#160;CAPS&#160;to&#160;on.&#160;<br/>
F8CD&#160;<br/>
20&#160;C9&#160;F9&#160;<br/>
JSR&#160;$F9C9&#160;<br/>
Set&#160;up&#160;initial&#160;text&#160;screen.&#160;<br/>
F8D0&#160;<br/>
A2&#160;05&#160;<br/>
LDX&#160;#$05&#160;<br/>
Set&#160;up&#160;the&#160;Standard&#160;character&#160;<br/>
F8D2&#160;<br/>
20&#160;82&#160;F9&#160;<br/>
JSR&#160;$F982&#160;<br/>
set&#160;in&#160;memory.&#160;<br/>
F8D5&#160;<br/>
20&#160;16&#160;F8&#160;<br/>
JSR&#160;$F816&#160;<br/>
Generate&#160;alternate&#160;char.&#160;set.&#160;<br/>
F8D8&#160;<br/>
20&#160;5A&#160;F7&#160;<br/>
JSR&#160;$F75A&#160;<br/>
Write&#160;CAPS&#160;status&#160;to&#160;screen.&#160;<br/>
F8DB&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F8DC&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
Set&#160;up&#160;some&#160;page&#160;2&#160;variables&#160;<br/>
F8DD&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
for&#160;HIRES.&#160;<br/>
F8DE&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
F8DF&#160;<br/>
A9&#160;01&#160;<br/>
LDA&#160;#$01&#160;<br/>
F8E1&#160;<br/>
8D&#160;1F&#160;02&#160;<br/>
STA&#160;$021F&#160;<br/>
Set&#160;hires&#160;indicator.&#160;<br/>
F8E4&#160;<br/>
A9&#160;BF&#160;<br/>
LDA&#160;#$BF&#160;<br/>
F8E6&#160;<br/>
8D&#160;7B&#160;02&#160;<br/>
STA&#160;$027B&#160;<br/>
Set&#160;the&#160;address&#160;of&#160;the&#160;first&#160;<br/>
Pag&#160;&#160;<br/>
e&#160;111&#160;<br/>
<hr/>
<a name=112></a>F8E9&#160;<br/>
8D&#160;79&#160;02&#160;<br/>
STA&#160;$0279&#160;<br/>
line&#160;of&#160;text&#160;section&#160;of&#160;screen&#160;<br/>
F8EC&#160;<br/>
A9&#160;68&#160;<br/>
LDA&#160;#$68&#160;<br/>
to&#160;$BF68&#160;and&#160;that&#160;of&#160;the&#160;<br/>
F8EE&#160;<br/>
8D&#160;7A&#160;02&#160;<br/>
STA&#160;$027A&#160;<br/>
second&#160;line&#160;to&#160;$BF90.&#160;<br/>
F8F1&#160;<br/>
A9&#160;90&#160;<br/>
LDA&#160;#$90&#160;<br/>
F8F3&#160;<br/>
8D&#160;78&#160;02&#160;<br/>
STA&#160;$0278&#160;<br/>
F8F6&#160;<br/>
A9&#160;03&#160;<br/>
LDA&#160;#$03&#160;<br/>
Set&#160;the&#160;maximum&#160;number&#160;of&#160;<br/>
F8F8&#160;<br/>
8D&#160;7E&#160;02&#160;<br/>
STA&#160;$027E&#160;<br/>
rows&#160;of&#160;text&#160;available.&#160;<br/>
F8FB&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
F8FD&#160;<br/>
8D&#160;7D&#160;02&#160;<br/>
STA&#160;$027D&#160;<br/>
Set&#160;number&#160;of&#160;characters&#160;used&#160;<br/>
F900&#160;<br/>
A9&#160;50&#160;<br/>
LDA&#160;#$50&#160;<br/>
in&#160;screen&#160;scrolling&#160;to&#160;80&#160;-&#160;<br/>
F902&#160;<br/>
8D&#160;7C&#160;02&#160;<br/>
STA&#160;$027C&#160;<br/>
two&#160;lines&#160;worth.&#160;<br/>
F905&#160;<br/>
A2&#160;0C&#160;<br/>
LDX&#160;#$0C&#160;<br/>
F907&#160;<br/>
20&#160;38&#160;02&#160;<br/>
JSR&#160;$0238&#160;<br/>
Clear&#160;screen.&#160;<br/>
F90A&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
F90B&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
F90C&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
F90D&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F90E&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
Set&#160;up&#160;default&#160;state&#160;of&#160;flags&#160;<br/>
F90F&#160;<br/>
A9&#160;03&#160;<br/>
LDA&#160;#$03&#160;<br/>
controlling&#160;screen.&#160;<br/>
F911&#160;<br/>
8D&#160;6A&#160;02&#160;<br/>
STA&#160;$026A&#160;<br/>
F914&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
F916&#160;<br/>
8D&#160;6C&#160;02&#160;<br/>
STA&#160;$026C&#160;<br/>
Set&#160;ink&#160;to&#160;black.&#160;<br/>
F919&#160;<br/>
A9&#160;17&#160;<br/>
LDA&#160;#$17&#160;<br/>
F91B&#160;<br/>
8D&#160;6B&#160;02&#160;<br/>
STA&#160;$026B&#160;<br/>
Set&#160;paper&#160;to&#160;white.&#160;<br/>
F91E&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
F91F&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F920&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
<b>SET&#160;SCREEN&#160;TO&#160;HIRES.</b>&#160;<br/>
F921&#160;<br/>
AD&#160;1F&#160;02&#160;<br/>
LDA&#160;$021F&#160;<br/>
F924&#160;<br/>
D0&#160;05&#160;<br/>
BNE&#160;$F92B&#160;<br/>
F926&#160;<br/>
A2&#160;0B&#160;<br/>
LDX&#160;#$0B&#160;<br/>
F928&#160;<br/>
20&#160;82&#160;F9&#160;<br/>
JSR&#160;$F982&#160;<br/>
F92B&#160;<br/>
A9&#160;FE&#160;<br/>
LDA&#160;#$FE&#160;<br/>
Disable&#160;cursor.&#160;<br/>
F92D&#160;<br/>
2D&#160;6A&#160;02&#160;<br/>
AND&#160;$026A&#160;<br/>
F930&#160;<br/>
8D&#160;6A&#160;02&#160;<br/>
STA&#160;$026A&#160;<br/>
F933&#160;<br/>
A9&#160;1E&#160;<br/>
LDA&#160;#$1E&#160;<br/>
Write&#160;50Hz&#160;attribute&#160;to&#160;last&#160;<br/>
F935&#160;<br/>
8D&#160;DF&#160;BF&#160;<br/>
STA&#160;$BFDF&#160;<br/>
location&#160;on&#160;screen.&#160;<br/>
F938&#160;<br/>
A9&#160;40&#160;<br/>
LDA&#160;#$40&#160;<br/>
F93A&#160;<br/>
8D&#160;00&#160;A0&#160;<br/>
STA&#160;$A000&#160;<br/>
F93D&#160;<br/>
A2&#160;17&#160;<br/>
LDX&#160;#$17&#160;<br/>
F93F&#160;<br/>
20&#160;82&#160;F9&#160;<br/>
JSR&#160;$F982&#160;<br/>
F942&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
Set&#160;X&#160;and&#160;Y&#160;cursor&#160;coordinates&#160;<br/>
F944&#160;<br/>
8D&#160;19&#160;02&#160;<br/>
STA&#160;$0219&#160;<br/>
to&#160;zero.&#160;<br/>
F947&#160;<br/>
8D&#160;1A&#160;02&#160;<br/>
STA&#160;$021A&#160;<br/>
F94A&#160;<br/>
85&#160;10&#160;<br/>
STA&#160;$10&#160;<br/>
Set&#160;cursor&#160;address&#160;to&#160;#A000.&#160;<br/>
F94C&#160;<br/>
A9&#160;A0&#160;<br/>
LDA&#160;#$A0&#160;<br/>
F94E&#160;<br/>
85&#160;11&#160;<br/>
STA&#160;$11&#160;<br/>
F950&#160;<br/>
A9&#160;20&#160;<br/>
LDA&#160;#$20&#160;<br/>
Set&#160;cursor&#160;position&#160;within&#160;<br/>
F952&#160;<br/>
8D&#160;15&#160;02&#160;<br/>
STA&#160;$0215&#160;<br/>
byte&#160;on&#160;screen.&#160;<br/>
F955&#160;<br/>
A9&#160;FF&#160;<br/>
LDA&#160;#$FF&#160;<br/>
F957&#160;<br/>
8D&#160;13&#160;02&#160;<br/>
STA&#160;$0213&#160;<br/>
Set&#160;pattern&#160;register.&#160;<br/>
F95A&#160;<br/>
20&#160;DC&#160;F8&#160;<br/>
JSR&#160;$F8DC&#160;<br/>
Set&#160;up&#160;some&#160;page&#160;2&#160;variables.&#160;<br/>
F95D&#160;<br/>
A9&#160;01&#160;<br/>
LDA&#160;#$01&#160;<br/>
Re-enable&#160;cursor.&#160;<br/>
F95F&#160;<br/>
0D&#160;6A&#160;02&#160;<br/>
ORA&#160;$026A&#160;<br/>
F962&#160;<br/>
8D&#160;6A&#160;02&#160;<br/>
STA&#160;$026A&#160;<br/>
F965&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
F966&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F967&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
<b>SET&#160;SCREEN&#160;TO&#160;TEXT.</b>&#160;<br/>
F968&#160;<br/>
A9&#160;FE&#160;<br/>
LDA&#160;#$FE&#160;<br/>
F96A&#160;<br/>
2D&#160;6A&#160;02&#160;<br/>
AND&#160;$026A&#160;<br/>
Disable&#160;cursor.&#160;<br/>
F96D&#160;<br/>
8D&#160;6A&#160;02&#160;<br/>
STA&#160;$026A&#160;<br/>
F970&#160;<br/>
A2&#160;11&#160;<br/>
LDX&#160;#$11&#160;<br/>
Copy&#160;char&#160;sets&#160;into&#160;original&#160;<br/>
Pag&#160;&#160;<br/>
e&#160;112&#160;<br/>
<hr/>
<a name=113></a>F972&#160;<br/>
20&#160;82&#160;F9&#160;<br/>
JSR&#160;$F982&#160;<br/>
position&#160;in&#160;memory.&#160;<br/>
F975&#160;<br/>
20&#160;C9&#160;F9&#160;<br/>
JSR&#160;$F9C9&#160;<br/>
Set&#160;pointers.&#160;<br/>
F978&#160;<br/>
A9&#160;01&#160;<br/>
LDA&#160;#$01&#160;<br/>
F97A&#160;<br/>
0D&#160;6A&#160;02&#160;<br/>
ORA&#160;$026A&#160;<br/>
Re-enable&#160;cursor.&#160;<br/>
F97D&#160;<br/>
8D&#160;6A&#160;02&#160;<br/>
STA&#160;$026A&#160;<br/>
F980&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
F981&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F982&#160;<br/>
A0&#160;06&#160;<br/>
LDY&#160;#$06&#160;<br/>
This&#160;routine&#160;writes&#160;addresses&#160;<br/>
F984&#160;<br/>
BD&#160;92&#160;F9&#160;<br/>
LDA&#160;$F992,X&#160;<br/>
from&#160;table&#160;below&#160;to&#160;locations&#160;<br/>
F987&#160;<br/>
99&#160;0B&#160;00&#160;<br/>
STA&#160;$000B,Y&#160;<br/>
#0C&#160;to&#160;#11&#160;inclusive.&#160;The&#160;<br/>
F98A&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
value&#160;of&#160;X&#160;determines&#160;which&#160;<br/>
F98B&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
part&#160;of&#160;the&#160;table&#160;is&#160;copied.&#160;<br/>
F98C&#160;<br/>
D0&#160;F6&#160;<br/>
BNE&#160;$F984&#160;<br/>
The&#160;data&#160;is&#160;then&#160;used&#160;in&#160;a&#160;<br/>
F98E&#160;<br/>
20&#160;C4&#160;ED&#160;<br/>
JSR&#160;$EDC4&#160;<br/>
block&#160;transfer&#160;routine.&#160;<br/>
F991&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F992&#160;<br/>
78&#160;FC&#160;00&#160;B5&#160;00&#160;03&#160;00&#160;B4&#160;<br/>
F99A&#160;<br/>
00&#160;98&#160;80&#160;07&#160;00&#160;98&#160;00&#160;B4&#160;<br/>
F9A2&#160;<br/>
80&#160;07&#160;00&#160;A0&#160;01&#160;A0&#160;3F&#160;1F&#160;<br/>
&#160;<br/>F9AA&#160;<br/>
A9&#160;FF&#160;<br/>
LDA&#160;#$FF&#160;<br/>
<b>RESET&#160;6522.</b>&#160;<br/>
F9AC&#160;<br/>
8D&#160;03&#160;03&#160;<br/>
STA&#160;$0303&#160;<br/>
Port&#160;A&#160;all&#160;output.&#160;<br/>
F9AF&#160;<br/>
A9&#160;F7&#160;<br/>
LDA&#160;#$F7&#160;<br/>
Port&#160;B&#160;all&#160;output&#160;except&#160;<br/>
F9B1&#160;<br/>
8D&#160;02&#160;03&#160;<br/>
STA&#160;$0302&#160;<br/>
bit&#160;4.&#160;<br/>
F9B4&#160;<br/>
A9&#160;B7&#160;<br/>
LDA&#160;#$B7&#160;<br/>
Turn&#160;off&#160;cassette&#160;motor.&#160;<br/>
F9B6&#160;<br/>
8D&#160;00&#160;03&#160;<br/>
STA&#160;$0300&#160;<br/>
F9B9&#160;<br/>
A9&#160;DD&#160;<br/>
LDA&#160;#$DD&#160;<br/>
Set&#160;CA2&#160;and&#160;CB2&#160;to&#160;0&#160;and&#160;set&#160;<br/>
F9BB&#160;<br/>
8D&#160;0C&#160;03&#160;<br/>
STA&#160;$030C&#160;<br/>
CA1&#160;and&#160;CB1&#160;active&#160;L&#160;to&#160;H.&#160;<br/>
F9BE&#160;<br/>
A9&#160;7F&#160;<br/>
LDA&#160;#$7F&#160;<br/>
F9C0&#160;<br/>
8D&#160;0E&#160;03&#160;<br/>
STA&#160;$030E&#160;<br/>
Disable&#160;all&#160;interrupts.&#160;<br/>
F9C3&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
F9C5&#160;<br/>
8D&#160;0B&#160;03&#160;<br/>
STA&#160;$030B&#160;<br/>
Set&#160;the&#160;ACR.&#160;<br/>
F9C8&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>F9C9&#160;<br/>
A9&#160;1A&#160;<br/>
LDA&#160;#$1A&#160;<br/>
<b>Set&#160;up&#160;TEXT&#160;SCREEN.</b>&#160;<br/>
F9CB&#160;<br/>
20&#160;07&#160;FA&#160;<br/>
JSR&#160;$FA07&#160;<br/>
Write&#160;50Hz&#160;attribute&#160;to&#160;last&#160;<br/>
F9CE&#160;<br/>
A9&#160;20&#160;<br/>
LDA&#160;#$20&#160;<br/>
screen&#160;location&#160;and&#160;clear&#160;<br/>
F9D0&#160;<br/>
A0&#160;28&#160;<br/>
LDY&#160;#$28&#160;<br/>
line.&#160;<br/>
F9D2&#160;<br/>
99&#160;7F&#160;BB&#160;<br/>
STA&#160;$BB7F,Y&#160;<br/>
F9D5&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
F9D6&#160;<br/>
D0&#160;FA&#160;<br/>
BNE&#160;$F9D2&#160;<br/>
F9D8&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
F9DA&#160;<br/>
8D&#160;1F&#160;02&#160;<br/>
STA&#160;$021F&#160;<br/>
Set&#160;screen&#160;status&#160;to&#160;lores.&#160;<br/>
F9DD&#160;<br/>
A9&#160;BB&#160;<br/>
LDA&#160;#$BB&#160;<br/>
F9DF&#160;<br/>
8D&#160;7B&#160;02&#160;<br/>
STA&#160;$027B&#160;<br/>
Set&#160;the&#160;address&#160;of&#160;the&#160;first&#160;<br/>
F9E2&#160;<br/>
8D&#160;79&#160;02&#160;<br/>
STA&#160;$0279&#160;<br/>
line&#160;of&#160;text&#160;to&#160;$BBA8&#160;and&#160;that&#160;<br/>
F9E5&#160;<br/>
A9&#160;A8&#160;<br/>
LDA&#160;#$A8&#160;<br/>
of&#160;the&#160;second&#160;to&#160;$BBD0.&#160;<br/>
F9E7&#160;<br/>
8D&#160;7A&#160;02&#160;<br/>
STA&#160;$027A&#160;<br/>
F9EA&#160;<br/>
A9&#160;D0&#160;<br/>
LDA&#160;#$D0&#160;<br/>
F9EC&#160;<br/>
8D&#160;78&#160;02&#160;<br/>
STA&#160;$0278&#160;<br/>
F9EF&#160;<br/>
A9&#160;1B&#160;<br/>
LDA&#160;#$1B&#160;<br/>
Set&#160;number&#160;of&#160;rows&#160;of&#160;text&#160;<br/>
F9F1&#160;<br/>
8D&#160;7E&#160;02&#160;<br/>
STA&#160;$027E&#160;<br/>
available&#160;to&#160;27.&#160;<br/>
F9F4&#160;<br/>
A9&#160;04&#160;<br/>
LDA&#160;#$04&#160;<br/>
F9F6&#160;<br/>
8D&#160;7D&#160;02&#160;<br/>
STA&#160;$027D&#160;<br/>
Set&#160;number&#160;of&#160;characters&#160;that&#160;<br/>
F9F9&#160;<br/>
A9&#160;10&#160;<br/>
LDA&#160;#$10&#160;<br/>
are&#160;moved&#160;in&#160;screen&#160;scroll&#160;to&#160;<br/>
F9FB&#160;<br/>
8D&#160;7C&#160;02&#160;<br/>
STA&#160;$027C&#160;<br/>
#0410&#160;(1040&#160;or&#160;26&#160;lines&#160;full).&#160;<br/>
F9FE&#160;<br/>
A2&#160;0C&#160;<br/>
LDX&#160;#$0C&#160;<br/>
FA00&#160;<br/>
20&#160;38&#160;02&#160;<br/>
JSR&#160;$0238&#160;<br/>
Clear&#160;screen.&#160;<br/>
FA03&#160;<br/>
20&#160;5A&#160;F7&#160;<br/>
JSR&#160;$F75A&#160;<br/>
Write&#160;CAPS&#160;to&#160;screen&#160;if&#160;on.&#160;<br/>
FA06&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>FA07&#160;<br/>
8D&#160;DF&#160;BF&#160;<br/>
STA&#160;$BFDF&#160;<br/>
This&#160;routine&#160;writes&#160;A&#160;to&#160;<br/>
FA0A&#160;<br/>
A9&#160;02&#160;<br/>
LDA&#160;#$02&#160;<br/>
very&#160;last&#160;location&#160;on&#160;screen&#160;<br/>
Pag&#160;&#160;<br/>
e&#160;113&#160;<br/>
<hr/>
<a name=114></a>FA0C&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
and&#160;then&#160;waits&#160;for&#160;40mS&#160;<br/>
FA0E&#160;<br/>
A0&#160;03&#160;<br/>
LDY&#160;#$03&#160;<br/>
FA10&#160;<br/>
20&#160;C9&#160;EE&#160;<br/>
JSR&#160;$EEC9&#160;<br/>
FA13&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>FA14&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
<b>TEST&#160;AND&#160;FIND&#160;QUANTITY&#160;0F&#160;RAM</b>&#160;<br/>
FA16&#160;<br/>
8C&#160;60&#160;02&#160;<br/>
STY&#160;$0260&#160;<br/>
FA19&#160;<br/>
8C&#160;20&#160;02&#160;<br/>
STY&#160;$0220&#160;<br/>
FA1C&#160;<br/>
8C&#160;00&#160;05&#160;<br/>
STY&#160;$0500&#160;<br/>
FA1F&#160;<br/>
84&#160;0E&#160;<br/>
STY&#160;$0E&#160;<br/>
FA21&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
FA22&#160;<br/>
84&#160;0C&#160;<br/>
STY&#160;$0C&#160;<br/>
FA24&#160;<br/>
8C&#160;00&#160;45&#160;<br/>
STY&#160;$4500&#160;<br/>
FA27&#160;<br/>
AD&#160;00&#160;05&#160;<br/>
LDA&#160;$0500&#160;<br/>
FA2A&#160;<br/>
D0&#160;04&#160;<br/>
BNE&#160;$FA30&#160;<br/>
Branch&#160;if&#160;16k&#160;computer.&#160;<br/>
FA2C&#160;<br/>
A9&#160;C0&#160;<br/>
LDA&#160;#$C0&#160;<br/>
FA2E&#160;<br/>
D0&#160;05&#160;<br/>
BNE&#160;$FA35&#160;<br/>
FA30&#160;<br/>
EE&#160;20&#160;02&#160;<br/>
INC&#160;$0220&#160;<br/>
$220=1&#160;for&#160;16k,&#160;0&#160;for&#160;48k.&#160;<br/>
FA33&#160;<br/>
A9&#160;40&#160;<br/>
LDA&#160;#$40&#160;<br/>
A&#160;holds&#160;high&#160;byte&#160;of&#160;possible&#160;<br/>
FA35&#160;<br/>
85&#160;0F&#160;<br/>
STA&#160;$0F&#160;<br/>
extent&#160;of&#160;ram.&#160;<br/>
FA37&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
FA38&#160;<br/>
A9&#160;03&#160;<br/>
LDA&#160;#$03&#160;<br/>
$C&#160;and&#160;$E&#160;are&#160;used&#160;as&#160;to&#160;test&#160;<br/>
FA3A&#160;<br/>
85&#160;0D&#160;<br/>
STA&#160;$0D&#160;<br/>
each&#160;byte&#160;in&#160;turn.&#160;$C&#160;is&#160;used&#160;<br/>
FA3C&#160;<br/>
E6&#160;0C&#160;<br/>
INC&#160;$0C&#160;<br/>
as&#160;current&#160;location&#160;and&#160;$E&#160;is&#160;<br/>
FA3E&#160;<br/>
D0&#160;02&#160;<br/>
BNE&#160;$FA42&#160;<br/>
used&#160;as&#160;end&#160;of&#160;memory&#160;pointer.&#160;<br/>
FA40&#160;<br/>
E6&#160;0D&#160;<br/>
INC&#160;$0D&#160;<br/>
FA42&#160;<br/>
A5&#160;0C&#160;<br/>
LDA&#160;$0C&#160;<br/>
FA44&#160;<br/>
C5&#160;0E&#160;<br/>
CMP&#160;$0E&#160;<br/>
FA46&#160;<br/>
D0&#160;06&#160;<br/>
BNE&#160;$FA4E&#160;<br/>
FA48&#160;<br/>
A5&#160;0D&#160;<br/>
LDA&#160;$0D&#160;<br/>
FA4A&#160;<br/>
C5&#160;0F&#160;<br/>
CMP&#160;$0F&#160;<br/>
FA4C&#160;<br/>
F0&#160;0F&#160;<br/>
BEQ&#160;$FA5D&#160;<br/>
FA4E&#160;<br/>
A9&#160;AA&#160;<br/>
LDA&#160;#$AA&#160;<br/>
FA50&#160;<br/>
91&#160;0C&#160;<br/>
STA&#160;($0C),Y&#160;<br/>
FA52&#160;<br/>
D1&#160;0C&#160;<br/>
CMP&#160;($0C),Y&#160;<br/>
FA54&#160;<br/>
D0&#160;07&#160;<br/>
BNE&#160;$FA5D&#160;<br/>
FA56&#160;<br/>
4A&#160;<br/>
LSR&#160;A&#160;<br/>
FA57&#160;<br/>
91&#160;0C&#160;<br/>
STA&#160;($0C),Y&#160;<br/>
FA59&#160;<br/>
D1&#160;0C&#160;<br/>
CMP&#160;($0C),Y&#160;<br/>
FA5B&#160;<br/>
F0&#160;DF&#160;<br/>
BEQ&#160;$FA3C&#160;<br/>
FA5D&#160;<br/>
38&#160;<br/>
SEC&#160;<br/>
FA5E&#160;<br/>
A5&#160;0F&#160;<br/>
LDA&#160;$0F&#160;<br/>
FA60&#160;<br/>
E9&#160;28&#160;<br/>
SBC&#160;#$28&#160;<br/>
FA62&#160;<br/>
85&#160;0F&#160;<br/>
STA&#160;$0F&#160;<br/>
FA64&#160;<br/>
A5&#160;0E&#160;<br/>
LDA&#160;$0E&#160;<br/>
FA66&#160;<br/>
C5&#160;0C&#160;<br/>
CMP&#160;$0C&#160;<br/>
FA68&#160;<br/>
A5&#160;0F&#160;<br/>
LDA&#160;$0F&#160;<br/>
FA6A&#160;<br/>
E5&#160;0D&#160;<br/>
SBC&#160;$0D&#160;<br/>
FA6C&#160;<br/>
90&#160;09&#160;<br/>
BCC&#160;$FA77&#160;<br/>
FA6E&#160;<br/>
A5&#160;0C&#160;<br/>
LDA&#160;$0C&#160;<br/>
FA70&#160;<br/>
A4&#160;0D&#160;<br/>
LDY&#160;$0D&#160;<br/>
FA72&#160;<br/>
EE&#160;60&#160;02&#160;<br/>
INC&#160;$0260&#160;<br/>
FA75&#160;<br/>
D0&#160;04&#160;<br/>
BNE&#160;$FA7B&#160;<br/>
FA77&#160;<br/>
A5&#160;0E&#160;<br/>
LDA&#160;$0E&#160;<br/>
FA79&#160;<br/>
A4&#160;0F&#160;<br/>
LDY&#160;$0F&#160;<br/>
FA7B&#160;<br/>
85&#160;A6&#160;<br/>
STA&#160;$A6&#160;<br/>
FA7D&#160;<br/>
84&#160;A7&#160;<br/>
STY&#160;$A7&#160;<br/>
FA7F&#160;<br/>
8D&#160;C1&#160;02&#160;<br/>
STA&#160;$02C1&#160;<br/>
FA82&#160;<br/>
8C&#160;C2&#160;02&#160;<br/>
STY&#160;$02C2&#160;<br/>
FA85&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>FA86&#160;<br/>
08&#160;<br/>
PHP&#160;<br/>
This&#160;routine&#160;takes&#160;X&#160;and&#160;Y&#160;<br/>
FA87&#160;<br/>
78&#160;<br/>
SEI&#160;<br/>
as&#160;the&#160;low&#160;and&#160;high&#160;halves&#160;of&#160;<br/>
FA88&#160;<br/>
86&#160;14&#160;<br/>
STX&#160;$14&#160;<br/>
the&#160;start&#160;address&#160;of&#160;a&#160;table&#160;<br/>
Pag&#160;&#160;<br/>
e&#160;114&#160;<br/>
<hr/>
<a name=115></a>FA8A&#160;<br/>
84&#160;15&#160;<br/>
STY&#160;$15&#160;<br/>
to&#160;send&#160;data&#160;to&#160;the&#160;sound&#160;<br/>
FA8C&#160;<br/>
A0&#160;00&#160;<br/>
LDY&#160;#$00&#160;<br/>
chip&#160;from.&#160;<br/>
FA8E&#160;<br/>
B1&#160;14&#160;<br/>
LDA&#160;($14),Y&#160;<br/>
14&#160;bytes&#160;are&#160;sent&#160;to&#160;the&#160;8912&#160;<br/>
FA90&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
starting&#160;with&#160;register&#160;0&#160;and&#160;<br/>
FA91&#160;<br/>
98&#160;<br/>
TYA&#160;<br/>
working&#160;up&#160;in&#160;order&#160;until&#160;<br/>
FA92&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
register&#160;D.&#160;The&#160;data&#160;from&#160;<br/>
FA93&#160;<br/>
20&#160;90&#160;F5&#160;<br/>
JSR&#160;$F590&#160;<br/>
the&#160;table&#160;is&#160;used&#160;starting&#160;<br/>
FA96&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
from&#160;the&#160;low&#160;address.&#160;<br/>
FA97&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
FA98&#160;<br/>
C8&#160;<br/>
INY&#160;<br/>
The&#160;1/0&#160;port&#160;is&#160;not&#160;written&#160;<br/>
FA99&#160;<br/>
C0&#160;0E&#160;<br/>
CPY&#160;#$0E&#160;<br/>
to.&#160;<br/>
FA9B&#160;<br/>
D0&#160;F1&#160;<br/>
BNE&#160;$FA8E&#160;<br/>
FA9D&#160;<br/>
28&#160;<br/>
PLP&#160;<br/>
FA9E&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>FA9F&#160;<br/>
A2&#160;A7&#160;<br/>
LDX&#160;#$A7&#160;<br/>
<b>PING</b>&#160;<br/>
FAA1&#160;<br/>
A0&#160;FA&#160;<br/>
LDY&#160;#$FA&#160;<br/>
Sets&#160;X&#160;and&#160;Y&#160;to&#160;point&#160;to&#160;the&#160;<br/>
FAA3&#160;<br/>
20&#160;86&#160;FA&#160;<br/>
JSR&#160;$FA86&#160;<br/>
data&#160;below&#160;to&#160;generate&#160;the&#160;<br/>
FAA6&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
sound.&#160;<br/>
&#160;<br/>FAA7&#160;<br/>
18&#160;00&#160;00&#160;00&#160;00&#160;00&#160;00&#160;<br/>
Data&#160;for&#160;Ping&#160;command.&#160;<br/>
FAAE&#160;<br/>
3E&#160;10&#160;00&#160;00&#160;00&#160;0F&#160;00&#160;<br/>
&#160;<br/>FAB5&#160;<br/>
A2&#160;BD&#160;<br/>
LDX&#160;#$BD&#160;<br/>
<b>SHOOT</b>&#160;<br/>
FAB7&#160;<br/>
A0&#160;FA&#160;<br/>
LDY&#160;#$FA&#160;<br/>
Sets&#160;X&#160;and&#160;Y&#160;to&#160;point&#160;to&#160;the&#160;<br/>
FAB9&#160;<br/>
20&#160;86&#160;FA&#160;<br/>
JSR&#160;$FA86&#160;<br/>
data&#160;below&#160;to&#160;generate&#160;the&#160;<br/>
FABC&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
sound.&#160;<br/>
&#160;<br/>FABD&#160;<br/>
00&#160;00&#160;00&#160;00&#160;00&#160;00&#160;0F&#160;<br/>
Data&#160;for&#160;Shoot&#160;command.&#160;<br/>
FAC4&#160;<br/>
07&#160;10&#160;10&#160;10&#160;00&#160;08&#160;00&#160;<br/>
&#160;<br/>FACB&#160;<br/>
A2&#160;D3&#160;<br/>
LDX&#160;#$D3&#160;<br/>
<b>EXPLODE</b>&#160;<br/>
FACD&#160;<br/>
A0&#160;FA&#160;<br/>
LDY&#160;#$FA&#160;<br/>
Sets&#160;X&#160;and&#160;Y&#160;to&#160;point&#160;to&#160;the&#160;<br/>
FACF&#160;<br/>
20&#160;86&#160;FA&#160;<br/>
JSR&#160;$FA86&#160;<br/>
data&#160;below&#160;to&#160;generate&#160;the&#160;<br/>
FAD2&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
sound.&#160;<br/>
&#160;<br/>FAD3&#160;<br/>
00&#160;00&#160;00&#160;00&#160;00&#160;00&#160;1F&#160;<br/>
Data&#160;for&#160;Explode&#160;command.&#160;<br/>
FADA&#160;<br/>
07&#160;10&#160;10&#160;10&#160;00&#160;18&#160;00&#160;<br/>
&#160;<br/>FAE1&#160;<br/>
A2&#160;06&#160;<br/>
LDX&#160;#$06&#160;<br/>
<b>ZAP</b>&#160;<br/>
FAE3&#160;<br/>
A0&#160;FB&#160;<br/>
LDY&#160;#$FB&#160;<br/>
send&#160;sound&#160;data&#160;to&#160;8912&#160;as&#160;<br/>
FAE5&#160;<br/>
20&#160;86&#160;FA&#160;<br/>
JSR&#160;$FA86&#160;<br/>
in&#160;Shoot&#160;etc.&#160;<br/>
FAE8&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
FAEA&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
This&#160;section&#160;writes&#160;to&#160;the&#160;<br/>
FAEB&#160;<br/>
8A&#160;<br/>
TXA&#160;<br/>
tone&#160;channel&#160;A&#160;at&#160;regular&#160;<br/>
FAEC&#160;<br/>
48&#160;<br/>
PHA&#160;<br/>
intervals&#160;with&#160;increasing&#160;<br/>
FAED&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
tone&#160;periods.&#160;Thus&#160;<br/>
FAEF&#160;<br/>
20&#160;90&#160;F5&#160;<br/>
JSR&#160;$F590&#160;<br/>
successively&#160;lower&#160;frequncies&#160;<br/>
FAF2&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
are&#160;produced.&#160;The&#160;delay&#160;loop&#160;<br/>
FAF4&#160;<br/>
CA&#160;<br/>
DEX&#160;<br/>
takes&#160;about&#160;1.25mS&#160;to&#160;<br/>
FAF5&#160;<br/>
D0&#160;FD&#160;<br/>
BNE&#160;$FAF4&#160;<br/>
execute.&#160;<br/>
&#160;<br/>FAF7&#160;<br/>
68&#160;<br/>
PLA&#160;<br/>
FAF8&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
FAF9&#160;<br/>
E8&#160;<br/>
INX&#160;<br/>
FAFA&#160;<br/>
E0&#160;70&#160;<br/>
CPX&#160;#$70&#160;<br/>
The&#160;main&#160;loop&#160;is&#160;executed&#160;112&#160;<br/>
FAFC&#160;<br/>
D0&#160;ED&#160;<br/>
BNE&#160;$FAEB&#160;<br/>
times&#160;in&#160;total.&#160;<br/>
FAFE&#160;<br/>
A9&#160;08&#160;<br/>
LDA&#160;#$08&#160;<br/>
Zero&#160;channel&#160;A&#160;amplitude.&#160;<br/>
FB00&#160;<br/>
A2&#160;00&#160;<br/>
LDX&#160;#$00&#160;<br/>
FB02&#160;<br/>
20&#160;90&#160;F5&#160;<br/>
JSR&#160;$F590&#160;<br/>
FB05&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>FB06&#160;<br/>
00&#160;00&#160;00&#160;00&#160;00&#160;00&#160;00&#160;<br/>
Data&#160;for&#160;ZAP&#160;command.&#160;<br/>
FB0D&#160;<br/>
3E&#160;0F&#160;00&#160;00&#160;00&#160;00&#160;00&#160;<br/>
Pag&#160;&#160;<br/>
e&#160;115&#160;<br/>
<hr/>
<a name=116></a>&#160;<br/>FB14&#160;<br/>
A2&#160;1C&#160;<br/>
LDX&#160;#$1C&#160;<br/>
<b>KEYCLICK&#160;high&#160;pitch.</b>&#160;<br/>
FB16&#160;<br/>
A0&#160;FB&#160;<br/>
LDY&#160;#$FB&#160;<br/>
Sets&#160;X&#160;and&#160;Y&#160;to&#160;point&#160;to&#160;the&#160;<br/>
FB18&#160;<br/>
20&#160;86&#160;FA&#160;<br/>
JSR&#160;$FA86&#160;<br/>
data&#160;below&#160;to&#160;generate&#160;the&#160;<br/>
FB1B&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
sound.&#160;<br/>
&#160;<br/>FB1C&#160;<br/>
1F&#160;00&#160;00&#160;00&#160;00&#160;00&#160;00&#160;<br/>
Data&#160;for&#160;high&#160;pitch&#160;keyclick.&#160;<br/>
FB23&#160;<br/>
3E&#160;10&#160;00&#160;00&#160;1F&#160;00&#160;00&#160;<br/>
&#160;<br/>FB2A&#160;<br/>
A2&#160;32&#160;<br/>
LDX&#160;#$32&#160;<br/>
<b>KEYCLICK&#160;low&#160;pitch.</b>&#160;<br/>
FB2C&#160;<br/>
A0&#160;FB&#160;<br/>
LDY&#160;#$FB&#160;<br/>
Sets&#160;X&#160;and&#160;Y&#160;to&#160;point&#160;to&#160;the&#160;<br/>
FB2E&#160;<br/>
20&#160;86&#160;FA&#160;<br/>
JSR&#160;$FA86&#160;<br/>
data&#160;below&#160;to&#160;generate&#160;the&#160;<br/>
FB31&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
sound.&#160;<br/>
&#160;<br/>FB32&#160;<br/>
2F&#160;00&#160;00&#160;00&#160;00&#160;00&#160;00&#160;<br/>
Data&#160;for&#160;low&#160;pitch&#160;keyclick.&#160;<br/>
FB39&#160;<br/>
3E&#160;10&#160;00&#160;00&#160;1F&#160;00&#160;00&#160;<br/>
&#160;<br/>FB40&#160;<br/>
AD&#160;E1&#160;02&#160;<br/>
LDA&#160;$02E1&#160;<br/>
<b>SOUND</b>&#160;<br/>
FB43&#160;<br/>
C9&#160;01&#160;<br/>
CMP&#160;#$01&#160;<br/>
Branch&#160;if&#160;tone&#160;channel&#160;A&#160;is&#160;<br/>
FB45&#160;<br/>
D0&#160;22&#160;<br/>
BNE&#160;$FB69&#160;<br/>
not&#160;being&#160;used.&#160;<br/>
FB47&#160;<br/>
A9&#160;00&#160;<br/>
LDA&#160;#$00&#160;<br/>
Write&#160;the&#160;tone&#160;period&#160;for&#160;<br/>
FB49&#160;<br/>
AE&#160;E3&#160;02&#160;<br/>
LDX&#160;$02E3&#160;<br/>
channel&#160;A&#160;to&#160;the&#160;sound&#160;chip&#160;<br/>
FB4C&#160;<br/>
20&#160;90&#160;F5&#160;<br/>
JSR&#160;$F590&#160;<br/>
Write&#160;low&#160;byte&#160;of&#160;period.&#160;<br/>
FB4F&#160;<br/>
A9&#160;01&#160;<br/>
LDA&#160;#$01&#160;<br/>
FB51&#160;<br/>
AE&#160;E4&#160;02&#160;<br/>
LDX&#160;$02E4&#160;<br/>
FB54&#160;<br/>
20&#160;90&#160;F5&#160;<br/>
JSR&#160;$F590&#160;<br/>
Write&#160;high&#160;byte&#160;of&#160;period.&#160;<br/>
FB57&#160;<br/>
AD&#160;E5&#160;02&#160;<br/>
LDA&#160;$02E5&#160;<br/>
Load&#160;amplitude&#160;and&#160;keep&#160;it&#160;in&#160;<br/>
FB5A&#160;<br/>
29&#160;0F&#160;<br/>
AND&#160;#$0F&#160;<br/>
the&#160;range&#160;0-15.&#160;If&#160;amplitude&#160;<br/>
FB5C&#160;<br/>
D0&#160;04&#160;<br/>
BNE&#160;$FB62&#160;<br/>
is&#160;zero&#160;then&#160;use&#160;envelope&#160;<br/>
FB5E&#160;<br/>
A2&#160;10&#160;<br/>
LDX&#160;#$10&#160;<br/>
control.&#160;<br/>
FB60&#160;<br/>
D0&#160;01&#160;<br/>
BNE&#160;$FB63&#160;<br/>
FB62&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
FB63&#160;<br/>
A9&#160;08&#160;<br/>
LDA&#160;#$08&#160;<br/>
FB65&#160;<br/>
20&#160;90&#160;F5&#160;<br/>
JSR&#160;$F590&#160;<br/>
FB68&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>FB69&#160;<br/>
C9&#160;02&#160;<br/>
CMP&#160;#$02&#160;<br/>
Branch&#160;if&#160;tone&#160;channel&#160;B&#160;is&#160;<br/>
FB6B&#160;<br/>
D0&#160;22&#160;<br/>
BNE&#160;$FB8F&#160;<br/>
not&#160;being&#160;used.&#160;<br/>
FB6D&#160;<br/>
A9&#160;02&#160;<br/>
LDA&#160;#$02&#160;<br/>
FB6F&#160;<br/>
AE&#160;E3&#160;02&#160;<br/>
LDX&#160;$02E3&#160;<br/>
Write&#160;low&#160;byte&#160;of&#160;tone&#160;period&#160;<br/>
FB72&#160;<br/>
20&#160;90&#160;F5&#160;<br/>
JSR&#160;$F590&#160;<br/>
to&#160;the&#160;sound&#160;chip.&#160;<br/>
FB75&#160;<br/>
A9&#160;03&#160;<br/>
LDA&#160;#$03&#160;<br/>
FB77&#160;<br/>
AE&#160;E4&#160;02&#160;<br/>
LDX&#160;$02E4&#160;<br/>
Write&#160;high&#160;byte&#160;of&#160;tone&#160;period&#160;<br/>
FB7A&#160;<br/>
20&#160;90&#160;F5&#160;<br/>
JSR&#160;$F590&#160;<br/>
to&#160;the&#160;sound&#160;chip.&#160;<br/>
FB7D&#160;<br/>
AD&#160;E5&#160;02&#160;<br/>
LDA&#160;$02E5&#160;<br/>
Load&#160;and&#160;set&#160;amplitude&#160;in&#160;<br/>
FB80&#160;<br/>
29&#160;0F&#160;<br/>
AND&#160;#$0F&#160;<br/>
range&#160;0-15.&#160;<br/>
FB82&#160;<br/>
D0&#160;04&#160;<br/>
BNE&#160;$FB88&#160;<br/>
FB84&#160;<br/>
A2&#160;10&#160;<br/>
LDX&#160;#$10&#160;<br/>
If&#160;amplitude&#160;is&#160;zero&#160;then&#160;use&#160;<br/>
FB86&#160;<br/>
D0&#160;01&#160;<br/>
BNE&#160;$FB89&#160;<br/>
envelope&#160;control.&#160;<br/>
FB88&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
FB89&#160;<br/>
A9&#160;09&#160;<br/>
LDA&#160;#$09&#160;<br/>
FB8B&#160;<br/>
20&#160;90&#160;F5&#160;<br/>
JSR&#160;$F590&#160;<br/>
FB8E&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>FB8F&#160;<br/>
C9&#160;03&#160;<br/>
CMP&#160;#$03&#160;<br/>
Branch&#160;if&#160;tone&#160;channel&#160;C&#160;is&#160;<br/>
FB91&#160;<br/>
D0&#160;22&#160;<br/>
BNE&#160;$FBB5&#160;<br/>
not&#160;being&#160;used.&#160;<br/>
FB93&#160;<br/>
A9&#160;04&#160;<br/>
LDA&#160;#$04&#160;<br/>
FB95&#160;<br/>
AE&#160;E3&#160;02&#160;<br/>
LDX&#160;$02E3&#160;<br/>
Write&#160;low&#160;byte&#160;of&#160;tone&#160;period&#160;<br/>
FB98&#160;<br/>
20&#160;90&#160;F5&#160;<br/>
JSR&#160;$F590&#160;<br/>
to&#160;the&#160;sound&#160;chip.&#160;<br/>
FB9B&#160;<br/>
A9&#160;05&#160;<br/>
LDA&#160;#$05&#160;<br/>
FB9D&#160;<br/>
AE&#160;E4&#160;02&#160;<br/>
LDX&#160;$02E4&#160;<br/>
Write&#160;high&#160;byte&#160;of&#160;tone&#160;period&#160;<br/>
FBA0&#160;<br/>
20&#160;90&#160;F5&#160;<br/>
JSR&#160;$F590&#160;<br/>
to&#160;the&#160;sound&#160;chip.&#160;<br/>
FBA3&#160;<br/>
AD&#160;E5&#160;02&#160;<br/>
LDA&#160;$02E5&#160;<br/>
Load&#160;and&#160;set&#160;the&#160;amplitude&#160;in&#160;<br/>
FBA6&#160;<br/>
29&#160;0F&#160;<br/>
AND&#160;#$0F&#160;<br/>
the&#160;range&#160;0-15.&#160;<br/>
Pag&#160;&#160;<br/>
e&#160;116&#160;<br/>
<hr/>
<a name=117></a>FBA8&#160;<br/>
D0&#160;04&#160;<br/>
BNE&#160;$FBAE&#160;<br/>
FBAA&#160;<br/>
A2&#160;10&#160;<br/>
LDX&#160;#$10&#160;<br/>
If&#160;amplitude&#160;is&#160;zero&#160;then&#160;use&#160;<br/>
FBAC&#160;<br/>
D0&#160;01&#160;<br/>
BNE&#160;$FBAF&#160;<br/>
envelope&#160;control.&#160;<br/>
FBAE&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
FBAF&#160;<br/>
A9&#160;0A&#160;<br/>
LDA&#160;#$0A&#160;<br/>
FBB1&#160;<br/>
20&#160;90&#160;F5&#160;<br/>
JSR&#160;$F590&#160;<br/>
FBB4&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>FBB5&#160;<br/>
A9&#160;06&#160;<br/>
LDA&#160;#$06&#160;<br/>
This&#160;routine&#160;sets&#160;up&#160;the&#160;noise&#160;<br/>
FBB7&#160;<br/>
AE&#160;E3&#160;02&#160;<br/>
LDX&#160;$02E3&#160;<br/>
period&#160;to&#160;be&#160;used.&#160;<br/>
FBBA&#160;<br/>
20&#160;90&#160;F5&#160;<br/>
JSR&#160;$F590&#160;<br/>
Sound&#160;channels&#160;4,&#160;5&#160;&amp;&#160;6&#160;<br/>
FBBD&#160;<br/>
AD&#160;E1&#160;02&#160;<br/>
LDA&#160;$02E1&#160;<br/>
produce&#160;noise&#160;on&#160;tone&#160;channels&#160;<br/>
FBC0&#160;<br/>
C9&#160;04&#160;<br/>
CMP&#160;#$04&#160;<br/>
A,&#160;B&#160;&amp;&#160;C&#160;respectively.&#160;<br/>
FBC2&#160;<br/>
F0&#160;93&#160;<br/>
BEQ&#160;$FB57&#160;<br/>
FBC4&#160;<br/>
C9&#160;05&#160;<br/>
CMP&#160;#$05&#160;<br/>
FBC6&#160;<br/>
F0&#160;B5&#160;<br/>
BEQ&#160;$FB7D&#160;<br/>
FBC8&#160;<br/>
C9&#160;06&#160;<br/>
CMP&#160;#$06&#160;<br/>
FBCA&#160;<br/>
F0&#160;D7&#160;<br/>
BEQ&#160;$FBA3&#160;<br/>
An&#160;error&#160;is&#160;produced&#160;if&#160;the&#160;<br/>
FBCC&#160;<br/>
EE&#160;E0&#160;02&#160;<br/>
INC&#160;$02E0&#160;<br/>
sound&#160;channels&#160;are&#160;not&#160;in&#160;<br/>
FBCF&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
correct&#160;range.&#160;<br/>
&#160;<br/>FBD0&#160;<br/>
AD&#160;E3&#160;02&#160;<br/>
LDA&#160;$02E3&#160;<br/>
<b>PLAY</b>&#160;<br/>
FBD3&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
Combine&#160;the&#160;tone&#160;and&#160;sound&#160;<br/>
FBD4&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
channels&#160;into&#160;a&#160;single&#160;byte.&#160;<br/>
FBD5&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
Invert&#160;the&#160;result&#160;and&#160;send&#160;it&#160;<br/>
FBD6&#160;<br/>
0D&#160;E1&#160;02&#160;<br/>
ORA&#160;$02E1&#160;<br/>
to&#160;the&#160;mixer&#160;register&#160;in&#160;the&#160;<br/>
FBD9&#160;<br/>
49&#160;3F&#160;<br/>
EOR&#160;#$3F&#160;<br/>
sound&#160;chip.&#160;<br/>
FBDB&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
FBDC&#160;<br/>
A9&#160;07&#160;<br/>
LDA&#160;#$07&#160;<br/>
FBDE&#160;<br/>
20&#160;90&#160;F5&#160;<br/>
JSR&#160;$F590&#160;<br/>
FBE1&#160;<br/>
18&#160;<br/>
CLC&#160;<br/>
FBE2&#160;<br/>
AD&#160;E7&#160;02&#160;<br/>
LDA&#160;$02E7&#160;<br/>
Double&#160;the&#160;duration&#160;given&#160;in&#160;<br/>
FBE5&#160;<br/>
0A&#160;<br/>
ASL&#160;A&#160;<br/>
the&#160;command.&#160;<br/>
FBE6&#160;<br/>
8D&#160;E7&#160;02&#160;<br/>
STA&#160;$02E7&#160;<br/>
FBE9&#160;<br/>
AD&#160;E8&#160;02&#160;<br/>
LDA&#160;$02E8&#160;<br/>
FBEC&#160;<br/>
2A&#160;<br/>
ROL&#160;A&#160;<br/>
FBED&#160;<br/>
8D&#160;E8&#160;02&#160;<br/>
STA&#160;$02E8&#160;<br/>
FBF0&#160;<br/>
A9&#160;0B&#160;<br/>
LDA&#160;#$0B&#160;<br/>
FBF2&#160;<br/>
AE&#160;E7&#160;02&#160;<br/>
LDX&#160;$02E7&#160;<br/>
Write&#160;low&#160;byte&#160;of&#160;envelope&#160;<br/>
FBF5&#160;<br/>
20&#160;90&#160;F5&#160;<br/>
JSR&#160;$F590&#160;<br/>
period&#160;to&#160;8912.&#160;<br/>
FBF8&#160;<br/>
A9&#160;0C&#160;<br/>
LDA&#160;#$0C&#160;<br/>
FBFA&#160;<br/>
AE&#160;E8&#160;02&#160;<br/>
LDX&#160;$02E8&#160;<br/>
Write&#160;high&#160;byte&#160;of&#160;envelope&#160;<br/>
FBFD&#160;<br/>
20&#160;90&#160;F5&#160;<br/>
JSR&#160;$F590&#160;<br/>
period&#160;to&#160;8912.&#160;<br/>
FC00&#160;<br/>
AD&#160;E5&#160;02&#160;<br/>
LDA&#160;$02E5&#160;<br/>
FC03&#160;<br/>
29&#160;07&#160;<br/>
AND&#160;#$07&#160;<br/>
FC05&#160;<br/>
A8&#160;<br/>
TAY&#160;<br/>
FC06&#160;<br/>
B9&#160;10&#160;FC&#160;<br/>
LDA&#160;$FC10,Y&#160;<br/>
Look&#160;up&#160;envelope&#160;pattern&#160;<br/>
FC09&#160;<br/>
AA&#160;<br/>
TAX&#160;<br/>
using&#160;table&#160;below.&#160;<br/>
FC0A&#160;<br/>
A9&#160;0D&#160;<br/>
LDA&#160;#$0D&#160;<br/>
FC0C&#160;<br/>
20&#160;90&#160;F5&#160;<br/>
JSR&#160;$F590&#160;<br/>
FC0F&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>FC10&#160;<br/>
00&#160;00&#160;04&#160;08&#160;0A&#160;0B&#160;0C&#160;0D&#160;<br/>
Envelope&#160;patterns&#160;used.&#160;<br/>
&#160;<br/>FC18&#160;<br/>
A2&#160;E1&#160;<br/>
LDX&#160;#$E1&#160;<br/>
<b>MUSIC</b>&#160;<br/>
FC1A&#160;<br/>
A9&#160;04&#160;<br/>
LDA&#160;#$04&#160;<br/>
Test&#160;channel&#160;for&#160;range.&#160;<br/>
FC1C&#160;<br/>
20&#160;E4&#160;F2&#160;<br/>
JSR&#160;$F2E4&#160;<br/>
FC1F&#160;<br/>
B0&#160;39&#160;<br/>
BCS&#160;$FC5A&#160;<br/>
Channel&#160;number&#160;out&#160;of&#160;range.&#160;<br/>
FC21&#160;<br/>
A2&#160;E3&#160;<br/>
LDX&#160;#$E3&#160;<br/>
FC23&#160;<br/>
A9&#160;08&#160;<br/>
LDA&#160;#$08&#160;<br/>
Test&#160;ocatve&#160;range.&#160;<br/>
FC25&#160;<br/>
20&#160;F8&#160;F2&#160;<br/>
JSR&#160;$F2F8&#160;<br/>
FC28&#160;<br/>
B0&#160;30&#160;<br/>
BCS&#160;$FC5A&#160;<br/>
Octave&#160;number&#160;out&#160;of&#160;range.&#160;<br/>
FC2A&#160;<br/>
A2&#160;E5&#160;<br/>
LDX&#160;#$E5&#160;<br/>
FC2C&#160;<br/>
A9&#160;0D&#160;<br/>
LDA&#160;#$0D&#160;<br/>
Test&#160;note&#160;range.&#160;<br/>
Pag&#160;&#160;<br/>
e&#160;117&#160;<br/>
<hr/>
<a name=118></a>FC2E&#160;<br/>
20&#160;E4&#160;F2&#160;<br/>
JSR&#160;$F2E4&#160;<br/>
FC31&#160;<br/>
B0&#160;27&#160;<br/>
BCS&#160;$FC5A&#160;<br/>
Note&#160;number&#160;is&#160;out&#160;of&#160;range.&#160;<br/>
FC33&#160;<br/>
AC&#160;E3&#160;02&#160;<br/>
LDY&#160;$02E3&#160;<br/>
Use&#160;the&#160;octave&#160;and&#160;note&#160;<br/>
FC36&#160;<br/>
AE&#160;E5&#160;02&#160;<br/>
LDX&#160;$02E5&#160;<br/>
values&#160;to&#160;look&#160;up&#160;the&#160;tone&#160;<br/>
FC39&#160;<br/>
BD&#160;5E&#160;FC&#160;<br/>
LDA&#160;$FC5E,X&#160;<br/>
periods&#160;in&#160;the&#160;table&#160;below.&#160;<br/>
FC3C&#160;<br/>
8D&#160;E4&#160;02&#160;<br/>
STA&#160;$02E4&#160;<br/>
FC3F&#160;<br/>
BD&#160;6B&#160;FC&#160;<br/>
LDA&#160;$FC6B,X&#160;<br/>
FC42&#160;<br/>
8D&#160;E3&#160;02&#160;<br/>
STA&#160;$02E3&#160;<br/>
FC45&#160;<br/>
AD&#160;E7&#160;02&#160;<br/>
LDA&#160;$02E7&#160;<br/>
FC48&#160;<br/>
8D&#160;E5&#160;02&#160;<br/>
STA&#160;$02E5&#160;<br/>
FC4B&#160;<br/>
88&#160;<br/>
DEY&#160;<br/>
FC4C&#160;<br/>
30&#160;09&#160;<br/>
BMI&#160;$FC57&#160;<br/>
FC4E&#160;<br/>
4E&#160;E4&#160;02&#160;<br/>
LSR&#160;$02E4&#160;<br/>
FC51&#160;<br/>
6E&#160;E3&#160;02&#160;<br/>
ROR&#160;$02E3&#160;<br/>
FC54&#160;<br/>
4C&#160;4B&#160;FC&#160;<br/>
JMP&#160;$FC4B&#160;<br/>
FC57&#160;<br/>
4C&#160;40&#160;FB&#160;<br/>
JMP&#160;$FB40&#160;<br/>
Goto&#160;Sound&#160;command.&#160;<br/>
FC5A&#160;<br/>
EE&#160;E0&#160;02&#160;<br/>
INC&#160;$02E0&#160;<br/>
FC5D&#160;<br/>
60&#160;<br/>
RTS&#160;<br/>
&#160;<br/>FC5E&#160;<br/>
00&#160;07&#160;07&#160;06&#160;06&#160;05&#160;05&#160;05&#160;<br/>
Data&#160;for&#160;the&#160;Music&#160;command.&#160;<br/>
FC66&#160;<br/>
04&#160;04&#160;04&#160;04&#160;03&#160;00&#160;77&#160;0B&#160;<br/>
Converts&#160;the&#160;notes&#160;into&#160;tone&#160;<br/>
FC6E&#160;<br/>
A6&#160;47&#160;EC&#160;97&#160;47&#160;FB&#160;B3&#160;70&#160;<br/>
periods.&#160;<br/>
FC76&#160;<br/>
30&#160;F4&#160;<br/>
&#160;<br/>FC78&#160;<br/>
00&#160;00&#160;00&#160;00&#160;00&#160;00&#160;00&#160;00&#160;<br/>
Space&#160;Start&#160;of&#160;standard&#160;<br/>
FC80&#160;<br/>
08&#160;08&#160;08&#160;08&#160;08&#160;00&#160;08&#160;00&#160;<br/>
!&#160;<br/>
character&#160;set.&#160;Each&#160;<br/>
FC88&#160;<br/>
14&#160;14&#160;14&#160;00&#160;00&#160;00&#160;00&#160;00&#160;<br/>
&#34;&#160;<br/>
row&#160;of&#160;8&#160;bytes&#160;<br/>
FC90&#160;<br/>
14&#160;14&#160;3E&#160;14&#160;3E&#160;14&#160;14&#160;00&#160;<br/>
#&#160;<br/>
represents&#160;the&#160;bit&#160;<br/>
FC98&#160;<br/>
08&#160;1E&#160;28&#160;1C&#160;0A&#160;3C&#160;08&#160;00&#160;<br/>
$&#160;<br/>
pattern&#160;for&#160;each&#160;<br/>
FCA0&#160;<br/>
30&#160;32&#160;04&#160;08&#160;10&#160;26&#160;06&#160;00&#160;<br/>
%&#160;<br/>
character.&#160;The&#160;first&#160;<br/>
FCA8&#160;<br/>
10&#160;28&#160;28&#160;10&#160;2A&#160;24&#160;1A&#160;00&#160;<br/>
&amp;&#160;<br/>
byte&#160;is&#160;the&#160;bit&#160;<br/>
FCB0&#160;<br/>
08&#160;08&#160;08&#160;00&#160;00&#160;00&#160;00&#160;00&#160;<br/>
'&#160;<br/>
pattern&#160;for&#160;the&#160;top&#160;<br/>
FCB8&#160;<br/>
08&#160;10&#160;20&#160;20&#160;20&#160;10&#160;08&#160;00&#160;<br/>
(&#160;<br/>
row&#160;and&#160;the&#160;last&#160;is&#160;<br/>
FCC0&#160;<br/>
08&#160;04&#160;02&#160;02&#160;02&#160;04&#160;08&#160;00&#160;<br/>
)&#160;<br/>
that&#160;for&#160;the&#160;bottom&#160;<br/>
FCC8&#160;<br/>
08&#160;2A&#160;1C&#160;08&#160;1C&#160;2A&#160;08&#160;00&#160;<br/>
*&#160;<br/>
row.&#160;The&#160;list&#160;works&#160;<br/>
FCD0&#160;<br/>
00&#160;08&#160;08&#160;3E&#160;08&#160;08&#160;00&#160;00&#160;<br/>
+&#160;<br/>
its&#160;way&#160;up&#160;the&#160;Ascii&#160;<br/>
FCD8&#160;<br/>
00&#160;00&#160;00&#160;00&#160;00&#160;08&#160;08&#160;10&#160;<br/>
,&#160;<br/>
set&#160;from&#160;SPACE&#160;to&#160;DEL.&#160;<br/>
FCE0&#160;<br/>
00&#160;00&#160;00&#160;3E&#160;00&#160;00&#160;00&#160;00&#160;<br/>
-&#160;<br/>
FCE8&#160;<br/>
00&#160;00&#160;00&#160;00&#160;00&#160;04&#160;00&#160;00&#160;<br/>
.&#160;<br/>
On&#160;power&#160;up,&#160;this&#160;data&#160;<br/>
FCF0&#160;<br/>
00&#160;02&#160;04&#160;08&#160;10&#160;20&#160;00&#160;00&#160;<br/>
/&#160;<br/>
is&#160;copied&#160;to&#160;below&#160;the&#160;<br/>
FCF8&#160;<br/>
1C&#160;22&#160;26&#160;2A&#160;32&#160;22&#160;1C&#160;00&#160;<br/>
0&#160;<br/>
screen&#160;memory.&#160;<br/>
FD00&#160;<br/>
08&#160;18&#160;08&#160;08&#160;08&#160;08&#160;1C&#160;00&#160;<br/>
1&#160;<br/>
FD08&#160;<br/>
1C&#160;22&#160;02&#160;04&#160;08&#160;10&#160;3E&#160;00&#160;<br/>
2&#160;<br/>
FD10&#160;<br/>
3E&#160;02&#160;04&#160;0C&#160;02&#160;22&#160;1C&#160;00&#160;<br/>
3&#160;<br/>
FD18&#160;<br/>
04&#160;0C&#160;14&#160;24&#160;3E&#160;04&#160;04&#160;00&#160;<br/>
4&#160;<br/>
FD20&#160;<br/>
3E&#160;20&#160;3C&#160;02&#160;02&#160;22&#160;1C&#160;00&#160;<br/>
5&#160;<br/>
FD28&#160;<br/>
0C&#160;10&#160;20&#160;3C&#160;22&#160;22&#160;1C&#160;00&#160;<br/>
6&#160;<br/>
FD30&#160;<br/>
3E&#160;02&#160;04&#160;08&#160;10&#160;10&#160;10&#160;00&#160;<br/>
7&#160;<br/>
FD38&#160;<br/>
1C&#160;22&#160;22&#160;1C&#160;22&#160;22&#160;1C&#160;00&#160;<br/>
8&#160;<br/>
FD40&#160;<br/>
1C&#160;22&#160;22&#160;1E&#160;02&#160;04&#160;18&#160;00&#160;<br/>
9&#160;<br/>
FD48&#160;<br/>
00&#160;00&#160;08&#160;00&#160;00&#160;08&#160;00&#160;00&#160;<br/>
:&#160;<br/>
FD50&#160;<br/>
00&#160;00&#160;08&#160;00&#160;00&#160;08&#160;08&#160;10&#160;<br/>
;&#160;<br/>
FD58&#160;<br/>
04&#160;08&#160;10&#160;20&#160;10&#160;08&#160;04&#160;00&#160;<br/>
&lt;&#160;<br/>
FD60&#160;<br/>
00&#160;00&#160;3E&#160;00&#160;3E&#160;00&#160;00&#160;00&#160;<br/>
=&#160;<br/>
FD68&#160;<br/>
10&#160;08&#160;04&#160;02&#160;04&#160;08&#160;10&#160;00&#160;<br/>
&gt;&#160;<br/>
FD70&#160;<br/>
1C&#160;22&#160;04&#160;08&#160;08&#160;00&#160;08&#160;00&#160;<br/>
?&#160;<br/>
FD78&#160;<br/>
1C&#160;22&#160;2A&#160;2E&#160;2C&#160;20&#160;1E&#160;00&#160;<br/>
@&#160;<br/>
FD80&#160;<br/>
08&#160;14&#160;22&#160;22&#160;3E&#160;22&#160;22&#160;00&#160;<br/>
A&#160;<br/>
FD88&#160;<br/>
3C&#160;22&#160;22&#160;3C&#160;22&#160;22&#160;3C&#160;00&#160;<br/>
B&#160;<br/>
FD90&#160;<br/>
1C&#160;22&#160;20&#160;20&#160;20&#160;22&#160;1C&#160;00&#160;<br/>
C&#160;<br/>
FD98&#160;<br/>
3C&#160;22&#160;22&#160;22&#160;22&#160;22&#160;3C&#160;00&#160;<br/>
D&#160;<br/>
FDA0&#160;<br/>
3E&#160;20&#160;20&#160;3C&#160;20&#160;20&#160;3E&#160;00&#160;<br/>
E&#160;<br/>
FDA8&#160;<br/>
3E&#160;20&#160;20&#160;3C&#160;20&#160;20&#160;20&#160;00&#160;<br/>
F&#160;<br/>
FDB0&#160;<br/>
1E&#160;20&#160;20&#160;20&#160;26&#160;22&#160;1E&#160;00&#160;<br/>
G&#160;<br/>
Pag&#160;&#160;<br/>
e&#160;118&#160;<br/>
<hr/>
<a name=119></a>FDB8&#160;<br/>
22&#160;22&#160;22&#160;3E&#160;22&#160;22&#160;22&#160;00&#160;<br/>
H&#160;<br/>
FDC0&#160;<br/>
1C&#160;08&#160;08&#160;08&#160;08&#160;08&#160;1C&#160;00&#160;<br/>
I&#160;<br/>
FDC8&#160;<br/>
02&#160;02&#160;02&#160;02&#160;02&#160;22&#160;1C&#160;00&#160;<br/>
J&#160;<br/>
FDD0&#160;<br/>
22&#160;24&#160;28&#160;30&#160;28&#160;24&#160;22&#160;00&#160;<br/>
K&#160;<br/>
FDD8&#160;<br/>
20&#160;20&#160;20&#160;20&#160;20&#160;20&#160;3E&#160;00&#160;<br/>
L&#160;<br/>
FDE0&#160;<br/>
22&#160;36&#160;2A&#160;2A&#160;22&#160;22&#160;22&#160;00&#160;<br/>
M&#160;<br/>
FDE8&#160;<br/>
22&#160;22&#160;32&#160;2A&#160;26&#160;22&#160;22&#160;00&#160;<br/>
N&#160;<br/>
FDF0&#160;<br/>
1C&#160;22&#160;22&#160;22&#160;22&#160;22&#160;1C&#160;00&#160;<br/>
0&#160;<br/>
FDF8&#160;<br/>
3C&#160;22&#160;22&#160;3C&#160;20&#160;20&#160;20&#160;00&#160;<br/>
P&#160;<br/>
FE00&#160;<br/>
1C&#160;22&#160;22&#160;22&#160;2A&#160;24&#160;1A&#160;00&#160;<br/>
Q&#160;<br/>
FE08&#160;<br/>
3C&#160;22&#160;22&#160;3C&#160;28&#160;24&#160;22&#160;00&#160;<br/>
R&#160;<br/>
FE10&#160;<br/>
1C&#160;22&#160;20&#160;1C&#160;02&#160;22&#160;1C&#160;00&#160;<br/>
S&#160;<br/>
FE18&#160;<br/>
3E&#160;08&#160;08&#160;08&#160;08&#160;08&#160;08&#160;00&#160;<br/>
T&#160;<br/>
FE20&#160;<br/>
22&#160;22&#160;22&#160;22&#160;22&#160;22&#160;1C&#160;00&#160;<br/>
U&#160;<br/>
FE28&#160;<br/>
22&#160;22&#160;22&#160;22&#160;22&#160;14&#160;08&#160;00&#160;<br/>
V&#160;<br/>
FE30&#160;<br/>
22&#160;22&#160;22&#160;2A&#160;2A&#160;36&#160;22&#160;00&#160;<br/>
W&#160;<br/>
FE38&#160;<br/>
22&#160;22&#160;14&#160;08&#160;14&#160;22&#160;22&#160;00&#160;<br/>
X&#160;<br/>
FE40&#160;<br/>
22&#160;22&#160;14&#160;08&#160;08&#160;08&#160;08&#160;00&#160;<br/>
Y&#160;<br/>
FE48&#160;<br/>
3E&#160;02&#160;04&#160;08&#160;10&#160;20&#160;3E&#160;00&#160;<br/>
Z&#160;<br/>
FE50&#160;<br/>
1E&#160;10&#160;10&#160;10&#160;10&#160;10&#160;1E&#160;00&#160;<br/>
[&#160;<br/>
FE58&#160;<br/>
00&#160;20&#160;10&#160;08&#160;04&#160;02&#160;00&#160;00&#160;<br/>
\&#160;<br/>
FE60&#160;<br/>
3C&#160;04&#160;04&#160;04&#160;04&#160;04&#160;3C&#160;00&#160;<br/>
]&#160;<br/>
FE68&#160;<br/>
08&#160;14&#160;2A&#160;08&#160;08&#160;08&#160;08&#160;00&#160;<br/>
f&#160;<br/>
FE70&#160;<br/>
0E&#160;10&#160;10&#160;10&#160;3C&#160;10&#160;3E&#160;00&#160;<br/>
g&#160;<br/>
FE78&#160;<br/>
0C&#160;12&#160;2D&#160;29&#160;29&#160;2D&#160;12&#160;0C&#160;<br/>
&#160;<br/>
FE80&#160;<br/>
00&#160;00&#160;1C&#160;02&#160;1E&#160;22&#160;1E&#160;00&#160;<br/>
a&#160;<br/>
FE88&#160;<br/>
20&#160;20&#160;3C&#160;22&#160;22&#160;22&#160;3C&#160;00&#160;<br/>
b&#160;<br/>
FE90&#160;<br/>
00&#160;00&#160;1E&#160;20&#160;20&#160;20&#160;1E&#160;00&#160;<br/>
c&#160;<br/>
FE98&#160;<br/>
02&#160;02&#160;1E&#160;22&#160;22&#160;22&#160;1E&#160;00&#160;<br/>
d&#160;<br/>
FEA0&#160;<br/>
00&#160;00&#160;1C&#160;22&#160;3E&#160;20&#160;1E&#160;00&#160;<br/>
e&#160;<br/>
FEA8&#160;<br/>
0C&#160;12&#160;10&#160;3C&#160;10&#160;10&#160;10&#160;00&#160;<br/>
f&#160;<br/>
FEB0&#160;<br/>
00&#160;00&#160;1C&#160;22&#160;22&#160;1E&#160;02&#160;1C&#160;<br/>
g&#160;<br/>
FEB8&#160;<br/>
20&#160;20&#160;3C&#160;22&#160;22&#160;22&#160;22&#160;00&#160;<br/>
h&#160;<br/>
FEC0&#160;<br/>
08&#160;00&#160;18&#160;08&#160;08&#160;08&#160;1C&#160;00&#160;<br/>
i&#160;<br/>
FEC8&#160;<br/>
04&#160;00&#160;0C&#160;04&#160;04&#160;04&#160;24&#160;18&#160;<br/>
j&#160;<br/>
FED0&#160;<br/>
20&#160;20&#160;22&#160;24&#160;38&#160;24&#160;22&#160;00&#160;<br/>
k&#160;<br/>
FED8&#160;<br/>
18&#160;08&#160;08&#160;08&#160;08&#160;08&#160;1C&#160;00&#160;<br/>
1&#160;<br/>
FEE0&#160;<br/>
00&#160;00&#160;36&#160;2A&#160;2A&#160;2A&#160;22&#160;00&#160;<br/>
m&#160;<br/>
FEE8&#160;<br/>
00&#160;00&#160;3C&#160;22&#160;22&#160;22&#160;22&#160;00&#160;<br/>
n&#160;<br/>
FEF0&#160;<br/>
00&#160;00&#160;1C&#160;22&#160;22&#160;22&#160;1C&#160;00&#160;<br/>
o&#160;<br/>
FEF8&#160;<br/>
00&#160;00&#160;3C&#160;22&#160;22&#160;3C&#160;20&#160;20&#160;<br/>
p&#160;<br/>
FF00&#160;<br/>
00&#160;00&#160;1E&#160;22&#160;22&#160;1E&#160;02&#160;02&#160;<br/>
q&#160;<br/>
FF08&#160;<br/>
00&#160;00&#160;2E&#160;30&#160;20&#160;20&#160;20&#160;00&#160;<br/>
r&#160;<br/>
FF10&#160;<br/>
00&#160;00&#160;1E&#160;20&#160;1C&#160;02&#160;3C&#160;00&#160;<br/>
s&#160;<br/>
FF18&#160;<br/>
10&#160;10&#160;3C&#160;10&#160;10&#160;12&#160;0C&#160;00&#160;<br/>
t&#160;<br/>
FF20&#160;<br/>
00&#160;00&#160;22&#160;22&#160;22&#160;26&#160;1A&#160;00&#160;<br/>
u&#160;<br/>
FF28&#160;<br/>
00&#160;00&#160;22&#160;22&#160;22&#160;14&#160;08&#160;00&#160;<br/>
v&#160;<br/>
FF30&#160;<br/>
00&#160;00&#160;22&#160;22&#160;2A&#160;2A&#160;36&#160;00&#160;<br/>
w&#160;<br/>
FF38&#160;<br/>
00&#160;00&#160;22&#160;14&#160;08&#160;14&#160;22&#160;00&#160;<br/>
x&#160;<br/>
FF40&#160;<br/>
00&#160;00&#160;22&#160;22&#160;22&#160;1E&#160;02&#160;1C&#160;<br/>
y&#160;<br/>
FF48&#160;<br/>
00&#160;00&#160;3E&#160;04&#160;08&#160;10&#160;3E&#160;00&#160;<br/>
z&#160;<br/>
FF50&#160;<br/>
0E&#160;18&#160;18&#160;30&#160;18&#160;18&#160;0E&#160;00&#160;<br/>
{&#160;<br/>
FF58&#160;<br/>
08&#160;08&#160;08&#160;08&#160;08&#160;08&#160;08&#160;08&#160;<br/>
|&#160;<br/>
FF60&#160;<br/>
38&#160;0C&#160;0C&#160;06&#160;0C&#160;0C&#160;38&#160;00&#160;<br/>
}&#160;<br/>
FF68&#160;<br/>
2A&#160;15&#160;2A&#160;15&#160;2A&#160;15&#160;2A&#160;15&#160;<br/>
Chequered&#160;grid.&#160;<br/>
FF70&#160;<br/>
3F&#160;3F&#160;3F&#160;3F&#160;3F&#160;3F&#160;3F&#160;3F&#160;<br/>
DEL&#160;<br/>
&#160;<br/>FF78&#160;<br/>
37&#160;EA&#160;ED&#160;EB&#160;20&#160;F5&#160;F9&#160;38&#160;<br/>
Look&#160;up&#160;table&#160;for&#160;the&#160;<br/>
FF80&#160;<br/>
EE&#160;F4&#160;36&#160;39&#160;2C&#160;E9&#160;E8&#160;EC&#160;<br/>
conversion&#160;of&#160;the&#160;key-code&#160;to&#160;<br/>
FF88&#160;<br/>
35&#160;F2&#160;E2&#160;3B&#160;2E&#160;EF&#160;E7&#160;30&#160;<br/>
corresponding&#160;Ascii&#160;character.&#160;<br/>
FF90&#160;<br/>
F6&#160;E6&#160;34&#160;2D&#160;0B&#160;F0&#160;E5&#160;2F&#160;<br/>
The&#160;first&#160;half&#160;of&#160;the&#160;table&#160;<br/>
FF98&#160;<br/>
00&#160;00&#160;00&#160;00&#160;00&#160;00&#160;00&#160;00&#160;<br/>
corresponds&#160;to&#160;the&#160;Ascii&#160;<br/>
FFA0&#160;<br/>
31&#160;1B&#160;FA&#160;00&#160;08&#160;7F&#160;E1&#160;0D&#160;<br/>
values&#160;with&#160;the&#160;shift&#160;key&#160;off.&#160;<br/>
FFA8&#160;<br/>
F8&#160;F1&#160;32&#160;5C&#160;0A&#160;5D&#160;F3&#160;00&#160;<br/>
The&#160;second&#160;half&#160;of&#160;the&#160;table&#160;<br/>
Pag&#160;&#160;<br/>
e&#160;119&#160;<br/>
<hr/>
<a name=120></a>FFB0&#160;<br/>
33&#160;E4&#160;E3&#160;27&#160;09&#160;5B&#160;F7&#160;3D&#160;<br/>
corresponds&#160;to&#160;the&#160;Ascii&#160;<br/>
FFB8&#160;<br/>
26&#160;4A&#160;4D&#160;4B&#160;20&#160;55&#160;59&#160;2A&#160;<br/>
values&#160;with&#160;the&#160;shift&#160;key&#160;<br/>
FFC0&#160;<br/>
4E&#160;54&#160;5E&#160;28&#160;3C&#160;49&#160;48&#160;4C&#160;<br/>
pressed.&#160;<br/>
FFC8&#160;<br/>
25&#160;52&#160;42&#160;3A&#160;3E&#160;4F&#160;47&#160;29&#160;<br/>
FFD0&#160;<br/>
56&#160;46&#160;24&#160;5F&#160;0B&#160;50&#160;45&#160;3F&#160;<br/>
FFD8&#160;<br/>
00&#160;00&#160;00&#160;00&#160;00&#160;00&#160;00&#160;00&#160;<br/>
FFE0&#160;<br/>
21&#160;1B&#160;5A&#160;00&#160;08&#160;7F&#160;41&#160;0D&#160;<br/>
FFE8&#160;<br/>
58&#160;51&#160;40&#160;7C&#160;0A&#160;7D&#160;53&#160;00&#160;<br/>
FFF0&#160;<br/>
23&#160;44&#160;43&#160;22&#160;09&#160;7B&#160;57&#160;2B&#160;<br/>
FFF8&#160;<br/>
D0&#160;01&#160;<br/>
&#160;<br/>FFFA&#160;<br/>
47&#160;02&#160;<br/>
N.M.I.&#160;<br/>
Vector,&#160;$0247&#160;<br/>
FFFC&#160;<br/>
8F&#160;F8&#160;<br/>
RESET&#160;<br/>
Vector,&#160;$F88F&#160;<br/>
FFFE&#160;<br/>
44&#160;02&#160;<br/>
I.R.Q.&#160;<br/>
Vector,&#160;$0244&#160;<br/>
Pag&#160;&#160;<br/>
e&#160;120&#160;<br/>
<hr/>
<a name=121></a><b>Appendix&#160;A&#160;<br/></b>&#160;<br/><b>Token&#160;Table&#160;<br/></b>&#160;<br/><b>Token&#160;Keyword&#160;&#160;Start&#160;Address&#160;</b><br/>
<b>Token&#160;</b><br/>
<b>Keyword&#160;Start&#160;Address&#160;</b><br/>
<b>V1.0&#160;</b><br/>
<b>V1.1&#160;</b><br/>
<b>V1.0&#160;</b><br/>
<b>V1.1&#160;</b><br/>
#80&#160;<br/>
END&#160;<br/>
#C941&#160;<br/>
#C973&#160;<br/>
#81&#160;<br/>
EDIT&#160;<br/>
#C6A5&#160;<br/>
#C692&#160;<br/>
#82&#160;<br/>
*1&#160;<br/>
#CFE4&#160;<br/>
#E987&#160;<br/>
#83&#160;<br/>
*2&#160;<br/>
#CFE4&#160;<br/>
#E9D1&#160;<br/>
#84&#160;<br/>
TRON&#160;<br/>
#CC8C&#160;<br/>
#CD16&#160;<br/>
#85&#160;<br/>
TROFF&#160;<br/>
#CC8F&#160;<br/>
#CD19&#160;<br/>
#86&#160;<br/>
POP&#160;<br/>
#C9E0&#160;<br/>
#CA12&#160;<br/>
#87&#160;<br/>
PLOT&#160;<br/>
#D9C6&#160;<br/>
#DA51&#160;<br/>
#88&#160;<br/>
PULL&#160;<br/>
#DA16&#160;<br/>
#DAA1&#160;<br/>
#89&#160;<br/>
LORES&#160;<br/>
#D937&#160;<br/>
#D9DE&#160;<br/>
#8A&#160;<br/>
DOKE&#160;<br/>
#D8AC&#160;<br/>
#D967&#160;<br/>
#8B&#160;<br/>
REPEAT&#160;&#160;#D9FA&#160;<br/>
#DA85&#160;<br/>
#8C&#160;<br/>
UNTIL&#160;<br/>
#DA16&#160;<br/>
#DAA1&#160;<br/>
#8D&#160;<br/>
FOR&#160;<br/>
#C841&#160;<br/>
#C855&#160;<br/>
#8E&#160;<br/>
LLIST&#160;<br/>
#C824&#160;<br/>
#C7FD&#160;<br/>
#8F&#160;<br/>
LPRINT&#160;&#160;#C832&#160;<br/>
#C809&#160;<br/>
#90&#160;<br/>
NEXT&#160;<br/>
#CE0C&#160;<br/>
#CE98&#160;<br/>
#91&#160;<br/>
DATA&#160;<br/>
#CA0A&#160;<br/>
#CA3C&#160;<br/>
#92&#160;<br/>
INPUT&#160;<br/>
#CCC9&#160;<br/>
#CD55&#160;<br/>
#93&#160;<br/>
DIM&#160;<br/>
#D0F2&#160;<br/>
#D17E&#160;<br/>
#94&#160;<br/>
CLS&#160;<br/>
#CC0A&#160;<br/>
#CCCE&#160;<br/>
#95&#160;<br/>
READ&#160;<br/>
#CCFD&#160;<br/>
#CD89&#160;<br/>
#96&#160;<br/>
LET&#160;<br/>
#CAD2&#160;<br/>
#CB1C&#160;<br/>
#97&#160;<br/>
GOTO&#160;<br/>
#C9B3&#160;<br/>
#C9E5&#160;<br/>
#98&#160;<br/>
RUN&#160;<br/>
#C98B&#160;<br/>
#C9BD&#160;<br/>
#99&#160;<br/>
IF&#160;<br/>
#CA3E&#160;<br/>
#CA70&#160;<br/>
#9A&#160;<br/>
RESTORE&#160;&#160;#C91F&#160;<br/>
#C952&#160;<br/>
#9B&#160;<br/>
60SUB&#160;<br/>
#C996&#160;<br/>
#C9C8&#160;<br/>
#9C&#160;<br/>
RETURN&#160;<br/>
#C9E0&#160;<br/>
#CA12&#160;<br/>
#9D&#160;<br/>
REM&#160;<br/>
#CA61&#160;<br/>
#CA99&#160;<br/>
#9E&#160;<br/>
HIMEM&#160;<br/>
#E95B&#160;<br/>
#EBCE&#160;<br/>
#9F&#160;<br/>
GRAB&#160;<br/>
#E974&#160;<br/>
#EBE7&#160;<br/>
#A0&#160;<br/>
RELEASE&#160;&#160;#E994&#160;<br/>
#EC0C&#160;<br/>
#A1&#160;<br/>
TEXT&#160;<br/>
#E9A9&#160;<br/>
#EC21&#160;<br/>
#A2&#160;<br/>
HIRES&#160;<br/>
#E9BB&#160;<br/>
#EC33&#160;<br/>
#A3&#160;<br/>
SHOOT&#160;<br/>
#F415&#160;<br/>
#FAB5&#160;<br/>
#A4&#160;<br/>
EXPLODE&#160;&#160;#F418&#160;<br/>
#FACB&#160;<br/>
#A5&#160;<br/>
ZAP&#160;<br/>
#F41B&#160;<br/>
#FAE1&#160;<br/>
#A6&#160;<br/>
PING&#160;<br/>
#F41B&#160;<br/>
#FA9F&#160;<br/>
#A7&#160;<br/>
SOUND&#160;<br/>
#E889&#160;<br/>
#EAFC&#160;<br/>
#A8&#160;<br/>
MUSIC&#160;<br/>
#E889&#160;<br/>
#EAFC&#160;<br/>
#A9&#160;<br/>
PLAY&#160;<br/>
#E889&#160;<br/>
#EAFC&#160;<br/>
#AA&#160;<br/>
CURSET&#160;<br/>
#E87D&#160;<br/>
#EAF0&#160;<br/>
#AB&#160;<br/>
CURMOV&#160;&#160;#E87D&#160;<br/>
#EAF0&#160;<br/>
#AC&#160;<br/>
DRAW&#160;<br/>
#E87D&#160;<br/>
#EAF0&#160;<br/>
#AD&#160;<br/>
CIRCLE&#160;&#160;#E87D&#160;<br/>
#EAF0&#160;<br/>
#AE&#160;<br/>
PATTERN&#160;&#160;#E87D&#160;<br/>
#EAF0&#160;<br/>
#AF&#160;<br/>
FILL&#160;<br/>
#E87D&#160;<br/>
#EAF0&#160;<br/>
#B0&#160;<br/>
CHAR&#160;<br/>
#E87D&#160;<br/>
#EAF0&#160;<br/>
#B1&#160;<br/>
PAPER&#160;<br/>
#E889&#160;<br/>
#EAFC&#160;<br/>
#B2&#160;<br/>
INK&#160;<br/>
#E889&#160;<br/>
#EAFC&#160;<br/>
#B3&#160;<br/>
STOP&#160;<br/>
#C93F&#160;<br/>
#C971&#160;<br/>
#B4&#160;<br/>
ON&#160;<br/>
#CA78&#160;<br/>
#CAC2&#160;<br/>
#B5&#160;<br/>
WAIT&#160;<br/>
#D89D&#160;<br/>
#D958&#160;<br/>
#B6&#160;<br/>
CLOAD&#160;<br/>
#E7AA&#160;<br/>
#E85B&#160;<br/>
#B7&#160;<br/>
CSAVE&#160;<br/>
#E7DB&#160;<br/>
#E909&#160;<br/>
#B8&#160;<br/>
DEF&#160;<br/>
#D401&#160;<br/>
#D4BA&#160;<br/>
#B9&#160;<br/>
POKE&#160;<br/>
#D894&#160;<br/>
#D94F&#160;<br/>
#BA&#160;<br/>
PRINT&#160;<br/>
#CB61&#160;<br/>
#CBAB&#160;<br/>
#BB&#160;<br/>
CONT&#160;<br/>
#C96E&#160;<br/>
#C9A0&#160;<br/>
#BC&#160;<br/>
LIST&#160;<br/>
#C773&#160;<br/>
#C748&#160;<br/>
#BD&#160;<br/>
CLEAR&#160;<br/>
#C738&#160;<br/>
#C70D&#160;<br/>
#BE&#160;<br/>
GET&#160;<br/>
#CCBA&#160;<br/>
#CD46&#160;<br/>
#BF&#160;<br/>
CALL&#160;<br/>
#E80D&#160;<br/>
#E946&#160;<br/>
#C0&#160;<br/>
!&#160;<br/>
#CC89&#160;<br/>
#CD13&#160;<br/>
#C1&#160;<br/>
NEW&#160;<br/>
#C719&#160;<br/>
#C6EE&#160;<br/>
#C2&#160;<br/>
TAB(&#160;<br/>
-&#160;<br/>
-&#160;<br/>
#C3&#160;<br/>
TO&#160;<br/>
-&#160;<br/>
-&#160;<br/>
#C4&#160;<br/>
FN&#160;<br/>
-&#160;<br/>
-&#160;<br/>
#C5&#160;<br/>
SPC&#160;<br/>
-&#160;<br/>
-&#160;<br/>
#C6&#160;<br/>
@&#160;<br/>
-&#160;<br/>
-&#160;<br/>
#C7&#160;<br/>
AUTO&#160;<br/>
-&#160;<br/>
-&#160;<br/>
#C8&#160;<br/>
ELSE&#160;<br/>
-&#160;<br/>
-&#160;<br/>
#C9&#160;<br/>
THEN&#160;<br/>
-&#160;<br/>
-&#160;<br/>
#CA&#160;<br/>
NOT&#160;<br/>
-&#160;<br/>
-&#160;<br/>
#CB&#160;<br/>
STEP&#160;<br/>
-&#160;<br/>
-&#160;<br/>
#CC&#160;<br/>
+&#160;<br/>
-&#160;<br/>
-&#160;<br/>
#CD&#160;<br/>
-&#160;<br/>
-&#160;<br/>
-&#160;<br/>
#CE&#160;<br/>
*&#160;<br/>
-&#160;<br/>
-&#160;<br/>
#CF&#160;<br/>
/&#160;<br/>
-&#160;<br/>
-&#160;<br/>
#D0&#160;<br/>
^&#160;<br/>
-&#160;<br/>
-&#160;<br/>
#D1&#160;<br/>
AND&#160;<br/>
-&#160;<br/>
-&#160;<br/>
#D2&#160;<br/>
OR&#160;<br/>
-&#160;<br/>
-&#160;<br/>
#D3&#160;<br/>
&gt;&#160;<br/>
-&#160;<br/>
-&#160;<br/>
#D4&#160;<br/>
=&#160;<br/>
-&#160;<br/>
-&#160;<br/>
#D5&#160;<br/>
&lt;&#160;<br/>
-&#160;<br/>
-&#160;<br/>
#D6&#160;<br/>
SGN&#160;<br/>
#DF12&#160;<br/>
#DF21&#160;<br/>
#D7&#160;<br/>
INT&#160;<br/>
#DFA5&#160;<br/>
#DFBD&#160;<br/>
#D8&#160;<br/>
ABS&#160;<br/>
#DF31&#160;<br/>
#DF49&#160;<br/>
#D9&#160;<br/>
USR&#160;<br/>
#0021&#160;<br/>
#0021&#160;<br/>
#DA&#160;<br/>
FRE&#160;<br/>
#D3D6&#160;<br/>
#D47E&#160;<br/>
#DB&#160;<br/>
POS&#160;<br/>
#D3FA&#160;<br/>
#D4A6&#160;<br/>
#DC&#160;<br/>
HEX$&#160;<br/>
#D917&#160;<br/>
#D9B5&#160;<br/>
#DD&#160;<br/>
&amp;&#160;<br/>
#02FB&#160;<br/>
#02FB&#160;<br/>
#DE&#160;<br/>
SQR&#160;<br/>
#E22A&#160;<br/>
#E22E&#160;<br/>
#DF&#160;<br/>
RND&#160;<br/>
#E34B&#160;<br/>
#E34F&#160;<br/>
#E0&#160;<br/>
LN&#160;<br/>
#DC79&#160;<br/>
#DCAF&#160;<br/>
#E1&#160;<br/>
EXP&#160;<br/>
#E2A6&#160;<br/>
#E2AA&#160;<br/>
#E2&#160;<br/>
COS&#160;<br/>
#E387&#160;<br/>
#E38B&#160;<br/>
#E3&#160;<br/>
SIN&#160;<br/>
#E38E&#160;<br/>
#E392&#160;<br/>
#E4&#160;<br/>
TAN&#160;<br/>
#E3D7&#160;<br/>
#E3DB&#160;<br/>
#E5&#160;<br/>
ATN&#160;<br/>
#E43B&#160;<br/>
#E43F&#160;<br/>
#E6&#160;<br/>
PEEK&#160;<br/>
#D87D&#160;<br/>
#D938&#160;<br/>
#E7&#160;<br/>
DEEK&#160;<br/>
#D8C8&#160;<br/>
#D983&#160;<br/>
#E8&#160;<br/>
LOG&#160;<br/>
#DDD0&#160;<br/>
#DDD4&#160;<br/>
#E9&#160;<br/>
LEN&#160;<br/>
#D7EB&#160;<br/>
#D8A6&#160;<br/>
#EA&#160;<br/>
STR$&#160;<br/>
#D4D8&#160;<br/>
#D593&#160;<br/>
#EB&#160;<br/>
VAL&#160;<br/>
#D81C&#160;<br/>
#D8D7&#160;<br/>
#EC&#160;<br/>
ASC&#160;<br/>
#D7FA&#160;<br/>
#D8B5&#160;<br/>
#ED&#160;<br/>
CHR$&#160;<br/>
#D75B&#160;<br/>
#D816&#160;<br/>
#EE&#160;<br/>
PI&#160;<br/>
#D8EE&#160;<br/>
#DE77&#160;<br/>
#EF&#160;<br/>
TRUE&#160;<br/>
#DF00&#160;<br/>
#DF0F&#160;<br/>
#F0&#160;<br/>
FALSE&#160;<br/>
#DEFC&#160;<br/>
#DF0B&#160;<br/>
#F1&#160;<br/>
KEY$&#160;<br/>
#DA4F&#160;<br/>
#DADA&#160;<br/>
Pag&#160;&#160;<br/>
e&#160;121&#160;<br/>
<hr/>
<a name=122></a>#F2&#160;<br/>
SCRN&#160;<br/>
#D9B4&#160;<br/>
#DA3F&#160;<br/>
#F3&#160;<br/>
POINT&#160;<br/>
#E9CD&#160;<br/>
#EC45&#160;<br/>
#F4&#160;<br/>
LEFT$&#160;<br/>
#D76F&#160;<br/>
#D82A&#160;<br/>
#F5&#160;<br/>
RIGHT$&#160;&#160;#D79B&#160;<br/>
#D856&#160;<br/>
#F6&#160;<br/>
MID$&#160;<br/>
#D7A6&#160;<br/>
#D861&#160;<br/>
&#160;-&#160;<br/>
Pag&#160;&#160;<br/>
e&#160;122&#160;<br/>
<hr/>
<a name=123></a><b>Appendix&#160;C&#160;<br/></b>&#160;<br/>&#160;<br/><b>Page&#160;0&#160;Allocation&#160;<br/></b>This&#160;page&#160;of&#160;memory&#160;(<i>between&#160;#0000&#160;and&#160;#00FF</i>)&#160;is&#160;used&#160;to&#160;store&#160;most&#160;of&#160;the&#160;variables&#160;used&#160;by&#160;<br/>BASIC&#160;and&#160;a&#160;few&#160;of&#160;those&#160;used&#160;by&#160;the&#160;operating&#160;system.&#160;Many&#160;of&#160;the&#160;locations&#160;are&#160;used&#160;for&#160;more&#160;<br/>than&#160;one&#160;purpose,&#160;those&#160;without&#160;comments&#160;are&#160;not&#160;used.&#160;The&#160;use&#160;of&#160;each&#160;memory&#160;location&#160;is&#160;the&#160;<br/>same&#160;for&#160;the&#160;<b>Oric-1</b>&#160;and&#160;<b>Atmos</b>&#160;unless&#160;otherwise&#160;indicated.&#160;This&#160;is&#160;done&#160;by&#160;indicating&#160;the&#160;ROM&#160;<br/>version&#160;of&#160;the&#160;computer&#160;to&#160;which&#160;the&#160;description&#160;is&#160;applicable.&#160;The&#160;version&#160;number&#160;is&#160;written&#160;at&#160;the&#160;<br/>top&#160;of&#160;the&#160;screen&#160;on&#160;power&#160;up.&#160;<br/>&#160;<br/>&#160;<br/><b>Address&#160;</b><br/>
<b>Function&#160;</b><br/>
$00-$0B&#160;<br/>$0C,$0D&#160;<br/>
Indirect&#160;pointer&#160;for&#160;screen&#160;and&#160;Hex&#160;number&#160;construction&#160;area.&#160;<br/>
$0E,$0F&#160;<br/>
Indirect&#160;pointer&#160;for&#160;the&#160;screen.&#160;<br/>
$10,$11&#160;<br/>
Address&#160;of&#160;hires&#160;cursor.&#160;<br/>
$12,$13&#160;<br/>
Address&#160;of&#160;text&#160;cursor.&#160;<br/>
$14$16&#160;<br/>
Expression&#160;workspace.&#160;<br/>
$17&#160;<br/>
Set&#160;to&#160;1&#160;if&#160;CTRL&#160;C&#160;pressed,&#160;otherwise&#160;0.&#160;<br/>
$18,$19&#160;<br/>
Tokenising&#160;pointer.&#160;<br/>
$1A$1C&#160;<br/>
Jump&#160;location&#160;to&#160;print&#160;'Ready'.&#160;<br/>
$1D,$1E&#160;<br/>
Counter&#160;for&#160;searching&#160;through&#160;lines&#160;of&#160;program.&#160;<br/>
$1F,$20&#160;<br/>
Calculation&#160;of&#160;cursor&#160;address.&#160;<br/>
$21$23&#160;<br/>
Jump&#160;location&#160;for&#160;USR&#160;command.&#160;<br/>
$24$26&#160;<br/>
Expression&#160;workspace.&#160;<br/>
$27&#160;<br/>
Temporary&#160;storage&#160;&#160;often&#160;for&#160;characters&#160;being&#160;printed.&#160;<br/>
$28&#160;<br/>
Set&#160;to&#160;#FF&#160;if&#160;dealing&#160;with&#160;strings.&#160;<br/>
$29&#160;<br/>
Bit&#160;7&#160;is&#160;set&#160;if&#160;using&#160;integer&#160;variable.&#160;<br/>
$2A&#160;<br/>
Garbage&#160;collection&#160;flag&#160;or&#160;flag&#160;for&#160;skipping&#160;through&#160;DATA&#160;<br/>statements.&#160;<br/>
$2B&#160;<br/>
Bit&#160;7&#160;when&#160;set&#160;inhibits&#160;the&#160;use&#160;of&#160;integers.&#160;Bit&#160;6&#160;when&#160;set&#160;<br/>indicates&#160;STORE&#160;or&#160;RECALL&#160;commands&#160;in&#160;use.&#160;<br/>
$2C&#160;<br/>
Zero&#160;if&#160;REDOing&#160;input&#160;FROM&#160;START.&#160;<br/>
$2D&#160;<br/>
Temporary&#160;storage&#160;for&#160;expression&#160;evaluator.&#160;<br/>
$2E&#160;<br/>
CTRL&#160;O&#160;flag.&#160;0&#160;if&#160;output&#160;to&#160;screen&#160;enabled.&#160;<br/>
$2F&#160;<br/>
Next&#160;byte&#160;to/from&#160;cassette.&#160;<br/>
$30&#160;<br/>
Cursor&#160;position&#160;for&#160;Basic&#160;printout.&#160;<br/>
$31&#160;<br/>
Screen&#160;line&#160;width.&#160;<br/>
$32&#160;<br/>
8&#160;-&#160;multiple&#160;line&#160;width.&#160;<br/>
$33,$34&#160;<br/>
Integer&#160;values&#160;to/from&#160;main&#160;floating&#160;point&#160;accumulator.&#160;<br/>
$35-$84&#160;<br/>
Input&#160;buffer.&#160;(<i>79&#160;bytes</i>)&#160;<br/>
$35-$48&#160;<br/>
Name&#160;of&#160;program&#160;required&#160;for&#160;CLOAD&#160;(V1.0&#160;only).&#160;<br/>
$49-$5D&#160;<br/>
Name&#160;of&#160;program&#160;just&#160;loaded&#160;(V1.0&#160;only).&#160;<br/>
$5F,$60&#160;<br/>
Start&#160;address&#160;of&#160;data&#160;to/from&#160;tape&#160;(V1.0&#160;only).&#160;<br/>
$61,$62&#160;<br/>
End&#160;address&#160;of&#160;data&#160;to/from&#160;tape&#160;(V1.0&#160;only).&#160;<br/>
$63&#160;<br/>
1&#160;when&#160;using&#160;AUTO&#160;else&#160;0&#160;(V1.0&#160;only).&#160;<br/>
$64&#160;<br/>
0&#160;for&#160;Basic,&#160;1&#160;for&#160;machine&#160;code&#160;(Vl.0&#160;only).&#160;<br/>
$67&#160;<br/>
Tape&#160;speed&#160;-&#160;0&#160;fast,&#160;1&#160;slow&#160;(Vl.0&#160;only).&#160;<br/>
$85&#160;<br/>
String&#160;block&#160;stack&#160;pointer.&#160;<br/>
$86,$87&#160;<br/>
Address&#160;of&#160;top&#160;active&#160;string&#160;in&#160;memory.&#160;<br/>
$88-$90&#160;<br/>
Temporary&#160;string&#160;stack.&#160;<br/>
$91,$92&#160;<br/>
String&#160;address&#160;pointer.&#160;<br/>
$93,$94&#160;<br/>
General&#160;memory&#160;pointer.&#160;<br/>
$95$99&#160;<br/>
Work&#160;area&#160;for&#160;multiply&#160;and&#160;divide&#160;routines.&#160;<br/>
$9A,$9B&#160;<br/>
Start&#160;of&#160;Basic&#160;pointer.&#160;<br/>
$9C,$9D&#160;<br/>
End&#160;of&#160;Basic&#160;pointer.&#160;<br/>
$9E,$9F&#160;<br/>
End&#160;of&#160;variables&#160;pointer.&#160;<br/>
$A0,$A1&#160;<br/>
End&#160;of&#160;Arrays&#160;pointer.&#160;<br/>
$A2,$A3&#160;<br/>
Bottom&#160;of&#160;string&#160;area&#160;pointer.&#160;<br/>
$A4,$A5&#160;<br/>
Work&#160;pointer&#160;for&#160;allocating&#160;strings.&#160;<br/>
Pag&#160;&#160;<br/>
e&#160;123&#160;<br/>
<hr/>
<a name=124></a>$A6,$A7&#160;<br/>
Himem.&#160;<br/>
$A8,$A9&#160;<br/>
Current&#160;line&#160;number,&#160;top&#160;byte&#160;is&#160;#FF&#160;if&#160;in&#160;command&#160;mode.&#160;<br/>
$AA,$AB&#160;<br/>
Previous&#160;line&#160;number.&#160;<br/>
$AC,$AD&#160;<br/>
Last&#160;line&#160;start&#160;address.&#160;<br/>
$AE,$AF&#160;<br/>
Temporary&#160;copy&#160;of&#160;line&#160;number.&#160;<br/>
$B0,$B1&#160;<br/>
Data&#160;pointer.&#160;<br/>
$B2,$B3&#160;<br/>
Data&#160;pointer.&#160;<br/>
$B4,$B5&#160;<br/>
Last&#160;variable&#160;name&#160;accessed.&#160;<br/>
$B6,$B7&#160;<br/>
Address&#160;of&#160;last&#160;variable&#160;value&#160;accessed.&#160;<br/>
$B8,$B9&#160;<br/>
Destination&#160;pointer&#160;for&#160;temporary&#160;assignment&#160;of&#160;variable.&#160;<br/>
$BA&#160;<br/>
Temporary&#160;storage&#160;for&#160;expression&#160;evaluator.&#160;<br/>
$BB,$BC&#160;<br/>$BD$C1&#160;<br/>
Temporary&#160;storage&#160;of&#160;floating&#160;point&#160;accumulator.&#160;<br/>
$BD,$BE&#160;<br/>
FN&#160;(function)&#160;pointer.&#160;<br/>
$BF,$C0&#160;<br/>
String&#160;pointer.&#160;<br/>
$C2&#160;<br/>
String&#160;pointer&#160;size,&#160;used&#160;in&#160;Garbage&#160;Collection.&#160;<br/>
$C3$C5&#160;<br/>
Jump&#160;location&#160;to&#160;evaluate&#160;numeric&#160;functions.&#160;$C5&#160;also&#160;used&#160;as&#160;a&#160;<br/>temporary&#160;store&#160;of&#160;the&#160;rounding&#160;byte&#160;for&#160;mathematical&#160;operations.&#160;<br/>
$C6$CA&#160;<br/>
Temporary&#160;storage&#160;of&#160;floating&#160;point&#160;accumulator.&#160;<br/>
$C7,$C8&#160;<br/>
Pointer.&#160;<br/>
$C9,$CA&#160;<br/>
Pointer.&#160;<br/>
$CB$CF&#160;<br/>
Temporary&#160;storage&#160;of&#160;floating&#160;point&#160;accumulator.&#160;<br/>
$CE,$CF&#160;<br/>
Pointer&#160;for&#160;STORE.&#160;<br/>
$D0&#160;<br/>
Exponent&#160;of&#160;main&#160;floating&#160;point&#160;accumulator.&#160;<br/>
$D1$D4&#160;<br/>
Mantissa&#160;of&#160;main&#160;floating&#160;point&#160;accumulator.&#160;<br/>
$D5&#160;<br/>
Sign&#160;of&#160;mantissa&#160;for&#160;main&#160;FPA&#160;when&#160;unpacked.&#160;<br/>
$D6&#160;<br/>
Series&#160;evaluation&#160;counter.&#160;<br/>
$D7&#160;<br/>
Sign&#160;extend&#160;byte.&#160;<br/>
$D8&#160;<br/>
Exponent&#160;of&#160;work&#160;floating&#160;point&#160;accumulator.&#160;<br/>
$D9$DC&#160;<br/>
Mantissa&#160;of&#160;work&#160;floating&#160;point&#160;accumulator.&#160;<br/>
$DD&#160;<br/>
Sign&#160;of&#160;mantissa&#160;for&#160;work&#160;FPA&#160;when&#160;unpacked.&#160;<br/>
$DE,$DF&#160;<br/>
String&#160;pointer.&#160;<br/>
$DE&#160;<br/>
Holds&#160;Exclusive&#160;OR&#160;of&#160;sign&#160;byte&#160;of&#160;both&#160;FPAs.&#160;<br/>
$DF&#160;<br/>
Rounding&#160;byte&#160;for&#160;calculations.&#160;<br/>
$E0,$E1&#160;<br/>
Array&#160;and&#160;string&#160;workspace.&#160;<br/>
$E2$F2&#160;<br/>
Routine&#160;to&#160;step&#160;through&#160;program&#160;to&#160;find&#160;next&#160;non&#160;space&#160;char.&#160;<i>See&#160;<br/>$EC9C&#160;of&#160;disassembly</i>.&#160;<br/>
$E9,$EA&#160;<br/>
Position&#160;pointer&#160;in&#160;program.&#160;<br/>
$F3-$F9&#160;<br/>$FA$FE&#160;<br/>
Copy&#160;of&#160;floating&#160;point&#160;number&#160;used&#160;by&#160;RND.&#160;<br/>
$FF&#160;<br/>
Used&#160;in&#160;number&#160;to&#160;string&#160;conversion.&#160;<br/>
Pag&#160;&#160;<br/>
e&#160;124&#160;<br/>
<hr/>
<a name=125></a><b>Appendix&#160;D&#160;<br/></b>&#160;<br/>&#160;<br/><b>Page&#160;2&#160;Allocation&#160;<br/></b>This&#160;page&#160;of&#160;memory&#160;(<i>between&#160;#0200&#160;and&#160;#02FF</i>)&#160;is&#160;used&#160;to&#160;store&#160;most&#160;of&#160;the&#160;variables&#160;used&#160;by&#160;the&#160;<br/>operating&#160;system&#160;and&#160;a&#160;few&#160;of&#160;those&#160;used&#160;by&#160;BASIC.&#160;Many&#160;of&#160;the&#160;locations&#160;are&#160;used&#160;for&#160;more&#160;than&#160;<br/>one&#160;purpose,&#160;those&#160;without&#160;comments&#160;are&#160;not&#160;used.&#160;The&#160;use&#160;of&#160;each&#160;memory&#160;location&#160;is&#160;the&#160;same&#160;<br/>for&#160;the&#160;<b>Oric-1</b>&#160;and&#160;<b>Atmos</b>&#160;unless&#160;otherwise&#160;indicated.&#160;This&#160;is&#160;done&#160;by&#160;indicating&#160;the&#160;ROM&#160;version&#160;<br/>of&#160;the&#160;computer&#160;to&#160;which&#160;the&#160;description&#160;is&#160;applicable.&#160;The&#160;version&#160;number&#160;is&#160;written&#160;at&#160;the&#160;top&#160;of&#160;<br/>the&#160;screen&#160;on&#160;power&#160;up.&#160;<br/>&#160;<br/>&#160;<br/><b>Address&#160;</b><br/>
<b>Function&#160;</b><br/>
$200,$201&#160;<br/>
Pointer&#160;for&#160;screen&#160;handling.&#160;<br/>
$202,$203&#160;<br/>
Pointer&#160;for&#160;screen&#160;handling.&#160;<br/>
$204-$207&#160;<br/>
Work&#160;bytes&#160;for&#160;Hires&#160;routines.&#160;<br/>
$208&#160;<br/>
Key&#160;address&#160;if&#160;pressed&#160;&#160;#38&#160;if&#160;no&#160;key&#160;pressed.&#160;<br/>
$209&#160;<br/>
Key&#160;status,&#160;<br/>
&#160;<br/>
#38&#160;-&#160;Default,&#160;<br/>
&#160;<br/>
#A2&#160;-&#160;CONTROL,&#160;<br/>
&#160;<br/>
#A4&#160;-&#160;Left&#160;SHIFT,&#160;<br/>
&#160;<br/>
#A5&#160;-&#160;FUNCTION&#160;(<i>Atmos&#160;only</i>),&#160;<br/>
&#160;<br/>
#A7&#160;-&#160;Right&#160;SHIFT.&#160;<br/>
$20A&#160;<br/>
Saved&#160;key&#160;column&#160;for&#160;repeat.&#160;<br/>
$20B&#160;<br/>
Not&#160;used&#160;but&#160;gets&#160;written&#160;over&#160;by&#160;routine&#160;that&#160;sets&#160;$208&#160;-&#160;$20A.&#160;<br/>
$20C&#160;<br/>
Bit&#160;7&#160;is&#160;set&#160;if&#160;CAPS&#160;is&#160;on&#160;otherwise&#160;clear.&#160;<br/>
$20D&#160;<br/>$20E&#160;<br/>
Repeat&#160;counter&#160;for&#160;keyboard.&#160;<br/>
$20F&#160;<br/>$210&#160;<br/>
Temporary&#160;store&#160;of&#160;row&#160;of&#160;key&#160;being&#160;tested&#160;for&#160;repeat.&#160;<br/>
$211&#160;<br/>
Temporary&#160;store&#160;of&#160;keyboard&#160;row&#160;during&#160;strobe&#160;routine.&#160;<br/>
$212&#160;<br/>
Holds&#160;FB&#160;code&#160;in&#160;hires&#160;commands.&#160;<br/>
$213&#160;<br/>
Pattern&#160;data&#160;for&#160;hires&#160;screen.&#160;<br/>
$214&#160;<br/>
Temporary&#160;copy&#160;of&#160;pattern&#160;byte&#160;for&#160;drawing&#160;lines.&#160;<br/>
$215&#160;<br/>
Holds&#160;position&#160;of&#160;pixel&#160;in&#160;byte&#160;corresponding&#160;to&#160;position&#160;of&#160;<br/>cursor&#160;on&#160;hires&#160;screen.&#160;<br/>
$216,$217&#160;<br/>
Temporary&#160;store&#160;of&#160;hires&#160;X&#160;and&#160;Y&#160;cursor&#160;positions.&#160;<br/>
$218&#160;<br/>
Temporary&#160;store&#160;for&#160;content&#160;of&#160;$215.&#160;<br/>
$219&#160;<br/>
Hires&#160;cursor&#160;&#160;X&#160;coordinate.&#160;<br/>
$21A&#160;<br/>
Hires&#160;cursor&#160;&#160;Y&#160;coordinate.&#160;<br/>
$21B-$21E&#160;<br/>$21F&#160;<br/>
0&#160;-&#160;LORES,&#160;1&#160;-&#160;HIRES.&#160;<br/>
$220&#160;<br/>
0&#160;-&#160;48K&#160;Oric,&#160;1&#160;-&#160;16K&#160;Oric.&#160;<br/>
$221-$227&#160;<br/>$228-$22A&#160;<br/>
Jump&#160;to&#160;IRQ&#160;routine&#160;(V1.0).&#160;<br/>
$22B-$22D&#160;<br/>
Jump&#160;to&#160;NMI&#160;routine&#160;(V1.0).&#160;<br/>
$22E,$22F&#160;<br/>$230&#160;<br/>
RTI&#160;instruction&#160;(V1.0).&#160;<br/>
$231-$237&#160;<br/>$238-$23A&#160;<br/>
Jump&#160;to&#160;PRINT&#160;CHARACTER&#160;on&#160;screen&#160;(V1.1).&#160;<br/>
$23B-$23D&#160;<br/>
Jump&#160;to&#160;GET&#160;KEY&#160;routine&#160;(V1.1).&#160;<br/>
$23E-$240&#160;<br/>
Jump&#160;to&#160;SEND&#160;BYTE&#160;TO&#160;PRINTER&#160;&#160;(V1.1).&#160;<br/>
$241-$243&#160;<br/>
Jump&#160;to&#160;PRINT&#160;TO&#160;STATUS&#160;LINE&#160;(V1.l).&#160;<br/>
$244-$246&#160;<br/>
Jump&#160;to&#160;IRQ&#160;routine&#160;(Vl.l).&#160;<br/>
$247-$249&#160;<br/>
Jump&#160;to&#160;NMI&#160;routine&#160;(Vl.l).&#160;<br/>
$24A$24C&#160;<br/>
RTI&#160;instruction&#160;which&#160;can&#160;be&#160;intercepted&#160;by&#160;a&#160;jump&#160;(Vl.l).&#160;<br/>
$24D&#160;<br/>
Tape&#160;speed,&#160;0&#160;-&#160;fast,&#160;1&#160;-&#160;slow&#160;(Vl.l).&#160;<br/>
$24E&#160;<br/>
Keyboard&#160;initial&#160;repeat&#160;deiay&#160;(V1.l).&#160;<br/>
$24F&#160;<br/>
Keyboard&#160;successive&#160;repeat&#160;delay&#160;(V1.1).&#160;<br/>
$250&#160;<br/>$251&#160;<br/>
Cursor&#160;enabie&#160;in&#160;CTRL&#160;routines&#160;(Vl.l).&#160;<br/>
Pag&#160;&#160;<br/>
e&#160;125&#160;<br/>
<hr/>
<a name=126></a>$252&#160;<br/>
ELSE&#160;pending&#160;flag,&#160;1&#160;-&#160;on,&#160;0-off&#160;(Vl.l).&#160;<br/>
$253-$255&#160;<br/>$256&#160;<br/>
Printer&#160;width&#160;(Vl.l).&#160;<br/>
$257&#160;<br/>
Screen&#160;width&#160;(Vl.l).&#160;<br/>
$258&#160;<br/>
Printer&#160;cursor&#160;position&#160;(V1.1).&#160;<br/>
$259&#160;<br/>
Screen&#160;cursor&#160;position&#160;(V1.1).&#160;<br/>
$25A&#160;<br/>
Cassette&#160;JOIN&#160;flag,&#160;off&#160;when&#160;0&#160;(V1.1).&#160;<br/>
$25B&#160;<br/>
Cassette&#160;VERIFY&#160;flag,&#160;off&#160;when&#160;0&#160;(Vl.l).&#160;<br/>
$25C,$25D&#160;<br/>
Cassette&#160;verify&#160;error&#160;counter&#160;(Vl.l).&#160;<br/>
$25E&#160;<br/>$25F,$260&#160;<br/>
Contains&#160;1&#160;byte&#160;messages&#160;printed&#160;to&#160;status&#160;line.&#160;<br/>
$261,$262&#160;<br/>
Indirect&#160;jump&#160;for&#160;CTRL&#160;character&#160;routine.&#160;<br/>
$263,$264&#160;<br/>
Temporary&#160;storage.&#160;<br/>
$265&#160;<br/>
Current&#160;cursor&#160;state&#160;indicator,&#160;0&#160;-&#160;off,&#160;1&#160;&#160;on.&#160;<br/>
$266,$267&#160;<br/>$268&#160;<br/>
Cursor&#160;row&#160;number,&#160;(status&#160;line&#160;is&#160;row&#160;0).&#160;<br/>
$269&#160;<br/>
Cursor&#160;column&#160;position.&#160;<br/>
$26A&#160;<br/>
Flag&#160;byte.&#160;<br/>
&#160;<br/><b>&#160;</b><br/>
<b>Bit&#160;</b><br/>
<b>Flag&#160;function&#160;when&#160;bit&#160;is&#160;set&#160;to&#160;1.&#160;</b><br/>
&#160;<br/>
0&#160;<br/>
Cursor&#160;on.&#160;<br/>
&#160;<br/>
1&#160;<br/>
Printout&#160;to&#160;screen&#160;enabled.&#160;<br/>
&#160;<br/>
2&#160;<br/>
Unused.&#160;<br/>
&#160;<br/>
3&#160;<br/>
Disable&#160;keyciick.&#160;<br/>
&#160;<br/>
4&#160;<br/>
Previous&#160;printed&#160;character&#160;was&#160;ESC&#160;<br/>
&#160;<br/>
5&#160;<br/>
Protect&#160;columns&#160;0&#160;and&#160;1&#160;of&#160;screen.&#160;<br/>
&#160;<br/>
6&#160;<br/>
Double&#160;height&#160;characters.&#160;<br/>
&#160;<br/>
7&#160;<br/>
Unused.&#160;<br/>
&#160;<br/>$26B&#160;<br/>
Paper&#160;colour&#160;(+16).&#160;<br/>
$26C&#160;<br/>
Ink&#160;colour.&#160;<br/>
$26D,$26E&#160;<br/>
Start&#160;address&#160;of&#160;screen&#160;memory.&#160;<br/>
$26F&#160;<br/>
Number&#160;of&#160;text&#160;lines&#160;available&#160;on&#160;screen&#160;(V1.0).&#160;<br/>
$270&#160;<br/>
Cursor&#160;on/off&#160;flag.&#160;<br/>
$271&#160;<br/>
Cursor&#160;invert&#160;flag.&#160;<br/>
$272,$273&#160;<br/>
Keyboard&#160;timer.&#160;<br/>
$274,$275&#160;<br/>
Cursor&#160;timer.&#160;<br/>
$276,$277&#160;<br/>
Spare&#160;counter&#160;&#160;also&#160;used&#160;by&#160;WAIT&#160;(and&#160;printer&#160;in&#160;V1.0).&#160;<br/>
$278,$279&#160;<br/>
Address&#160;of&#160;second&#160;line&#160;on&#160;screen&#160;(V1.1).&#160;<br/>
$27A,$27B&#160;<br/>
Address&#160;of&#160;first&#160;line&#160;on&#160;screen&#160;(V1.1).&#160;<br/>
$27C,$27D&#160;<br/>
Number&#160;of&#160;characters&#160;normally&#160;used&#160;in&#160;screen&#160;scrolling,&#160;<br/><i>26&#160;x&#160;40&#160;&#160;1,040&#160;or&#160;#410</i>&#160;(V1.1).&#160;<br/>
$27E&#160;<br/>
Number&#160;of&#160;rows&#160;of&#160;text&#160;available&#160;(V1.1).&#160;<br/>
$27F-$28F&#160;<br/>
Name&#160;of&#160;program&#160;to&#160;be&#160;loaded&#160;off&#160;cassette&#160;(V1.1).&#160;<br/>
$290-$292&#160;<br/>$293-$2A3&#160;<br/>
Name&#160;of&#160;file&#160;just&#160;loaded&#160;off&#160;cassette&#160;(Vl.l).&#160;<br/>
$2A4-$2A8&#160;<br/>$2A9,$2AA&#160;<br/>
Start&#160;address&#160;of&#160;data&#160;for&#160;/&#160;from&#160;cassette&#160;(Vl.l).&#160;<br/>
$2AB,$2AC&#160;<br/>
End&#160;address&#160;of&#160;data&#160;for/from&#160;cassette&#160;(Vl.l).&#160;<br/>
$2AD&#160;<br/>
Auto&#160;indicator,&#160;0&#160;is&#160;off&#160;(Vl.l).&#160;<br/>
$2AE&#160;<br/>
Program&#160;type.&#160;<br/>
$2AF&#160;<br/>
Array&#160;type-copy&#160;of&#160;$28(Vl.l).&#160;<br/>
$2B0&#160;<br/>
Array&#160;type&#160;-&#160;copy&#160;of&#160;$29&#160;(V1.&#160;1).&#160;<br/>
$2B1&#160;<br/>
Bit&#160;7&#160;set&#160;to&#160;1&#160;if&#160;format&#160;error.&#160;<br/>
$2B2-$2BF&#160;<br/>$2C0&#160;<br/>
Screen&#160;status,&#160;0=GRAB,&#160;2=TEXT&#160;and&#160;3=HIRES.&#160;<br/>
$2C1,$2C2&#160;<br/>
Char&#160;set&#160;start&#160;address&#160;in&#160;HIRES&#160;mode&#160;(V1.1).&#160;<br/>
$2C3&#160;<br/>
Cursor&#160;movement&#160;in&#160;hires,&#160;0&#160;=&#160;Absolute,&#160;1&#160;=&#160;<br/>
$2C4-$2DE&#160;<br/>$2DF&#160;<br/>
Latest&#160;key&#160;from&#160;keyboard.&#160;Bit&#160;7&#160;set&#160;if&#160;valid.&#160;<br/>
$2E0&#160;<br/>
Non&#160;zero&#160;if&#160;error&#160;in&#160;Sound&#160;/&#160;Graphics&#160;routines.&#160;<br/>
$2E1,$2E2&#160;<br/>
First&#160;parameter&#160;location&#160;for&#160;the&#160;sound&#160;and&#160;graphics&#160;commands&#160;<br/>(<i>including&#160;INK&#160;and&#160;PAPER</i>).&#160;Lower&#160;byte&#160;of&#160;integer&#160;is&#160;at&#160;$02E1.&#160;<br/>
Pag&#160;&#160;<br/>
e&#160;126&#160;<br/>
<hr/>
<a name=127></a>$2E3,$2E4&#160;<br/>
Second&#160;parameter&#160;location&#160;for&#160;the&#160;sound&#160;and&#160;graphics&#160;commands.&#160;<br/>Lower&#160;byte&#160;of&#160;integer&#160;is&#160;at&#160;$2E3.&#160;<br/>
$2E5,$2E6&#160;<br/>
Third&#160;parameter&#160;location&#160;for&#160;the&#160;sound&#160;and&#160;graphics&#160;commands.&#160;<br/>Lower&#160;byte&#160;of&#160;integer&#160;is&#160;at&#160;$2E5.&#160;<br/>
$2E7,$2E8&#160;<br/>
Fourth&#160;parameter&#160;location&#160;which&#160;is&#160;only&#160;used&#160;by&#160;MUSIC&#160;and&#160;PLAY.&#160;<br/>Lower&#160;byte&#160;of&#160;integer&#160;is&#160;at&#160;$2E7.&#160;<br/>
$2E9-$2F0&#160;<br/>$2F1&#160;<br/>
Bit&#160;7&#160;set&#160;to&#160;1&#160;if&#160;printer&#160;enabled.&#160;<br/>
$2F2&#160;<br/>
Bit&#160;7&#160;is&#160;EDIT&#160;flag,&#160;set&#160;to&#160;1&#160;when&#160;on.&#160;<br/>
$2F3&#160;<br/>$2F4&#160;<br/>
TRACE&#160;flag,&#160;set&#160;if&#160;bit&#160;7&#160;is&#160;set.&#160;<br/>
$2F5,$2F6&#160;<br/>
Indirect&#160;jump&#160;for&#160;'!'&#160;routine.&#160;<br/>
$2F7&#160;<br/>$2F8&#160;<br/>
Temporary&#160;row&#160;indicator&#160;for&#160;PLOT.&#160;<br/>
$2F9,$2FA&#160;<br/>$2FB-$2FD&#160;<br/>
Jump&#160;to&#160;'&amp;'&#160;routine.&#160;<br/>
$2FE-$2FF&#160;<br/>&#160;<br/>
Pag&#160;&#160;<br/>
e&#160;127&#160;<br/>
<hr/>
</body>
</html>
